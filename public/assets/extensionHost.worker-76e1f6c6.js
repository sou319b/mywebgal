var Fw=(et,jt,qt)=>{if(!jt.has(et))throw TypeError("Cannot "+qt)};var I=(et,jt,qt)=>(Fw(et,jt,"read from private field"),qt?qt.call(et):jt.get(et)),le=(et,jt,qt)=>{if(jt.has(et))throw TypeError("Cannot add the same private member more than once");jt instanceof WeakSet?jt.add(et):jt.set(et,qt)},J=(et,jt,qt,So)=>(Fw(et,jt,"write to private field"),So?So.call(et,qt):jt.set(et,qt),qt);var Gu=(et,jt,qt)=>(Fw(et,jt,"access private method"),qt);(function(){var vu,Wr,mS,vS,qn,vi,yu,Xs,_S,Ja,Vt,wS,Gn,Qn,xu,Jn,Ys,Qu,bS,Cu,Si,Cp,Kn,Su,Eu,yS,Xa,Br,Zs,ku,eo,to,Du,Za,no,ro,Pu,Tu,Au,_n,so,oo,ao,co,Ru,ec,lo,Zn,Vr,Rt,zr,Ou,$u,wn,Nu,Lt,ic,nc,rc,Zi,fo,Mu,Ei,sc,jr,qr,Fu,ac,Hu,po,cc,er,lc,uc,Gr,dc,hc,Qr,Jr,Uu,fc,Kr,go,mo,pc,vo,gc,mc,vc;"use strict";class et{constructor(e){this.executor=e,this._didRun=!1}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}}let jt=class{constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?or.isErrorNoTelemetry(e)?new or(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}};const qt=new jt;function So(r){qt.setUnexpectedErrorHandler(r)}function Ni(r){Yr(r)||qt.onUnexpectedError(r)}function Xp(r){Yr(r)||qt.onUnexpectedExternalError(r)}function Ju(r){if(r instanceof Error){const{name:e,message:t}=r,i=r.stacktrace||r.stack;return{$isError:!0,name:e,message:t,stack:i,noTelemetry:or.isErrorNoTelemetry(r)}}return r}const Ku="Canceled";function Yr(r){return r instanceof sr?!0:r instanceof Error&&r.name===Ku&&r.message===Ku}class sr extends Error{constructor(){super(Ku),this.name=this.message}}function zw(){const r=new Error(Ku);return r.name=r.message,r}function xe(r){return r?new Error(`Illegal argument: ${r}`):new Error("Illegal argument")}function Yp(r){return r?new Error(`Illegal state: ${r}`):new Error("Illegal state")}class Zr extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}}class CS extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}}class Zp extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}}class or extends Error{constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof or)return e;const t=new or;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}}function SS(r,e,t=0,i=r.length){let n=t,s=i;for(;n<s;){const o=Math.floor((n+s)/2);e(r[o])?n=o+1:s=o}return n-1}const gp=class gp{constructor(e){this._array=e,this._findLastMonotonousLastIdx=0}findLastMonotonous(e){if(gp.assertInvariants){if(this._prevFindLastPredicate){for(const i of this._array)if(this._prevFindLastPredicate(i)&&!e(i))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}const t=SS(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=t+1,t===-1?void 0:this._array[t]}};gp.assertInvariants=!1;let jw=gp;function ar(r,e,t=(i,n)=>i===n){if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(let i=0,n=r.length;i<n;i++)if(!t(r[i],e[i]))return!1;return!0}function ES(r,e){const t=[];let i;for(const n of r.slice(0).sort(e))!i||e(i[0],n)!==0?(i=[n],t.push(i)):i.push(n);return t}function qw(r,e,t){const i=[];function n(a,c,l){if(c===0&&l.length===0)return;const u=i[i.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):i.push({start:a,deleteCount:c,toInsert:l})}let s=0,o=0;for(;;){if(s===r.length){n(s,0,e.slice(o));break}if(o===e.length){n(s,r.length-s,[]);break}const a=r[s],c=e[o],l=t(a,c);l===0?(s+=1,o+=1):l<0?(n(s,1,[]),s+=1):l>0&&(n(s,0,[c]),o+=1)}return i}function kS(r,e,t){const i=qw(r,e,t),n=[],s=[];for(const o of i)n.push(...r.slice(o.start,o.start+o.deleteCount)),s.push(...o.toInsert);return{removed:n,added:s}}function Yt(r){return r.filter(e=>!!e)}function DS(r){let e=0;for(let t=0;t<r.length;t++)r[t]&&(r[e]=r[t],e+=1);r.length=e}function eg(r){return!Array.isArray(r)||r.length===0}function xc(r){return Array.isArray(r)&&r.length>0}function Eo(r,e=t=>t){const t=new Set;return r.filter(i=>{const n=e(i);return t.has(n)?!1:(t.add(n),!0)})}function Xu(r){return[].concat(...r)}function Gw(r,e){let t;if(typeof e=="number"){let i=e;t=()=>{const n=Math.sin(i++)*179426549;return n-Math.floor(n)}}else t=Math.random;for(let i=r.length-1;i>0;i-=1){const n=Math.floor(t()*(i+1)),s=r[i];r[i]=r[n],r[n]=s}}function Cc(r,e){return Array.isArray(r)?r.map(e):e(r)}function ko(r){return Array.isArray(r)?r:[r]}var tg;(function(r){function e(s){return s<0}r.isLessThan=e;function t(s){return s<=0}r.isLessThanOrEqual=t;function i(s){return s>0}r.isGreaterThan=i;function n(s){return s===0}r.isNeitherLessOrGreaterThan=n,r.greaterThan=1,r.lessThan=-1,r.neitherLessOrGreaterThan=0})(tg||(tg={}));function IS(r,e){return(t,i)=>e(r(t),r(i))}const PS=(r,e)=>r-e,Wa=class Wa{constructor(e){this.iterate=e}forEach(e){this.iterate(t=>(e(t),!0))}toArray(){const e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new Wa(t=>this.iterate(i=>e(i)?t(i):!0))}map(e){return new Wa(t=>this.iterate(i=>t(e(i))))}some(e){let t=!1;return this.iterate(i=>(t=e(i),!t)),t}findFirst(e){let t;return this.iterate(i=>e(i)?(t=i,!1):!0),t}findLast(e){let t;return this.iterate(i=>(e(i)&&(t=i),!0)),t}findLastMaxBy(e){let t,i=!0;return this.iterate(n=>((i||tg.isGreaterThan(e(n,t)))&&(i=!1,t=n),!0)),t}};Wa.empty=new Wa(e=>{});let Qw=Wa;function Jw(r,e){const t=Object.create(null);for(const i of r){const n=e(i);let s=t[n];s||(s=t[n]=[]),s.push(i)}return t}function TS(r,e){const t=[],i=[];for(const n of r)e.has(n)||t.push(n);for(const n of e)r.has(n)||i.push(n);return{removed:t,added:i}}var Kw,Xw,Yw;function AS(r,e,t){let i=r.get(e);return i===void 0&&(i=t,r.set(e,i)),i}class RS{constructor(e,t){this.uri=e,this.value=t}}function LS(r){return Array.isArray(r)}const Js=class Js{constructor(e,t){if(this[Kw]="ResourceMap",e instanceof Js)this.map=new Map(e.map),this.toKey=t??Js.defaultToKey;else if(LS(e)){this.map=new Map,this.toKey=t??Js.defaultToKey;for(const[i,n]of e)this.set(i,n)}else this.map=new Map,this.toKey=e??Js.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new RS(e,t)),this}get(e){var t;return(t=this.map.get(this.toKey(e)))==null?void 0:t.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(const[i,n]of this.map)e(n.value,n.uri,this)}*values(){for(const e of this.map.values())yield e.value}*keys(){for(const e of this.map.values())yield e.uri}*entries(){for(const e of this.map.values())yield[e.uri,e.value]}*[(Kw=Symbol.toStringTag,Symbol.iterator)](){for(const[,e]of this.map)yield[e.uri,e.value]}};Js.defaultToKey=e=>e.toString();let mt=Js;class Zw{constructor(e,t){this[Xw]="ResourceSet",!e||typeof e=="function"?this._map=new mt(e):(this._map=new mt(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((i,n)=>e.call(t,n,n,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(Xw=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}class OS{constructor(){this[Yw]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){var e;return(e=this._head)==null?void 0:e.value}get last(){var e;return(e=this._tail)==null?void 0:e.value}has(e){return this._map.has(e)}get(e,t=0){const i=this._map.get(e);if(i)return t!==0&&this.touch(i,t),i.value}set(e,t,i=0){let n=this._map.get(e);if(n)n.value=t,i!==0&&this.touch(n,i);else{switch(n={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.addItemLast(n);break;case 1:this.addItemFirst(n);break;case 2:this.addItemLast(n);break;default:this.addItemLast(n);break}this._map.set(e,n),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){const i=this._state;let n=this._head;for(;n;){if(t?e.bind(t)(n.value,n.key,this):e(n.value,n.key,this),this._state!==i)throw new Error("LinkedMap got modified during iteration.");n=n.next}}keys(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.key,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return n}values(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.value,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return n}entries(){const e=this,t=this._state;let i=this._head;const n={[Symbol.iterator](){return n},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:[i.key,i.value],done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return n}[(Yw=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,i=this.size;for(;t&&i>e;)this._map.delete(t.key),t=t.next,i--;this._head=t,this._size=i,t&&(t.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;const i=e.next,n=e.previous;e===this._tail?(n.next=void 0,this._tail=n):(i.previous=n,n.next=i),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;const i=e.next,n=e.previous;e===this._head?(i.previous=void 0,this._head=i):(i.previous=n,n.next=i),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}}class ig extends OS{constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}class eb{constructor(){this.map=new Map}add(e,t){let i=this.map.get(e);i||(i=new Set,this.map.set(e,i)),i.add(t)}delete(e,t){const i=this.map.get(e);i&&(i.delete(t),i.size===0&&this.map.delete(e))}forEach(e,t){const i=this.map.get(e);i&&i.forEach(t)}get(e){const t=this.map.get(e);return t||new Set}}function ng(r,e){const t=this;let i=!1,n;return function(){if(i)return n;if(i=!0,e)try{n=r.apply(t,arguments)}finally{e()}else n=r.apply(t,arguments);return n}}var yn;(function(r){function e(S){return S&&typeof S=="object"&&typeof S[Symbol.iterator]=="function"}r.is=e;const t=Object.freeze([]);function i(){return t}r.empty=i;function*n(S){yield S}r.single=n;function s(S){return e(S)?S:n(S)}r.wrap=s;function o(S){return S||t}r.from=o;function*a(S){for(let O=S.length-1;O>=0;O--)yield S[O]}r.reverse=a;function c(S){return!S||S[Symbol.iterator]().next().done===!0}r.isEmpty=c;function l(S){return S[Symbol.iterator]().next().value}r.first=l;function u(S,O){for(const T of S)if(O(T))return!0;return!1}r.some=u;function d(S,O){for(const T of S)if(O(T))return T}r.find=d;function*h(S,O){for(const T of S)O(T)&&(yield T)}r.filter=h;function*g(S,O){let T=0;for(const z of S)yield O(z,T++)}r.map=g;function*b(...S){for(const O of S)yield*O}r.concat=b;function _(S,O,T){let z=T;for(const ae of S)z=O(z,ae);return z}r.reduce=_;function*v(S,O,T=S.length){for(O<0&&(O+=S.length),T<0?T+=S.length:T>S.length&&(T=S.length);O<T;O++)yield S[O]}r.slice=v;function E(S,O=Number.POSITIVE_INFINITY){const T=[];if(O===0)return[T,S];const z=S[Symbol.iterator]();for(let ae=0;ae<O;ae++){const ee=z.next();if(ee.done)return[T,r.empty()];T.push(ee.value)}return[T,{[Symbol.iterator](){return z}}]}r.consume=E;async function k(S){const O=[];for await(const T of S)O.push(T);return Promise.resolve(O)}r.asyncToArray=k})(yn||(yn={}));const mp=class mp{constructor(){this.livingDisposables=new Map}getDisposableData(e){let t=this.livingDisposables.get(e);return t||(t={parent:null,source:null,isSingleton:!1,value:e,idx:mp.idx++},this.livingDisposables.set(e,t)),t}trackDisposable(e){const t=this.getDisposableData(e);t.source||(t.source=new Error().stack)}setParent(e,t){const i=this.getDisposableData(e);i.parent=t}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,t){const i=t.get(e);if(i)return i;const n=e.parent?this.getRootParent(this.getDisposableData(e.parent),t):e;return t.set(e,n),n}getTrackedDisposables(){const e=new Map;return[...this.livingDisposables.entries()].filter(([,i])=>i.source!==null&&!this.getRootParent(i,e).isSingleton).flatMap(([i])=>i)}computeLeakingDisposables(e=10,t){let i;if(t)i=t;else{const c=new Map,l=[...this.livingDisposables.values()].filter(d=>d.source!==null&&!this.getRootParent(d,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(d=>d.value));if(i=l.filter(d=>!(d.parent&&u.has(d.parent))),i.length===0)throw new Error("There are cyclic diposable chains!")}if(!i)return;function n(c){function l(d,h){for(;d.length>0&&h.some(g=>typeof g=="string"?g===d[0]:d[0].match(g));)d.shift()}const u=c.source.split(`
`).map(d=>d.trim().replace("at ","")).filter(d=>d!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const s=new eb;for(const c of i){const l=n(c);for(let u=0;u<=l.length;u++)s.add(l.slice(0,u).join(`
`),c)}i.sort(IS(c=>c.idx,PS));let o="",a=0;for(const c of i.slice(0,e)){a++;const l=n(c),u=[];for(let d=0;d<l.length;d++){let h=l[d];h=`(shared with ${s.get(l.slice(0,d+1).join(`
`)).size}/${i.length} leaks) at ${h}`;const b=s.get(l.slice(0,d).join(`
`)),_=Jw([...b].map(v=>n(v)[d]),v=>v);delete _[l[d]];for(const[v,E]of Object.entries(_))u.unshift(`    - stacktraces of ${E.length} other leaks continue with ${v}`);u.unshift(h)}o+=`


==================== Leaking disposable ${a}/${i.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return i.length>e&&(o+=`


... and ${i.length-e} more leaking disposables

`),{leaks:i,details:o}}};mp.idx=0;let tb=mp;function _T(r){return r}function wT(r,e){}function es(r){if(yn.is(r)){const e=[];for(const t of r)if(t)try{t.dispose()}catch(i){e.push(i)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(r)?[]:r}else if(r)return r.dispose(),r}function ib(...r){return Ce(()=>es(r))}function Ce(r){return{dispose:ng(()=>{r()})}}const vp=class vp{constructor(){this._toDispose=new Set,this._isDisposed=!1}dispose(){this._isDisposed||(this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{es(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return this._isDisposed?vp.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&this._toDispose.delete(e)}};vp.DISABLE_DISPOSED_WARNING=!1;let Pe=vp,Ne=(vu=class{constructor(){this._store=new Pe,this._store}dispose(){this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}},vu.None=Object.freeze({dispose(){}}),vu);class Do{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(e){var t;this._isDisposed||e===this._value||((t=this._value)==null||t.dispose(),this._value=e)}clear(){this.value=void 0}dispose(){var e;this._isDisposed=!0,(e=this._value)==null||e.dispose(),this._value=void 0}clearAndLeak(){const e=this._value;return this._value=void 0,e}}class nb{constructor(){this._store=new Map,this._isDisposed=!1}dispose(){this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{es(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,t,i=!1){var n;this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||(n=this._store.get(e))==null||n.dispose(),this._store.set(e,t)}deleteAndDispose(e){var t;(t=this._store.get(e))==null||t.dispose(),this._store.delete(e)}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}}const Yu=typeof Buffer<"u",$S=new et(()=>new Uint8Array(256));let rg,sg;class ve{static alloc(e){return Yu?new ve(Buffer.allocUnsafe(e)):new ve(new Uint8Array(e))}static wrap(e){return Yu&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new ve(e)}static fromString(e,t){return!((t==null?void 0:t.dontUseNodeBuffer)||!1)&&Yu?new ve(Buffer.from(e)):(rg||(rg=new TextEncoder),new ve(rg.encode(e)))}static fromByteArray(e){const t=ve.alloc(e.length);for(let i=0,n=e.length;i<n;i++)t.buffer[i]=e[i];return t}static concat(e,t){if(typeof t>"u"){t=0;for(let s=0,o=e.length;s<o;s++)t+=e[s].byteLength}const i=ve.alloc(t);let n=0;for(let s=0,o=e.length;s<o;s++){const a=e[s];i.set(a,n),n+=a.byteLength}return i}constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){const e=ve.alloc(this.byteLength);return e.set(this),e}toString(){return Yu?this.buffer.toString():(sg||(sg=new TextDecoder),sg.decode(this.buffer))}slice(e,t){return new ve(this.buffer.subarray(e,t))}set(e,t){if(e instanceof ve)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return Zu(this.buffer,e)}writeUInt32BE(e,t){ed(this.buffer,e,t)}readUInt32LE(e){return HS(this.buffer,e)}writeUInt32LE(e,t){US(this.buffer,e,t)}readUInt8(e){return WS(this.buffer,e)}writeUInt8(e,t){BS(this.buffer,e,t)}indexOf(e,t=0){return NS(this.buffer,e instanceof ve?e.buffer:e,t)}}function NS(r,e,t=0){const i=e.byteLength,n=r.byteLength;if(i===0)return 0;if(i===1)return r.indexOf(e[0]);if(i>n-t)return-1;const s=$S.value;s.fill(e.length);for(let l=0;l<e.length;l++)s[e[l]]=e.length-l-1;let o=t+e.length-1,a=o,c=-1;for(;o<n;)if(r[o]===e[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(e.length-a,s[r[o]]),a=e.length-1;return c}function MS(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0}function FS(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255}function Zu(r,e){return r[e]*2**24+r[e+1]*2**16+r[e+2]*2**8+r[e+3]}function ed(r,e,t){r[t+3]=e,e=e>>>8,r[t+2]=e,e=e>>>8,r[t+1]=e,e=e>>>8,r[t]=e}function HS(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0|r[e+2]<<16>>>0|r[e+3]<<24>>>0}function US(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255,e=e>>>8,r[t+2]=e&255,e=e>>>8,r[t+3]=e&255}function WS(r,e){return r[e]}function BS(r,e,t){r[t]=e}function VS(r){let e=0,t=0,i=0;const n=new Uint8Array(Math.floor(r.length/4*3)),s=a=>{switch(t){case 3:n[i++]=e|a,t=0;break;case 2:n[i++]=e|a>>>2,e=a<<6,t=3;break;case 1:n[i++]=e|a>>>4,e=a<<4,t=2;break;default:e=a<<2,t=1}};for(let a=0;a<r.length;a++){const c=r.charCodeAt(a);if(c>=65&&c<=90)s(c-65);else if(c>=97&&c<=122)s(c-97+26);else if(c>=48&&c<=57)s(c-48+52);else if(c===43||c===45)s(62);else if(c===47||c===95)s(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${r[a]}`)}}const o=i;for(;t>0;)s(0);return ve.wrap(n).slice(0,o)}const zS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",jS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function rb({buffer:r},e=!0,t=!1){const i=t?jS:zS;let n="";const s=r.byteLength%3;let o=0;for(;o<r.byteLength-s;o+=3){const a=r[o+0],c=r[o+1],l=r[o+2];n+=i[a>>>2],n+=i[(a<<4|c>>>4)&63],n+=i[(c<<2|l>>>6)&63],n+=i[l&63]}if(s===1){const a=r[o+0];n+=i[a>>>2],n+=i[a<<4&63],e&&(n+="==")}else if(s===2){const a=r[o+0],c=r[o+1];n+=i[a>>>2],n+=i[(a<<4|c>>>4)&63],n+=i[c<<2&63],e&&(n+="=")}return n}let ft=(Wr=class{constructor(e){this.element=e,this.next=Wr.Undefined,this.prev=Wr.Undefined}},Wr.Undefined=new Wr(void 0),Wr);class Sc{constructor(){this._first=ft.Undefined,this._last=ft.Undefined,this._size=0}get size(){return this._size}isEmpty(){return this._first===ft.Undefined}clear(){let e=this._first;for(;e!==ft.Undefined;){const t=e.next;e.prev=ft.Undefined,e.next=ft.Undefined,e=t}this._first=ft.Undefined,this._last=ft.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){const i=new ft(e);if(this._first===ft.Undefined)this._first=i,this._last=i;else if(t){const s=this._last;this._last=i,i.prev=s,s.next=i}else{const s=this._first;this._first=i,i.next=s,s.prev=i}this._size+=1;let n=!1;return()=>{n||(n=!0,this._remove(i))}}shift(){if(this._first!==ft.Undefined){const e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==ft.Undefined){const e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==ft.Undefined&&e.next!==ft.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===ft.Undefined&&e.next===ft.Undefined?(this._first=ft.Undefined,this._last=ft.Undefined):e.next===ft.Undefined?(this._last=this._last.prev,this._last.next=ft.Undefined):e.prev===ft.Undefined&&(this._first=this._first.next,this._first.prev=ft.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==ft.Undefined;)yield e.element,e=e.next}}const qS=globalThis.performance&&typeof globalThis.performance.now=="function";class xn{static create(e){return new xn(e)}constructor(e){this._now=qS&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}}var St;(function(r){r.None=()=>Ne.None;function e(W,U){return d(W,()=>{},0,void 0,!0,void 0,U)}r.defer=e;function t(W){return(U,q=null,K)=>{let re=!1,ge;return ge=W(pe=>{if(!re)return ge?ge.dispose():re=!0,U.call(q,pe)},null,K),re&&ge.dispose(),ge}}r.once=t;function i(W,U,q){return l((K,re=null,ge)=>W(pe=>K.call(re,U(pe)),null,ge),q)}r.map=i;function n(W,U,q){return l((K,re=null,ge)=>W(pe=>{U(pe),K.call(re,pe)},null,ge),q)}r.forEach=n;function s(W,U,q){return l((K,re=null,ge)=>W(pe=>U(pe)&&K.call(re,pe),null,ge),q)}r.filter=s;function o(W){return W}r.signal=o;function a(...W){return(U,q=null,K)=>{const re=ib(...W.map(ge=>ge(pe=>U.call(q,pe))));return u(re,K)}}r.any=a;function c(W,U,q,K){let re=q;return i(W,ge=>(re=U(re,ge),re),K)}r.reduce=c;function l(W,U){let q;const K={onWillAddFirstListener(){q=W(re.fire,re)},onDidRemoveLastListener(){q==null||q.dispose()}},re=new A(K);return U==null||U.add(re),re.event}function u(W,U){return U instanceof Array?U.push(W):U&&U.add(W),W}function d(W,U,q=100,K=!1,re=!1,ge,pe){let it,at,Ue,zt=0,gt;const ci={leakWarningThreshold:ge,onWillAddFirstListener(){it=W(ki=>{zt++,at=U(at,ki),K&&!Ue&&(_t.fire(at),at=void 0),gt=()=>{const ct=at;at=void 0,Ue=void 0,(!K||zt>1)&&_t.fire(ct),zt=0},typeof q=="number"?(clearTimeout(Ue),Ue=setTimeout(gt,q)):Ue===void 0&&(Ue=0,queueMicrotask(gt))})},onWillRemoveListener(){re&&zt>0&&(gt==null||gt())},onDidRemoveLastListener(){gt=void 0,it.dispose()}},_t=new A(ci);return pe==null||pe.add(_t),_t.event}r.debounce=d;function h(W,U=0,q){return r.debounce(W,(K,re)=>K?(K.push(re),K):[re],U,void 0,!0,void 0,q)}r.accumulate=h;function g(W,U=(K,re)=>K===re,q){let K=!0,re;return s(W,ge=>{const pe=K||!U(ge,re);return K=!1,re=ge,pe},q)}r.latch=g;function b(W,U,q){return[r.filter(W,U,q),r.filter(W,K=>!U(K),q)]}r.split=b;function _(W,U=!1,q=[],K){let re=q.slice(),ge=W(at=>{re?re.push(at):it.fire(at)});K&&K.add(ge);const pe=()=>{re==null||re.forEach(at=>it.fire(at)),re=null},it=new A({onWillAddFirstListener(){ge||(ge=W(at=>it.fire(at)),K&&K.add(ge))},onDidAddFirstListener(){re&&(U?setTimeout(pe):pe())},onDidRemoveLastListener(){ge&&ge.dispose(),ge=null}});return K&&K.add(it),it.event}r.buffer=_;function v(W,U){return(K,re,ge)=>{const pe=U(new k);return W(function(it){const at=pe.evaluate(it);at!==E&&K.call(re,at)},void 0,ge)}}r.chain=v;const E=Symbol("HaltChainable");class k{constructor(){this.steps=[]}map(U){return this.steps.push(U),this}forEach(U){return this.steps.push(q=>(U(q),q)),this}filter(U){return this.steps.push(q=>U(q)?q:E),this}reduce(U,q){let K=q;return this.steps.push(re=>(K=U(K,re),K)),this}latch(U=(q,K)=>q===K){let q=!0,K;return this.steps.push(re=>{const ge=q||!U(re,K);return q=!1,K=re,ge?re:E}),this}evaluate(U){for(const q of this.steps)if(U=q(U),U===E)break;return U}}function S(W,U,q=K=>K){const K=(...it)=>pe.fire(q(...it)),re=()=>W.on(U,K),ge=()=>W.removeListener(U,K),pe=new A({onWillAddFirstListener:re,onDidRemoveLastListener:ge});return pe.event}r.fromNodeEventEmitter=S;function O(W,U,q=K=>K){const K=(...it)=>pe.fire(q(...it)),re=()=>W.addEventListener(U,K),ge=()=>W.removeEventListener(U,K),pe=new A({onWillAddFirstListener:re,onDidRemoveLastListener:ge});return pe.event}r.fromDOMEventEmitter=O;function T(W){return new Promise(U=>t(W)(U))}r.toPromise=T;function z(W){const U=new A;return W.then(q=>{U.fire(q)},()=>{U.fire(void 0)}).finally(()=>{U.dispose()}),U.event}r.fromPromise=z;function ae(W,U,q){return U(q),W(K=>U(K))}r.runAndSubscribe=ae;class ee{constructor(U,q){this._observable=U,this._counter=0,this._hasChanged=!1;const K={onWillAddFirstListener:()=>{U.addObserver(this)},onDidRemoveLastListener:()=>{U.removeObserver(this)}};this.emitter=new A(K),q&&q.add(this.emitter)}beginUpdate(U){this._counter++}handlePossibleChange(U){}handleChange(U,q){this._hasChanged=!0}endUpdate(U){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function j(W,U){return new ee(W,U).emitter.event}r.fromObservable=j;function Be(W){return(U,q,K)=>{let re=0,ge=!1;const pe={beginUpdate(){re++},endUpdate(){re--,re===0&&(W.reportChanges(),ge&&(ge=!1,U.call(q)))},handlePossibleChange(){},handleChange(){ge=!0}};W.addObserver(pe),W.reportChanges();const it={dispose(){W.removeObserver(pe)}};return K instanceof Pe?K.add(it):Array.isArray(K)&&K.push(it),it}}r.fromObservableLight=Be})(St||(St={}));const Ba=class Ba{constructor(e){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${e}_${Ba._idPool++}`,Ba.all.add(this)}start(e){this._stopWatch=new xn,this.listenerCount=e}stop(){if(this._stopWatch){const e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}};Ba.all=new Set,Ba._idPool=0;let og=Ba,GS=-1;class QS{constructor(e,t=Math.random().toString(18).slice(2,5)){this.threshold=e,this.name=t,this._warnCountdown=0}dispose(){var e;(e=this._stacks)==null||e.clear()}check(e,t){const i=this.threshold;if(i<=0||t<i)return;this._stacks||(this._stacks=new Map);const n=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,n+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=i*.5;let s,o=0;for(const[a,c]of this._stacks)(!s||o<c)&&(s=a,o=c);console.warn(`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${o}):`),console.warn(s)}return()=>{const s=this._stacks.get(e.value)||0;this._stacks.set(e.value,s-1)}}}class ag{static create(){return new ag(new Error().stack??"")}constructor(e){this.value=e}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}}let JS=0;class td{constructor(e){this.value=e,this.id=JS++}}const KS=2,XS=(r,e)=>{if(r instanceof td)e(r);else for(let t=0;t<r.length;t++){const i=r[t];i&&e(i)}};class A{constructor(e){var t,i,n,s;this._size=0,this._options=e,this._leakageMon=(t=this._options)!=null&&t.leakWarningThreshold?new QS(((i=this._options)==null?void 0:i.leakWarningThreshold)??GS):void 0,this._perfMon=(n=this._options)!=null&&n._profName?new og(this._options._profName):void 0,this._deliveryQueue=(s=this._options)==null?void 0:s.deliveryQueue}dispose(){var e,t,i,n;this._disposed||(this._disposed=!0,((e=this._deliveryQueue)==null?void 0:e.current)===this&&this._deliveryQueue.reset(),this._listeners&&(this._listeners=void 0,this._size=0),(i=(t=this._options)==null?void 0:t.onDidRemoveLastListener)==null||i.call(t),(n=this._leakageMon)==null||n.dispose())}get event(){return this._event??(this._event=(e,t,i)=>{var a,c,l,u;if(this._leakageMon&&this._size>this._leakageMon.threshold*3)return console.warn(`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far`),Ne.None;if(this._disposed)return Ne.None;t&&(e=e.bind(t));const n=new td(e);let s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(n.stack=ag.create(),s=this._leakageMon.check(n.stack,this._size+1)),this._listeners?this._listeners instanceof td?(this._deliveryQueue??(this._deliveryQueue=new YS),this._listeners=[this._listeners,n]):this._listeners.push(n):((c=(a=this._options)==null?void 0:a.onWillAddFirstListener)==null||c.call(a,this),this._listeners=n,(u=(l=this._options)==null?void 0:l.onDidAddFirstListener)==null||u.call(l,this)),this._size++;const o=Ce(()=>{s==null||s(),this._removeListener(n)});return i instanceof Pe?i.add(o):Array.isArray(i)&&i.push(o),o}),this._event}_removeListener(e){var s,o,a,c;if((o=(s=this._options)==null?void 0:s.onWillRemoveListener)==null||o.call(s,this),!this._listeners)return;if(this._size===1){this._listeners=void 0,(c=(a=this._options)==null?void 0:a.onDidRemoveLastListener)==null||c.call(a,this),this._size=0;return}const t=this._listeners,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[i]=void 0;const n=this._deliveryQueue.current===this;if(this._size*KS<=t.length){let l=0;for(let u=0;u<t.length;u++)t[u]?t[l++]=t[u]:n&&(this._deliveryQueue.end--,l<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=l}}_deliver(e,t){var n;if(!e)return;const i=((n=this._options)==null?void 0:n.onListenerError)||Ni;if(!i){e.value(t);return}try{e.value(t)}catch(s){i(s)}}_deliverQueue(e){const t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){var t,i,n,s;if((t=this._deliveryQueue)!=null&&t.current&&(this._deliverQueue(this._deliveryQueue),(i=this._perfMon)==null||i.stop()),(n=this._perfMon)==null||n.start(this._size),this._listeners)if(this._listeners instanceof td)this._deliver(this._listeners,e);else{const o=this._deliveryQueue;o.enqueue(this,e,this._listeners.length),this._deliverQueue(o)}(s=this._perfMon)==null||s.stop()}hasListeners(){return this._size>0}}class YS{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}}class Ec extends A{async fireAsync(e,t,i){if(this._listeners)for(this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new Sc),XS(this._listeners,n=>this._asyncDeliveryQueue.push([n.value,e]));this._asyncDeliveryQueue.size>0&&!t.isCancellationRequested;){const[n,s]=this._asyncDeliveryQueue.shift(),o=[],a={...s,token:t,waitUntil:c=>{if(Object.isFrozen(o))throw new Error("waitUntil can NOT be called asynchronous");i&&(c=i(c,n)),o.push(c)}};try{n(a)}catch(c){Ni(c);continue}await Promise.allSettled(o).then(c=>{for(const l of c)l.status==="rejected"&&Ni(l.reason)})}}}class ZS extends A{get isPaused(){return this._isPaused!==0}constructor(e){super(e),this._isPaused=0,this._eventQueue=new Sc,this._mergeFn=e==null?void 0:e.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){const e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}}class e4 extends ZS{constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}}var kc;(function(r){r[r.Desktop=1]="Desktop",r[r.Web=2]="Web"})(kc||(kc={}));function sb(r){const e=ve.alloc(1);switch(r){case 0:e.writeUInt8(1,0);break;case 1:e.writeUInt8(2,0);break;case 2:e.writeUInt8(3,0);break}return e}function t4(r,e){if(r.byteLength!==1)return!1;switch(r.readUInt8(0)){case 1:return e===0;case 2:return e===1;case 3:return e===2;default:return!1}}const wi=r=>{performance.mark(r)},i4=()=>{let r=performance.timeOrigin;typeof r!="number"&&(r=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const e=[{name:"code/timeOrigin",startTime:Math.round(r)}];for(const t of performance.getEntriesByType("mark"))e.push({name:t.name,startTime:Math.round(r+t.startTime)});return e};let n4=typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function cg(r,e){let t;return e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,(i,n)=>{const s=n[0],o=e[s];let a=i;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),n4&&(t="［"+t.replace(/[aouei]/g,"$&$&")+"］"),t}let r4,ob={};function f(r,e,t,...i){const n=typeof e=="object"?e.key:e,s=(ob[r]??{})[n]??t;return cg(s,i)}function lg(r,e,t,...i){const n=typeof e=="object"?e.key:e,s=(ob[r]??{})[n]??t;return{value:cg(s,i),original:cg(t,i)}}function s4(r){return r4}const ts="en";let id=!1,nd=!1,ug=!1,ab=!1,dg=!1,cb=!1,lb=!1,rd,sd=ts,ub=ts,Mi;const Cn=globalThis;let Zt;typeof Cn.vscode<"u"&&typeof Cn.vscode.process<"u"?Zt=Cn.vscode.process:typeof process<"u"&&typeof((mS=process==null?void 0:process.versions)==null?void 0:mS.node)=="string"&&(Zt=process);const o4=typeof((vS=Zt==null?void 0:Zt.versions)==null?void 0:vS.electron)=="string"&&(Zt==null?void 0:Zt.type)==="renderer";if(typeof Zt=="object"){id=Zt.platform==="win32",nd=Zt.platform==="darwin",ug=Zt.platform==="linux",lb=!!Zt.env.CI||!!Zt.env.BUILD_ARTIFACTSTAGINGDIRECTORY,rd=ts,sd=ts;const r=Zt.env.VSCODE_NLS_CONFIG;if(r)try{const e=JSON.parse(r),t=e.availableLanguages["*"];rd=e.locale,ub=e.osLocale,sd=t||ts}catch{}ab=!0}else typeof navigator=="object"&&!o4?(Mi=navigator.userAgent,id=Mi.indexOf("Windows")>=0,nd=Mi.indexOf("Macintosh")>=0,cb=(Mi.indexOf("Macintosh")>=0||Mi.indexOf("iPad")>=0||Mi.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,ug=Mi.indexOf("Linux")>=0,(Mi==null?void 0:Mi.indexOf("Mobi"))>=0,dg=!0,s4(f("vs/base/common/platform",{key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_")),rd=ts,sd=rd,ub=navigator.language):console.error("Unable to resolve platform.");var db;(function(r){r[r.Web=0]="Web",r[r.Mac=1]="Mac",r[r.Linux=2]="Linux",r[r.Windows=3]="Windows"})(db||(db={}));function a4(r){switch(r){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}const ui=id,Fi=nd,cr=ug,c4=ab,hg=dg,Dc=dg&&typeof Cn.importScripts=="function",l4=Dc?Cn.origin:void 0,is=lb,tn=Mi,lr=sd;var hb;(function(r){function e(){return lr}r.value=e;function t(){return lr.length===2?lr==="en":lr.length>=3?lr[0]==="e"&&lr[1]==="n"&&lr[2]==="-":!1}r.isDefaultVariant=t;function i(){return lr==="en"}r.isDefault=i})(hb||(hb={}));const u4=typeof Cn.postMessage=="function"&&!Cn.importScripts,fb=(()=>{if(u4){const r=[];Cn.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let i=0,n=r.length;i<n;i++){const s=r[i];if(s.id===t.data.vscodeScheduleAsyncWork){r.splice(i,1),s.callback();return}}});let e=0;return t=>{const i=++e;r.push({id:i,callback:t}),Cn.postMessage({vscodeScheduleAsyncWork:i},"*")}}return r=>setTimeout(r)})();var pb;(function(r){r[r.Windows=1]="Windows",r[r.Macintosh=2]="Macintosh",r[r.Linux=3]="Linux"})(pb||(pb={}));const d4=nd||cb?2:id?1:3;let gb=!0,mb=!1;function vb(){if(!mb){mb=!0;const r=new Uint8Array(2);r[0]=1,r[1]=2,gb=new Uint16Array(r.buffer)[0]===512+1}return gb}const _b=!!(tn&&tn.indexOf("Chrome")>=0),h4=!!(tn&&tn.indexOf("Firefox")>=0),f4=!!(!_b&&tn&&tn.indexOf("Safari")>=0),p4=!!(tn&&tn.indexOf("Edg/")>=0);tn&&tn.indexOf("Android")>=0;let ns;const fg=globalThis.vscode;if(typeof fg<"u"&&typeof fg.process<"u"){const r=fg.process;ns={get platform(){return r.platform},get arch(){return r.arch},get env(){return r.env},cwd(){return r.cwd()}}}else typeof process<"u"?ns={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:ns={get platform(){return ui?"win32":Fi?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};const Io=ns.cwd,pg=ns.env,g4=ns.platform;ns.arch;const m4=65,v4=97,_4=90,w4=122,ur=46,$t=47,di=92,dr=58,b4=63;class wb extends Error{constructor(e,t,i){let n;typeof t=="string"&&t.indexOf("not ")===0?(n="must not be",t=t.replace(/^not /,"")):n="must be";const s=e.indexOf(".")!==-1?"property":"argument";let o=`The "${e}" ${s} ${n} of type ${t}`;o+=`. Received type ${typeof i}`,super(o),this.code="ERR_INVALID_ARG_TYPE"}}function y4(r,e){if(r===null||typeof r!="object")throw new wb(e,"Object",r)}function vt(r,e){if(typeof r!="string")throw new wb(e,"string",r)}const Ii=g4==="win32";function Te(r){return r===$t||r===di}function gg(r){return r===$t}function hr(r){return r>=m4&&r<=_4||r>=v4&&r<=w4}function od(r,e,t,i){let n="",s=0,o=-1,a=0,c=0;for(let l=0;l<=r.length;++l){if(l<r.length)c=r.charCodeAt(l);else{if(i(c))break;c=$t}if(i(c)){if(!(o===l-1||a===1))if(a===2){if(n.length<2||s!==2||n.charCodeAt(n.length-1)!==ur||n.charCodeAt(n.length-2)!==ur){if(n.length>2){const u=n.lastIndexOf(t);u===-1?(n="",s=0):(n=n.slice(0,u),s=n.length-1-n.lastIndexOf(t)),o=l,a=0;continue}else if(n.length!==0){n="",s=0,o=l,a=0;continue}}e&&(n+=n.length>0?`${t}..`:"..",s=2)}else n.length>0?n+=`${t}${r.slice(o+1,l)}`:n=r.slice(o+1,l),s=l-o-1;o=l,a=0}else c===ur&&a!==-1?++a:a=-1}return n}function bb(r,e){y4(e,"pathObject");const t=e.dir||e.root,i=e.base||`${e.name||""}${e.ext||""}`;return t?t===e.root?`${t}${i}`:`${t}${r}${i}`:i}const Et={resolve(...r){let e="",t="",i=!1;for(let n=r.length-1;n>=-1;n--){let s;if(n>=0){if(s=r[n],vt(s,"path"),s.length===0)continue}else e.length===0?s=Io():(s=pg[`=${e}`]||Io(),(s===void 0||s.slice(0,2).toLowerCase()!==e.toLowerCase()&&s.charCodeAt(2)===di)&&(s=`${e}\\`));const o=s.length;let a=0,c="",l=!1;const u=s.charCodeAt(0);if(o===1)Te(u)&&(a=1,l=!0);else if(Te(u))if(l=!0,Te(s.charCodeAt(1))){let d=2,h=d;for(;d<o&&!Te(s.charCodeAt(d));)d++;if(d<o&&d!==h){const g=s.slice(h,d);for(h=d;d<o&&Te(s.charCodeAt(d));)d++;if(d<o&&d!==h){for(h=d;d<o&&!Te(s.charCodeAt(d));)d++;(d===o||d!==h)&&(c=`\\\\${g}\\${s.slice(h,d)}`,a=d)}}}else a=1;else hr(u)&&s.charCodeAt(1)===dr&&(c=s.slice(0,2),a=2,o>2&&Te(s.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(i){if(e.length>0)break}else if(t=`${s.slice(a)}\\${t}`,i=l,l&&e.length>0)break}return t=od(t,!i,"\\",Te),i?`${e}\\${t}`:`${e}${t}`||"."},normalize(r){vt(r,"path");const e=r.length;if(e===0)return".";let t=0,i,n=!1;const s=r.charCodeAt(0);if(e===1)return gg(s)?"\\":r;if(Te(s))if(n=!0,Te(r.charCodeAt(1))){let a=2,c=a;for(;a<e&&!Te(r.charCodeAt(a));)a++;if(a<e&&a!==c){const l=r.slice(c,a);for(c=a;a<e&&Te(r.charCodeAt(a));)a++;if(a<e&&a!==c){for(c=a;a<e&&!Te(r.charCodeAt(a));)a++;if(a===e)return`\\\\${l}\\${r.slice(c)}\\`;a!==c&&(i=`\\\\${l}\\${r.slice(c,a)}`,t=a)}}}else t=1;else hr(s)&&r.charCodeAt(1)===dr&&(i=r.slice(0,2),t=2,e>2&&Te(r.charCodeAt(2))&&(n=!0,t=3));let o=t<e?od(r.slice(t),!n,"\\",Te):"";return o.length===0&&!n&&(o="."),o.length>0&&Te(r.charCodeAt(e-1))&&(o+="\\"),i===void 0?n?`\\${o}`:o:n?`${i}\\${o}`:`${i}${o}`},isAbsolute(r){vt(r,"path");const e=r.length;if(e===0)return!1;const t=r.charCodeAt(0);return Te(t)||e>2&&hr(t)&&r.charCodeAt(1)===dr&&Te(r.charCodeAt(2))},join(...r){if(r.length===0)return".";let e,t;for(let s=0;s<r.length;++s){const o=r[s];vt(o,"path"),o.length>0&&(e===void 0?e=t=o:e+=`\\${o}`)}if(e===void 0)return".";let i=!0,n=0;if(typeof t=="string"&&Te(t.charCodeAt(0))){++n;const s=t.length;s>1&&Te(t.charCodeAt(1))&&(++n,s>2&&(Te(t.charCodeAt(2))?++n:i=!1))}if(i){for(;n<e.length&&Te(e.charCodeAt(n));)n++;n>=2&&(e=`\\${e.slice(n)}`)}return Et.normalize(e)},relative(r,e){if(vt(r,"from"),vt(e,"to"),r===e)return"";const t=Et.resolve(r),i=Et.resolve(e);if(t===i||(r=t.toLowerCase(),e=i.toLowerCase(),r===e))return"";let n=0;for(;n<r.length&&r.charCodeAt(n)===di;)n++;let s=r.length;for(;s-1>n&&r.charCodeAt(s-1)===di;)s--;const o=s-n;let a=0;for(;a<e.length&&e.charCodeAt(a)===di;)a++;let c=e.length;for(;c-1>a&&e.charCodeAt(c-1)===di;)c--;const l=c-a,u=o<l?o:l;let d=-1,h=0;for(;h<u;h++){const b=r.charCodeAt(n+h);if(b!==e.charCodeAt(a+h))break;b===di&&(d=h)}if(h!==u){if(d===-1)return i}else{if(l>u){if(e.charCodeAt(a+h)===di)return i.slice(a+h+1);if(h===2)return i.slice(a+h)}o>u&&(r.charCodeAt(n+h)===di?d=h:h===2&&(d=3)),d===-1&&(d=0)}let g="";for(h=n+d+1;h<=s;++h)(h===s||r.charCodeAt(h)===di)&&(g+=g.length===0?"..":"\\..");return a+=d,g.length>0?`${g}${i.slice(a,c)}`:(i.charCodeAt(a)===di&&++a,i.slice(a,c))},toNamespacedPath(r){if(typeof r!="string"||r.length===0)return r;const e=Et.resolve(r);if(e.length<=2)return r;if(e.charCodeAt(0)===di){if(e.charCodeAt(1)===di){const t=e.charCodeAt(2);if(t!==b4&&t!==ur)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(hr(e.charCodeAt(0))&&e.charCodeAt(1)===dr&&e.charCodeAt(2)===di)return`\\\\?\\${e}`;return r},dirname(r){vt(r,"path");const e=r.length;if(e===0)return".";let t=-1,i=0;const n=r.charCodeAt(0);if(e===1)return Te(n)?r:".";if(Te(n)){if(t=i=1,Te(r.charCodeAt(1))){let a=2,c=a;for(;a<e&&!Te(r.charCodeAt(a));)a++;if(a<e&&a!==c){for(c=a;a<e&&Te(r.charCodeAt(a));)a++;if(a<e&&a!==c){for(c=a;a<e&&!Te(r.charCodeAt(a));)a++;if(a===e)return r;a!==c&&(t=i=a+1)}}}}else hr(n)&&r.charCodeAt(1)===dr&&(t=e>2&&Te(r.charCodeAt(2))?3:2,i=t);let s=-1,o=!0;for(let a=e-1;a>=i;--a)if(Te(r.charCodeAt(a))){if(!o){s=a;break}}else o=!1;if(s===-1){if(t===-1)return".";s=t}return r.slice(0,s)},basename(r,e){e!==void 0&&vt(e,"ext"),vt(r,"path");let t=0,i=-1,n=!0,s;if(r.length>=2&&hr(r.charCodeAt(0))&&r.charCodeAt(1)===dr&&(t=2),e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=t;--s){const c=r.charCodeAt(s);if(Te(c)){if(!n){t=s+1;break}}else a===-1&&(n=!1,a=s+1),o>=0&&(c===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=r.length),r.slice(t,i)}for(s=r.length-1;s>=t;--s)if(Te(r.charCodeAt(s))){if(!n){t=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":r.slice(t,i)},extname(r){vt(r,"path");let e=0,t=-1,i=0,n=-1,s=!0,o=0;r.length>=2&&r.charCodeAt(1)===dr&&hr(r.charCodeAt(0))&&(e=i=2);for(let a=r.length-1;a>=e;--a){const c=r.charCodeAt(a);if(Te(c)){if(!s){i=a+1;break}continue}n===-1&&(s=!1,n=a+1),c===ur?t===-1?t=a:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||n===-1||o===0||o===1&&t===n-1&&t===i+1?"":r.slice(t,n)},format:bb.bind(null,"\\"),parse(r){vt(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.length;let i=0,n=r.charCodeAt(0);if(t===1)return Te(n)?(e.root=e.dir=r,e):(e.base=e.name=r,e);if(Te(n)){if(i=1,Te(r.charCodeAt(1))){let d=2,h=d;for(;d<t&&!Te(r.charCodeAt(d));)d++;if(d<t&&d!==h){for(h=d;d<t&&Te(r.charCodeAt(d));)d++;if(d<t&&d!==h){for(h=d;d<t&&!Te(r.charCodeAt(d));)d++;d===t?i=d:d!==h&&(i=d+1)}}}}else if(hr(n)&&r.charCodeAt(1)===dr){if(t<=2)return e.root=e.dir=r,e;if(i=2,Te(r.charCodeAt(2))){if(t===3)return e.root=e.dir=r,e;i=3}}i>0&&(e.root=r.slice(0,i));let s=-1,o=i,a=-1,c=!0,l=r.length-1,u=0;for(;l>=i;--l){if(n=r.charCodeAt(l),Te(n)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),n===ur?s===-1?s=l:u!==1&&(u=1):s!==-1&&(u=-1)}return a!==-1&&(s===-1||u===0||u===1&&s===a-1&&s===o+1?e.base=e.name=r.slice(o,a):(e.name=r.slice(o,s),e.base=r.slice(o,a),e.ext=r.slice(s,a))),o>0&&o!==i?e.dir=r.slice(0,o-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},x4=(()=>{if(Ii){const r=/\\/g;return()=>{const e=Io().replace(r,"/");return e.slice(e.indexOf("/"))}}return()=>Io()})(),Fe={resolve(...r){let e="",t=!1;for(let i=r.length-1;i>=-1&&!t;i--){const n=i>=0?r[i]:x4();vt(n,"path"),n.length!==0&&(e=`${n}/${e}`,t=n.charCodeAt(0)===$t)}return e=od(e,!t,"/",gg),t?`/${e}`:e.length>0?e:"."},normalize(r){if(vt(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===$t,t=r.charCodeAt(r.length-1)===$t;return r=od(r,!e,"/",gg),r.length===0?e?"/":t?"./":".":(t&&(r+="/"),e?`/${r}`:r)},isAbsolute(r){return vt(r,"path"),r.length>0&&r.charCodeAt(0)===$t},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){const i=r[t];vt(i,"path"),i.length>0&&(e===void 0?e=i:e+=`/${i}`)}return e===void 0?".":Fe.normalize(e)},relative(r,e){if(vt(r,"from"),vt(e,"to"),r===e||(r=Fe.resolve(r),e=Fe.resolve(e),r===e))return"";const t=1,i=r.length,n=i-t,s=1,o=e.length-s,a=n<o?n:o;let c=-1,l=0;for(;l<a;l++){const d=r.charCodeAt(t+l);if(d!==e.charCodeAt(s+l))break;d===$t&&(c=l)}if(l===a)if(o>a){if(e.charCodeAt(s+l)===$t)return e.slice(s+l+1);if(l===0)return e.slice(s+l)}else n>a&&(r.charCodeAt(t+l)===$t?c=l:l===0&&(c=0));let u="";for(l=t+c+1;l<=i;++l)(l===i||r.charCodeAt(l)===$t)&&(u+=u.length===0?"..":"/..");return`${u}${e.slice(s+c)}`},toNamespacedPath(r){return r},dirname(r){if(vt(r,"path"),r.length===0)return".";const e=r.charCodeAt(0)===$t;let t=-1,i=!0;for(let n=r.length-1;n>=1;--n)if(r.charCodeAt(n)===$t){if(!i){t=n;break}}else i=!1;return t===-1?e?"/":".":e&&t===1?"//":r.slice(0,t)},basename(r,e){e!==void 0&&vt(e,"ext"),vt(r,"path");let t=0,i=-1,n=!0,s;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let o=e.length-1,a=-1;for(s=r.length-1;s>=0;--s){const c=r.charCodeAt(s);if(c===$t){if(!n){t=s+1;break}}else a===-1&&(n=!1,a=s+1),o>=0&&(c===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return t===i?i=a:i===-1&&(i=r.length),r.slice(t,i)}for(s=r.length-1;s>=0;--s)if(r.charCodeAt(s)===$t){if(!n){t=s+1;break}}else i===-1&&(n=!1,i=s+1);return i===-1?"":r.slice(t,i)},extname(r){vt(r,"path");let e=-1,t=0,i=-1,n=!0,s=0;for(let o=r.length-1;o>=0;--o){const a=r.charCodeAt(o);if(a===$t){if(!n){t=o+1;break}continue}i===-1&&(n=!1,i=o+1),a===ur?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===t+1?"":r.slice(e,i)},format:bb.bind(null,"/"),parse(r){vt(r,"path");const e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;const t=r.charCodeAt(0)===$t;let i;t?(e.root="/",i=1):i=0;let n=-1,s=0,o=-1,a=!0,c=r.length-1,l=0;for(;c>=i;--c){const u=r.charCodeAt(c);if(u===$t){if(!a){s=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===ur?n===-1?n=c:l!==1&&(l=1):n!==-1&&(l=-1)}if(o!==-1){const u=s===0&&t?1:s;n===-1||l===0||l===1&&n===o-1&&n===s+1?e.base=e.name=r.slice(u,o):(e.name=r.slice(u,n),e.base=r.slice(u,o),e.ext=r.slice(n,o))}return s>0?e.dir=r.slice(0,s-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Fe.win32=Et.win32=Et,Fe.posix=Et.posix=Fe;const Po=Ii?Et.normalize:Fe.normalize,mg=Ii?Et.isAbsolute:Fe.isAbsolute,yb=Ii?Et.join:Fe.join,C4=Ii?Et.resolve:Fe.resolve,Ic=Ii?Et.relative:Fe.relative,rs=Ii?Et.dirname:Fe.dirname,hi=Ii?Et.basename:Fe.basename,vg=Ii?Et.extname:Fe.extname;Ii?Et.parse:Fe.parse;const Hi=Ii?Et.sep:Fe.sep;Ii?Et.delimiter:Fe.delimiter;const S4=/^\w[\w\d+.-]*$/,E4=/^\//,k4=/^\/\//;function D4(r,e){if(!r.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${r.authority}", path: "${r.path}", query: "${r.query}", fragment: "${r.fragment}"}`);if(r.scheme&&!S4.test(r.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(r.path){if(r.authority){if(!E4.test(r.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(k4.test(r.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function I4(r,e){return!r&&!e?"file":r}function P4(r,e){switch(r){case"https":case"http":case"file":e?e[0]!==Ui&&(e=Ui+e):e=Ui;break}return e}const nt="",Ui="/",T4=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class y{static isUri(e){return e instanceof y?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,t,i,n,s,o=!1){typeof e=="object"?(this.scheme=e.scheme||nt,this.authority=e.authority||nt,this.path=e.path||nt,this.query=e.query||nt,this.fragment=e.fragment||nt):(this.scheme=I4(e,o),this.authority=t||nt,this.path=P4(this.scheme,i||nt),this.query=n||nt,this.fragment=s||nt,D4(this,o))}get fsPath(){return ad(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:i,path:n,query:s,fragment:o}=e;return t===void 0?t=this.scheme:t===null&&(t=nt),i===void 0?i=this.authority:i===null&&(i=nt),n===void 0?n=this.path:n===null&&(n=nt),s===void 0?s=this.query:s===null&&(s=nt),o===void 0?o=this.fragment:o===null&&(o=nt),t===this.scheme&&i===this.authority&&n===this.path&&s===this.query&&o===this.fragment?this:new To(t,i,n,s,o)}static parse(e,t=!1){const i=T4.exec(e);return i?new To(i[2]||nt,cd(i[4]||nt),cd(i[5]||nt),cd(i[7]||nt),cd(i[9]||nt),t):new To(nt,nt,nt,nt,nt)}static file(e){let t=nt;if(ui&&(e=e.replace(/\\/g,Ui)),e[0]===Ui&&e[1]===Ui){const i=e.indexOf(Ui,2);i===-1?(t=e.substring(2),e=Ui):(t=e.substring(2,i),e=e.substring(i)||Ui)}return new To("file",t,e,nt,nt)}static from(e,t){return new To(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let i;return ui&&e.scheme==="file"?i=y.file(Et.join(ad(e,!0),...t)).path:i=Fe.join(e.path,...t),e.with({path:i})}toString(e=!1){return _g(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof y)return e;{const t=new To(e);return t._formatted=e.external??null,t._fsPath=e._sep===Cb?e.fsPath??null:null,t}}else return e}}function xb(r){return!r||typeof r!="object"?!1:typeof r.scheme=="string"&&(typeof r.authority=="string"||typeof r.authority>"u")&&(typeof r.path=="string"||typeof r.path>"u")&&(typeof r.query=="string"||typeof r.query>"u")&&(typeof r.fragment=="string"||typeof r.fragment>"u")}const Cb=ui?1:void 0;class To extends y{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=ad(this,!1)),this._fsPath}toString(e=!1){return e?_g(this,!0):(this._formatted||(this._formatted=_g(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Cb),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}}const Sb={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Eb(r,e,t){let i,n=-1;for(let s=0;s<r.length;s++){const o=r.charCodeAt(s);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||e&&o===47||t&&o===91||t&&o===93||t&&o===58)n!==-1&&(i+=encodeURIComponent(r.substring(n,s)),n=-1),i!==void 0&&(i+=r.charAt(s));else{i===void 0&&(i=r.substr(0,s));const a=Sb[o];a!==void 0?(n!==-1&&(i+=encodeURIComponent(r.substring(n,s)),n=-1),i+=a):n===-1&&(n=s)}}return n!==-1&&(i+=encodeURIComponent(r.substring(n))),i!==void 0?i:r}function A4(r){let e;for(let t=0;t<r.length;t++){const i=r.charCodeAt(t);i===35||i===63?(e===void 0&&(e=r.substr(0,t)),e+=Sb[i]):e!==void 0&&(e+=r[t])}return e!==void 0?e:r}function ad(r,e){let t;return r.authority&&r.path.length>1&&r.scheme==="file"?t=`//${r.authority}${r.path}`:r.path.charCodeAt(0)===47&&(r.path.charCodeAt(1)>=65&&r.path.charCodeAt(1)<=90||r.path.charCodeAt(1)>=97&&r.path.charCodeAt(1)<=122)&&r.path.charCodeAt(2)===58?e?t=r.path.substr(1):t=r.path[1].toLowerCase()+r.path.substr(2):t=r.path,ui&&(t=t.replace(/\//g,"\\")),t}function _g(r,e){const t=e?A4:Eb;let i="",{scheme:n,authority:s,path:o,query:a,fragment:c}=r;if(n&&(i+=n,i+=":"),(s||n==="file")&&(i+=Ui,i+=Ui),s){let l=s.indexOf("@");if(l!==-1){const u=s.substr(0,l);s=s.substr(l+1),l=u.lastIndexOf(":"),l===-1?i+=t(u,!1,!1):(i+=t(u.substr(0,l),!1,!1),i+=":",i+=t(u.substr(l+1),!1,!0)),i+="@"}s=s.toLowerCase(),l=s.lastIndexOf(":"),l===-1?i+=t(s,!1,!0):(i+=t(s.substr(0,l),!1,!0),i+=s.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}i+=t(o,!0,!1)}return a&&(i+="?",i+=t(a,!1,!1)),c&&(i+="#",i+=e?c:Eb(c,!1,!1)),i}function kb(r){try{return decodeURIComponent(r)}catch{return r.length>3?r.substr(0,3)+kb(r.substr(3)):r}}const Db=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function cd(r){return r.match(Db)?r.replace(Db,e=>kb(e)):r}const _p=class _p{constructor(e){this._proxyIdentifierBrand=void 0,this.sid=e,this.nid=++_p.count}};_p.count=0;let ld=_p;const Ib=[];function N(r){const e=new ld(r);return Ib[e.nid]=e,e}function ud(r){return Ib[r].sid}class nn{constructor(e){this.value=e}}var Pb;(function(r){r[r.Default=0]="Default",r[r.InCenter=1]="InCenter",r[r.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",r[r.AtTop=3]="AtTop"})(Pb||(Pb={}));var Tb;(function(r){r[r.Default=0]="Default",r[r.InCenter=1]="InCenter",r[r.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",r[r.AtTop=3]="AtTop"})(Tb||(Tb={}));var wg;(function(r){r[r.None=0]="None",r[r.Process=1]="Process",r[r.Output=2]="Output"})(wg||(wg={}));const G={MainThreadAuthentication:N("MainThreadAuthentication"),MainThreadBulkEdits:N("MainThreadBulkEdits"),MainThreadLanguageModels:N("MainThreadLanguageModels"),MainThreadChatAgents2:N("MainThreadChatAgents2"),MainThreadChatVariables:N("MainThreadChatVariables"),MainThreadClipboard:N("MainThreadClipboard"),MainThreadCommands:N("MainThreadCommands"),MainThreadComments:N("MainThreadComments"),MainThreadConfiguration:N("MainThreadConfiguration"),MainThreadConsole:N("MainThreadConsole"),MainThreadDebugService:N("MainThreadDebugService"),MainThreadDecorations:N("MainThreadDecorations"),MainThreadDiagnostics:N("MainThreadDiagnostics"),MainThreadDialogs:N("MainThreadDiaglogs"),MainThreadDocuments:N("MainThreadDocuments"),MainThreadDocumentContentProviders:N("MainThreadDocumentContentProviders"),MainThreadTextEditors:N("MainThreadTextEditors"),MainThreadEditorInsets:N("MainThreadEditorInsets"),MainThreadEditorTabs:N("MainThreadEditorTabs"),MainThreadErrors:N("MainThreadErrors"),MainThreadTreeViews:N("MainThreadTreeViews"),MainThreadDownloadService:N("MainThreadDownloadService"),MainThreadLanguageFeatures:N("MainThreadLanguageFeatures"),MainThreadLanguages:N("MainThreadLanguages"),MainThreadLogger:N("MainThreadLogger"),MainThreadMessageService:N("MainThreadMessageService"),MainThreadOutputService:N("MainThreadOutputService"),MainThreadProgress:N("MainThreadProgress"),MainThreadQuickDiff:N("MainThreadQuickDiff"),MainThreadQuickOpen:N("MainThreadQuickOpen"),MainThreadStatusBar:N("MainThreadStatusBar"),MainThreadSecretState:N("MainThreadSecretState"),MainThreadStorage:N("MainThreadStorage"),MainThreadSpeech:N("MainThreadSpeechProvider"),MainThreadTelemetry:N("MainThreadTelemetry"),MainThreadTerminalService:N("MainThreadTerminalService"),MainThreadTerminalShellIntegration:N("MainThreadTerminalShellIntegration"),MainThreadWebviews:N("MainThreadWebviews"),MainThreadWebviewPanels:N("MainThreadWebviewPanels"),MainThreadWebviewViews:N("MainThreadWebviewViews"),MainThreadCustomEditors:N("MainThreadCustomEditors"),MainThreadUrls:N("MainThreadUrls"),MainThreadUriOpeners:N("MainThreadUriOpeners"),MainThreadProfileContentHandlers:N("MainThreadProfileContentHandlers"),MainThreadWorkspace:N("MainThreadWorkspace"),MainThreadFileSystem:N("MainThreadFileSystem"),MainThreadFileSystemEventService:N("MainThreadFileSystemEventService"),MainThreadExtensionService:N("MainThreadExtensionService"),MainThreadSCM:N("MainThreadSCM"),MainThreadSearch:N("MainThreadSearch"),MainThreadShare:N("MainThreadShare"),MainThreadTask:N("MainThreadTask"),MainThreadWindow:N("MainThreadWindow"),MainThreadLabelService:N("MainThreadLabelService"),MainThreadNotebook:N("MainThreadNotebook"),MainThreadNotebookDocuments:N("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:N("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:N("MainThreadNotebookKernels"),MainThreadNotebookRenderers:N("MainThreadNotebookRenderers"),MainThreadInteractive:N("MainThreadInteractive"),MainThreadChat:N("MainThreadChat"),MainThreadInlineChat:N("MainThreadInlineChatShape"),MainThreadTheming:N("MainThreadTheming"),MainThreadTunnelService:N("MainThreadTunnelService"),MainThreadManagedSockets:N("MainThreadManagedSockets"),MainThreadTimeline:N("MainThreadTimeline"),MainThreadTesting:N("MainThreadTesting"),MainThreadLocalization:N("MainThreadLocalizationShape"),MainThreadAiRelatedInformation:N("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:N("MainThreadAiEmbeddingVector"),MainThreadIssueReporter:N("MainThreadIssueReporter")},ne={ExtHostCommands:N("ExtHostCommands"),ExtHostConfiguration:N("ExtHostConfiguration"),ExtHostDiagnostics:N("ExtHostDiagnostics"),ExtHostDebugService:N("ExtHostDebugService"),ExtHostDecorations:N("ExtHostDecorations"),ExtHostDocumentsAndEditors:N("ExtHostDocumentsAndEditors"),ExtHostDocuments:N("ExtHostDocuments"),ExtHostDocumentContentProviders:N("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:N("ExtHostDocumentSaveParticipant"),ExtHostEditors:N("ExtHostEditors"),ExtHostTreeViews:N("ExtHostTreeViews"),ExtHostFileSystem:N("ExtHostFileSystem"),ExtHostFileSystemInfo:N("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:N("ExtHostFileSystemEventService"),ExtHostLanguages:N("ExtHostLanguages"),ExtHostLanguageFeatures:N("ExtHostLanguageFeatures"),ExtHostQuickOpen:N("ExtHostQuickOpen"),ExtHostQuickDiff:N("ExtHostQuickDiff"),ExtHostStatusBar:N("ExtHostStatusBar"),ExtHostShare:N("ExtHostShare"),ExtHostExtensionService:N("ExtHostExtensionService"),ExtHostLogLevelServiceShape:N("ExtHostLogLevelServiceShape"),ExtHostTerminalService:N("ExtHostTerminalService"),ExtHostTerminalShellIntegration:N("ExtHostTerminalShellIntegration"),ExtHostSCM:N("ExtHostSCM"),ExtHostSearch:N("ExtHostSearch"),ExtHostTask:N("ExtHostTask"),ExtHostWorkspace:N("ExtHostWorkspace"),ExtHostWindow:N("ExtHostWindow"),ExtHostWebviews:N("ExtHostWebviews"),ExtHostWebviewPanels:N("ExtHostWebviewPanels"),ExtHostCustomEditors:N("ExtHostCustomEditors"),ExtHostWebviewViews:N("ExtHostWebviewViews"),ExtHostEditorInsets:N("ExtHostEditorInsets"),ExtHostEditorTabs:N("ExtHostEditorTabs"),ExtHostProgress:N("ExtHostProgress"),ExtHostComments:N("ExtHostComments"),ExtHostSecretState:N("ExtHostSecretState"),ExtHostStorage:N("ExtHostStorage"),ExtHostUrls:N("ExtHostUrls"),ExtHostUriOpeners:N("ExtHostUriOpeners"),ExtHostProfileContentHandlers:N("ExtHostProfileContentHandlers"),ExtHostOutputService:N("ExtHostOutputService"),ExtHostLabelService:N("ExtHostLabelService"),ExtHostNotebook:N("ExtHostNotebook"),ExtHostNotebookDocuments:N("ExtHostNotebookDocuments"),ExtHostNotebookEditors:N("ExtHostNotebookEditors"),ExtHostNotebookKernels:N("ExtHostNotebookKernels"),ExtHostNotebookRenderers:N("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:N("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:N("ExtHostInteractive"),ExtHostInlineChat:N("ExtHostInlineChatShape"),ExtHostChat:N("ExtHostChat"),ExtHostChatAgents2:N("ExtHostChatAgents"),ExtHostChatVariables:N("ExtHostChatVariables"),ExtHostChatProvider:N("ExtHostChatProvider"),ExtHostSpeech:N("ExtHostSpeech"),ExtHostAiRelatedInformation:N("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:N("ExtHostAiEmbeddingVector"),ExtHostTheming:N("ExtHostTheming"),ExtHostTunnelService:N("ExtHostTunnelService"),ExtHostManagedSockets:N("ExtHostManagedSockets"),ExtHostAuthentication:N("ExtHostAuthentication"),ExtHostTimeline:N("ExtHostTimeline"),ExtHostTesting:N("ExtHostTesting"),ExtHostTelemetry:N("ExtHostTelemetry"),ExtHostLocalization:N("ExtHostLocalization"),ExtHostIssueReporter:N("ExtHostIssueReporter")},Ab=Object.freeze(function(r,e){const t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}});var wt;(function(r){function e(t){return t===r.None||t===r.Cancelled||t instanceof dd?!0:!t||typeof t!="object"?!1:typeof t.isCancellationRequested=="boolean"&&typeof t.onCancellationRequested=="function"}r.isCancellationToken=e,r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:St.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:Ab})})(wt||(wt={}));class dd{constructor(){this._isCancelled=!1,this._emitter=null}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?Ab:(this._emitter||(this._emitter=new A),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}}class kt{constructor(e){this._token=void 0,this._parentListener=void 0,this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new dd),this._token}cancel(){this._token?this._token instanceof dd&&this._token.cancel():this._token=wt.Cancelled}dispose(e=!1){var t;e&&this.cancel(),(t=this._parentListener)==null||t.dispose(),this._token?this._token instanceof dd&&this._token.dispose():this._token=wt.None}}class R4{constructor(e,t=JSON.stringify){this.fn=e,this._computeKey=t,this.lastCache=void 0,this.lastArgKey=void 0}get(e){const t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this.fn(e)),this.lastCache}}function hd(r){return!r||typeof r!="string"?!0:r.trim().length===0}const L4=/{([^}]+)}/g;function Rb(r,e){return Object.keys(e).length===0?r:r.replace(L4,(t,i)=>e[i]??t)}function Ao(r){return r.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function O4(r,e){let t=0;const i=e.charCodeAt(0);for(let n=r.length-1;n>=0;n--)r.charCodeAt(n)===i&&t++;return t}function $4(r,e){if(!r||!e)return r;const t=e.length;if(t===0||r.length===0)return r;let i=0;for(;r.indexOf(e,i)===i;)i=i+t;return r.substring(i)}function Lb(r,e){if(!r||!e)return r;const t=e.length,i=r.length;if(t===0||i===0)return r;let n=i,s=-1;for(;s=r.lastIndexOf(e,n-1),!(s===-1||s+t!==n);){if(s===0)return"";n=s}return r.substring(0,n)}function N4(r,e,t={}){if(!r)throw new Error("Cannot create regex from empty string");e||(r=Ao(r)),t.wholeWord&&(/\B/.test(r.charAt(0))||(r="\\b"+r),/\B/.test(r.charAt(r.length-1))||(r=r+"\\b"));let i="";return t.global&&(i+="g"),t.matchCase||(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),new RegExp(r,i)}function Ob(r){return r.source==="^"||r.source==="^$"||r.source==="$"||r.source==="^\\s*$"?!1:!!(r.exec("")&&r.lastIndex===0)}function $b(r){return r.split(/\r\n|\r|\n/)}function bg(r){for(let e=0,t=r.length;e<t;e++){const i=r.charCodeAt(e);if(i!==32&&i!==9)return e}return-1}function M4(r,e=r.length-1){for(let t=e;t>=0;t--){const i=r.charCodeAt(t);if(i!==32&&i!==9)return t}return-1}function F4(r,e,t){const i=[];let n=0;for(const s of r.matchAll(e)){if(i.push(r.slice(n,s.index)),s.index===void 0)throw new Error("match.index should be defined");n=s.index+s[0].length,i.push(t(s[0],...s.slice(1),s.index,r,s.groups))}return i.push(r.slice(n)),Promise.all(i).then(s=>s.join(""))}function ss(r,e){return r<e?-1:r>e?1:0}function yg(r,e,t=0,i=r.length,n=0,s=e.length){for(;t<i&&n<s;t++,n++){const c=r.charCodeAt(t),l=e.charCodeAt(n);if(c<l)return-1;if(c>l)return 1}const o=i-t,a=s-n;return o<a?-1:o>a?1:0}function Nb(r,e){return Pc(r,e,0,r.length,0,e.length)}function Pc(r,e,t=0,i=r.length,n=0,s=e.length){for(;t<i&&n<s;t++,n++){let c=r.charCodeAt(t),l=e.charCodeAt(n);if(c===l)continue;if(c>=128||l>=128)return yg(r.toLowerCase(),e.toLowerCase(),t,i,n,s);Mb(c)&&(c-=32),Mb(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=i-t,a=s-n;return o<a?-1:o>a?1:0}function Mb(r){return r>=97&&r<=122}function os(r,e){return r.length===e.length&&Pc(r,e)===0}function xg(r,e){const t=e.length;return e.length>r.length?!1:Pc(r,e,0,t)===0}function H4(r,e){const t=Math.min(r.length,e.length);let i;for(i=0;i<t;i++)if(r.charCodeAt(i)!==e.charCodeAt(i))return i;return t}function fd(r){return 55296<=r&&r<=56319}function pd(r){return 56320<=r&&r<=57343}function Cg(r,e){return(r-55296<<10)+(e-56320)+65536}function Fb(r,e,t){const i=r.charCodeAt(t);if(fd(i)&&t+1<e){const n=r.charCodeAt(t+1);if(pd(n))return Cg(i,n)}return i}function U4(r,e){const t=r.charCodeAt(e-1);if(pd(t)&&e>1){const i=r.charCodeAt(e-2);if(fd(i))return Cg(i,t)}return t}class W4{get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){const e=U4(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){const e=Fb(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}}class B4{get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new W4(e,t)}nextGraphemeLength(){const e=gd.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());if(Vb(n,o)){t.setOffset(s);break}n=o}return t.offset-i}prevGraphemeLength(){const e=gd.getInstance(),t=this._iterator,i=t.offset;let n=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());if(Vb(o,n)){t.setOffset(s);break}n=o}return i-t.offset}eol(){return this._iterator.eol()}}function Hb(r,e){return new B4(r,e).nextGraphemeLength()}let Sg;function V4(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function Ub(r){return Sg||(Sg=V4()),Sg.test(r)}const z4=/^[\t\n\r\x20-\x7E]*$/;function j4(r){return z4.test(r)}const q4=/[\u2028\u2029]/;function Wb(r){return q4.test(r)}const G4=String.fromCharCode(65279);function Q4(r){return!!(r&&r.length>0&&r.charCodeAt(0)===65279)}function Bb(r,e=!1){return r?(e&&(r=r.replace(/\\./g,"")),r.toLowerCase()!==r):!1}function J4(r,e=1){if(e===0)return"";let t=-1;do t=r.indexOf(`
`,t+1),e--;while(e>0&&t>=0);return t===-1?r:(r[t-1]==="\r"&&t--,r.substr(0,t))}function Vb(r,e){return r===0?e!==5&&e!==7:r===2&&e===3?!1:r===4||r===2||r===3||e===4||e===2||e===3?!0:!(r===8&&(e===8||e===9||e===11||e===12)||(r===11||r===9)&&(e===9||e===10)||(r===12||r===10)&&e===10||e===5||e===13||e===7||r===1||r===13&&e===14||r===6&&e===6)}const Ks=class Ks{static getInstance(){return Ks._INSTANCE||(Ks._INSTANCE=new Ks),Ks._INSTANCE}constructor(){this._data=K4()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;const t=this._data,i=t.length/3;let n=1;for(;n<=i;)if(e<t[3*n])n=2*n;else if(e>t[3*n+1])n=2*n+1;else return t[3*n+2];return 0}};Ks._INSTANCE=null;let gd=Ks;function K4(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}const mn=class mn{static getInstance(e){return mn.cache.get(Array.from(e))}static getLocales(){return mn._locales.value}constructor(e){this.confusableDictionary=e}isAmbiguous(e){return this.confusableDictionary.has(e)}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};mn.ambiguousCharacterData=new et(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}')),mn.cache=new R4(e=>{function t(u){const d=new Map;for(let h=0;h<u.length;h+=2)d.set(u[h],u[h+1]);return d}function i(u,d){const h=new Map(u);for(const[g,b]of d)h.set(g,b);return h}function n(u,d){if(!u)return d;const h=new Map;for(const[g,b]of u)d.has(g)&&h.set(g,b);return h}const s=mn.ambiguousCharacterData.value;let o=e.filter(u=>!u.startsWith("_")&&u in s);o.length===0&&(o=["_default"]);let a;for(const u of o){const d=t(s[u]);a=n(a,d)}const c=t(s._common),l=i(c,a);return new mn(l)}),mn._locales=new et(()=>Object.keys(mn.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));let zb=mn;const Va=class Va{static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static getData(){return this._data||(this._data=new Set(Va.getRawData())),this._data}static isInvisibleCharacter(e){return Va.getData().has(e)}static get codePoints(){return Va.getData()}};Va._data=void 0;let jb=Va;function Oe(r){return typeof r=="string"}function X4(r){return Array.isArray(r)&&r.every(e=>Oe(e))}function Ft(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function Y4(r){const e=Object.getPrototypeOf(Uint8Array);return typeof r=="object"&&r instanceof e}function fr(r){return typeof r=="number"&&!isNaN(r)}function Eg(r){return typeof r>"u"}function as(r){return!Gt(r)}function Gt(r){return Eg(r)||r===null}function qb(r,e){if(!r)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function Ro(r){if(Gt(r))throw new Error("Assertion Failed: argument is undefined or null");return r}const Z4=Object.prototype.hasOwnProperty;function eE(r){if(!Ft(r))return!1;for(const e in r)if(Z4.call(r,e))return!1;return!0}function tE(r){return typeof r=="function"}function iE(r,e){if(Oe(e)){if(typeof r!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(tE(e)){try{if(r instanceof e)return}catch{}if(!Gt(r)&&r.constructor===e||e.length===1&&e.call(void 0,r)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function pr(r){return r===47||r===92}function Gb(r){return r.replace(/[\\/]/g,Fe.sep)}function nE(r){return r.indexOf("/")===-1&&(r=Gb(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}function Qb(r,e=Fe.sep){if(!r)return"";const t=r.length,i=r.charCodeAt(0);if(pr(i)){if(pr(r.charCodeAt(1))&&!pr(r.charCodeAt(2))){let s=3;const o=s;for(;s<t&&!pr(r.charCodeAt(s));s++);if(o!==s&&!pr(r.charCodeAt(s+1))){for(s+=1;s<t;s++)if(pr(r.charCodeAt(s)))return r.slice(0,s+1).replace(/[\\/]/g,e)}}return e}else if(Jb(i)&&r.charCodeAt(1)===58)return pr(r.charCodeAt(2))?r.slice(0,2)+e:r.slice(0,2);let n=r.indexOf("://");if(n!==-1){for(n+=3;n<t;n++)if(pr(r.charCodeAt(n)))return r.slice(0,n+1)}return""}const rE=/[\\/:\*\?"<>\|]/g,sE=/[\\/]/g,oE=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function aE(r,e=ui){const t=e?rE:sE;return!(!r||r.length===0||/^\s+$/.test(r)||(t.lastIndex=0,t.test(r))||e&&oE.test(r)||r==="."||r===".."||e&&r[r.length-1]==="."||e&&r.length!==r.trim().length||r.length>255)}function md(r,e,t,i=Hi){if(r===e)return!0;if(!r||!e||e.length>r.length)return!1;if(t){if(!xg(r,e))return!1;if(e.length===r.length)return!0;let s=e.length;return e.charAt(e.length-1)===i&&s--,r.charAt(s)===i}return e.charAt(e.length-1)!==i&&(e+=i),r.indexOf(e)===0}function Jb(r){return r>=65&&r<=90||r>=97&&r<=122}function cE(r,e=ui){return e?Jb(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}var Y;(function(r){r.inMemory="inmemory",r.vscode="vscode",r.internal="private",r.walkThrough="walkThrough",r.walkThroughSnippet="walkThroughSnippet",r.http="http",r.https="https",r.file="file",r.mailto="mailto",r.untitled="untitled",r.data="data",r.command="command",r.vscodeRemote="vscode-remote",r.vscodeRemoteResource="vscode-remote-resource",r.vscodeManagedRemoteResource="vscode-managed-remote-resource",r.vscodeUserData="vscode-userdata",r.vscodeCustomEditor="vscode-custom-editor",r.vscodeNotebookCell="vscode-notebook-cell",r.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",r.vscodeNotebookCellOutput="vscode-notebook-cell-output",r.vscodeInteractiveInput="vscode-interactive-input",r.vscodeSettings="vscode-settings",r.vscodeWorkspaceTrust="vscode-workspace-trust",r.vscodeTerminal="vscode-terminal",r.vscodeChatCodeBlock="vscode-chat-code-block",r.vscodeChatSesssion="vscode-chat-editor",r.webviewPanel="webview-panel",r.vscodeWebview="vscode-webview",r.extension="extension",r.vscodeFileResource="vscode-file",r.tmp="tmp",r.vsls="vsls",r.vscodeSourceControl="vscode-scm",r.codeSetting="code-setting"})(Y||(Y={}));function kg(r,e){return y.isUri(r)?os(r.scheme,e):xg(r,e+":")}function lE(r,...e){return e.some(t=>kg(r,t))}const uE="tkn";class dE{constructor(){this._hosts=Object.create(null),this._ports=Object.create(null),this._connectionTokens=Object.create(null),this._preferredWebSchema="http",this._delegate=null,this._serverRootPath="/"}setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,t){this._serverRootPath=fE(e,t)}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return Fe.join(this._serverRootPath,Y.vscodeRemoteResource)}set(e,t,i){this._hosts[e]=t,this._ports[e]=i}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Ni(a),e}const t=e.authority;let i=this._hosts[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const n=this._ports[t],s=this._connectionTokens[t];let o=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(o+=`&${uE}=${encodeURIComponent(s)}`),y.from({scheme:hg?this._preferredWebSchema:Y.vscodeRemoteResource,authority:`${i}:${n}`,path:this._remoteResourcesPath,query:o})}}const hE=new dE;function fE(r,e){return Fe.join(e??"/",`${r.quality??"oss"}-${r.commit??"dev"}`)}const pE="vscode-app",za=class za{constructor(){this.staticBrowserUris=new mt,this.appResourcePathUrls=new Map,this.moduleContentProvider=new Map}registerModuleContentProvider(e,t){this.moduleContentProvider.set(e,t)}toModuleContent(e){return this.moduleContentProvider.get(e)()}registerAppResourcePathUrl(e,t){this.appResourcePathUrls.set(e,t)}toUrl(e){var i;let t=this.appResourcePathUrls.get(e);return typeof t=="function"&&(t=t()),new URL(t??e,((i=globalThis.location)==null?void 0:i.href)??self.location.href).toString()}asBrowserUri(e){const t=this.toUri(e,{toUrl:this.toUrl.bind(this)});return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===Y.vscodeRemote?hE.rewrite(e):e.scheme===Y.file&&(c4||l4===`${Y.vscodeFileResource}://${za.FALLBACK_AUTHORITY}`)?e.with({scheme:Y.vscodeFileResource,authority:e.authority||za.FALLBACK_AUTHORITY,query:null,fragment:null}):this.staticBrowserUris.get(e)??e}asFileUri(e){const t=this.toUri(e,{toUrl:this.toUrl.bind(this)});return this.uriToFileUri(t)}uriToFileUri(e){return e.scheme===Y.vscodeFileResource?e.with({scheme:Y.file,authority:e.authority!==za.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,t){return y.isUri(e)?e:y.parse(t.toUrl(e))}registerStaticBrowserUri(e,t){return this.staticBrowserUris.set(e,t),Ce(()=>{this.staticBrowserUris.get(e)===t&&this.staticBrowserUris.delete(e)})}getRegisteredBrowserUris(){return this.staticBrowserUris.keys()}};za.FALLBACK_AUTHORITY=pE;let Dg=za;new Dg;var Kb;(function(r){const e=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);r.CoopAndCoep=Object.freeze(e.get("3"));const t="vscode-coi";function i(s){let o;typeof s=="string"?o=new URL(s).searchParams:s instanceof URL?o=s.searchParams:y.isUri(s)&&(o=new URL(s.toString(!0)).searchParams);const a=o==null?void 0:o.get(t);if(a)return e.get(a)}r.getHeadersFromQuery=i;function n(s,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";s instanceof URLSearchParams?s.set(t,c):s[t]=c}r.addSearchParam=n})(Kb||(Kb={}));function Wi(r){return ad(r,!0)}class Tc{constructor(e){this._ignorePathCasing=e}compare(e,t,i=!1){return e===t?0:ss(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===Y.file)return md(Wi(e),Wi(t),this._ignorePathCasing(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(Zb(e.authority,t.authority))return md(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return y.joinPath(e,...t)}basenameOrAuthority(e){return cs(e)||e.authority}basename(e){return Fe.basename(e.path)}extname(e){return Fe.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===Y.file?t=y.file(rs(Wi(e))).path:(t=Fe.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===Y.file?t=y.file(Po(Wi(e))).path:t=Fe.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!Zb(e.authority,t.authority))return;if(e.scheme===Y.file){const s=Ic(Wi(e),Wi(t));return ui?Gb(s):s}let i=e.path||"/";const n=t.path||"/";if(this._ignorePathCasing(e)){let s=0;for(const o=Math.min(i.length,n.length);s<o&&!(i.charCodeAt(s)!==n.charCodeAt(s)&&i.charAt(s).toLowerCase()!==n.charAt(s).toLowerCase());s++);i=n.substr(0,s)+i.substr(s)}return Fe.relative(i,n)}resolvePath(e,t){if(e.scheme===Y.file){const i=y.file(C4(Wi(e),t));return e.with({authority:i.authority,path:i.path})}return t=nE(t),e.with({path:Fe.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&os(e,t)}hasTrailingPathSeparator(e,t=Hi){if(e.scheme===Y.file){const i=Wi(e);return i.length>Qb(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Hi){return e0(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Hi){let i=!1;if(e.scheme===Y.file){const n=Wi(e);i=n!==void 0&&n.length===Qb(n).length&&n[n.length-1]===t}else{t="/";const n=e.path;i=n.length===1&&n.charCodeAt(n.length-1)===47}return!i&&!e0(e,t)?e.with({path:e.path+"/"}):e}}const He=new Tc(()=>!1),gE=new Tc(r=>r.scheme===Y.file?!cr:!0),mE=new Tc(r=>!0),Xb=He.isEqual.bind(He);He.isEqualOrParent.bind(He),He.getComparisonKey.bind(He);const Ig=He.basenameOrAuthority.bind(He),cs=He.basename.bind(He);He.extname.bind(He);const Pg=He.dirname.bind(He),Lo=He.joinPath.bind(He);He.normalizePath.bind(He);const Yb=He.relativePath.bind(He);He.resolvePath.bind(He);const vE=He.isAbsolutePath.bind(He),Zb=He.isEqualAuthority.bind(He),e0=He.hasTrailingPathSeparator.bind(He);He.removeTrailingPathSeparator.bind(He),He.addTrailingPathSeparator.bind(He);var t0;(function(r){r.META_DATA_LABEL="label",r.META_DATA_DESCRIPTION="description",r.META_DATA_SIZE="size",r.META_DATA_MIME="mime";function e(t){const i=new Map;t.path.substring(t.path.indexOf(";")+1,t.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&i.set(a,c)});const s=t.path.substring(0,t.path.indexOf(";"));return s&&i.set(r.META_DATA_MIME,s),i}r.parseMetaData=e})(t0||(t0={}));function gr(r){return!!r&&typeof r.then=="function"}function _E(r){const e=new kt,t=r(e.token),i=new Promise((n,s)=>{const o=e.token.onCancellationRequested(()=>{o.dispose(),s(new sr)});Promise.resolve(t).then(a=>{o.dispose(),e.dispose(),n(a)},a=>{o.dispose(),e.dispose(),s(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(n,s){return i.then(n,s)}catch(n){return this.then(void 0,n)}finally(n){return i.finally(n)}}}function Tg(r,e,t){return new Promise((i,n)=>{const s=e.onCancellationRequested(()=>{s.dispose(),i(t)});r.then(i,n).finally(()=>s.dispose())})}function wE(r,e){return new Promise((t,i)=>{const n=e.onCancellationRequested(()=>{n.dispose(),i(new sr)});r.then(t,i).finally(()=>n.dispose())})}function Ht(r){return new Promise((e,t)=>{const i=r();gr(i)?i.then(e,t):e(i)})}function bE(){let r,e;return{promise:new Promise((i,n)=>{r=i,e=n}),resolve:r,reject:e}}class Bi{constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}}function mr(r,e){return e?new Promise((t,i)=>{const n=setTimeout(()=>{s.dispose(),t()},r),s=e.onCancellationRequested(()=>{clearTimeout(n),s.dispose(),i(new sr)})}):_E(t=>mr(r,t))}function yE(r,e=0,t){const i=setTimeout(()=>{r(),t&&n.dispose()},e),n=Ce(()=>{clearTimeout(i),t==null||t.deleteAndLeak(n)});return t==null||t.add(n),n}class xE{constructor(e){this._size=0,this._isDisposed=!1,this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new A}whenIdle(){return this.size>0?St.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw new Error("Object has been disposed");return this._size++,new Promise((t,i)=>{this.outstandingPromises.push({factory:e,c:t,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){const e=this.outstandingPromises.shift();this.runningPromises++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._isDisposed||(this.runningPromises--,--this._size===0&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw new Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}}class CE extends xE{constructor(){super(1)}}class SE{constructor(){this.queues=new Map,this.drainers=new Set,this.drainListeners=void 0,this.drainListenerCount=0}async whenDrained(){if(this.isDrained())return;const e=new Oo;return this.drainers.add(e),e.p}isDrained(){for(const[,e]of this.queues)if(e.size>0)return!1;return!0}queueSize(e,t=He){var n;const i=t.getComparisonKey(e);return((n=this.queues.get(i))==null?void 0:n.size)??0}queueFor(e,t,i=He){const n=i.getComparisonKey(e);let s=this.queues.get(n);if(!s){s=new CE;const o=this.drainListenerCount++,a=St.once(s.onDrained)(()=>{var c,l;s==null||s.dispose(),this.queues.delete(n),this.onDidQueueDrain(),(c=this.drainListeners)==null||c.deleteAndDispose(o),((l=this.drainListeners)==null?void 0:l.size)===0&&(this.drainListeners.dispose(),this.drainListeners=void 0)});this.drainListeners||(this.drainListeners=new nb),this.drainListeners.set(o,a),this.queues.set(n,s)}return s.queue(t)}onDidQueueDrain(){this.isDrained()&&this.releaseDrainers()}releaseDrainers(){for(const e of this.drainers)e.complete();this.drainers.clear()}dispose(){var e;for(const[,t]of this.queues)t.dispose();this.queues.clear(),this.releaseDrainers(),(e=this.drainListeners)==null||e.dispose()}}class EE{constructor(){this.disposable=void 0}cancel(){var e;(e=this.disposable)==null||e.dispose(),this.disposable=void 0}cancelAndSet(e,t,i=globalThis){this.cancel();const n=i.setInterval(()=>{e()},t);this.disposable=Ce(()=>{i.clearInterval(n),this.disposable=void 0})}dispose(){this.cancel()}}class Ac{constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){var e;(e=this.runner)==null||e.call(this)}}let Ag;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Ag=(r,e)=>{fb(()=>{if(t)return;const i=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:Ag=(r,e,t)=>{const i=r.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0);let n=!1;return{dispose(){n||(n=!0,r.cancelIdleCallback(i))}}}})();class kE{constructor(e,t){this._didRun=!1,this._executor=()=>{try{this._value=t()}catch(i){this._error=i}finally{this._didRun=!0}},this._handle=Ag(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}}class DE extends kE{constructor(e){super(globalThis,e)}}class Oo{get isRejected(){var e;return((e=this.outcome)==null?void 0:e.outcome)===1}get isResolved(){var e;return((e=this.outcome)==null?void 0:e.outcome)===0}get isSettled(){return!!this.outcome}get value(){var e,t;return((e=this.outcome)==null?void 0:e.outcome)===0?(t=this.outcome)==null?void 0:t.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new sr)}}var Rg;(function(r){async function e(i){let n;const s=await Promise.all(i.map(o=>o.then(a=>a,a=>{n||(n=a)})));if(typeof n<"u")throw n;return s}r.settled=e;function t(i){return new Promise(async(n,s)=>{try{await i(n,s)}catch(o){s(o)}})}r.withAsyncBody=t})(Rg||(Rg={}));const ai=class ai{static fromArray(e){return new ai(t=>{t.emitMany(e)})}static fromPromise(e){return new ai(async t=>{t.emitMany(await e)})}static fromPromises(e){return new ai(async t=>{await Promise.all(e.map(async i=>t.emitOne(await i)))})}static merge(e){return new ai(async t=>{await Promise.all(e.map(async i=>{for await(const n of i)t.emitOne(n)}))})}constructor(e){this._state=0,this._results=[],this._error=null,this._onStateChanged=new A,queueMicrotask(async()=>{const t={emitOne:i=>this.emitOne(i),emitMany:i=>this.emitMany(i),reject:i=>this.reject(i)};try{await Promise.resolve(e(t)),this.resolve()}catch(i){this.reject(i)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await St.toPromise(this._onStateChanged.event)}while(!0)}}}static map(e,t){return new ai(async i=>{for await(const n of e)i.emitOne(t(n))})}map(e){return ai.map(this,e)}static filter(e,t){return new ai(async i=>{for await(const n of e)t(n)&&i.emitOne(n)})}filter(e){return ai.filter(this,e)}static coalesce(e){return ai.filter(e,t=>!!t)}coalesce(){return ai.coalesce(this)}static async toPromise(e){const t=[];for await(const i of e)t.push(i);return t}toPromise(){return ai.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};ai.EMPTY=ai.fromArray([]);let Rc=ai;class Lg{constructor(){this._deferred=new Oo,this._asyncIterable=new Rc(i=>{if(e){i.reject(e);return}return t&&i.emitMany(t),this._errorFn=n=>i.reject(n),this._emitFn=n=>i.emitOne(n),this._deferred.p});let e,t;this._emitFn=i=>{t||(t=[]),t.push(i)},this._errorFn=i=>{e||(e=i)}}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}}function i0(r,e,t,i){if(!r||i>200)return null;if(typeof r=="object"){if(r.$mid===1)return t?y.revive(e.transformIncoming(r)):e.transformIncoming(r);if(r instanceof ve)return null;for(const n in r)if(Object.hasOwnProperty.call(r,n)){const s=i0(r[n],e,t,i+1);s!==null&&(r[n]=s)}}return null}function Lc(r,e){const t=i0(r,e,!1,0);return t===null?r:t}class n0{constructor(){this._actual=null,this._actualOk=null,this._actualErr=null,this._hasValue=!1,this._value=null,this._hasErr=!1,this._err=null}get[Symbol.toStringTag](){return this.toString()}_ensureActual(){return this._actual||(this._actual=new Promise((e,t)=>{this._actualOk=e,this._actualErr=t,this._hasValue&&this._actualOk(this._value),this._hasErr&&this._actualErr(this._err)})),this._actual}resolveOk(e){this._hasValue||this._hasErr||(this._hasValue=!0,this._value=e,this._actual&&this._actualOk(e))}resolveErr(e){this._hasValue||this._hasErr||(this._hasErr=!0,this._err=e,this._actual?this._actualErr(e):Ni(e))}then(e,t){return this._ensureActual().then(e,t)}catch(e){return this._ensureActual().then(void 0,e)}finally(e){return this._ensureActual().finally(e)}}class IE extends n0{constructor(){super(),this._hasErr=!0,this._err=new sr}}var r0;function Og(r,e){try{return JSON.stringify(r,e)}catch{return"null"}}const $g="$$ref$$",PE={[$g]:-1};function s0(r,e=null,t=!1){const i=[];return{jsonString:(t?Og:JSON.stringify)(r,(s,o)=>{if(typeof o>"u")return PE;if(typeof o=="object"){if(o instanceof ve){const a=i.push(o)-1;return{[$g]:a}}if(e)return e(s,o)}return o}),referencedBuffers:i}}function o0(r,e,t){return JSON.parse(r,(i,n)=>{if(n){const s=n[$g];if(typeof s=="number")return e[s];if(t&&n.$mid===1)return t.transformIncoming(n)}return n})}function a0(r,e){return JSON.stringify(r,e)}function TE(r){return r?(e,t)=>t&&t.$mid===1?r.transformOutgoing(t):t:null}const AE=()=>{},RE=Symbol.for("rpcProtocol"),LE=Symbol.for("rpcProxy"),_u=class _u extends Ne{constructor(e,t=null,i=null){super(),this[r0]=!0,this._onDidChangeResponsiveState=this._register(new A),this.onDidChangeResponsiveState=this._onDidChangeResponsiveState.event,this._protocol=e,this._logger=t,this._uriTransformer=i,this._uriReplacer=TE(this._uriTransformer),this._isDisposed=!1,this._locals=[],this._proxies=[];for(let n=0,s=ld.count;n<s;n++)this._locals[n]=null,this._proxies[n]=null;this._lastMessageId=0,this._cancelInvokedHandlers=Object.create(null),this._pendingRPCReplies={},this._responsiveState=0,this._unacknowledgedCount=0,this._unresponsiveTime=0,this._asyncCheckUresponsive=this._register(new Ac(()=>this._checkUnresponsive(),1e3)),this._protocol.onMessage(n=>this._receiveOneMessage(n))}dispose(){this._isDisposed=!0,Object.keys(this._pendingRPCReplies).forEach(e=>{const t=this._pendingRPCReplies[e];delete this._pendingRPCReplies[e],t.resolveErr(zw())}),super.dispose()}drain(){return typeof this._protocol.drain=="function"?this._protocol.drain():Promise.resolve()}_onWillSendRequest(e){this._unacknowledgedCount===0&&(this._unresponsiveTime=Date.now()+_u.UNRESPONSIVE_TIME),this._unacknowledgedCount++,this._asyncCheckUresponsive.isScheduled()||this._asyncCheckUresponsive.schedule()}_onDidReceiveAcknowledge(e){this._unresponsiveTime=Date.now()+_u.UNRESPONSIVE_TIME,this._unacknowledgedCount--,this._unacknowledgedCount===0&&this._asyncCheckUresponsive.cancel(),this._setResponsiveState(0)}_checkUnresponsive(){this._unacknowledgedCount!==0&&(Date.now()>this._unresponsiveTime?this._setResponsiveState(1):this._asyncCheckUresponsive.schedule())}_setResponsiveState(e){this._responsiveState!==e&&(this._responsiveState=e,this._onDidChangeResponsiveState.fire(this._responsiveState))}get responsiveState(){return this._responsiveState}transformIncomingURIs(e){return this._uriTransformer?Lc(e,this._uriTransformer):e}getProxy(e){const{nid:t,sid:i}=e;return this._proxies[t]||(this._proxies[t]=this._createProxy(t,i)),this._proxies[t]}_createProxy(e,t){const i={get:(n,s)=>(typeof s=="string"&&!n[s]&&s.charCodeAt(0)===36&&(n[s]=(...o)=>this._remoteCall(e,s,o)),s===LE?t:n[s])};return new Proxy(Object.create(null),i)}set(e,t){return this._locals[e.nid]=t,t}assertRegistered(e){for(let t=0,i=e.length;t<i;t++){const n=e[t];if(!this._locals[n.nid])throw new Error(`Missing proxy instance ${n.sid}`)}}_receiveOneMessage(e){var o;if(this._isDisposed)return;const t=e.byteLength,i=ut.read(e,0),n=i.readUInt8(),s=i.readUInt32();switch(n){case 1:case 2:{let{rpcId:a,method:c,args:l}=bi.deserializeRequestJSONArgs(i);this._uriTransformer&&(l=Lc(l,this._uriTransformer)),this._receiveRequest(t,s,a,c,l,n===2);break}case 3:case 4:{let{rpcId:a,method:c,args:l}=bi.deserializeRequestMixedArgs(i);this._uriTransformer&&(l=Lc(l,this._uriTransformer)),this._receiveRequest(t,s,a,c,l,n===4);break}case 5:{(o=this._logger)==null||o.logIncoming(t,s,0,"ack"),this._onDidReceiveAcknowledge(s);break}case 6:{this._receiveCancel(t,s);break}case 7:{this._receiveReply(t,s,void 0);break}case 9:{let a=bi.deserializeReplyOKJSON(i);this._uriTransformer&&(a=Lc(a,this._uriTransformer)),this._receiveReply(t,s,a);break}case 10:{const a=bi.deserializeReplyOKJSONWithBuffers(i,this._uriTransformer);this._receiveReply(t,s,a);break}case 8:{const a=bi.deserializeReplyOKVSBuffer(i);this._receiveReply(t,s,a);break}case 11:{let a=bi.deserializeReplyErrError(i);this._uriTransformer&&(a=Lc(a,this._uriTransformer)),this._receiveReplyErr(t,s,a);break}case 12:{this._receiveReplyErr(t,s,void 0);break}default:console.error("received unexpected message"),console.error(e)}}_receiveRequest(e,t,i,n,s,o){var d,h;(d=this._logger)==null||d.logIncoming(e,t,1,`receiveRequest ${ud(i)}.${n}(`,s);const a=String(t);let c,l;if(o){const g=new kt;s.push(g.token),c=this._invokeHandler(i,n,s),l=()=>g.cancel()}else c=this._invokeHandler(i,n,s),l=AE;this._cancelInvokedHandlers[a]=l;const u=bi.serializeAcknowledged(t);(h=this._logger)==null||h.logOutgoing(u.byteLength,t,1,"ack"),this._protocol.send(u),c.then(g=>{var _;delete this._cancelInvokedHandlers[a];const b=bi.serializeReplyOK(t,g,this._uriReplacer);(_=this._logger)==null||_.logOutgoing(b.byteLength,t,1,"reply:",g),this._protocol.send(b)},g=>{var _;delete this._cancelInvokedHandlers[a];const b=bi.serializeReplyErr(t,g);(_=this._logger)==null||_.logOutgoing(b.byteLength,t,1,"replyErr:",g),this._protocol.send(b)})}_receiveCancel(e,t){var n,s,o;(n=this._logger)==null||n.logIncoming(e,t,1,"receiveCancel");const i=String(t);(o=(s=this._cancelInvokedHandlers)[i])==null||o.call(s)}_receiveReply(e,t,i){var o;(o=this._logger)==null||o.logIncoming(e,t,0,"receiveReply:",i);const n=String(t);if(!this._pendingRPCReplies.hasOwnProperty(n))return;const s=this._pendingRPCReplies[n];delete this._pendingRPCReplies[n],s.resolveOk(i)}_receiveReplyErr(e,t,i){var a;(a=this._logger)==null||a.logIncoming(e,t,0,"receiveReplyErr:",i);const n=String(t);if(!this._pendingRPCReplies.hasOwnProperty(n))return;const s=this._pendingRPCReplies[n];delete this._pendingRPCReplies[n];let o;i&&(i.$isError?(o=new Error,o.name=i.name,o.message=i.message,o.stack=i.stack):o=i),s.resolveErr(o)}_invokeHandler(e,t,i){try{return Promise.resolve(this._doInvokeHandler(e,t,i))}catch(n){return Promise.reject(n)}}_doInvokeHandler(e,t,i){const n=this._locals[e];if(!n)throw new Error("Unknown actor "+ud(e));const s=n[t];if(typeof s!="function")throw new Error("Unknown method "+t+" on actor "+ud(e));return s.apply(n,i)}_remoteCall(e,t,i){var d;if(this._isDisposed)return new IE;let n=null;if(i.length>0&&wt.isCancellationToken(i[i.length-1])&&(n=i.pop()),n&&n.isCancellationRequested)return Promise.reject(zw());const s=bi.serializeRequestArguments(i,this._uriReplacer),o=++this._lastMessageId,a=String(o),c=new n0,l=new Pe;n&&l.add(n.onCancellationRequested(()=>{var g;const h=bi.serializeCancel(o);(g=this._logger)==null||g.logOutgoing(h.byteLength,o,0,"cancel"),this._protocol.send(bi.serializeCancel(o))})),this._pendingRPCReplies[a]=new OE(c,l),this._onWillSendRequest(o);const u=bi.serializeRequest(o,e,t,s,!!n);return(d=this._logger)==null||d.logOutgoing(u.byteLength,o,0,`request: ${ud(e)}.${t}(`,i),this._protocol.send(u),c}};r0=RE,_u.UNRESPONSIVE_TIME=3*1e3;let Ng=_u;class OE{constructor(e,t){this._promise=e,this._disposable=t}resolveOk(e){this._promise.resolveOk(e),this._disposable.dispose()}resolveErr(e){this._promise.resolveErr(e),this._disposable.dispose()}}const wu=class wu{static alloc(e,t,i){const n=new wu(ve.alloc(i+1+4),0);return n.writeUInt8(e),n.writeUInt32(t),n}static read(e,t){return new wu(e,t)}get buffer(){return this._buff}constructor(e,t){this._buff=e,this._offset=t}static sizeUInt8(){return 1}writeUInt8(e){this._buff.writeUInt8(e,this._offset),this._offset+=1}readUInt8(){const e=this._buff.readUInt8(this._offset);return this._offset+=1,e}writeUInt32(e){this._buff.writeUInt32BE(e,this._offset),this._offset+=4}readUInt32(){const e=this._buff.readUInt32BE(this._offset);return this._offset+=4,e}static sizeShortString(e){return 1+e.byteLength}writeShortString(e){this._buff.writeUInt8(e.byteLength,this._offset),this._offset+=1,this._buff.set(e,this._offset),this._offset+=e.byteLength}readShortString(){const e=this._buff.readUInt8(this._offset);this._offset+=1;const i=this._buff.slice(this._offset,this._offset+e).toString();return this._offset+=e,i}static sizeLongString(e){return 4+e.byteLength}writeLongString(e){this._buff.writeUInt32BE(e.byteLength,this._offset),this._offset+=4,this._buff.set(e,this._offset),this._offset+=e.byteLength}readLongString(){const e=this._buff.readUInt32BE(this._offset);this._offset+=4;const i=this._buff.slice(this._offset,this._offset+e).toString();return this._offset+=e,i}writeBuffer(e){this._buff.writeUInt32BE(e.byteLength,this._offset),this._offset+=4,this._buff.set(e,this._offset),this._offset+=e.byteLength}static sizeVSBuffer(e){return 4+e.byteLength}writeVSBuffer(e){this._buff.writeUInt32BE(e.byteLength,this._offset),this._offset+=4,this._buff.set(e,this._offset),this._offset+=e.byteLength}readVSBuffer(){const e=this._buff.readUInt32BE(this._offset);this._offset+=4;const t=this._buff.slice(this._offset,this._offset+e);return this._offset+=e,t}static sizeMixedArray(e){let t=0;t+=1;for(let i=0,n=e.length;i<n;i++){const s=e[i];switch(t+=1,s.type){case 1:t+=this.sizeLongString(s.value);break;case 2:t+=this.sizeVSBuffer(s.value);break;case 3:t+=this.sizeUInt32,t+=this.sizeLongString(s.value);for(let o=0;o<s.buffers.length;++o)t+=this.sizeVSBuffer(s.buffers[o]);break}}return t}writeMixedArray(e){this._buff.writeUInt8(e.length,this._offset),this._offset+=1;for(let t=0,i=e.length;t<i;t++){const n=e[t];switch(n.type){case 1:this.writeUInt8(1),this.writeLongString(n.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(n.value);break;case 3:this.writeUInt8(3),this.writeUInt32(n.buffers.length),this.writeLongString(n.value);for(let s=0;s<n.buffers.length;++s)this.writeBuffer(n.buffers[s]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const e=this._buff.readUInt8(this._offset);this._offset+=1;const t=new Array(e);for(let i=0;i<e;i++)switch(this.readUInt8()){case 1:t[i]=this.readLongString();break;case 2:t[i]=this.readVSBuffer();break;case 3:{const s=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<s;++c)a.push(this.readVSBuffer());t[i]=new nn(o0(o,a,null));break}case 4:t[i]=void 0;break}return t}};wu.sizeUInt32=4;let ut=wu;class bi{static _useMixedArgSerialization(e){for(let t=0,i=e.length;t<i;t++)if(e[t]instanceof ve||e[t]instanceof nn||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this._useMixedArgSerialization(e)){const i=[];for(let n=0,s=e.length;n<s;n++){const o=e[n];if(o instanceof ve)i[n]={type:2,value:o};else if(typeof o>"u")i[n]={type:4};else if(o instanceof nn){const{jsonString:a,referencedBuffers:c}=s0(o.value,t);i[n]={type:3,value:ve.fromString(a),buffers:c}}else i[n]={type:1,value:ve.fromString(a0(o,t))}}return{type:1,args:i}}return{type:0,args:a0(e,t)}}static serializeRequest(e,t,i,n,s){switch(n.type){case 0:return this._requestJSONArgs(e,t,i,n.args,s);case 1:return this._requestMixedArgs(e,t,i,n.args,s)}}static _requestJSONArgs(e,t,i,n,s){const o=ve.fromString(i),a=ve.fromString(n);let c=0;c+=ut.sizeUInt8(),c+=ut.sizeShortString(o),c+=ut.sizeLongString(a);const l=ut.alloc(s?2:1,e,c);return l.writeUInt8(t),l.writeShortString(o),l.writeLongString(a),l.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),i=e.readShortString(),n=e.readLongString();return{rpcId:t,method:i,args:JSON.parse(n)}}static _requestMixedArgs(e,t,i,n,s){const o=ve.fromString(i);let a=0;a+=ut.sizeUInt8(),a+=ut.sizeShortString(o),a+=ut.sizeMixedArray(n);const c=ut.alloc(s?4:3,e,a);return c.writeUInt8(t),c.writeShortString(o),c.writeMixedArray(n),c.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),i=e.readShortString(),n=e.readMixedArray(),s=new Array(n.length);for(let o=0,a=n.length;o<a;o++){const c=n[o];typeof c=="string"?s[o]=JSON.parse(c):s[o]=c}return{rpcId:t,method:i,args:s}}static serializeAcknowledged(e){return ut.alloc(5,e,0).buffer}static serializeCancel(e){return ut.alloc(6,e,0).buffer}static serializeReplyOK(e,t,i){if(typeof t>"u")return this._serializeReplyOKEmpty(e);if(t instanceof ve)return this._serializeReplyOKVSBuffer(e,t);if(t instanceof nn){const{jsonString:n,referencedBuffers:s}=s0(t.value,i,!0);return this._serializeReplyOKJSONWithBuffers(e,n,s)}else return this._serializeReplyOKJSON(e,Og(t,i))}static _serializeReplyOKEmpty(e){return ut.alloc(7,e,0).buffer}static _serializeReplyOKVSBuffer(e,t){let i=0;i+=ut.sizeVSBuffer(t);const n=ut.alloc(8,e,i);return n.writeVSBuffer(t),n.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static _serializeReplyOKJSON(e,t){const i=ve.fromString(t);let n=0;n+=ut.sizeLongString(i);const s=ut.alloc(9,e,n);return s.writeLongString(i),s.buffer}static _serializeReplyOKJSONWithBuffers(e,t,i){const n=ve.fromString(t);let s=0;s+=ut.sizeUInt32,s+=ut.sizeLongString(n);for(const a of i)s+=ut.sizeVSBuffer(a);const o=ut.alloc(10,e,s);o.writeUInt32(i.length),o.writeLongString(n);for(const a of i)o.writeBuffer(a);return o.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const i=e.readUInt32(),n=e.readLongString(),s=[];for(let o=0;o<i;++o)s.push(e.readVSBuffer());return new nn(o0(n,s,t))}static serializeReplyErr(e,t){const i=t?Og(Ju(t),null):void 0;if(typeof i!="string")return this._serializeReplyErrEmpty(e);const n=ve.fromString(i);let s=0;s+=ut.sizeLongString(n);const o=ut.alloc(11,e,s);return o.writeLongString(n),o.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static _serializeReplyErrEmpty(e){return ut.alloc(12,e,0).buffer}}function Mg(r,e){return e&&(r.stack||r.stacktrace)?f("vs/base/common/errorMessage","stackTrace.format","{0}: {1}",l0(r),c0(r.stack)||c0(r.stacktrace)):l0(r)}function c0(r){return Array.isArray(r)?r.join(`
`):r}function l0(r){return r.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${r.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof r.code=="string"&&typeof r.errno=="number"&&typeof r.syscall=="string"?f("vs/base/common/errorMessage","nodeExceptionMessage","A system error occurred ({0})",r.message):r.message||f("vs/base/common/errorMessage","error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function $o(r=null,e=!1){if(!r)return f("vs/base/common/errorMessage","error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(r)){const t=Yt(r),i=$o(t[0],e);return t.length>1?f("vs/base/common/errorMessage","error.moreErrors","{0} ({1} errors in total)",i,t.length):i}if(Oe(r))return r;if(r.detail){const t=r.detail;if(t.error)return Mg(t.error,e);if(t.exception)return Mg(t.exception,e)}return r.stack?Mg(r,e):r.message?r.message:f("vs/base/common/errorMessage","error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function Fg(r){return Hg(r,0)}function Hg(r,e){switch(typeof r){case"object":return r===null?Sn(349,e):Array.isArray(r)?NE(r,e):ME(r,e);case"string":return u0(r,e);case"boolean":return $E(r,e);case"number":return Sn(r,e);case"undefined":return Sn(937,e);default:return Sn(617,e)}}function Sn(r,e){return(e<<5)-e+r|0}function $E(r,e){return Sn(r?433:863,e)}function u0(r,e){e=Sn(149417,e);for(let t=0,i=r.length;t<i;t++)e=Sn(r.charCodeAt(t),e);return e}function NE(r,e){return e=Sn(104579,e),r.reduce((t,i)=>Hg(i,t),e)}function ME(r,e){return e=Sn(181387,e),Object.keys(r).sort().reduce((t,i)=>(t=u0(i,t),Hg(r[i],t)),e)}function Ug(r,e,t=32){const i=t-e,n=~((1<<i)-1);return(r<<e|(n&r)>>>i)>>>0}function d0(r,e=0,t=r.byteLength,i=0){for(let n=0;n<t;n++)r[e+n]=i}function FE(r,e,t="0"){for(;r.length<e;)r=t+r;return r}function Oc(r,e=32){return r instanceof ArrayBuffer?Array.from(new Uint8Array(r)).map(t=>t.toString(16).padStart(2,"0")).join(""):FE((r>>>0).toString(16),e/4)}const wp=class wp{constructor(){this._h0=1732584193,this._h1=4023233417,this._h2=2562383102,this._h3=271733878,this._h4=3285377520,this._buff=new Uint8Array(64+3),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){const t=e.length;if(t===0)return;const i=this._buff;let n=this._buffLen,s=this._leftoverHighSurrogate,o,a;for(s!==0?(o=s,a=-1,s=0):(o=e.charCodeAt(0),a=0);;){let c=o;if(fd(o))if(a+1<t){const l=e.charCodeAt(a+1);pd(l)?(a++,c=Cg(o,l)):c=65533}else{s=o;break}else pd(o)&&(c=65533);if(n=this._push(i,n,c),a++,a<t)o=e.charCodeAt(a);else break}this._buffLen=n,this._leftoverHighSurrogate=s}_push(e,t,i){return i<128?e[t++]=i:i<2048?(e[t++]=192|(i&1984)>>>6,e[t++]=128|(i&63)>>>0):i<65536?(e[t++]=224|(i&61440)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0):(e[t++]=240|(i&1835008)>>>18,e[t++]=128|(i&258048)>>>12,e[t++]=128|(i&4032)>>>6,e[t++]=128|(i&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64+0],e[1]=e[64+1],e[2]=e[64+2]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Oc(this._h0)+Oc(this._h1)+Oc(this._h2)+Oc(this._h3)+Oc(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,d0(this._buff,this._buffLen),this._buffLen>56&&(this._step(),d0(this._buff));const e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){const e=wp._bigBlock32,t=this._buffDV;for(let d=0;d<64;d+=4)e.setUint32(d,t.getUint32(d,!1),!1);for(let d=64;d<320;d+=4)e.setUint32(d,Ug(e.getUint32(d-12,!1)^e.getUint32(d-32,!1)^e.getUint32(d-56,!1)^e.getUint32(d-64,!1),1),!1);let i=this._h0,n=this._h1,s=this._h2,o=this._h3,a=this._h4,c,l,u;for(let d=0;d<80;d++)d<20?(c=n&s|~n&o,l=1518500249):d<40?(c=n^s^o,l=1859775393):d<60?(c=n&s|n&o|s&o,l=2400959708):(c=n^s^o,l=3395469782),u=Ug(i,5)+c+a+l+e.getUint32(d*4,!1)&4294967295,a=o,o=s,s=Ug(n,30),n=i,i=u;this._h0=this._h0+i&4294967295,this._h1=this._h1+n&4294967295,this._h2=this._h2+s&4294967295,this._h3=this._h3+o&4294967295,this._h4=this._h4+a&4294967295}};wp._bigBlock32=new DataView(new ArrayBuffer(320));let h0=wp;function Wg(...r){switch(r.length){case 1:return f("vs/platform/contextkey/common/scanner","contextkey.scanner.hint.didYouMean1","Did you mean {0}?",r[0]);case 2:return f("vs/platform/contextkey/common/scanner","contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",r[0],r[1]);case 3:return f("vs/platform/contextkey/common/scanner","contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",r[0],r[1],r[2]);default:return}}const HE=f("vs/platform/contextkey/common/scanner","contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),UE=f("vs/platform/contextkey/common/scanner","contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),ja=class ja{constructor(){this._input="",this._start=0,this._current=0,this._tokens=[],this._errors=[],this.stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw Yp(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){const t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){const t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(Wg("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(Wg("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(Wg("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){const t=this._start,i=this._input.substring(this._start,this._current),n={type:19,offset:this._start,lexeme:i};this._errors.push({offset:t,lexeme:i,additionalInfo:e}),this._tokens.push(n)}_string(){this.stringRe.lastIndex=this._start;const e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;const t=this._input.substring(this._start,this._current),i=ja._keywords.get(t);i?this._addToken(i):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(HE);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,i=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(UE);return}const s=this._input.charCodeAt(e);if(t)t=!1;else if(s===47&&!i){e++;break}else s===91?i=!0:s===92?t=!0:s===93&&(i=!1);e++}for(;e<this._input.length&&ja._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;const n=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:n,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};ja._regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0))),ja._keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);let ls=ja;var Vi;(function(r){r.serviceIds=new Map,r.DI_TARGET="$di$target",r.DI_DEPENDENCIES="$di$dependencies";function e(t){return t[r.DI_DEPENDENCIES]||[]}r.getServiceDependencies=e})(Vi||(Vi={}));const vd=ie("instantiationService");function WE(r,e,t){e[Vi.DI_TARGET]===e?e[Vi.DI_DEPENDENCIES].push({id:r,index:t}):(e[Vi.DI_DEPENDENCIES]=[{id:r,index:t}],e[Vi.DI_TARGET]=e)}function ie(r){if(Vi.serviceIds.has(r))return Vi.serviceIds.get(r);const e=function(t,i,n){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");WE(e,t,n)};return e.toString=()=>r,Vi.serviceIds.set(r,e),e}function yT(r){return r}const Tt=new Map;Tt.set("false",!1),Tt.set("true",!0),Tt.set("isMac",Fi),Tt.set("isLinux",cr),Tt.set("isWindows",ui),Tt.set("isWeb",hg),Tt.set("isMacNative",Fi&&!hg),Tt.set("isEdge",p4),Tt.set("isFirefox",h4),Tt.set("isChrome",_b),Tt.set("isSafari",f4);const BE=Object.prototype.hasOwnProperty,VE={regexParsingWithErrorRecovery:!0},zE=f("vs/platform/contextkey/common/contextkey","contextkey.parser.error.emptyString","Empty context key expression"),jE=f("vs/platform/contextkey/common/contextkey","contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),qE=f("vs/platform/contextkey/common/contextkey","contextkey.parser.error.noInAfterNot","'in' after 'not'."),f0=f("vs/platform/contextkey/common/contextkey","contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),GE=f("vs/platform/contextkey/common/contextkey","contextkey.parser.error.unexpectedToken","Unexpected token"),QE=f("vs/platform/contextkey/common/contextkey","contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),JE=f("vs/platform/contextkey/common/contextkey","contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),KE=f("vs/platform/contextkey/common/contextkey","contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?");let p0=(qn=class{get lexingErrors(){return this._scanner.errors}get parsingErrors(){return this._parsingErrors}constructor(e=VE){this._config=e,this._scanner=new ls,this._tokens=[],this._current=0,this._parsingErrors=[],this._flagsGYRe=/g|y/g}parse(e){if(e===""){this._parsingErrors.push({message:zE,offset:0,lexeme:"",additionalInfo:jE});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{const t=this._expr();if(!this._isAtEnd()){const i=this._peek(),n=i.type===17?QE:void 0;throw this._parsingErrors.push({message:GE,offset:i.offset,lexeme:ls.getLexeme(i),additionalInfo:n}),qn._parseError}return t}catch(t){if(t!==qn._parseError)throw t;return}}_expr(){return this._or()}_or(){const e=[this._and()];for(;this._matchOne(16);){const t=this._and();e.push(t)}return e.length===1?e[0]:Dt.or(...e)}_and(){const e=[this._term()];for(;this._matchOne(15);){const t=this._term();e.push(t)}return e.length===1?e[0]:Dt.and(...e)}_term(){if(this._matchOne(2)){const e=this._peek();switch(e.type){case 11:return this._advance(),Ut.INSTANCE;case 12:return this._advance(),Qt.INSTANCE;case 0:{this._advance();const t=this._expr();return this._consume(1,f0),t==null?void 0:t.negate()}case 17:return this._advance(),ds.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){const e=this._peek();switch(e.type){case 11:return this._advance(),Dt.true();case 12:return this._advance(),Dt.false();case 0:{this._advance();const t=this._expr();return this._consume(1,f0),t}case 17:{const t=e.lexeme;if(this._advance(),this._matchOne(9)){const n=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),n.type!==10)throw this._errExpectedButGot("REGEX",n);const s=n.lexeme,o=s.lastIndexOf("/"),a=o===s.length-1?void 0:this._removeFlagsGY(s.substring(o+1));let c;try{c=new RegExp(s.substring(1,o),a)}catch{throw this._errExpectedButGot("REGEX",n)}return Bc.create(t,c)}switch(n.type){case 10:case 19:{const s=[n.lexeme];this._advance();let o=this._peek(),a=0;for(let h=0;h<n.lexeme.length;h++)n.lexeme.charCodeAt(h)===40?a++:n.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<o.lexeme.length;h++)o.lexeme.charCodeAt(h)===40?a++:n.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;s.push(ls.getLexeme(o)),this._advance(),o=this._peek()}const c=s.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this._removeFlagsGY(c.substring(l+1));let d;try{d=new RegExp(c.substring(1,l),u)}catch{throw this._errExpectedButGot("REGEX",n)}return Dt.regex(t,d)}case 18:{const s=n.lexeme;this._advance();let o=null;if(!hd(s)){const a=s.indexOf("/"),c=s.lastIndexOf("/");if(a!==c&&a>=0){const l=s.slice(a+1,c),u=s[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this._errExpectedButGot("REGEX",n)}}}if(o===null)throw this._errExpectedButGot("REGEX",n);return Bc.create(t,o)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,qE);const n=this._value();return Dt.notIn(t,n)}switch(this._peek().type){case 3:{this._advance();const n=this._value();if(this._previous().type===18)return Dt.equals(t,n);switch(n){case"true":return Dt.has(t);case"false":return Dt.not(t);default:return Dt.equals(t,n)}}case 4:{this._advance();const n=this._value();if(this._previous().type===18)return Dt.notEquals(t,n);switch(n){case"true":return Dt.not(t);case"false":return Dt.has(t);default:return Dt.notEquals(t,n)}}case 5:return this._advance(),Uc.create(t,this._value());case 6:return this._advance(),Wc.create(t,this._value());case 7:return this._advance(),Fc.create(t,this._value());case 8:return this._advance(),Hc.create(t,this._value());case 13:return this._advance(),Dt.in(t,this._value());default:return Dt.has(t)}}case 20:throw this._parsingErrors.push({message:JE,offset:e.offset,lexeme:"",additionalInfo:KE}),qn._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){const e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,i){const n=f("vs/platform/contextkey/common/contextkey","contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,ls.getLexeme(t)),s=t.offset,o=ls.getLexeme(t);return this._parsingErrors.push({message:n,offset:s,lexeme:o,additionalInfo:i}),qn._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},qn._parseError=new Error,qn);const gw=class gw{static false(){return Ut.INSTANCE}static true(){return Qt.INSTANCE}static has(e){return us.create(e)}static equals(e,t){return Nc.create(e,t)}static notEquals(e,t){return Mc.create(e,t)}static regex(e,t){return Bc.create(e,t)}static in(e,t){return _d.create(e,t)}static notIn(e,t){return wd.create(e,t)}static not(e){return ds.create(e)}static and(...e){return vr.create(e,null,!0)}static or(...e){return rn.create(e,null,!0)}static greater(e,t){return Fc.create(e,t)}static greaterEquals(e,t){return Hc.create(e,t)}static smaller(e,t){return Uc.create(e,t)}static smallerEquals(e,t){return Wc.create(e,t)}static deserialize(e){return e==null?void 0:this._parser.parse(e)}};gw._parser=new p0({regexParsingWithErrorRecovery:!1});let Dt=gw;function XE(r){const e=new p0({regexParsingWithErrorRecovery:!1});return r.map(t=>(e.parse(t),e.lexingErrors.length>0?e.lexingErrors.map(i=>({errorMessage:i.additionalInfo?f("vs/platform/contextkey/common/contextkey","contextkey.scanner.errorForLinterWithHint","Unexpected token. Hint: {0}",i.additionalInfo):f("vs/platform/contextkey/common/contextkey","contextkey.scanner.errorForLinter","Unexpected token."),offset:i.offset,length:i.lexeme.length})):e.parsingErrors.length>0?e.parsingErrors.map(i=>({errorMessage:i.additionalInfo?`${i.message}. ${i.additionalInfo}`:i.message,offset:i.offset,length:i.lexeme.length})):[]))}function $c(r,e){return r.cmp(e)}const bp=class bp{constructor(){this.type=0}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return Qt.INSTANCE}};bp.INSTANCE=new bp;let Ut=bp;const yp=class yp{constructor(){this.type=1}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return Ut.INSTANCE}};yp.INSTANCE=new yp;let Qt=yp;class us{static create(e,t=null){const i=Tt.get(e);return typeof i=="boolean"?i?Qt.INSTANCE:Ut.INSTANCE:new us(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=2}cmp(e){return e.type!==this.type?this.type-e.type:m0(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Tt.get(this.key);return typeof e=="boolean"?e?Qt.INSTANCE:Ut.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=ds.create(this.key,this)),this.negated}}class Nc{static create(e,t,i=null){if(typeof t=="boolean")return t?us.create(e,i):ds.create(e,i);const n=Tt.get(e);return typeof n=="boolean"?t===(n?"true":"false")?Qt.INSTANCE:Ut.INSTANCE:new Nc(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=4}cmp(e){return e.type!==this.type?this.type-e.type:hs(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Tt.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Qt.INSTANCE:Ut.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Mc.create(this.key,this.value,this)),this.negated}}class _d{static create(e,t){return new _d(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=10,this.negated=null}cmp(e){return e.type!==this.type?this.type-e.type:hs(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.valueKey),i=e.getValue(this.key);return Array.isArray(t)?t.includes(i):typeof i=="string"&&typeof t=="object"&&t!==null?BE.call(t,i):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=wd.create(this.key,this.valueKey)),this.negated}}class wd{static create(e,t){return new wd(e,t)}constructor(e,t){this.key=e,this.valueKey=t,this.type=11,this._negated=_d.create(e,t)}cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}}class Mc{static create(e,t,i=null){if(typeof t=="boolean")return t?ds.create(e,i):us.create(e,i);const n=Tt.get(e);return typeof n=="boolean"?t===(n?"true":"false")?Ut.INSTANCE:Qt.INSTANCE:new Mc(e,t,i)}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=5}cmp(e){return e.type!==this.type?this.type-e.type:hs(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){const e=Tt.get(this.key);if(typeof e=="boolean"){const t=e?"true":"false";return this.value===t?Ut.INSTANCE:Qt.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Nc.create(this.key,this.value,this)),this.negated}}class ds{static create(e,t=null){const i=Tt.get(e);return typeof i=="boolean"?i?Ut.INSTANCE:Qt.INSTANCE:new ds(e,t)}constructor(e,t){this.key=e,this.negated=t,this.type=3}cmp(e){return e.type!==this.type?this.type-e.type:m0(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){const e=Tt.get(this.key);return typeof e=="boolean"?e?Ut.INSTANCE:Qt.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=us.create(this.key,this)),this.negated}}function bd(r,e){if(typeof r=="string"){const t=parseFloat(r);isNaN(t)||(r=t)}return typeof r=="string"||typeof r=="number"?e(r):Ut.INSTANCE}class Fc{static create(e,t,i=null){return bd(t,n=>new Fc(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=12}cmp(e){return e.type!==this.type?this.type-e.type:hs(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=Wc.create(this.key,this.value,this)),this.negated}}class Hc{static create(e,t,i=null){return bd(t,n=>new Hc(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=13}cmp(e){return e.type!==this.type?this.type-e.type:hs(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Uc.create(this.key,this.value,this)),this.negated}}class Uc{static create(e,t,i=null){return bd(t,n=>new Uc(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=14}cmp(e){return e.type!==this.type?this.type-e.type:hs(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=Hc.create(this.key,this.value,this)),this.negated}}class Wc{static create(e,t,i=null){return bd(t,n=>new Wc(e,n,i))}constructor(e,t,i){this.key=e,this.value=t,this.negated=i,this.type=15}cmp(e){return e.type!==this.type?this.type-e.type:hs(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Fc.create(this.key,this.value,this)),this.negated}}class Bc{static create(e,t){return new Bc(e,t)}constructor(e,t){this.key=e,this.regexp=t,this.type=7,this.negated=null}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return t<i?-1:t>i?1:0}equals(e){if(e.type===this.type){const t=this.regexp?this.regexp.source:"",i=e.regexp?e.regexp.source:"";return this.key===e.key&&t===i}return!1}substituteConstants(){return this}evaluate(e){const t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){const e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=yd.create(this)),this.negated}}class yd{static create(e){return new yd(e)}constructor(e){this._actual=e,this.type=8}cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}map(e){return new yd(this._actual.map(e))}negate(){return this._actual}}function g0(r){let e=null;for(let t=0,i=r.length;t<i;t++){const n=r[t].substituteConstants();if(r[t]!==n&&e===null){e=[];for(let s=0;s<t;s++)e[s]=r[s]}e!==null&&(e[t]=n)}return e===null?r:e}class vr{static create(e,t,i){return vr._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=6}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const n=$c(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=g0(this.expr);return e===this.expr?this:vr.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,i){const n=[];let s=!1;for(const o of e)if(o){if(o.type===1){s=!0;continue}if(o.type===0)return Ut.INSTANCE;if(o.type===6){n.push(...o.expr);continue}n.push(o)}if(n.length===0&&s)return Qt.INSTANCE;if(n.length!==0){if(n.length===1)return n[0];n.sort($c);for(let o=1;o<n.length;o++)n[o-1].equals(n[o])&&(n.splice(o,1),o--);if(n.length===1)return n[0];for(;n.length>1;){const o=n[n.length-1];if(o.type!==9)break;n.pop();const a=n.pop(),c=n.length===0,l=rn.create(o.expr.map(u=>vr.create([u,a],null,i)),null,c);l&&(n.push(l),n.sort($c))}if(n.length===1)return n[0];if(i){for(let o=0;o<n.length;o++)for(let a=o+1;a<n.length;a++)if(n[o].negate().equals(n[a]))return Ut.INSTANCE;if(n.length===1)return n[0]}return new vr(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new vr(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());this.negated=rn.create(e,this,!0)}return this.negated}}class rn{static create(e,t,i){return rn._normalizeArr(e,t,i)}constructor(e,t){this.expr=e,this.negated=t,this.type=9}cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,i=this.expr.length;t<i;t++){const n=$c(this.expr[t],e.expr[t]);if(n!==0)return n}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,i=this.expr.length;t<i;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){const e=g0(this.expr);return e===this.expr?this:rn.create(e,this.negated,!1)}evaluate(e){for(let t=0,i=this.expr.length;t<i;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,i){let n=[],s=!1;if(e){for(let o=0,a=e.length;o<a;o++){const c=e[o];if(c){if(c.type===0){s=!0;continue}if(c.type===1)return Qt.INSTANCE;if(c.type===9){n=n.concat(c.expr);continue}n.push(c)}}if(n.length===0&&s)return Ut.INSTANCE;n.sort($c)}if(n.length!==0){if(n.length===1)return n[0];for(let o=1;o<n.length;o++)n[o-1].equals(n[o])&&(n.splice(o,1),o--);if(n.length===1)return n[0];if(i){for(let o=0;o<n.length;o++)for(let a=o+1;a<n.length;a++)if(n[o].negate().equals(n[a]))return Qt.INSTANCE;if(n.length===1)return n[0]}return new rn(n,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){const e=[];for(const t of this.expr)e.push(...t.keys());return e}map(e){return new rn(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){const e=[];for(const t of this.expr)e.push(t.negate());for(;e.length>1;){const t=e.shift(),i=e.shift(),n=[];for(const s of v0(t))for(const o of v0(i))n.push(vr.create([s,o],null,!1));e.unshift(rn.create(n,null,!1))}this.negated=rn.create(e,this,!0)}return this.negated}}const qa=class qa extends us{static all(){return qa._info.values()}constructor(e,t,i){super(e,null),this._defaultValue=t,typeof i=="object"?qa._info.push({...i,key:e}):i!==!0&&qa._info.push({key:e,description:i,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Nc.create(this.key,e)}notEqualsTo(e){return Mc.create(this.key,e)}};qa._info=[];let Z=qa;const YE=ie("contextKeyService");function m0(r,e){return r<e?-1:r>e?1:0}function hs(r,e,t,i){return r<t?-1:r>t?1:e<i?-1:e>i?1:0}function v0(r){return r.type===9?r.expr:[r]}const Je=ie("logService"),No=ie("loggerService");function ZE(r){return fr(r)}var $e;(function(r){r[r.Off=0]="Off",r[r.Trace=1]="Trace",r[r.Debug=2]="Debug",r[r.Info=3]="Info",r[r.Warning=4]="Warning",r[r.Error=5]="Error"})($e||($e={}));const ek=$e.Info;function tk(r,e,t){switch(e){case $e.Trace:r.trace(t);break;case $e.Debug:r.debug(t);break;case $e.Info:r.info(t);break;case $e.Warning:r.warn(t);break;case $e.Error:r.error(t);break;case $e.Off:break;default:throw new Error(`Invalid log level ${e}`)}}function Mo(r,e=!1){let t="";for(let i=0;i<r.length;i++){let n=r[i];if(n instanceof Error&&(n=$o(n,e)),typeof n=="object")try{n=JSON.stringify(n)}catch{}t+=(i>0?" ":"")+n}return t}class _0 extends Ne{constructor(){super(...arguments),this.level=ek,this._onDidChangeLogLevel=this._register(new A),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event}setLevel(e){this.level!==e&&(this.level=e,this._onDidChangeLogLevel.fire(this.level))}getLevel(){return this.level}checkLogLevel(e){return this.level!==$e.Off&&this.level<=e}}class w0 extends _0{constructor(e){super(),this.logAlways=e}checkLogLevel(e){return this.logAlways||super.checkLogLevel(e)}trace(e,...t){this.checkLogLevel($e.Trace)&&this.log($e.Trace,Mo([e,...t],!0))}debug(e,...t){this.checkLogLevel($e.Debug)&&this.log($e.Debug,Mo([e,...t]))}info(e,...t){this.checkLogLevel($e.Info)&&this.log($e.Info,Mo([e,...t]))}warn(e,...t){this.checkLogLevel($e.Warning)&&this.log($e.Warning,Mo([e,...t]))}error(e,...t){if(this.checkLogLevel($e.Error))if(e instanceof Error){const i=Array.prototype.slice.call(arguments);i[0]=e.stack,this.log($e.Error,Mo(i))}else this.log($e.Error,Mo([e,...t]))}flush(){}}class ik extends _0{constructor(e){super(),this.loggers=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.loggers)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.loggers)i.trace(e,...t)}debug(e,...t){for(const i of this.loggers)i.debug(e,...t)}info(e,...t){for(const i of this.loggers)i.info(e,...t)}warn(e,...t){for(const i of this.loggers)i.warn(e,...t)}error(e,...t){for(const i of this.loggers)i.error(e,...t)}flush(){for(const e of this.loggers)e.flush()}dispose(){for(const e of this.loggers)e.dispose();super.dispose()}}class nk extends Ne{constructor(e,t,i){if(super(),this.logLevel=e,this.logsHome=t,this._loggers=new mt,this._onDidChangeLoggers=this._register(new A),this.onDidChangeLoggers=this._onDidChangeLoggers.event,this._onDidChangeLogLevel=this._register(new A),this.onDidChangeLogLevel=this._onDidChangeLogLevel.event,this._onDidChangeVisibility=this._register(new A),this.onDidChangeVisibility=this._onDidChangeVisibility.event,i)for(const n of i)this._loggers.set(n.resource,{logger:void 0,info:n})}getLoggerEntry(e){return Oe(e)?[...this._loggers.values()].find(t=>t.info.id===e):this._loggers.get(e)}getLogger(e){var t;return(t=this.getLoggerEntry(e))==null?void 0:t.logger}createLogger(e,t){var c;const i=this.toResource(e),n=Oe(e)?e:(t==null?void 0:t.id)??Fg(i.toString()).toString(16);let s=(c=this._loggers.get(i))==null?void 0:c.logger;const o=(t==null?void 0:t.logLevel)==="always"?$e.Trace:t==null?void 0:t.logLevel;s||(s=this.doCreateLogger(i,o??this.getLogLevel(i)??this.logLevel,{...t,id:n}));const a={logger:s,info:{resource:i,id:n,logLevel:o,name:t==null?void 0:t.name,hidden:t==null?void 0:t.hidden,extensionId:t==null?void 0:t.extensionId,when:t==null?void 0:t.when}};return this.registerLogger(a.info),this._loggers.set(i,a),s}toResource(e){return Oe(e)?Lo(this.logsHome,`${e}.log`):e}setLogLevel(e,t){var i,n,s;if(y.isUri(e)){const o=e,a=t,c=this._loggers.get(o);c&&a!==c.info.logLevel&&(c.info.logLevel=a===this.logLevel?void 0:a,(i=c.logger)==null||i.setLevel(a),this._loggers.set(c.info.resource,c),this._onDidChangeLogLevel.fire([o,a]))}else{this.logLevel=e;for(const[o,a]of this._loggers.entries())((n=this._loggers.get(o))==null?void 0:n.info.logLevel)===void 0&&((s=a.logger)==null||s.setLevel(this.logLevel));this._onDidChangeLogLevel.fire(this.logLevel)}}setVisibility(e,t){const i=this.getLoggerEntry(e);i&&t!==!i.info.hidden&&(i.info.hidden=!t,this._loggers.set(i.info.resource,i),this._onDidChangeVisibility.fire([i.info.resource,t]))}getLogLevel(e){var i;let t;return e&&(t=(i=this._loggers.get(e))==null?void 0:i.info.logLevel),t??this.logLevel}registerLogger(e){const t=this._loggers.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this._loggers.set(e.resource,{info:e,logger:void 0}),this._onDidChangeLoggers.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this._loggers.get(e);t&&(t.logger&&t.logger.dispose(),this._loggers.delete(e),this._onDidChangeLoggers.fire({added:[],removed:[t.info]}))}*getRegisteredLoggers(){for(const e of this._loggers.values())yield e.info}getRegisteredLogger(e){var t;return(t=this._loggers.get(e))==null?void 0:t.info}dispose(){this._loggers.forEach(e=>{var t;return(t=e.logger)==null?void 0:t.dispose()}),this._loggers.clear(),super.dispose()}}function rk(r){switch(r){case $e.Trace:return"trace";case $e.Debug:return"debug";case $e.Info:return"info";case $e.Warning:return"warn";case $e.Error:return"error";case $e.Off:return"off"}}function sk(r){switch(r){case"trace":return $e.Trace;case"debug":return $e.Debug;case"info":return $e.Info;case"warn":return $e.Warning;case"error":return $e.Error;case"critical":return $e.Error;case"off":return $e.Off}}new Z("logLevel",rk($e.Info));class sn{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}}const b0=[];function tt(r,e,t){e instanceof sn||(e=new sn(e,[],!!t)),b0.push([r,e])}function ok(){return b0}class Bg{constructor(...e){this._entries=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this._entries.get(e);return this._entries.set(e,t),i}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}}const Wt=ie("IExtHostInitDataService");let ak=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}};class y0{constructor(e){this._hashFn=e,this._nodes=new Map}roots(){const e=[];for(const t of this._nodes.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),n=this.lookupOrInsertNode(t);i.outgoing.set(n.key,n),n.incoming.set(i.key,i)}removeNode(e){const t=this._hashFn(e);this._nodes.delete(t);for(const i of this._nodes.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this._hashFn(e);let i=this._nodes.get(t);return i||(i=new ak(t,e),this._nodes.set(t,i)),i}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){const e=[];for(const[t,i]of this._nodes)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this._nodes){const i=new Set([e]),n=this._findCycle(t,i);if(n)return n}}_findCycle(e,t){for(const[i,n]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const s=this._findCycle(n,t);if(s)return s;t.delete(i)}}}const ck=!1;class x0 extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}}class xd{constructor(e=new Bg,t=!1,i,n=ck){this._services=e,this._strict=t,this._parent=i,this._enableTracing=n,this._activeInstantiations=new Set,this._services.set(vd,this),this._globalGraph=n?(i==null?void 0:i._globalGraph)??new y0(s=>s):void 0}createChild(e){return new xd(e,this._strict,this,this._enableTracing)}invokeFunction(e,...t){const i=Vc.traceInvocation(this._enableTracing,e);let n=!1;try{return e({get:o=>{if(n)throw Yp("service accessor is only valid during the invocation of its target method");const a=this._getOrCreateServiceInstance(o,i);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...t)}finally{n=!0,i.stop()}}createInstance(e,...t){let i,n;return e instanceof sn?(i=Vc.traceCreation(this._enableTracing,e.ctor),n=this._createInstance(e.ctor,e.staticArguments.concat(t),i)):(i=Vc.traceCreation(this._enableTracing,e),n=this._createInstance(e,t,i)),i.stop(),n}_createInstance(e,t=[],i){const n=Vi.getServiceDependencies(e).sort((a,c)=>a.index-c.index),s=[];for(const a of n){const c=this._getOrCreateServiceInstance(a.id,i);c||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${a.id}.`,!1),s.push(c)}const o=n.length>0?n[0].index:t.length;if(t.length!==o){console.trace(`[createInstance] First service dependency of ${e.name} at position ${o+1} conflicts with ${t.length} static arguments`);const a=o-t.length;a>0?t=t.concat(new Array(a)):t=t.slice(0,o)}return Reflect.construct(e,t.concat(s))}_setServiceInstance(e,t){if(this._services.get(e)instanceof sn)this._services.set(e,t);else if(this._parent)this._parent._setServiceInstance(e,t);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){const t=this._services.get(e);return!t&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):t}_getOrCreateServiceInstance(e,t){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));const i=this._getServiceInstanceOrDescriptor(e);return i instanceof sn?this._safeCreateAndCacheServiceInstance(e,i,t.branch(e,!0)):(t.branch(e,!1),i)}_safeCreateAndCacheServiceInstance(e,t,i){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,t,i)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,t,i){var a;const n=new y0(c=>c.id.toString());let s=0;const o=[{id:e,desc:t,_trace:i}];for(;o.length;){const c=o.pop();if(n.lookupOrInsertNode(c),s++>1e3)throw new x0(n);for(const l of Vi.getServiceDependencies(c.desc.ctor)){const u=this._getServiceInstanceOrDescriptor(l.id);if(u||this._throwIfStrict(`[createInstance] ${e} depends on ${l.id} which is NOT registered.`,!0),(a=this._globalGraph)==null||a.insertEdge(String(c.id),String(l.id)),u instanceof sn){const d={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};n.lookup(d)||o.push(d),n.insertEdge(c,d)}}}for(;;){const c=n.roots();if(c.length===0){if(!n.isEmpty())throw new x0(n);break}for(const{data:l}of c){if(this._getServiceInstanceOrDescriptor(l.id)instanceof sn){const d=this._createServiceInstanceWithOwner(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this._setServiceInstance(l.id,d)}n.removeNode(l)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,t,i=[],n,s){if(this._services.get(e)instanceof sn)return this._createServiceInstance(e,t,i,n,s);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,t,i,n,s);throw new Error(`illegalState - creating UNKNOWN service instance ${t.name}`)}_createServiceInstance(e,t,i=[],n,s){if(n){const o=new xd(void 0,this._strict,this,this._enableTracing);o._globalGraphImplicitDependency=String(e);const a=new Map,c=new DE(()=>{const l=o._createInstance(t,i,s);for(const[u,d]of a){const h=l[u];if(typeof h=="function")for(const g of d)g.disposable=h.apply(l,g.listener)}return a.clear(),l});return new Proxy(Object.create(null),{get(l,u){if(!c.isInitialized&&typeof u=="string"&&(u.startsWith("onDid")||u.startsWith("onWill"))){let g=a.get(u);return g||(g=new Sc,a.set(u,g)),(_,v,E)=>{if(c.isInitialized)return c.value[u](_,v,E);{const k={listener:[_,v,E],disposable:void 0},S=g.push(k);return Ce(()=>{var T;S(),(T=k.disposable)==null||T.dispose()})}}}if(u in l)return l[u];const d=c.value;let h=d[u];return typeof h!="function"||(h=h.bind(d),l[u]=h),h},set(l,u,d){return c.value[u]=d,!0},getPrototypeOf(l){return t.prototype}})}else return this._createInstance(t,i,s)}_throwIfStrict(e,t){if(t&&console.warn(e),this._strict)throw new Error(e)}}const mi=class mi{static traceInvocation(e,t){return e?new mi(2,t.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):mi._None}static traceCreation(e,t){return e?new mi(1,t.name):mi._None}constructor(e,t){this.type=e,this.name=t,this._start=Date.now(),this._dep=[]}branch(e,t){const i=new mi(3,e.toString());return this._dep.push([e,t,i]),i}stop(){const e=Date.now()-this._start;mi._totals+=e;let t=!1;function i(s,o){const a=[],c=new Array(s+1).join("	");for(const[l,u,d]of o._dep)if(u&&d){t=!0,a.push(`${c}CREATES -> ${l}`);const h=i(s+1,d);h&&a.push(h)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const n=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${i(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${mi._totals.toFixed(2)}ms)`];(e>2||t)&&mi.all.add(n.join(`
`))}};mi.all=new Set,mi._None=new class extends mi{constructor(){super(0,null)}stop(){}branch(){return this}},mi._totals=0;let Vc=mi;const We=ie("IExtHostRpcService");class lk{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}}const Cd=ie("IURITransformerService");class uk{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}}function H(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}function $(r,e){return function(t,i){e(t,i,r)}}class dk{constructor(){this._value="",this._pos=0}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const t=e.charCodeAt(0),i=this._value.charCodeAt(this._pos);return t-i}value(){return this._value[this._pos]}}class hk{constructor(e=!0){this._caseSensitive=e}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?yg(e,this._value,0,e.length,this._from,this._to):Pc(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class C0{constructor(e=!0,t=!0){this._splitOnBackslash=e,this._caseSensitive=t}reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){const i=this._value.charCodeAt(t);if(!(i===47||this._splitOnBackslash&&i===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){const t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?yg(e,this._value,0,e.length,this._from,this._to):Pc(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class fk{constructor(e,t){this._ignorePathCasing=e,this._ignoreQueryAndFragment=t,this._states=[],this._stateIdx=0}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new C0(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return Nb(e,this._value.scheme);if(this._states[this._stateIdx]===2)return Nb(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return ss(e,this._value.query);if(this._states[this._stateIdx]===5)return ss(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class Sd{constructor(){this.height=1}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){var e;return((e=this.left)==null?void 0:e.height)??0}get heightRight(){var e;return((e=this.right)==null?void 0:e.height)??0}}class Pi{static forUris(e=()=>!1,t=()=>!1){return new Pi(new fk(e,t))}static forPaths(e=!1){return new Pi(new C0(void 0,!e))}static forStrings(){return new Pi(new dk)}static forConfigKeys(){return new Pi(new hk)}constructor(e){this._iter=e}clear(){this._root=void 0}fill(e,t){if(t){const i=t.slice(0);Gw(i);for(const n of i)this.set(n,e)}else{const i=e.slice(0);Gw(i);for(const n of i)this.set(n[0],n[1])}}set(e,t){const i=this._iter.reset(e);let n;this._root||(this._root=new Sd,this._root.segment=i.value());const s=[];for(n=this._root;;){const a=i.cmp(n.segment);if(a>0)n.left||(n.left=new Sd,n.left.segment=i.value()),s.push([-1,n]),n=n.left;else if(a<0)n.right||(n.right=new Sd,n.right.segment=i.value()),s.push([1,n]),n=n.right;else if(i.hasNext())i.next(),n.mid||(n.mid=new Sd,n.mid.segment=i.value()),s.push([0,n]),n=n.mid;else break}const o=n.value;n.value=t,n.key=e;for(let a=s.length-1;a>=0;a--){const c=s[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=s[a][0],d=s[a+1][0];if(u===1&&d===1)s[a][1]=c.rotateLeft();else if(u===-1&&d===-1)s[a][1]=c.rotateRight();else if(u===1&&d===-1)c.right=s[a+1][1]=s[a+1][1].rotateRight(),s[a][1]=c.rotateLeft();else if(u===-1&&d===1)c.left=s[a+1][1]=s[a+1][1].rotateLeft(),s[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(s[a-1][0]){case-1:s[a-1][1].left=s[a][1];break;case 1:s[a-1][1].right=s[a][1];break;case 0:s[a-1][1].mid=s[a][1];break}else this._root=s[0][1]}}return o}get(e){var t;return(t=this._getNode(e))==null?void 0:t.value}_getNode(e){const t=this._iter.reset(e);let i=this._root;for(;i;){const n=t.cmp(i.segment);if(n>0)i=i.left;else if(n<0)i=i.right;else if(t.hasNext())t.next(),i=i.mid;else break}return i}has(e){const t=this._getNode(e);return!((t==null?void 0:t.value)===void 0&&(t==null?void 0:t.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){const i=this._iter.reset(e),n=[];let s=this._root;for(;s;){const o=i.cmp(s.segment);if(o>0)n.push([-1,s]),s=s.left;else if(o<0)n.push([1,s]),s=s.right;else if(i.hasNext())i.next(),n.push([0,s]),s=s.mid;else break}if(s){if(t?(s.left=void 0,s.mid=void 0,s.right=void 0,s.height=1):(s.key=void 0,s.value=void 0),!s.mid&&!s.value)if(s.left&&s.right){const o=this._min(s.right);if(o.key){const{key:a,value:c,segment:l}=o;this._delete(o.key,!1),s.key=a,s.value=c,s.segment=l}}else{const o=s.left??s.right;if(n.length>0){const[a,c]=n[n.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this._root=o}for(let o=n.length-1;o>=0;o--){const a=n[o][1];a.updateHeight();const c=a.balanceFactor();if(c>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),n[o][1]=a.rotateLeft()):c<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),n[o][1]=a.rotateRight()),o>0)switch(n[o-1][0]){case-1:n[o-1][1].left=n[o][1];break;case 1:n[o-1][1].right=n[o][1];break;case 0:n[o-1][1].mid=n[o][1];break}else this._root=n[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){const t=this._iter.reset(e);let i=this._root,n;for(;i;){const s=t.cmp(i.segment);if(s>0)i=i.left;else if(s<0)i=i.right;else if(t.hasNext())t.next(),n=i.value||n,i=i.mid;else break}return i&&i.value||n}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){const i=this._iter.reset(e);let n=this._root;for(;n;){const s=i.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(i.hasNext())i.next(),n=n.mid;else return n.mid?this._entries(n.mid):t?n.value:void 0}}hasElementOrSubtree(e){return this._findSuperstrOrElement(e,!0)!==void 0}forEach(e){for(const[t,i]of this)e(i,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){const t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}_isBalanced(){const e=t=>{if(!t)return!0;const i=t.balanceFactor();return i<-1||i>1?!1:e(t.left)&&e(t.right)};return e(this._root)}}function rt(r){if(!r||typeof r!="object"||r instanceof RegExp)return r;const e=Array.isArray(r)?[]:{};return Object.entries(r).forEach(([t,i])=>{e[t]=i&&typeof i=="object"?rt(i):i}),e}function S0(r){if(!r||typeof r!="object")return r;const e=[r];for(;e.length>0;){const t=e.shift();for(const i in t)if(E0.call(t,i)){const n=t[i];typeof n=="object"&&!Object.isFrozen(n)&&!Y4(n)&&e.push(n)}}return r}const E0=Object.prototype.hasOwnProperty;function Ed(r,e){return Vg(r,e,new Set)}function Vg(r,e,t){if(Gt(r))return r;const i=e(r);if(typeof i<"u")return i;if(Array.isArray(r)){const n=[];for(const s of r)n.push(Vg(s,e,t));return n}if(Ft(r)){if(t.has(r))throw new Error("Cannot clone recursive data-structure");t.add(r);const n={};for(const s in r)E0.call(r,s)&&(n[s]=Vg(r[s],e,t));return t.delete(r),n}return r}function fs(r,e,t=!0){return Ft(r)?(Ft(e)&&Object.keys(e).forEach(i=>{i in r?t&&(Ft(r[i])&&Ft(e[i])?fs(r[i],e[i],t):r[i]=e[i]):r[i]=e[i]}),r):e}function zi(r,e){if(r===e)return!0;if(r==null||e===null||e===void 0||typeof r!=typeof e||typeof r!="object"||Array.isArray(r)!==Array.isArray(e))return!1;let t,i;if(Array.isArray(r)){if(r.length!==e.length)return!1;for(t=0;t<r.length;t++)if(!zi(r[t],e[t]))return!1}else{const n=[];for(i in r)n.push(i);n.sort();const s=[];for(i in e)s.push(i);if(s.sort(),!zi(n,s))return!1;for(t=0;t<n.length;t++)if(!zi(r[n[t]],e[n[t]]))return!1}return!0}function pk(r){const e=new Set;return JSON.stringify(r,(t,i)=>{if(Ft(i)||Array.isArray(i)){if(e.has(i))return"[Circular]";e.add(i)}return i})}function k0(r,e){const t=Object.create(null);for(const[i,n]of Object.entries(r))e(i,n)&&(t[i]=n);return t}class gk{constructor(){this._next=0}getNext(){return this._next++}}var zc;(function(r){r[r.Ignore=0]="Ignore",r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error"})(zc||(zc={})),function(r){const e="error",t="warning",i="warn",n="info",s="ignore";function o(c){return c?os(e,c)?r.Error:os(t,c)||os(i,c)?r.Warning:os(n,c)?r.Info:r.Ignore:r.Ignore}r.fromValue=o;function a(c){switch(c){case r.Error:return e;case r.Warning:return t;case r.Info:return n;default:return s}}r.toString=a}(zc||(zc={}));var pt=zc,mk=pt;ie("notificationService");var D0;(function(r){r[r.DEFAULT=0]="DEFAULT",r[r.SILENT=1]="SILENT",r[r.URGENT=2]="URGENT"})(D0||(D0={}));var I0;(function(r){r[r.WORKSPACE=0]="WORKSPACE",r[r.PROFILE=1]="PROFILE",r[r.APPLICATION=2]="APPLICATION"})(I0||(I0={}));var P0;(function(r){r[r.OFF=0]="OFF",r[r.ERROR=1]="ERROR"})(P0||(P0={}));const zg=ie("contextService");let vk=class{constructor(e,t,i,n,s){this._id=e,this._transient=i,this._configuration=n,this._ignorePathCasing=s,this._foldersMap=Pi.forUris(this._ignorePathCasing,()=>!0),this.folders=t}update(e){this._id=e.id,this._configuration=e.configuration,this._transient=e.transient,this._ignorePathCasing=e._ignorePathCasing,this.folders=e.folders}get folders(){return this._folders}set folders(e){this._folders=e,this.updateFoldersMap()}get id(){return this._id}get transient(){return this._transient}get configuration(){return this._configuration}set configuration(e){this._configuration=e}getFolder(e){return e&&this._foldersMap.findSubstr(e)||null}updateFoldersMap(){this._foldersMap=Pi.forUris(this._ignorePathCasing,()=>!0);for(const e of this.folders)this._foldersMap.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}};class T0{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Lo(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}}function A0(r){return new T0({uri:r,index:0,name:Ig(r)},{uri:r.toString()})}const _k="code-workspace";f("vs/platform/workspace/common/workspace","codeWorkspace","Code Workspace");class wk{constructor(){this._systemSchemes=new Set(Object.keys(Y)),this._providerInfo=new Map,this.extUri=new Tc(e=>{const t=this._providerInfo.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this._providerInfo.delete(e.scheme):this._providerInfo.set(e.scheme,t)}isFreeScheme(e){return!this._providerInfo.has(e)&&!this._systemSchemes.has(e)}getCapabilities(e){return this._providerInfo.get(e)}}const Fo=ie("IExtHostFileSystemInfo"),En=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let r;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?r=crypto.getRandomValues.bind(crypto):r=function(i){for(let n=0;n<i.length;n++)i[n]=Math.floor(Math.random()*256);return i};const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){r(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let n=0,s="";return s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+="-",s+=t[e[n++]],s+=t[e[n++]],s+="-",s+=t[e[n++]],s+=t[e[n++]],s+="-",s+=t[e[n++]],s+=t[e[n++]],s+="-",s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s+=t[e[n++]],s}}(),jg=Object.freeze({create:r=>Eo(r.map(e=>e.toString())).join(`\r
`),split:r=>r.split(`\r
`),parse:r=>jg.split(r).filter(e=>!e.startsWith("#"))});R0.bind(void 0,!1),R0.bind(void 0,!0);function R0(r,e,t){if(!t||t.length<e.length)return null;let i;return r?i=xg(t,e):i=t.indexOf(e)===0,i?e.length>0?[{start:0,end:e.length}]:[]:null}const bk=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(r=>bk.add(r.charCodeAt(0))),new ig(1e4);const L0=128;function qg(){const r=[],e=[];for(let t=0;t<=L0;t++)e[t]=0;for(let t=0;t<=L0;t++)r.push(e.slice(0));return r}qg(),qg(),qg();var O0;(function(r){r.Default=[-100,0];function e(t){return!t||t.length===2&&t[0]===-100&&t[1]===0}r.isDefault=e})(O0||(O0={}));const mw=class mw{constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}};mw.default={boostFullMatch:!0,firstMatchCanBeWeak:!1};let $0=mw;const Gg=Object.create(null);function p(r,e){if(Oe(e)){const t=Gg[e];if(t===void 0)throw new Error(`${r} references an unknown codicon: ${e}`);e=t}return Gg[r]=e,{id:r}}function yk(){return Gg}const xk={add:p("add",6e4),plus:p("plus",6e4),gistNew:p("gist-new",6e4),repoCreate:p("repo-create",6e4),lightbulb:p("lightbulb",60001),lightBulb:p("light-bulb",60001),repo:p("repo",60002),repoDelete:p("repo-delete",60002),gistFork:p("gist-fork",60003),repoForked:p("repo-forked",60003),gitPullRequest:p("git-pull-request",60004),gitPullRequestAbandoned:p("git-pull-request-abandoned",60004),recordKeys:p("record-keys",60005),keyboard:p("keyboard",60005),tag:p("tag",60006),gitPullRequestLabel:p("git-pull-request-label",60006),tagAdd:p("tag-add",60006),tagRemove:p("tag-remove",60006),person:p("person",60007),personFollow:p("person-follow",60007),personOutline:p("person-outline",60007),personFilled:p("person-filled",60007),gitBranch:p("git-branch",60008),gitBranchCreate:p("git-branch-create",60008),gitBranchDelete:p("git-branch-delete",60008),sourceControl:p("source-control",60008),mirror:p("mirror",60009),mirrorPublic:p("mirror-public",60009),star:p("star",60010),starAdd:p("star-add",60010),starDelete:p("star-delete",60010),starEmpty:p("star-empty",60010),comment:p("comment",60011),commentAdd:p("comment-add",60011),alert:p("alert",60012),warning:p("warning",60012),search:p("search",60013),searchSave:p("search-save",60013),logOut:p("log-out",60014),signOut:p("sign-out",60014),logIn:p("log-in",60015),signIn:p("sign-in",60015),eye:p("eye",60016),eyeUnwatch:p("eye-unwatch",60016),eyeWatch:p("eye-watch",60016),circleFilled:p("circle-filled",60017),primitiveDot:p("primitive-dot",60017),closeDirty:p("close-dirty",60017),debugBreakpoint:p("debug-breakpoint",60017),debugBreakpointDisabled:p("debug-breakpoint-disabled",60017),debugHint:p("debug-hint",60017),terminalDecorationSuccess:p("terminal-decoration-success",60017),primitiveSquare:p("primitive-square",60018),edit:p("edit",60019),pencil:p("pencil",60019),info:p("info",60020),issueOpened:p("issue-opened",60020),gistPrivate:p("gist-private",60021),gitForkPrivate:p("git-fork-private",60021),lock:p("lock",60021),mirrorPrivate:p("mirror-private",60021),close:p("close",60022),removeClose:p("remove-close",60022),x:p("x",60022),repoSync:p("repo-sync",60023),sync:p("sync",60023),clone:p("clone",60024),desktopDownload:p("desktop-download",60024),beaker:p("beaker",60025),microscope:p("microscope",60025),vm:p("vm",60026),deviceDesktop:p("device-desktop",60026),file:p("file",60027),fileText:p("file-text",60027),more:p("more",60028),ellipsis:p("ellipsis",60028),kebabHorizontal:p("kebab-horizontal",60028),mailReply:p("mail-reply",60029),reply:p("reply",60029),organization:p("organization",60030),organizationFilled:p("organization-filled",60030),organizationOutline:p("organization-outline",60030),newFile:p("new-file",60031),fileAdd:p("file-add",60031),newFolder:p("new-folder",60032),fileDirectoryCreate:p("file-directory-create",60032),trash:p("trash",60033),trashcan:p("trashcan",60033),history:p("history",60034),clock:p("clock",60034),folder:p("folder",60035),fileDirectory:p("file-directory",60035),symbolFolder:p("symbol-folder",60035),logoGithub:p("logo-github",60036),markGithub:p("mark-github",60036),github:p("github",60036),terminal:p("terminal",60037),console:p("console",60037),repl:p("repl",60037),zap:p("zap",60038),symbolEvent:p("symbol-event",60038),error:p("error",60039),stop:p("stop",60039),variable:p("variable",60040),symbolVariable:p("symbol-variable",60040),array:p("array",60042),symbolArray:p("symbol-array",60042),symbolModule:p("symbol-module",60043),symbolPackage:p("symbol-package",60043),symbolNamespace:p("symbol-namespace",60043),symbolObject:p("symbol-object",60043),symbolMethod:p("symbol-method",60044),symbolFunction:p("symbol-function",60044),symbolConstructor:p("symbol-constructor",60044),symbolBoolean:p("symbol-boolean",60047),symbolNull:p("symbol-null",60047),symbolNumeric:p("symbol-numeric",60048),symbolNumber:p("symbol-number",60048),symbolStructure:p("symbol-structure",60049),symbolStruct:p("symbol-struct",60049),symbolParameter:p("symbol-parameter",60050),symbolTypeParameter:p("symbol-type-parameter",60050),symbolKey:p("symbol-key",60051),symbolText:p("symbol-text",60051),symbolReference:p("symbol-reference",60052),goToFile:p("go-to-file",60052),symbolEnum:p("symbol-enum",60053),symbolValue:p("symbol-value",60053),symbolRuler:p("symbol-ruler",60054),symbolUnit:p("symbol-unit",60054),activateBreakpoints:p("activate-breakpoints",60055),archive:p("archive",60056),arrowBoth:p("arrow-both",60057),arrowDown:p("arrow-down",60058),arrowLeft:p("arrow-left",60059),arrowRight:p("arrow-right",60060),arrowSmallDown:p("arrow-small-down",60061),arrowSmallLeft:p("arrow-small-left",60062),arrowSmallRight:p("arrow-small-right",60063),arrowSmallUp:p("arrow-small-up",60064),arrowUp:p("arrow-up",60065),bell:p("bell",60066),bold:p("bold",60067),book:p("book",60068),bookmark:p("bookmark",60069),debugBreakpointConditionalUnverified:p("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:p("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:p("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:p("debug-breakpoint-data-unverified",60072),debugBreakpointData:p("debug-breakpoint-data",60073),debugBreakpointDataDisabled:p("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:p("debug-breakpoint-log-unverified",60074),debugBreakpointLog:p("debug-breakpoint-log",60075),debugBreakpointLogDisabled:p("debug-breakpoint-log-disabled",60075),briefcase:p("briefcase",60076),broadcast:p("broadcast",60077),browser:p("browser",60078),bug:p("bug",60079),calendar:p("calendar",60080),caseSensitive:p("case-sensitive",60081),check:p("check",60082),checklist:p("checklist",60083),chevronDown:p("chevron-down",60084),chevronLeft:p("chevron-left",60085),chevronRight:p("chevron-right",60086),chevronUp:p("chevron-up",60087),chromeClose:p("chrome-close",60088),chromeMaximize:p("chrome-maximize",60089),chromeMinimize:p("chrome-minimize",60090),chromeRestore:p("chrome-restore",60091),circleOutline:p("circle-outline",60092),circle:p("circle",60092),debugBreakpointUnverified:p("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:p("terminal-decoration-incomplete",60092),circleSlash:p("circle-slash",60093),circuitBoard:p("circuit-board",60094),clearAll:p("clear-all",60095),clippy:p("clippy",60096),closeAll:p("close-all",60097),cloudDownload:p("cloud-download",60098),cloudUpload:p("cloud-upload",60099),code:p("code",60100),collapseAll:p("collapse-all",60101),colorMode:p("color-mode",60102),commentDiscussion:p("comment-discussion",60103),creditCard:p("credit-card",60105),dash:p("dash",60108),dashboard:p("dashboard",60109),database:p("database",60110),debugContinue:p("debug-continue",60111),debugDisconnect:p("debug-disconnect",60112),debugPause:p("debug-pause",60113),debugRestart:p("debug-restart",60114),debugStart:p("debug-start",60115),debugStepInto:p("debug-step-into",60116),debugStepOut:p("debug-step-out",60117),debugStepOver:p("debug-step-over",60118),debugStop:p("debug-stop",60119),debug:p("debug",60120),deviceCameraVideo:p("device-camera-video",60121),deviceCamera:p("device-camera",60122),deviceMobile:p("device-mobile",60123),diffAdded:p("diff-added",60124),diffIgnored:p("diff-ignored",60125),diffModified:p("diff-modified",60126),diffRemoved:p("diff-removed",60127),diffRenamed:p("diff-renamed",60128),diff:p("diff",60129),diffSidebyside:p("diff-sidebyside",60129),discard:p("discard",60130),editorLayout:p("editor-layout",60131),emptyWindow:p("empty-window",60132),exclude:p("exclude",60133),extensions:p("extensions",60134),eyeClosed:p("eye-closed",60135),fileBinary:p("file-binary",60136),fileCode:p("file-code",60137),fileMedia:p("file-media",60138),filePdf:p("file-pdf",60139),fileSubmodule:p("file-submodule",60140),fileSymlinkDirectory:p("file-symlink-directory",60141),fileSymlinkFile:p("file-symlink-file",60142),fileZip:p("file-zip",60143),files:p("files",60144),filter:p("filter",60145),flame:p("flame",60146),foldDown:p("fold-down",60147),foldUp:p("fold-up",60148),fold:p("fold",60149),folderActive:p("folder-active",60150),folderOpened:p("folder-opened",60151),gear:p("gear",60152),gift:p("gift",60153),gistSecret:p("gist-secret",60154),gist:p("gist",60155),gitCommit:p("git-commit",60156),gitCompare:p("git-compare",60157),compareChanges:p("compare-changes",60157),gitMerge:p("git-merge",60158),githubAction:p("github-action",60159),githubAlt:p("github-alt",60160),globe:p("globe",60161),grabber:p("grabber",60162),graph:p("graph",60163),gripper:p("gripper",60164),heart:p("heart",60165),home:p("home",60166),horizontalRule:p("horizontal-rule",60167),hubot:p("hubot",60168),inbox:p("inbox",60169),issueReopened:p("issue-reopened",60171),issues:p("issues",60172),italic:p("italic",60173),jersey:p("jersey",60174),json:p("json",60175),kebabVertical:p("kebab-vertical",60176),key:p("key",60177),law:p("law",60178),lightbulbAutofix:p("lightbulb-autofix",60179),linkExternal:p("link-external",60180),link:p("link",60181),listOrdered:p("list-ordered",60182),listUnordered:p("list-unordered",60183),liveShare:p("live-share",60184),loading:p("loading",60185),location:p("location",60186),mailRead:p("mail-read",60187),mail:p("mail",60188),markdown:p("markdown",60189),megaphone:p("megaphone",60190),mention:p("mention",60191),milestone:p("milestone",60192),gitPullRequestMilestone:p("git-pull-request-milestone",60192),mortarBoard:p("mortar-board",60193),move:p("move",60194),multipleWindows:p("multiple-windows",60195),mute:p("mute",60196),noNewline:p("no-newline",60197),note:p("note",60198),octoface:p("octoface",60199),openPreview:p("open-preview",60200),package:p("package",60201),paintcan:p("paintcan",60202),pin:p("pin",60203),play:p("play",60204),run:p("run",60204),plug:p("plug",60205),preserveCase:p("preserve-case",60206),preview:p("preview",60207),project:p("project",60208),pulse:p("pulse",60209),question:p("question",60210),quote:p("quote",60211),radioTower:p("radio-tower",60212),reactions:p("reactions",60213),references:p("references",60214),refresh:p("refresh",60215),regex:p("regex",60216),remoteExplorer:p("remote-explorer",60217),remote:p("remote",60218),remove:p("remove",60219),replaceAll:p("replace-all",60220),replace:p("replace",60221),repoClone:p("repo-clone",60222),repoForcePush:p("repo-force-push",60223),repoPull:p("repo-pull",60224),repoPush:p("repo-push",60225),report:p("report",60226),requestChanges:p("request-changes",60227),rocket:p("rocket",60228),rootFolderOpened:p("root-folder-opened",60229),rootFolder:p("root-folder",60230),rss:p("rss",60231),ruby:p("ruby",60232),saveAll:p("save-all",60233),saveAs:p("save-as",60234),save:p("save",60235),screenFull:p("screen-full",60236),screenNormal:p("screen-normal",60237),searchStop:p("search-stop",60238),server:p("server",60240),settingsGear:p("settings-gear",60241),settings:p("settings",60242),shield:p("shield",60243),smiley:p("smiley",60244),sortPrecedence:p("sort-precedence",60245),splitHorizontal:p("split-horizontal",60246),splitVertical:p("split-vertical",60247),squirrel:p("squirrel",60248),starFull:p("star-full",60249),starHalf:p("star-half",60250),symbolClass:p("symbol-class",60251),symbolColor:p("symbol-color",60252),symbolConstant:p("symbol-constant",60253),symbolEnumMember:p("symbol-enum-member",60254),symbolField:p("symbol-field",60255),symbolFile:p("symbol-file",60256),symbolInterface:p("symbol-interface",60257),symbolKeyword:p("symbol-keyword",60258),symbolMisc:p("symbol-misc",60259),symbolOperator:p("symbol-operator",60260),symbolProperty:p("symbol-property",60261),wrench:p("wrench",60261),wrenchSubaction:p("wrench-subaction",60261),symbolSnippet:p("symbol-snippet",60262),tasklist:p("tasklist",60263),telescope:p("telescope",60264),textSize:p("text-size",60265),threeBars:p("three-bars",60266),thumbsdown:p("thumbsdown",60267),thumbsup:p("thumbsup",60268),tools:p("tools",60269),triangleDown:p("triangle-down",60270),triangleLeft:p("triangle-left",60271),triangleRight:p("triangle-right",60272),triangleUp:p("triangle-up",60273),twitter:p("twitter",60274),unfold:p("unfold",60275),unlock:p("unlock",60276),unmute:p("unmute",60277),unverified:p("unverified",60278),verified:p("verified",60279),versions:p("versions",60280),vmActive:p("vm-active",60281),vmOutline:p("vm-outline",60282),vmRunning:p("vm-running",60283),watch:p("watch",60284),whitespace:p("whitespace",60285),wholeWord:p("whole-word",60286),window:p("window",60287),wordWrap:p("word-wrap",60288),zoomIn:p("zoom-in",60289),zoomOut:p("zoom-out",60290),listFilter:p("list-filter",60291),listFlat:p("list-flat",60292),listSelection:p("list-selection",60293),selection:p("selection",60293),listTree:p("list-tree",60294),debugBreakpointFunctionUnverified:p("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:p("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:p("debug-breakpoint-function-disabled",60296),debugStackframeActive:p("debug-stackframe-active",60297),circleSmallFilled:p("circle-small-filled",60298),debugStackframeDot:p("debug-stackframe-dot",60298),terminalDecorationMark:p("terminal-decoration-mark",60298),debugStackframe:p("debug-stackframe",60299),debugStackframeFocused:p("debug-stackframe-focused",60299),debugBreakpointUnsupported:p("debug-breakpoint-unsupported",60300),symbolString:p("symbol-string",60301),debugReverseContinue:p("debug-reverse-continue",60302),debugStepBack:p("debug-step-back",60303),debugRestartFrame:p("debug-restart-frame",60304),debugAlt:p("debug-alt",60305),callIncoming:p("call-incoming",60306),callOutgoing:p("call-outgoing",60307),menu:p("menu",60308),expandAll:p("expand-all",60309),feedback:p("feedback",60310),gitPullRequestReviewer:p("git-pull-request-reviewer",60310),groupByRefType:p("group-by-ref-type",60311),ungroupByRefType:p("ungroup-by-ref-type",60312),account:p("account",60313),gitPullRequestAssignee:p("git-pull-request-assignee",60313),bellDot:p("bell-dot",60314),debugConsole:p("debug-console",60315),library:p("library",60316),output:p("output",60317),runAll:p("run-all",60318),syncIgnored:p("sync-ignored",60319),pinned:p("pinned",60320),githubInverted:p("github-inverted",60321),serverProcess:p("server-process",60322),serverEnvironment:p("server-environment",60323),pass:p("pass",60324),issueClosed:p("issue-closed",60324),stopCircle:p("stop-circle",60325),playCircle:p("play-circle",60326),record:p("record",60327),debugAltSmall:p("debug-alt-small",60328),vmConnect:p("vm-connect",60329),cloud:p("cloud",60330),merge:p("merge",60331),export:p("export",60332),graphLeft:p("graph-left",60333),magnet:p("magnet",60334),notebook:p("notebook",60335),redo:p("redo",60336),checkAll:p("check-all",60337),pinnedDirty:p("pinned-dirty",60338),passFilled:p("pass-filled",60339),circleLargeFilled:p("circle-large-filled",60340),circleLarge:p("circle-large",60341),circleLargeOutline:p("circle-large-outline",60341),combine:p("combine",60342),gather:p("gather",60342),table:p("table",60343),variableGroup:p("variable-group",60344),typeHierarchy:p("type-hierarchy",60345),typeHierarchySub:p("type-hierarchy-sub",60346),typeHierarchySuper:p("type-hierarchy-super",60347),gitPullRequestCreate:p("git-pull-request-create",60348),runAbove:p("run-above",60349),runBelow:p("run-below",60350),notebookTemplate:p("notebook-template",60351),debugRerun:p("debug-rerun",60352),workspaceTrusted:p("workspace-trusted",60353),workspaceUntrusted:p("workspace-untrusted",60354),workspaceUnknown:p("workspace-unknown",60355),terminalCmd:p("terminal-cmd",60356),terminalDebian:p("terminal-debian",60357),terminalLinux:p("terminal-linux",60358),terminalPowershell:p("terminal-powershell",60359),terminalTmux:p("terminal-tmux",60360),terminalUbuntu:p("terminal-ubuntu",60361),terminalBash:p("terminal-bash",60362),arrowSwap:p("arrow-swap",60363),copy:p("copy",60364),personAdd:p("person-add",60365),filterFilled:p("filter-filled",60366),wand:p("wand",60367),debugLineByLine:p("debug-line-by-line",60368),inspect:p("inspect",60369),layers:p("layers",60370),layersDot:p("layers-dot",60371),layersActive:p("layers-active",60372),compass:p("compass",60373),compassDot:p("compass-dot",60374),compassActive:p("compass-active",60375),azure:p("azure",60376),issueDraft:p("issue-draft",60377),gitPullRequestClosed:p("git-pull-request-closed",60378),gitPullRequestDraft:p("git-pull-request-draft",60379),debugAll:p("debug-all",60380),debugCoverage:p("debug-coverage",60381),runErrors:p("run-errors",60382),folderLibrary:p("folder-library",60383),debugContinueSmall:p("debug-continue-small",60384),beakerStop:p("beaker-stop",60385),graphLine:p("graph-line",60386),graphScatter:p("graph-scatter",60387),pieChart:p("pie-chart",60388),bracket:p("bracket",60175),bracketDot:p("bracket-dot",60389),bracketError:p("bracket-error",60390),lockSmall:p("lock-small",60391),azureDevops:p("azure-devops",60392),verifiedFilled:p("verified-filled",60393),newline:p("newline",60394),layout:p("layout",60395),layoutActivitybarLeft:p("layout-activitybar-left",60396),layoutActivitybarRight:p("layout-activitybar-right",60397),layoutPanelLeft:p("layout-panel-left",60398),layoutPanelCenter:p("layout-panel-center",60399),layoutPanelJustify:p("layout-panel-justify",60400),layoutPanelRight:p("layout-panel-right",60401),layoutPanel:p("layout-panel",60402),layoutSidebarLeft:p("layout-sidebar-left",60403),layoutSidebarRight:p("layout-sidebar-right",60404),layoutStatusbar:p("layout-statusbar",60405),layoutMenubar:p("layout-menubar",60406),layoutCentered:p("layout-centered",60407),target:p("target",60408),indent:p("indent",60409),recordSmall:p("record-small",60410),errorSmall:p("error-small",60411),terminalDecorationError:p("terminal-decoration-error",60411),arrowCircleDown:p("arrow-circle-down",60412),arrowCircleLeft:p("arrow-circle-left",60413),arrowCircleRight:p("arrow-circle-right",60414),arrowCircleUp:p("arrow-circle-up",60415),layoutSidebarRightOff:p("layout-sidebar-right-off",60416),layoutPanelOff:p("layout-panel-off",60417),layoutSidebarLeftOff:p("layout-sidebar-left-off",60418),blank:p("blank",60419),heartFilled:p("heart-filled",60420),map:p("map",60421),mapHorizontal:p("map-horizontal",60421),foldHorizontal:p("fold-horizontal",60421),mapFilled:p("map-filled",60422),mapHorizontalFilled:p("map-horizontal-filled",60422),foldHorizontalFilled:p("fold-horizontal-filled",60422),circleSmall:p("circle-small",60423),bellSlash:p("bell-slash",60424),bellSlashDot:p("bell-slash-dot",60425),commentUnresolved:p("comment-unresolved",60426),gitPullRequestGoToChanges:p("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:p("git-pull-request-new-changes",60428),searchFuzzy:p("search-fuzzy",60429),commentDraft:p("comment-draft",60430),send:p("send",60431),sparkle:p("sparkle",60432),insert:p("insert",60433),mic:p("mic",60434),thumbsdownFilled:p("thumbsdown-filled",60435),thumbsupFilled:p("thumbsup-filled",60436),coffee:p("coffee",60437),snake:p("snake",60438),game:p("game",60439),vr:p("vr",60440),chip:p("chip",60441),piano:p("piano",60442),music:p("music",60443),micFilled:p("mic-filled",60444),repoFetch:p("repo-fetch",60445),copilot:p("copilot",60446),lightbulbSparkle:p("lightbulb-sparkle",60447),robot:p("robot",60448),sparkleFilled:p("sparkle-filled",60449),diffSingle:p("diff-single",60450),diffMultiple:p("diff-multiple",60451),surroundWith:p("surround-with",60452),share:p("share",60453),gitStash:p("git-stash",60454),gitStashApply:p("git-stash-apply",60455),gitStashPop:p("git-stash-pop",60456),vscode:p("vscode",60457),vscodeInsiders:p("vscode-insiders",60458),codeOss:p("code-oss",60459),runCoverage:p("run-coverage",60460),runAllCoverage:p("run-all-coverage",60461),coverage:p("coverage",60462),githubProject:p("github-project",60463),mapVertical:p("map-vertical",60464),foldVertical:p("fold-vertical",60464),mapVerticalFilled:p("map-vertical-filled",60465),foldVerticalFilled:p("fold-vertical-filled",60465)},Ck={dialogError:p("dialog-error","error"),dialogWarning:p("dialog-warning","warning"),dialogInfo:p("dialog-info","info"),dialogClose:p("dialog-close","close"),treeItemExpanded:p("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:p("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:p("tree-filter-on-type-off","list-selection"),treeFilterClear:p("tree-filter-clear","close"),treeItemLoading:p("tree-item-loading","loading"),menuSelection:p("menu-selection","check"),menuSubmenu:p("menu-submenu","chevron-right"),menuBarMore:p("menubar-more","more"),scrollbarButtonLeft:p("scrollbar-button-left","triangle-left"),scrollbarButtonRight:p("scrollbar-button-right","triangle-right"),scrollbarButtonUp:p("scrollbar-button-up","triangle-up"),scrollbarButtonDown:p("scrollbar-button-down","triangle-down"),toolBarMore:p("toolbar-more","more"),quickInputBack:p("quick-input-back","arrow-left"),dropDownButton:p("drop-down-button",60084),symbolCustomColor:p("symbol-customcolor",60252),exportIcon:p("export",60332),workspaceUnspecified:p("workspace-unspecified",60355),newLine:p("newline",60394),thumbsDownFilled:p("thumbsdown-filled",60435),thumbsUpFilled:p("thumbsup-filled",60436),gitFetch:p("git-fetch",60445),lightbulbSparkleAutofix:p("lightbulb-sparkle-autofix",60447),debugBreakpointPending:p("debug-breakpoint-pending",60377)},ue={...xk,...Ck};var Ho;(function(r){function e(t){return t&&typeof t=="object"&&typeof t.id=="string"}r.isThemeColor=e})(Ho||(Ho={}));var ei;(function(r){r.iconNameSegment="[A-Za-z0-9]+",r.iconNameExpression="[A-Za-z0-9-]+",r.iconModifierExpression="~[A-Za-z]+",r.iconNameCharacter="[A-Za-z0-9~-]";const e=new RegExp(`^(${r.iconNameExpression})(${r.iconModifierExpression})?$`);function t(h){const g=e.exec(h.id);if(!g)return t(ue.error);const[,b,_]=g,v=["codicon","codicon-"+b];return _&&v.push("codicon-modifier-"+_.substring(1)),v}r.asClassNameArray=t;function i(h){return t(h).join(" ")}r.asClassName=i;function n(h){return"."+t(h).join(".")}r.asCSSSelector=n;function s(h){return h&&typeof h=="object"&&typeof h.id=="string"&&(typeof h.color>"u"||Ho.isThemeColor(h.color))}r.isThemeIcon=s;const o=new RegExp(`^\\$\\((${r.iconNameExpression}(?:${r.iconModifierExpression})?)\\)$`);function a(h){const g=o.exec(h);if(!g)return;const[,b]=g;return{id:b}}r.fromString=a;function c(h){return{id:h}}r.fromId=c;function l(h,g){let b=h.id;const _=b.lastIndexOf("~");return _!==-1&&(b=b.substring(0,_)),g&&(b=`${b}~${g}`),{id:b}}r.modify=l;function u(h){const g=h.id.lastIndexOf("~");if(g!==-1)return h.id.substring(g+1)}r.getModifier=u;function d(h,g){var b,_;return h.id===g.id&&((b=h.color)==null?void 0:b.id)===((_=g.color)==null?void 0:_.id)}r.isEqual=d})(ei||(ei={}));const Qg=new RegExp(`\\$\\(${ei.iconNameExpression}(?:${ei.iconModifierExpression})?\\)`,"g"),Sk=new RegExp(`(\\\\)?${Qg.source}`,"g");function Ek(r){return r.replace(Sk,(e,t)=>t?e:`\\${e}`)}new RegExp(`\\\\${Qg.source}`,"g"),new RegExp(`(\\s)?(\\\\)?${Qg.source}(\\s)?`,"g"),new RegExp(`\\$\\(${ei.iconNameCharacter}+\\)`,"g");let N0=class{constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw xe("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=kk(this.supportThemeIcons?Ek(e):e).replace(/([ \t]+)/g,(i,n)=>"&nbsp;".repeat(n.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${Dk(t,e)}
`,this}appendLink(e,t,i){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),i&&(this.value+=` "${this._escape(this._escape(i,'"'),")")}"`),this.value+=")",this}_escape(e,t){const i=new RegExp(Ao(t),"g");return e.replace(i,(n,s)=>e.charAt(s-1)!=="\\"?`\\${n}`:n)}};function ps(r){return r instanceof N0?!0:r&&typeof r=="object"?typeof r.value=="string"&&(typeof r.isTrusted=="boolean"||typeof r.isTrusted=="object"||r.isTrusted===void 0)&&(typeof r.supportThemeIcons=="boolean"||r.supportThemeIcons===void 0):!1}function kk(r){return r.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function Dk(r,e){var n;const t=((n=r.match(/^`+/gm))==null?void 0:n.reduce((s,o)=>s.length>o.length?s:o).length)??0,i=t>=3?t+1:3;return[`${"`".repeat(i)}${e}`,r,`${"`".repeat(i)}`].join(`
`)}function Ik(r){const e=[],t=r.split("|").map(n=>n.trim());r=t[0];const i=t[1];if(i){const n=/height=(\d+)/.exec(i),s=/width=(\d+)/.exec(i),o=n?n[1]:"",a=s?s[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&e.push(`width="${a}"`),l&&e.push(`height="${o}"`)}return{href:r,dimensions:e}}var gs={exports:{}};function M0(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function Pk(r){gs.exports.defaults=r}gs.exports={defaults:M0(),getDefaults:M0,changeDefaults:Pk};const Tk=/[&<>"']/,Ak=/[&<>"']/g,Rk=/[<>"']|&(?!#?\w+;)/,Lk=/[<>"']|&(?!#?\w+;)/g,Ok={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},F0=r=>Ok[r];function $k(r,e){if(e){if(Tk.test(r))return r.replace(Ak,F0)}else if(Rk.test(r))return r.replace(Lk,F0);return r}const Nk=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function H0(r){return r.replace(Nk,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Mk=/(^|[^\[])\^/g;function Fk(r,e){r=r.source||r,e=e||"";const t={replace:(i,n)=>(n=n.source||n,n=n.replace(Mk,"$1"),r=r.replace(i,n),t),getRegex:()=>new RegExp(r,e)};return t}const Hk=/[^\w:]/g,Uk=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Wk(r,e,t){if(r){let i;try{i=decodeURIComponent(H0(t)).replace(Hk,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!Uk.test(t)&&(t=U0(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const kd={},Bk=/^[^:]+:\/*[^/]*$/,Vk=/^([^:]+:)[\s\S]*$/,zk=/^([^:]+:\/*[^/]*)[\s\S]*$/;function U0(r,e){kd[" "+r]||(Bk.test(r)?kd[" "+r]=r+"/":kd[" "+r]=W0(r,"/",!0)),r=kd[" "+r];const t=r.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:r.replace(Vk,"$1")+e:e.charAt(0)==="/"?t?e:r.replace(zk,"$1")+e:r+e}const jk={exec:function(){}};function qk(r){let e=1,t,i;for(;e<arguments.length;e++){t=arguments[e];for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r}function Gk(r,e){const t=r.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),i=t.split(/ \|/);let n=0;if(i[0].trim()||i.shift(),i[i.length-1].trim()||i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function W0(r,e,t){const i=r.length;if(i===0)return"";let n=0;for(;n<i;){const s=r.charAt(i-n-1);if(s===e&&!t)n++;else if(s!==e&&t)n++;else break}return r.substr(0,i-n)}function Qk(r,e){if(r.indexOf(e[1])===-1)return-1;const t=r.length;let i=0,n=0;for(;n<t;n++)if(r[n]==="\\")n++;else if(r[n]===e[0])i++;else if(r[n]===e[1]&&(i--,i<0))return n;return-1}function Jk(r){r&&r.sanitize&&!r.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Kk(r,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=r),e>>=1,r+=r;return t+r}var Uo={escape:$k,unescape:H0,edit:Fk,cleanUrl:Wk,resolveUrl:U0,noopTest:jk,merge:qk,splitCells:Gk,rtrim:W0,findClosingBracket:Qk,checkSanitizeDeprecation:Jk,repeatString:Kk};const{defaults:Xk}=gs.exports,{rtrim:Jg,splitCells:B0,escape:Ti,findClosingBracket:Yk}=Uo;function V0(r,e,t,i){const n=e.href,s=e.title?Ti(e.title):null,o=r[1].replace(/\\([\[\]])/g,"$1");if(r[0].charAt(0)!=="!"){i.state.inLink=!0;const a={type:"link",raw:t,href:n,title:s,text:o,tokens:i.inlineTokens(o,[])};return i.state.inLink=!1,a}else return{type:"image",raw:t,href:n,title:s,text:Ti(o)}}function Zk(r,e){const t=r.match(/^(\s+)(?:```)/);if(t===null)return e;const i=t[1];return e.split(`
`).map(n=>{const s=n.match(/^\s+/);if(s===null)return n;const[o]=s;return o.length>=i.length?n.slice(i.length):n}).join(`
`)}var z0=class{constructor(e){this.options=e||Xk}space(e){const t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:`
`}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Jg(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],n=Zk(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim():t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const s=Jg(i,"#");(this.options.pedantic||!s||/ $/.test(s))&&(i=s.trim())}const n={type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const i=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(i,[]),text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,n,s,o,a,c,l,u,d,h,g=t[1].trim();const b=g.length>1,_={type:"list",raw:"",ordered:b,start:b?+g.slice(0,-1):"",loose:!1,items:[]};g=b?`\\d{1,9}\\${g.slice(-1)}`:`\\${g}`,this.options.pedantic&&(g=b?g:"[*+-]");const v=new RegExp(`^( {0,3}${g})((?: [^\\n]*| *)(?:\\n[^\\n]*)*(?:\\n|$))`);for(;e&&!(this.rules.block.hr.test(e)||!(t=v.exec(e)));){d=t[2].split(`
`),this.options.pedantic?(o=2,h=d[0].trimLeft()):(o=t[2].search(/[^ ]/),o=t[1].length+(o>4?1:o),h=d[0].slice(o-t[1].length)),c=!1,i=t[0],!d[0]&&/^ *$/.test(d[1])&&(i=t[1]+d.slice(0,2).join(`
`)+`
`,_.loose=!0,d=[]);const k=new RegExp(`^ {0,${Math.min(3,o-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(a=1;a<d.length;a++){if(u=d[a],this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),k.test(u)){i=t[1]+d.slice(0,a).join(`
`)+`
`;break}if(!c){u.trim()||(c=!0),u.search(/[^ ]/)>=o?h+=`
`+u.slice(o):h+=`
`+u;continue}if(u.search(/[^ ]/)>=o||!u.trim()){h+=`
`+u.slice(o);continue}else{i=t[1]+d.slice(0,a).join(`
`)+`
`;break}}_.loose||(l?_.loose=!0:/\n *\n *$/.test(i)&&(l=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(h),n&&(s=n[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),_.items.push({type:"list_item",raw:i,task:!!n,checked:s,loose:!1,text:h}),_.raw+=i,e=e.slice(i.length)}_.items[_.items.length-1].raw=i.trimRight(),_.items[_.items.length-1].text=h.trimRight(),_.raw=_.raw.trimRight();const E=_.items.length;for(a=0;a<E;a++)this.lexer.state.top=!1,_.items[a].tokens=this.lexer.blockTokens(_.items[a].text,[]),_.items[a].tokens.some(k=>k.type==="space")&&(_.loose=!0,_.items[a].loose=!0);return _}}html(e){const t=this.rules.block.html.exec(e);if(t){const i={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(i.type="paragraph",i.text=this.options.sanitizer?this.options.sanitizer(t[0]):Ti(t[0]),i.tokens=[],this.lexer.inline(i.text,i.tokens)),i}}def(e){const t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(e){const t=this.rules.block.table.exec(e);if(t){const i={type:"table",header:B0(t[1]).map(n=>({text:n})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=t[0];let n=i.align.length,s,o,a,c;for(s=0;s<n;s++)/^ *-+: *$/.test(i.align[s])?i.align[s]="right":/^ *:-+: *$/.test(i.align[s])?i.align[s]="center":/^ *:-+ *$/.test(i.align[s])?i.align[s]="left":i.align[s]=null;for(n=i.rows.length,s=0;s<n;s++)i.rows[s]=B0(i.rows[s],i.header.length).map(l=>({text:l}));for(n=i.header.length,o=0;o<n;o++)i.header[o].tokens=[],this.lexer.inlineTokens(i.header[o].text,i.header[o].tokens);for(n=i.rows.length,o=0;o<n;o++)for(c=i.rows[o],a=0;a<c.length;a++)c[a].tokens=[],this.lexer.inlineTokens(c[a].text,c[a].tokens);return i}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t){const i={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}text(e){const t=this.rules.block.text.exec(e);if(t){const i={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ti(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):Ti(t[0]):t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const o=Jg(i.slice(0,-1),"\\");if((i.length-o.length)%2===0)return}else{const o=Yk(t[2],"()");if(o>-1){const c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let n=t[2],s="";if(this.options.pedantic){const o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);o&&(n=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(this.options.pedantic&&!/>$/.test(i)?n=n.slice(1):n=n.slice(1,-1)),V0(t,{href:n&&n.replace(this.rules.inline._escapes,"$1"),title:s&&s.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let n=(i[2]||i[1]).replace(/\s+/g," ");if(n=t[n.toLowerCase()],!n||!n.href){const s=i[0].charAt(0);return{type:"text",raw:s,text:s}}return V0(i,n,i[0],this.lexer)}}emStrong(e,t,i=""){let n=this.rules.inline.emStrong.lDelim.exec(e);if(!n||n[3]&&i.match(/[\p{L}\p{N}]/u))return;const s=n[1]||n[2]||"";if(!s||s&&(i===""||this.rules.inline.punctuation.exec(i))){const o=n[0].length-1;let a,c,l=o,u=0;const d=n[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+o);(n=d.exec(t))!=null;){if(a=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!a)continue;if(c=a.length,n[3]||n[4]){l+=c;continue}else if((n[5]||n[6])&&o%3&&!((o+c)%3)){u+=c;continue}if(l-=c,l>0)continue;if(c=Math.min(c,c+l+u),Math.min(o,c)%2){const g=e.slice(1,o+n.index+c);return{type:"em",raw:e.slice(0,o+n.index+c+1),text:g,tokens:this.lexer.inlineTokens(g,[])}}const h=e.slice(2,o+n.index+c-1);return{type:"strong",raw:e.slice(0,o+n.index+c+1),text:h,tokens:this.lexer.inlineTokens(h,[])}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const n=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return n&&s&&(i=i.substring(1,i.length-1)),i=Ti(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){const i=this.rules.inline.autolink.exec(e);if(i){let n,s;return i[2]==="@"?(n=Ti(this.options.mangle?t(i[1]):i[1]),s="mailto:"+n):(n=Ti(i[1]),s=n),{type:"link",raw:i[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let n,s;if(i[2]==="@")n=Ti(this.options.mangle?t(i[0]):i[0]),s="mailto:"+n;else{let o;do o=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(o!==i[0]);n=Ti(i[0]),i[1]==="www."?s="http://"+n:s=n}return{type:"link",raw:i[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e,t){const i=this.rules.inline.text.exec(e);if(i){let n;return this.lexer.state.inRawBlock?n=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Ti(i[0]):i[0]:n=Ti(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:n}}}};const{noopTest:Dd,edit:dt,merge:ms}=Uo,ke={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,table:Dd,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};ke._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,ke._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,ke.def=dt(ke.def).replace("label",ke._label).replace("title",ke._title).getRegex(),ke.bullet=/(?:[*+-]|\d{1,9}[.)])/,ke.listItemStart=dt(/^( *)(bull) */).replace("bull",ke.bullet).getRegex(),ke.list=dt(ke.list).replace(/bull/g,ke.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ke.def.source+")").getRegex(),ke._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ke._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,ke.html=dt(ke.html,"i").replace("comment",ke._comment).replace("tag",ke._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ke.paragraph=dt(ke._paragraph).replace("hr",ke.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ke._tag).getRegex(),ke.blockquote=dt(ke.blockquote).replace("paragraph",ke.paragraph).getRegex(),ke.normal=ms({},ke),ke.gfm=ms({},ke.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)\\|?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),ke.gfm.table=dt(ke.gfm.table).replace("hr",ke.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ke._tag).getRegex(),ke.pedantic=ms({},ke.normal,{html:dt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ke._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Dd,paragraph:dt(ke.normal._paragraph).replace("hr",ke.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ke.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const de={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Dd,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Dd,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};de._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",de.punctuation=dt(de.punctuation).replace(/punctuation/g,de._punctuation).getRegex(),de.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,de.escapedEmSt=/\\\*|\\_/g,de._comment=dt(ke._comment).replace("(?:-->|$)","-->").getRegex(),de.emStrong.lDelim=dt(de.emStrong.lDelim).replace(/punct/g,de._punctuation).getRegex(),de.emStrong.rDelimAst=dt(de.emStrong.rDelimAst,"g").replace(/punct/g,de._punctuation).getRegex(),de.emStrong.rDelimUnd=dt(de.emStrong.rDelimUnd,"g").replace(/punct/g,de._punctuation).getRegex(),de._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,de._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,de._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,de.autolink=dt(de.autolink).replace("scheme",de._scheme).replace("email",de._email).getRegex(),de._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,de.tag=dt(de.tag).replace("comment",de._comment).replace("attribute",de._attribute).getRegex(),de._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,de._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,de._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,de.link=dt(de.link).replace("label",de._label).replace("href",de._href).replace("title",de._title).getRegex(),de.reflink=dt(de.reflink).replace("label",de._label).getRegex(),de.reflinkSearch=dt(de.reflinkSearch,"g").replace("reflink",de.reflink).replace("nolink",de.nolink).getRegex(),de.normal=ms({},de),de.pedantic=ms({},de.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:dt(/^!?\[(label)\]\((.*?)\)/).replace("label",de._label).getRegex(),reflink:dt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",de._label).getRegex()}),de.gfm=ms({},de.normal,{escape:dt(de.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),de.gfm.url=dt(de.gfm.url,"i").replace("email",de.gfm._extended_email).getRegex(),de.breaks=ms({},de.gfm,{br:dt(de.br).replace("{2,}","*").getRegex(),text:dt(de.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var e5={block:ke,inline:de};const t5=z0,{defaults:i5}=gs.exports,{block:Id,inline:jc}=e5,{repeatString:j0}=Uo;function n5(r){return r.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function q0(r){let e="",t,i;const n=r.length;for(t=0;t<n;t++)i=r.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}var r5=class Hw{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||i5,this.options.tokenizer=this.options.tokenizer||new t5,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:Id.normal,inline:jc.normal};this.options.pedantic?(t.block=Id.pedantic,t.inline=jc.pedantic):this.options.gfm&&(t.block=Id.gfm,this.options.breaks?t.inline=jc.breaks:t.inline=jc.gfm),this.tokenizer.rules=t}static get rules(){return{block:Id,inline:jc}}static lex(e,t){return new Hw(t).lex(e)}static lexInline(e,t){return new Hw(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic&&(e=e.replace(/^ +$/gm,""));let i,n,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(i=a.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.type&&t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),n=t[t.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),n=t[t.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+i.raw,n.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=e.slice(1);let l;this.options.extensions.startBlock.forEach(function(u){l=u.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){n=t[t.length-1],o&&n.type==="paragraph"?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i),o=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),n=t[t.length-1],n&&n.type==="text"?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i);continue}if(e){const a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let i,n,s,o=e,a,c,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+j0("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+j0("a",a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),n=t[t.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),n=t[t.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,o,l)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e,q0)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,q0))){e=e.substring(i.raw.length),t.push(i);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const d=e.slice(1);let h;this.options.extensions.startInline.forEach(function(g){h=g.call({lexer:this},d),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(s=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(s,n5)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(l=i.raw.slice(-1)),c=!0,n=t[t.length-1],n&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}};const{defaults:s5}=gs.exports,{cleanUrl:G0,escape:Pd}=Uo;var Q0=class{constructor(e){this.options=e||s5}code(e,t,i){const n=(t||"").match(/\S*/)[0];if(this.options.highlight){const s=this.options.highlight(e,n);s!=null&&s!==e&&(i=!0,e=s)}return e=e.replace(/\n$/,"")+`
`,n?'<pre><code class="'+this.options.langPrefix+Pd(n,!0)+'">'+(i?e:Pd(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:Pd(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`+e+`</blockquote>
`}html(e){return e}heading(e,t,i,n){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+n.slug(i)+'">'+e+"</h"+t+`>
`:"<h"+t+">"+e+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,i){const n=t?"ol":"ul",s=t&&i!==1?' start="'+i+'"':"";return"<"+n+s+`>
`+e+"</"+n+`>
`}listitem(e){return"<li>"+e+`</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+`</p>
`}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,i){if(e=G0(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let n='<a href="'+Pd(e)+'"';return t&&(n+=' title="'+t+'"'),n+=">"+i+"</a>",n}image(e,t,i){if(e=G0(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let n='<img src="'+e+'" alt="'+i+'"';return t&&(n+=' title="'+t+'"'),n+=this.options.xhtml?"/>":">",n}text(e){return e}},J0=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}},K0=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,n=0;if(this.seen.hasOwnProperty(i)){n=this.seen[e];do n++,i=e+"-"+n;while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=n,this.seen[i]=0),i}slug(e,t={}){const i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}};const o5=Q0,a5=J0,c5=K0,{defaults:l5}=gs.exports,{unescape:u5}=Uo;var d5=class Uw{constructor(e){this.options=e||l5,this.options.renderer=this.options.renderer||new o5,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new a5,this.slugger=new c5}static parse(e,t){return new Uw(t).parse(e)}static parseInline(e,t){return new Uw(t).parseInline(e)}parse(e,t=!0){let i="",n,s,o,a,c,l,u,d,h,g,b,_,v,E,k,S,O,T,z;const ae=e.length;for(n=0;n<ae;n++){if(g=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[g.type]&&(z=this.options.extensions.renderers[g.type].call({parser:this},g),z!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(g.type))){i+=z||"";continue}switch(g.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(g.tokens),g.depth,u5(this.parseInline(g.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(g.text,g.lang,g.escaped);continue}case"table":{for(d="",u="",a=g.header.length,s=0;s<a;s++)u+=this.renderer.tablecell(this.parseInline(g.header[s].tokens),{header:!0,align:g.align[s]});for(d+=this.renderer.tablerow(u),h="",a=g.rows.length,s=0;s<a;s++){for(l=g.rows[s],u="",c=l.length,o=0;o<c;o++)u+=this.renderer.tablecell(this.parseInline(l[o].tokens),{header:!1,align:g.align[o]});h+=this.renderer.tablerow(u)}i+=this.renderer.table(d,h);continue}case"blockquote":{h=this.parse(g.tokens),i+=this.renderer.blockquote(h);continue}case"list":{for(b=g.ordered,_=g.start,v=g.loose,a=g.items.length,h="",s=0;s<a;s++)k=g.items[s],S=k.checked,O=k.task,E="",k.task&&(T=this.renderer.checkbox(S),v?k.tokens.length>0&&k.tokens[0].type==="paragraph"?(k.tokens[0].text=T+" "+k.tokens[0].text,k.tokens[0].tokens&&k.tokens[0].tokens.length>0&&k.tokens[0].tokens[0].type==="text"&&(k.tokens[0].tokens[0].text=T+" "+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:"text",text:T}):E+=T),E+=this.parse(k.tokens,v),h+=this.renderer.listitem(E,O,S);i+=this.renderer.list(h,b,_);continue}case"html":{i+=this.renderer.html(g.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(g.tokens));continue}case"text":{for(h=g.tokens?this.parseInline(g.tokens):g.text;n+1<ae&&e[n+1].type==="text";)g=e[++n],h+=`
`+(g.tokens?this.parseInline(g.tokens):g.text);i+=t?this.renderer.paragraph(h):h;continue}default:{const ee='Token with "'+g.type+'" type was not found.';if(this.options.silent){console.error(ee);return}else throw new Error(ee)}}}return i}parseInline(e,t){t=t||this.renderer;let i="",n,s,o;const a=e.length;for(n=0;n<a;n++){if(s=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]&&(o=this.options.extensions.renderers[s.type].call({parser:this},s),o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type))){i+=o||"";continue}switch(s.type){case"escape":{i+=t.text(s.text);break}case"html":{i+=t.html(s.text);break}case"link":{i+=t.link(s.href,s.title,this.parseInline(s.tokens,t));break}case"image":{i+=t.image(s.href,s.title,s.text);break}case"strong":{i+=t.strong(this.parseInline(s.tokens,t));break}case"em":{i+=t.em(this.parseInline(s.tokens,t));break}case"codespan":{i+=t.codespan(s.text);break}case"br":{i+=t.br();break}case"del":{i+=t.del(this.parseInline(s.tokens,t));break}case"text":{i+=t.text(s.text);break}default:{const c='Token with "'+s.type+'" type was not found.';if(this.options.silent){console.error(c);return}else throw new Error(c)}}}return i}};const qc=r5,Gc=d5,X0=z0,Y0=Q0,h5=J0,f5=K0,{merge:Td,checkSanitizeDeprecation:Z0,escape:ey}=Uo,{getDefaults:p5,changeDefaults:g5,defaults:m5}=gs.exports;function Ae(r,e,t){if(typeof r>"u"||r===null)throw new Error("marked(): input parameter is undefined or null");if(typeof r!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=Td({},Ae.defaults,e||{}),Z0(e),t){const i=e.highlight;let n;try{n=qc.lex(r,e)}catch(a){return t(a)}const s=function(a){let c;if(!a)try{e.walkTokens&&Ae.walkTokens(n,e.walkTokens),c=Gc.parse(n,e)}catch(l){a=l}return e.highlight=i,a?t(a):t(null,c)};if(!i||i.length<3||(delete e.highlight,!n.length))return s();let o=0;Ae.walkTokens(n,function(a){a.type==="code"&&(o++,setTimeout(()=>{i(a.text,a.lang,function(c,l){if(c)return s(c);l!=null&&l!==a.text&&(a.text=l,a.escaped=!0),o--,o===0&&s()})},0))}),o===0&&s();return}try{const i=qc.lex(r,e);return e.walkTokens&&Ae.walkTokens(i,e.walkTokens),Gc.parse(i,e)}catch(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+ey(i.message+"",!0)+"</pre>";throw i}}Ae.options=Ae.setOptions=function(r){return Td(Ae.defaults,r),g5(Ae.defaults),Ae},Ae.getDefaults=p5,Ae.defaults=m5,Ae.use=function(...r){const e=Td({},...r),t=Ae.defaults.extensions||{renderers:{},childTokens:{}};let i;r.forEach(n=>{if(n.extensions&&(i=!0,n.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if(s.renderer){const o=t.renderers?t.renderers[s.name]:null;o?t.renderers[s.name]=function(...a){let c=s.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:t.renderers[s.name]=s.renderer}if(s.tokenizer){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[s.level]?t[s.level].unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}s.childTokens&&(t.childTokens[s.name]=s.childTokens)})),n.renderer){const s=Ae.defaults.renderer||new Y0;for(const o in n.renderer){const a=s[o];s[o]=(...c)=>{let l=n.renderer[o].apply(s,c);return l===!1&&(l=a.apply(s,c)),l}}e.renderer=s}if(n.tokenizer){const s=Ae.defaults.tokenizer||new X0;for(const o in n.tokenizer){const a=s[o];s[o]=(...c)=>{let l=n.tokenizer[o].apply(s,c);return l===!1&&(l=a.apply(s,c)),l}}e.tokenizer=s}if(n.walkTokens){const s=Ae.defaults.walkTokens;e.walkTokens=o=>{n.walkTokens.call(this,o),s&&s(o)}}i&&(e.extensions=t),Ae.setOptions(e)})},Ae.walkTokens=function(r,e){for(const t of r)switch(e(t),t.type){case"table":{for(const i of t.header)Ae.walkTokens(i.tokens,e);for(const i of t.rows)for(const n of i)Ae.walkTokens(n.tokens,e);break}case"list":{Ae.walkTokens(t.items,e);break}default:Ae.defaults.extensions&&Ae.defaults.extensions.childTokens&&Ae.defaults.extensions.childTokens[t.type]?Ae.defaults.extensions.childTokens[t.type].forEach(function(i){Ae.walkTokens(t[i],e)}):t.tokens&&Ae.walkTokens(t.tokens,e)}},Ae.parseInline=function(r,e){if(typeof r>"u"||r===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof r!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected");e=Td({},Ae.defaults,e||{}),Z0(e);try{const t=qc.lexInline(r,e);return e.walkTokens&&Ae.walkTokens(t,e.walkTokens),Gc.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+ey(t.message+"",!0)+"</pre>";throw t}},Ae.Parser=Gc,Ae.parser=Gc.parse,Ae.Renderer=Y0,Ae.TextRenderer=h5,Ae.Lexer=qc,Ae.lexer=qc.lex,Ae.Tokenizer=X0,Ae.Slugger=f5,Ae.parse=Ae;var ty=Ae;function v5(r){let e=JSON.parse(r);return e=on(e),e}function on(r,e=0){if(!r||e>200)return r;if(typeof r=="object"){switch(r.$mid){case 1:return y.revive(r);case 2:return new RegExp(r.source,r.flags);case 17:return new Date(r.source)}if(r instanceof ve||r instanceof Uint8Array)return r;if(Array.isArray(r))for(let t=0;t<r.length;++t)r[t]=on(r[t],e+1);else for(const t in r)Object.hasOwnProperty.call(r,t)&&(r[t]=on(r[t],e+1))}return r}const kn=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"}),_5=/^(.+)\/(.+?)(;.+)?$/;function iy(r,e){const t=_5.exec(r);return t?`${t[1].toLowerCase()}/${t[2].toLowerCase()}${t[3]??""}`:e?void 0:r}const ti=Symbol("unset");class w5{constructor(){this.root=new Kg,this._size=0}get size(){return this._size}get nodes(){var e;return((e=this.root.children)==null?void 0:e.values())||yn.empty()}insert(e,t,i){this.opNode(e,n=>n._value=t,i)}mutate(e,t){this.opNode(e,i=>i._value=t(i._value===ti?void 0:i._value))}delete(e){var s;const t=this.getPathToKey(e);if(!t)return;let i=t.length-1;const n=t[i].node._value;if(n!==ti){for(this._size--,t[i].node._value=ti;i>0;i--){const{node:o,part:a}=t[i];if((s=o.children)!=null&&s.size||o._value!==ti)break;t[i-1].node.children.delete(a)}return n}}*deleteRecursive(e){const t=this.getPathToKey(e);if(!t)return;const i=t[t.length-1].node;for(let n=t.length-1;n>0;n--){const s=t[n-1];if(s.node.children.delete(t[n].part),s.node.children.size>0||s.node._value!==ti)break}for(const n of ny(i))n._value!==ti&&(this._size--,yield n._value)}find(e){var i;let t=this.root;for(const n of e){const s=(i=t.children)==null?void 0:i.get(n);if(!s)return;t=s}return t._value===ti?void 0:t._value}hasKeyOrParent(e){var i;let t=this.root;for(const n of e){const s=(i=t.children)==null?void 0:i.get(n);if(!s)return!1;if(s._value!==ti)return!0;t=s}return!1}hasKeyOrChildren(e){var i;let t=this.root;for(const n of e){const s=(i=t.children)==null?void 0:i.get(n);if(!s)return!1;t=s}return!0}hasKey(e){var i;let t=this.root;for(const n of e){const s=(i=t.children)==null?void 0:i.get(n);if(!s)return!1;t=s}return t._value!==ti}getPathToKey(e){var n;const t=[{part:"",node:this.root}];let i=0;for(const s of e){const o=(n=t[i].node.children)==null?void 0:n.get(s);if(!o)return;t.push({part:s,node:o}),i++}return t}opNode(e,t,i){let n=this.root;for(const a of e){if(n.children)if(n.children.has(a))n=n.children.get(a);else{const c=new Kg;n.children.set(a,c),n=c}else{const c=new Kg;n.children=new Map([[a,c]]),n=c}i==null||i(n)}const s=n._value===ti?0:1;t(n);const o=n._value===ti?0:1;this._size+=o-s}*values(){for(const{_value:e}of ny(this.root))e!==ti&&(yield e)}}function*ny(r){const e=[r];for(;e.length>0;){const t=e.pop();if(yield t,t.children)for(const i of t.children.values())e.push(i)}}class Kg{constructor(){this._value=ti}get value(){return this._value===ti?void 0:this._value}set value(e){this._value=e===void 0?ti:e}}let Ai=class Co{constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new Co(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return Co.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return Co.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return Co.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){const i=e.lineNumber|0,n=t.lineNumber|0;if(i===n){const s=e.column|0,o=t.column|0;return s-o}return i-n}clone(){return new Co(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new Co(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},Qe=class Ct{constructor(e,t,i,n){e>i||e===i&&t>n?(this.startLineNumber=i,this.startColumn=n,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n)}isEmpty(){return Ct.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return Ct.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return Ct.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return Ct.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return Ct.plusRange(this,e)}static plusRange(e,t){let i,n,s,o;return t.startLineNumber<e.startLineNumber?(i=t.startLineNumber,n=t.startColumn):t.startLineNumber===e.startLineNumber?(i=t.startLineNumber,n=Math.min(t.startColumn,e.startColumn)):(i=e.startLineNumber,n=e.startColumn),t.endLineNumber>e.endLineNumber?(s=t.endLineNumber,o=t.endColumn):t.endLineNumber===e.endLineNumber?(s=t.endLineNumber,o=Math.max(t.endColumn,e.endColumn)):(s=e.endLineNumber,o=e.endColumn),new Ct(i,n,s,o)}intersectRanges(e){return Ct.intersectRanges(this,e)}static intersectRanges(e,t){let i=e.startLineNumber,n=e.startColumn,s=e.endLineNumber,o=e.endColumn;const a=t.startLineNumber,c=t.startColumn,l=t.endLineNumber,u=t.endColumn;return i<a?(i=a,n=c):i===a&&(n=Math.max(n,c)),s>l?(s=l,o=u):s===l&&(o=Math.min(o,u)),i>s||i===s&&n>o?null:new Ct(i,n,s,o)}equalsRange(e){return Ct.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return Ct.getEndPosition(this)}static getEndPosition(e){return new Ai(e.endLineNumber,e.endColumn)}getStartPosition(){return Ct.getStartPosition(this)}static getStartPosition(e){return new Ai(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new Ct(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new Ct(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return Ct.collapseToStart(this)}static collapseToStart(e){return new Ct(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return Ct.collapseToEnd(this)}static collapseToEnd(e){return new Ct(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new Ct(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new Ct(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new Ct(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){const s=e.startLineNumber|0,o=t.startLineNumber|0;if(s===o){const a=e.startColumn|0,c=t.startColumn|0;if(a===c){const l=e.endLineNumber|0,u=t.endLineNumber|0;if(l===u){const d=e.endColumn|0,h=t.endColumn|0;return d-h}return l-u}return a-c}return s-o}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};class b5{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new A,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),Ce(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var n;(n=this._factories.get(e))==null||n.dispose();const i=new y5(this,e,t);return this._factories.set(e,i),Ce(()=>{const s=this._factories.get(e);!s||s!==i||(this._factories.delete(e),s.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this._factories.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this._factories.get(e);return!!(!i||i.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class y5 extends Ne{get isResolved(){return this._isResolved}constructor(e,t,i){super(),this._registry=e,this._languageId=t,this._factory=i,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}var ry;(function(r){const e=new Map;e.set(0,ue.symbolMethod),e.set(1,ue.symbolFunction),e.set(2,ue.symbolConstructor),e.set(3,ue.symbolField),e.set(4,ue.symbolVariable),e.set(5,ue.symbolClass),e.set(6,ue.symbolStruct),e.set(7,ue.symbolInterface),e.set(8,ue.symbolModule),e.set(9,ue.symbolProperty),e.set(10,ue.symbolEvent),e.set(11,ue.symbolOperator),e.set(12,ue.symbolUnit),e.set(13,ue.symbolValue),e.set(15,ue.symbolEnum),e.set(14,ue.symbolConstant),e.set(15,ue.symbolEnum),e.set(16,ue.symbolEnumMember),e.set(17,ue.symbolKeyword),e.set(27,ue.symbolSnippet),e.set(18,ue.symbolText),e.set(19,ue.symbolColor),e.set(20,ue.symbolFile),e.set(21,ue.symbolReference),e.set(22,ue.symbolCustomColor),e.set(23,ue.symbolFolder),e.set(24,ue.symbolTypeParameter),e.set(25,ue.account),e.set(26,ue.issues);function t(s){let o=e.get(s);return o||(console.info("No codicon found for CompletionItemKind "+s),o=ue.symbolProperty),o}r.toIcon=t;const i=new Map;i.set("method",0),i.set("function",1),i.set("constructor",2),i.set("field",3),i.set("variable",4),i.set("class",5),i.set("struct",6),i.set("interface",7),i.set("module",8),i.set("property",9),i.set("event",10),i.set("operator",11),i.set("unit",12),i.set("value",13),i.set("constant",14),i.set("enum",15),i.set("enum-member",16),i.set("enumMember",16),i.set("keyword",17),i.set("snippet",27),i.set("text",18),i.set("color",19),i.set("file",20),i.set("reference",21),i.set("customcolor",22),i.set("folder",23),i.set("type-parameter",24),i.set("typeParameter",24),i.set("account",25),i.set("issue",26);function n(s,o){let a=i.get(s);return typeof a>"u"&&!o&&(a=9),a}r.fromString=n})(ry||(ry={}));var Ad;(function(r){r[r.Automatic=0]="Automatic",r[r.Explicit=1]="Explicit"})(Ad||(Ad={}));var sy;(function(r){r[r.Automatic=0]="Automatic",r[r.PasteAs=1]="PasteAs"})(sy||(sy={}));var oy;(function(r){r[r.Invoke=1]="Invoke",r[r.TriggerCharacter=2]="TriggerCharacter",r[r.ContentChange=3]="ContentChange"})(oy||(oy={}));var ay;(function(r){r[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write"})(ay||(ay={}));function x5(r){return r&&y.isUri(r.uri)&&Qe.isIRange(r.range)&&(Qe.isIRange(r.originSelectionRange)||Qe.isIRange(r.targetSelectionRange))}f("vs/editor/common/languages","Array","array"),f("vs/editor/common/languages","Boolean","boolean"),f("vs/editor/common/languages","Class","class"),f("vs/editor/common/languages","Constant","constant"),f("vs/editor/common/languages","Constructor","constructor"),f("vs/editor/common/languages","Enum","enumeration"),f("vs/editor/common/languages","EnumMember","enumeration member"),f("vs/editor/common/languages","Event","event"),f("vs/editor/common/languages","Field","field"),f("vs/editor/common/languages","File","file"),f("vs/editor/common/languages","Function","function"),f("vs/editor/common/languages","Interface","interface"),f("vs/editor/common/languages","Key","key"),f("vs/editor/common/languages","Method","method"),f("vs/editor/common/languages","Module","module"),f("vs/editor/common/languages","Namespace","namespace"),f("vs/editor/common/languages","Null","null"),f("vs/editor/common/languages","Number","number"),f("vs/editor/common/languages","Object","object"),f("vs/editor/common/languages","Operator","operator"),f("vs/editor/common/languages","Package","package"),f("vs/editor/common/languages","Property","property"),f("vs/editor/common/languages","String","string"),f("vs/editor/common/languages","Struct","struct"),f("vs/editor/common/languages","TypeParameter","type parameter"),f("vs/editor/common/languages","Variable","variable");var cy;(function(r){const e=new Map;e.set(0,ue.symbolFile),e.set(1,ue.symbolModule),e.set(2,ue.symbolNamespace),e.set(3,ue.symbolPackage),e.set(4,ue.symbolClass),e.set(5,ue.symbolMethod),e.set(6,ue.symbolProperty),e.set(7,ue.symbolField),e.set(8,ue.symbolConstructor),e.set(9,ue.symbolEnum),e.set(10,ue.symbolInterface),e.set(11,ue.symbolFunction),e.set(12,ue.symbolVariable),e.set(13,ue.symbolConstant),e.set(14,ue.symbolString),e.set(15,ue.symbolNumber),e.set(16,ue.symbolBoolean),e.set(17,ue.symbolArray),e.set(18,ue.symbolObject),e.set(19,ue.symbolKey),e.set(20,ue.symbolNull),e.set(21,ue.symbolEnumMember),e.set(22,ue.symbolStruct),e.set(23,ue.symbolEvent),e.set(24,ue.symbolOperator),e.set(25,ue.symbolTypeParameter);function t(i){let n=e.get(i);return n||(console.info("No codicon found for SymbolKind "+i),n=ue.symbolProperty),n}r.toIcon=t})(cy||(cy={}));let Wo=(vi=class{static fromValue(e){switch(e){case"comment":return vi.Comment;case"imports":return vi.Imports;case"region":return vi.Region}return new vi(e)}constructor(e){this.value=e}},vi.Comment=new vi("comment"),vi.Imports=new vi("imports"),vi.Region=new vi("region"),vi);var ly;(function(r){r[r.AIGenerated=1]="AIGenerated"})(ly||(ly={}));var Xg;(function(r){function e(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}r.is=e})(Xg||(Xg={}));var Bo;(function(r){r[r.Collapsed=0]="Collapsed",r[r.Expanded=1]="Expanded"})(Bo||(Bo={}));var Qc;(function(r){r[r.Unresolved=0]="Unresolved",r[r.Resolved=1]="Resolved"})(Qc||(Qc={}));var Jc;(function(r){r[r.Current=0]="Current",r[r.Outdated=1]="Outdated"})(Jc||(Jc={}));var uy;(function(r){r[r.Editing=0]="Editing",r[r.Preview=1]="Preview"})(uy||(uy={}));var dy;(function(r){r[r.Type=1]="Type",r[r.Parameter=2]="Parameter"})(dy||(dy={})),new b5;var hy;(function(r){r[r.None=0]="None",r[r.Option=1]="Option",r[r.Default=2]="Default",r[r.Preferred=3]="Preferred"})(hy||(hy={}));var Rd;(function(r){r[r.Invoke=0]="Invoke",r[r.Automatic=1]="Automatic"})(Rd||(Rd={}));var ii;(function(r){r[r.Hint=1]="Hint",r[r.Info=2]="Info",r[r.Warning=4]="Warning",r[r.Error=8]="Error"})(ii||(ii={})),function(r){function e(o,a){return a-o}r.compare=e;const t=Object.create(null);t[r.Error]=f("vs/platform/markers/common/markers","sev.error","Error"),t[r.Warning]=f("vs/platform/markers/common/markers","sev.warning","Warning"),t[r.Info]=f("vs/platform/markers/common/markers","sev.info","Info");function i(o){return t[o]||""}r.toString=i;function n(o){switch(o){case pt.Error:return r.Error;case pt.Warning:return r.Warning;case pt.Info:return r.Info;case pt.Ignore:return r.Hint}}r.fromSeverity=n;function s(o){switch(o){case r.Error:return pt.Error;case r.Warning:return pt.Warning;case r.Info:return pt.Info;case r.Hint:return pt.Ignore}}r.toSeverity=s}(ii||(ii={}));var fy;(function(r){const e="";function t(n){return i(n,!0)}r.makeKey=t;function i(n,s){const o=[e];return n.source?o.push(n.source.replace("¦","\\¦")):o.push(e),n.code?typeof n.code=="string"?o.push(n.code.replace("¦","\\¦")):o.push(n.code.value.replace("¦","\\¦")):o.push(e),n.severity!==void 0&&n.severity!==null?o.push(ii.toString(n.severity)):o.push(e),n.message&&s?o.push(n.message.replace("¦","\\¦")):o.push(e),n.startLineNumber!==void 0&&n.startLineNumber!==null?o.push(n.startLineNumber.toString()):o.push(e),n.startColumn!==void 0&&n.startColumn!==null?o.push(n.startColumn.toString()):o.push(e),n.endLineNumber!==void 0&&n.endLineNumber!==null?o.push(n.endLineNumber.toString()):o.push(e),n.endColumn!==void 0&&n.endColumn!==null?o.push(n.endColumn.toString()):o.push(e),o.push(e),o.join("¦")}r.makeKeyOptionalMessage=i})(fy||(fy={})),ie("markerService");function fi(r,e){if(!r)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function C5(r,e="Unreachable"){throw new Error(e)}class be{static fromExtHostTestItem(e,t,i=e.parent){if(e._isRoot)return new be([t]);const n=[e.id];for(let s=i;s&&s.id!==t;s=s.parent)n.push(s.id);return n.push(t),new be(n.reverse())}static isRoot(e){return!e.includes("\0")}static root(e){const t=e.indexOf("\0");return t===-1?e:e.slice(0,t)}static fromString(e){return new be(e.split("\0"))}static join(e,t){return new be([...e.path,t])}static joinToString(e,t){return e.toString()+"\0"+t}static parentId(e){const t=e.lastIndexOf("\0");return t===-1?void 0:e.slice(0,t)}static localId(e){const t=e.lastIndexOf("\0");return t===-1?e:e.slice(t+1)}static isChild(e,t){return t.startsWith(e)&&t[e.length]==="\0"}static compare(e,t){return e===t?0:be.isChild(e,t)?2:be.isChild(t,e)?3:1}constructor(e,t=e.length){if(this.path=e,this.viewEnd=t,e.length===0||t<1)throw new Error("cannot create test with empty path")}get rootId(){return new be(this.path,1)}get parentId(){return this.viewEnd>1?new be(this.path,this.viewEnd-1):void 0}get localId(){return this.path[this.viewEnd-1]}get controllerId(){return this.path[0]}get isRoot(){return this.viewEnd===1}*idsFromRoot(){for(let e=1;e<=this.viewEnd;e++)yield new be(this.path,e)}*idsToRoot(){for(let e=this.viewEnd;e>0;e--)yield new be(this.path,e)}compare(e){if(typeof e=="string")return be.compare(this.toString(),e);for(let t=0;t<e.viewEnd&&t<this.viewEnd;t++)if(e.path[t]!==this.path[t])return 1;return e.viewEnd>this.viewEnd?2:e.viewEnd<this.viewEnd?3:0}toJSON(){return this.toString()}toString(){if(!this.stringifed){this.stringifed=this.path[0];for(let e=1;e<this.viewEnd;e++)this.stringifed+="\0",this.stringifed+=this.path[e]}return this.stringifed}}const S5=r=>"runId"in r;var Vo;(function(r){r.serialize=e=>({range:e.range.toJSON(),uri:e.uri.toJSON()}),r.deserialize=(e,t)=>({range:Qe.lift(t.range),uri:e.asCanonicalUri(y.revive(t.uri))})})(Vo||(Vo={}));var Ld;(function(r){r.serialize=e=>({message:e.message,type:0,expected:e.expected,actual:e.actual,contextValue:e.contextValue,location:e.location&&Vo.serialize(e.location)}),r.deserialize=(e,t)=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&Vo.deserialize(e,t.location)})})(Ld||(Ld={}));var Od;(function(r){r.serialize=e=>({message:e.message,type:1,offset:e.offset,length:e.length,location:e.location&&Vo.serialize(e.location)}),r.deserialize=(e,t)=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&Vo.deserialize(e,t.location)})})(Od||(Od={}));var $d;(function(r){r.serialize=e=>e.type===0?Ld.serialize(e):Od.serialize(e),r.deserialize=(e,t)=>t.type===0?Ld.deserialize(e,t):Od.deserialize(e,t)})($d||($d={}));var Kc;(function(r){r.serializeWithoutMessages=e=>({state:e.state,duration:e.duration,messages:[]}),r.serialize=e=>({state:e.state,duration:e.duration,messages:e.messages.map($d.serialize)}),r.deserialize=(e,t)=>({state:t.state,duration:t.duration,messages:t.messages.map(i=>$d.deserialize(e,i))})})(Kc||(Kc={}));const py="\0",Nd=(r,e)=>r+py+e,gy=r=>{const e=r.indexOf(py);return{ctrlId:r.slice(0,e),tagId:r.slice(e+1)}};var Md;(function(r){r.serialize=e=>{var t,i;return{extId:e.extId,label:e.label,tags:e.tags,busy:e.busy,children:void 0,uri:(t=e.uri)==null?void 0:t.toJSON(),range:((i=e.range)==null?void 0:i.toJSON())||null,description:e.description,error:e.error,sortText:e.sortText}},r.deserialize=(e,t)=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?e.asCanonicalUri(y.revive(t.uri)):void 0,range:t.range?Qe.lift(t.range):null,description:t.description,error:t.error,sortText:t.sortText})})(Md||(Md={}));var _r;(function(r){r.serialize=e=>({expand:e.expand,item:Md.serialize(e.item)}),r.deserialize=(e,t)=>({controllerId:be.root(t.item.extId),expand:t.expand,item:Md.deserialize(e,t.item)})})(_r||(_r={}));var Xc;(function(r){r.serialize=e=>{var i,n;let t;return e.item&&(t={},e.item.label!==void 0&&(t.label=e.item.label),e.item.tags!==void 0&&(t.tags=e.item.tags),e.item.busy!==void 0&&(t.busy=e.item.busy),e.item.uri!==void 0&&(t.uri=(i=e.item.uri)==null?void 0:i.toJSON()),e.item.range!==void 0&&(t.range=(n=e.item.range)==null?void 0:n.toJSON()),e.item.description!==void 0&&(t.description=e.item.description),e.item.error!==void 0&&(t.error=e.item.error),e.item.sortText!==void 0&&(t.sortText=e.item.sortText)),{extId:e.extId,expand:e.expand,item:t}},r.deserialize=e=>{let t;return e.item&&(t={},e.item.label!==void 0&&(t.label=e.item.label),e.item.tags!==void 0&&(t.tags=e.item.tags),e.item.busy!==void 0&&(t.busy=e.item.busy),e.item.range!==void 0&&(t.range=e.item.range?Qe.lift(e.item.range):null),e.item.description!==void 0&&(t.description=e.item.description),e.item.error!==void 0&&(t.error=e.item.error),e.item.sortText!==void 0&&(t.sortText=e.item.sortText)),{extId:e.extId,expand:e.expand,item:t}}})(Xc||(Xc={}));const Yg=(r,e)=>{e.expand!==void 0&&(r.expand=e.expand),e.item!==void 0&&(r.item=r.item?Object.assign(r.item,e.item):e.item)};var my;(function(r){r.serializeWithoutMessages=e=>({..._r.serialize(e),ownComputedState:e.ownComputedState,computedState:e.computedState,tasks:e.tasks.map(Kc.serializeWithoutMessages)}),r.serialize=e=>({..._r.serialize(e),ownComputedState:e.ownComputedState,computedState:e.computedState,tasks:e.tasks.map(Kc.serialize)}),r.deserialize=(e,t)=>({..._r.deserialize(e,t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(i=>Kc.deserialize(e,i)),retired:!0})})(my||(my={}));var vy;(function(r){r.serialize=e=>({id:e.id,statement:e.statement,branch:e.branch,declaration:e.declaration,uri:e.uri.toJSON()}),r.deserialize=(e,t)=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,uri:e.asCanonicalUri(y.revive(t.uri))})})(vy||(vy={}));function Zg(r){var e;return{...r,location:(e=r.location)==null?void 0:e.toJSON()}}function em(r){return r.location=r.location?Ai.isIPosition(r.location)?Ai.lift(r.location):Qe.lift(r.location):void 0,r}var _y;(function(r){r.serialize=e=>e.type===0?Hd.serialize(e):Ud.serialize(e),r.deserialize=e=>e.type===0?Hd.deserialize(e):Ud.deserialize(e)})(_y||(_y={}));var Fd;(function(r){r.serialize=Zg,r.deserialize=em})(Fd||(Fd={}));var Hd;(function(r){r.serialize=Zg,r.deserialize=em})(Hd||(Hd={}));var Ud;(function(r){r.serialize=e=>{var t;return{...Zg(e),branches:(t=e.branches)==null?void 0:t.map(Fd.serialize)}},r.deserialize=e=>{var t;return{...em(e),branches:(t=e.branches)==null?void 0:t.map(Fd.deserialize)}}})(Ud||(Ud={}));var Wd;(function(r){r.deserialize=(e,t)=>t.op===0?{op:t.op,item:_r.deserialize(e,t.item)}:t.op===1?{op:t.op,item:Xc.deserialize(t.item)}:t.op===2?{op:t.op,uri:e.asCanonicalUri(y.revive(t.uri)),docv:t.docv}:t,r.serialize=e=>e.op===0?{op:e.op,item:_r.serialize(e.item)}:e.op===1?{op:e.op,item:Xc.serialize(e.item)}:e})(Wd||(Wd={}));class E5{constructor(e){this.uriIdentity=e,this._tags=new Map,this.items=new Map,this.roots=new Set,this.busyControllerCount=0,this.pendingRootCount=0,this.tags=this._tags}apply(e){var i;const t=this.createChangeCollector();for(const n of e)switch(n.op){case 0:this.add(_r.deserialize(this.uriIdentity,n.item),t);break;case 1:this.update(Xc.deserialize(n.item),t);break;case 3:this.remove(n.itemId,t);break;case 5:this.retireTest(n.itemId);break;case 4:this.updatePendingRoots(n.amount);break;case 6:this._tags.set(n.tag.id,n.tag);break;case 7:this._tags.delete(n.id);break}(i=t.complete)==null||i.call(t)}add(e,t){var s,o;const i=(s=be.parentId(e.item.extId))==null?void 0:s.toString();let n;if(!i)n=this.createItem(e),this.roots.add(n),this.items.set(e.item.extId,n);else if(this.items.has(i)){const a=this.items.get(i);a.children.add(e.item.extId),n=this.createItem(e,a),this.items.set(e.item.extId,n)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return(o=t.add)==null||o.call(t,n),e.expand===2&&this.busyControllerCount++,n}update(e,t){var n;const i=this.items.get(e.extId);if(i)return e.expand!==void 0&&(i.expand===2&&this.busyControllerCount--,e.expand===2&&this.busyControllerCount++),Yg(i,e),(n=t.update)==null||n.call(t,i),i}remove(e,t){var o,a;const i=this.items.get(e);if(!i)return;const n=(o=be.parentId(i.item.extId))==null?void 0:o.toString();n?this.items.get(n).children.delete(i.item.extId):this.roots.delete(i);const s=[[e]];for(;s.length;)for(const c of s.pop()){const l=this.items.get(c);l&&(s.push(l.children),this.items.delete(c),(a=t.remove)==null||a.call(t,l,l!==i),l.expand===2&&this.busyControllerCount--)}}retireTest(e){}updatePendingRoots(e){this.pendingRootCount+=e}createChangeCollector(){return{}}}const Yc=(r,e)=>r===e,k5=Object.entries({range:(r,e)=>r===e?!0:!r||!e?!1:r.equalsRange(e),busy:Yc,label:Yc,description:Yc,error:Yc,sortText:Yc,tags:(r,e)=>!(r.length!==e.length||r.some(t=>!e.includes(t)))}),D5=(r,e)=>{let t;for(const[i,n]of k5)n(r[i],e[i])||(t?t[i]=e[i]:t={[i]:e[i]});return t};class I5 extends Ne{get root(){return this.options.root}constructor(e){super(),this.options=e,this.debounceSendDiff=this._register(new Ac(()=>this.flushDiff(),200)),this.diffOpEmitter=this._register(new A),this.tree=new Map,this.tags=new Map,this.diff=[],this.onDidGenerateDiff=this.diffOpEmitter.event,this.root.canResolveChildren=!0,this.upsertItem(this.root,void 0)}set resolveHandler(e){this._resolveHandler=e;for(const t of this.tree.values())this.updateExpandability(t)}get resolveHandler(){return this._resolveHandler}collectDiff(){const e=this.diff;return this.diff=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.diff)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.diff[this.diff.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){Yg(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){Yg(t.item,e.item);return}}break}}this.diff.push(e),this.debounceSendDiff.isScheduled()||this.debounceSendDiff.schedule()}expand(e,t){var n;const i=this.tree.get(e);if(i){if((i.expandLevels===void 0||t>i.expandLevels)&&(i.expandLevels=t),i.expand===1){const s=this.resolveChildren(i);return s.isOpen()?this.expandChildren(i,t-1):s.wait().then(()=>this.expandChildren(i,t-1))}else if(i.expand===3)return((n=i.resolveBarrier)==null?void 0:n.isOpen())===!1?i.resolveBarrier.wait().then(()=>this.expandChildren(i,t-1)):this.expandChildren(i,t-1)}}dispose(){for(const e of this.tree.values())this.options.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.diff=[],super.dispose()}onTestItemEvent(e,t){switch(t.op){case 3:this.removeItem(be.joinToString(e.fullId,t.id));break;case 0:this.upsertItem(t.item,e);break;case 5:for(const i of t.ops)this.onTestItemEvent(e,i);break;case 1:this.diffTagRefs(t.new,t.old,e.fullId.toString());break;case 2:this.updateExpandability(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.documentSynced(e.actual.uri);break;default:C5()}}documentSynced(e){e&&this.pushDiff({op:2,uri:e,docv:this.options.getDocumentVersion(e)})}upsertItem(e,t){var l,u;const i=be.fromExtHostTestItem(e,this.root.id,t==null?void 0:t.actual),n=this.options.getApiFor(e);n.parent&&n.parent!==(t==null?void 0:t.actual)&&this.options.getChildren(n.parent).delete(e.id);let s=this.tree.get(i.toString());if(!s){s={fullId:i,actual:e,expandLevels:t!=null&&t.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.incrementTagRefs,this),this.tree.set(s.fullId.toString(),s),this.setItemParent(e,t),this.pushDiff({op:0,item:{controllerId:this.options.controllerId,expand:s.expand,item:this.options.toITestItem(e)}}),this.connectItemAndChildren(e,s,t);return}if(s.actual===e){this.connectItem(e,s,t);return}if(((l=s.actual.uri)==null?void 0:l.toString())!==((u=e.uri)==null?void 0:u.toString()))return this.removeItem(i.toString()),this.upsertItem(e,t);const o=this.options.getChildren(s.actual),a=s.actual,c=D5(this.options.toITestItem(a),this.options.toITestItem(e));this.options.getApiFor(a).listener=void 0,s.actual=e,s.expand=0,c&&(c.hasOwnProperty("tags")&&(this.diffTagRefs(e.tags,a.tags,i.toString()),delete c.tags),this.onTestItemEvent(s,{op:4,update:c})),this.connectItemAndChildren(e,s,t);for(const[d,h]of o)this.options.getChildren(e).get(h.id)||this.removeItem(be.joinToString(i,h.id));this.documentSynced(s.actual.uri)}diffTagRefs(e,t,i){const n=new Set(t.map(s=>s.id));for(const s of e)n.delete(s.id)||this.incrementTagRefs(s);this.pushDiff({op:1,item:{extId:i,item:{tags:e.map(s=>Nd(this.options.controllerId,s.id))}}}),n.forEach(this.decrementTagRefs,this)}incrementTagRefs(e){const t=this.tags.get(e.id);t?t.refCount++:(this.tags.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:Nd(this.options.controllerId,e.id)}}))}decrementTagRefs(e){const t=this.tags.get(e);t&&!--t.refCount&&(this.tags.delete(e),this.pushDiff({op:7,id:Nd(this.options.controllerId,e)}))}setItemParent(e,t){this.options.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}connectItem(e,t,i){this.setItemParent(e,i);const n=this.options.getApiFor(e);n.parent=i==null?void 0:i.actual,n.listener=s=>this.onTestItemEvent(t,s),this.updateExpandability(t)}connectItemAndChildren(e,t,i){this.connectItem(e,t,i);for(const[n,s]of this.options.getChildren(e))this.upsertItem(s,t)}updateExpandability(e){let t;this._resolveHandler?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.resolveChildren(e))}expandChildren(e,t){if(t<0)return;const i=[];for(const[n,s]of this.options.getChildren(e.actual)){const o=this.expand(be.joinToString(e.fullId,s.id),t);gr(o)&&i.push(o)}if(i.length)return Promise.all(i).then(()=>{})}resolveChildren(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this._resolveHandler){const s=new Bi;return s.open(),s}e.expand=2,this.pushExpandStateUpdate(e);const t=e.resolveBarrier=new Bi,i=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.options.controllerId}"`,s)};let n;try{n=this._resolveHandler(e.actual===this.root?void 0:e.actual)}catch(s){i(s)}return gr(n)?n.catch(i).then(()=>{t.open(),this.updateExpandability(e)}):(t.open(),this.updateExpandability(e)),e.resolveBarrier}pushExpandStateUpdate(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}removeItem(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const i=[t];for(;i.length;){const n=i.pop();if(n){this.options.getApiFor(n.actual).listener=void 0;for(const s of n.actual.tags)this.decrementTagRefs(s.id);this.tree.delete(n.fullId.toString());for(const[s,o]of this.options.getChildren(n.actual))i.push(this.tree.get(be.joinToString(n.fullId,o.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.diffOpEmitter.fire(e)}}class P5 extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}}class Bd extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}}class T5 extends Error{constructor(e,t,i){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${i}".`)}}const A5=(r,e,t)=>{let i=new Map;return{get size(){return i.size},forEach(n,s){for(const o of i.values())n.call(s,o,this)},[Symbol.iterator](){return i.entries()},replace(n){var c;const s=new Map,o=new Set(i.keys()),a={op:5,ops:[]};for(const l of n){if(!(l instanceof t))throw new Bd(l.id);const u=e(l).controllerId;if(u!==r.controllerId)throw new T5(l.id,u,r.controllerId);if(s.has(l.id))throw new P5(l.id);s.set(l.id,l),o.delete(l.id),a.ops.push({op:0,item:l})}for(const l of o.keys())a.ops.push({op:3,id:l});(c=r.listener)==null||c.call(r,a),i=s},add(n){var s;if(!(n instanceof t))throw new Bd(n.id);i.set(n.id,n),(s=r.listener)==null||s.call(r,{op:0,item:n})},delete(n){var s;i.delete(n)&&((s=r.listener)==null||s.call(r,{op:3,id:n}))},get(n){return i.get(n)},toJSON(){return Array.from(i.values())}}},wy=new WeakMap,R5=(r,e)=>{const t={controllerId:e};return wy.set(r,t),t},Vd=r=>{const e=wy.get(r);if(!e)throw new Bd((r==null?void 0:r.id)||"<unknown>");return e};class L5{constructor(){this.data=new Map}add(e,t){fi(Oe(e)),fi(Ft(t)),fi(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}}const Jt=new L5;ie("fileService");var vs;(function(r){r[r.Unknown=0]="Unknown",r[r.File=1]="File",r[r.Directory=2]="Directory",r[r.SymbolicLink=64]="SymbolicLink"})(vs||(vs={}));var zo;(function(r){r[r.Readonly=1]="Readonly",r[r.Locked=2]="Locked"})(zo||(zo={}));var by;(function(r){r[r.None=0]="None",r[r.FileReadWrite=2]="FileReadWrite",r[r.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",r[r.FileReadStream=16]="FileReadStream",r[r.FileFolderCopy=8]="FileFolderCopy",r[r.PathCaseSensitive=1024]="PathCaseSensitive",r[r.Readonly=2048]="Readonly",r[r.Trash=4096]="Trash",r[r.FileWriteUnlock=8192]="FileWriteUnlock",r[r.FileAtomicRead=16384]="FileAtomicRead",r[r.FileAtomicWrite=32768]="FileAtomicWrite",r[r.FileAtomicDelete=65536]="FileAtomicDelete",r[r.FileClone=131072]="FileClone"})(by||(by={}));var Se;(function(r){r.FileExists="EntryExists",r.FileNotFound="EntryNotFound",r.FileNotADirectory="EntryNotADirectory",r.FileIsADirectory="EntryIsADirectory",r.FileExceedsStorageQuota="EntryExceedsStorageQuota",r.FileTooLarge="EntryTooLarge",r.FileWriteLocked="EntryWriteLocked",r.NoPermissions="NoPermissions",r.Unavailable="Unavailable",r.Unknown="Unknown"})(Se||(Se={}));class zd extends Error{static create(e,t){const i=new zd(e.toString(),t);return yy(i,t),i}constructor(e,t){super(e),this.code=t}}function yy(r,e){return r.name=e?`${e} (FileSystemError)`:"FileSystemError",r}function tm(r){if(!r)return Se.Unknown;if(r instanceof zd)return r.code;const e=/^(.+) \(FileSystemError\)$/.exec(r.name);if(!e)return Se.Unknown;switch(e[1]){case Se.FileExists:return Se.FileExists;case Se.FileIsADirectory:return Se.FileIsADirectory;case Se.FileNotADirectory:return Se.FileNotADirectory;case Se.FileNotFound:return Se.FileNotFound;case Se.FileTooLarge:return Se.FileTooLarge;case Se.FileWriteLocked:return Se.FileWriteLocked;case Se.NoPermissions:return Se.NoPermissions;case Se.Unavailable:return Se.Unavailable}return Se.Unknown}var xy;(function(r){r[r.UPDATED=0]="UPDATED",r[r.ADDED=1]="ADDED",r[r.DELETED=2]="DELETED"})(xy||(xy={}));const Ga=class Ga{constructor(e,t){this.ignorePathCasing=t,this.correlationId=void 0,this.added=new et(()=>{const i=Pi.forUris(()=>this.ignorePathCasing);return i.fill(this.rawAdded.map(n=>[n,!0])),i}),this.updated=new et(()=>{const i=Pi.forUris(()=>this.ignorePathCasing);return i.fill(this.rawUpdated.map(n=>[n,!0])),i}),this.deleted=new et(()=>{const i=Pi.forUris(()=>this.ignorePathCasing);return i.fill(this.rawDeleted.map(n=>[n,!0])),i}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const i of e){switch(i.type){case 1:this.rawAdded.push(i.resource);break;case 0:this.rawUpdated.push(i.resource);break;case 2:this.rawDeleted.push(i.resource);break}this.correlationId!==Ga.MIXED_CORRELATION&&(typeof i.cId=="number"?this.correlationId===void 0?this.correlationId=i.cId:this.correlationId!==i.cId&&(this.correlationId=Ga.MIXED_CORRELATION):this.correlationId!==void 0&&(this.correlationId=Ga.MIXED_CORRELATION))}}contains(e,...t){return this.doContains(e,{includeChildren:!1},...t)}affects(e,...t){return this.doContains(e,{includeChildren:!0},...t)}doContains(e,t,...i){if(!e)return!1;const n=i.length>0;return!!((!n||i.includes(1))&&(this.added.value.get(e)||t.includeChildren&&this.added.value.findSuperstr(e))||(!n||i.includes(0))&&(this.updated.value.get(e)||t.includeChildren&&this.updated.value.findSuperstr(e))||(!n||i.includes(2))&&(this.deleted.value.findSubstr(e)||t.includeChildren&&this.deleted.value.findSuperstr(e)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(e){return this.correlationId===e}hasCorrelation(){return typeof this.correlationId=="number"}};Ga.MIXED_CORRELATION=null;let Cy=Ga;class Sy extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}}var Ey;(function(r){r[r.FILE=0]="FILE",r[r.FOLDER=1]="FOLDER",r[r.ROOT_FOLDER=2]="ROOT_FOLDER"})(Ey||(Ey={}));const O5="";function ky(r){if(!(typeof r.size!="number"||typeof r.mtime!="number"))return r.mtime.toString(29)+r.size.toString(31)}const Pt=class Pt{static formatSize(e){return fr(e)||(e=0),e<Pt.KB?f("vs/platform/files/common/files","sizeB","{0}B",e.toFixed(0)):e<Pt.MB?f("vs/platform/files/common/files","sizeKB","{0}KB",(e/Pt.KB).toFixed(2)):e<Pt.GB?f("vs/platform/files/common/files","sizeMB","{0}MB",(e/Pt.MB).toFixed(2)):e<Pt.TB?f("vs/platform/files/common/files","sizeGB","{0}GB",(e/Pt.GB).toFixed(2)):f("vs/platform/files/common/files","sizeTB","{0}TB",(e/Pt.TB).toFixed(2))}};Pt.KB=1024,Pt.MB=Pt.KB*Pt.KB,Pt.GB=Pt.MB*Pt.KB,Pt.TB=Pt.GB*Pt.KB;let Dy=Pt;class $5 extends Ne{constructor(e,t="",i="",n=!0,s){super(),this._onDidChange=this._register(new A),this.onDidChange=this._onDidChange.event,this._enabled=!0,this._id=e,this._label=t,this._cssClass=i,this._enabled=n,this._actionCallback=s}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}}const bu=class bu{constructor(){this.id=bu.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...e){let t=[];for(const i of e)i.length&&(t.length?t=[...t,new bu,...i]:t=i);return t}async run(){}};bu.ID="vs.actions.separator";let Iy=bu;const xp=class xp extends $5{constructor(){super(xp.ID,f("vs/base/common/actions","submenu.empty","(empty)"),void 0,!1)}};xp.ID="vs.actions.empty";let Py=xp;const N5={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},M5={id:"default",displayName:f("vs/workbench/common/editor","promptOpenWith.defaultEditor.displayName","Text Editor"),providerDisplayName:f("vs/workbench/common/editor","builtinProviderDisplayName","Built-in")};var Ty;(function(r){r[r.None=0]="None",r[r.Readonly=2]="Readonly",r[r.Untitled=4]="Untitled",r[r.Singleton=8]="Singleton",r[r.RequiresTrust=16]="RequiresTrust",r[r.CanSplitInGroup=32]="CanSplitInGroup",r[r.ForceDescription=64]="ForceDescription",r[r.CanDropIntoEditor=128]="CanDropIntoEditor",r[r.MultipleEditors=256]="MultipleEditors",r[r.Scratchpad=512]="Scratchpad"})(Ty||(Ty={}));var Ay;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.REPLACE=1]="REPLACE",r[r.MOVE=2]="MOVE",r[r.UNPIN=3]="UNPIN"})(Ay||(Ay={}));var Ry;(function(r){r[r.PRIMARY=1]="PRIMARY",r[r.SECONDARY=2]="SECONDARY",r[r.BOTH=3]="BOTH",r[r.ANY=4]="ANY"})(Ry||(Ry={}));var Ly;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.KEYBOARD=1]="KEYBOARD",r[r.MOUSE=2]="MOUSE"})(Ly||(Ly={}));var Oy;(function(r){r[r.LEFT=0]="LEFT",r[r.RIGHT=1]="RIGHT"})(Oy||(Oy={}));class F5{constructor(){this.editorSerializerConstructors=new Map,this.editorSerializerInstances=new Map}start(e){const t=this.instantiationService=e.get(vd);for(const[i,n]of this.editorSerializerConstructors)this.createEditorSerializer(i,n,t);this.editorSerializerConstructors.clear()}createEditorSerializer(e,t,i){const n=i.createInstance(t);this.editorSerializerInstances.set(e,n)}registerFileEditorFactory(e){if(this.fileEditorFactory)throw new Error("Can only register one file editor factory.");this.fileEditorFactory=e}getFileEditorFactory(){return Ro(this.fileEditorFactory)}registerEditorSerializer(e,t){if(this.editorSerializerConstructors.has(e)||this.editorSerializerInstances.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.instantiationService?this.createEditorSerializer(e,t,this.instantiationService):this.editorSerializerConstructors.set(e,t),Ce(()=>{this.editorSerializerConstructors.delete(e),this.editorSerializerInstances.delete(e)})}getEditorSerializer(e){return this.editorSerializerInstances.get(typeof e=="string"?e:e.typeId)}}Jt.add(N5.EditorFactory,new F5);var $y;(function(r){r[r.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",r[r.SEQUENTIAL=1]="SEQUENTIAL"})($y||($y={}));var wr;(function(r){r.Panel="panel",r.Terminal="terminal",r.Notebook="notebook",r.Editor="editor"})(wr||(wr={})),function(r){function e(t){switch(t){case"panel":return r.Panel;case"terminal":return r.Terminal;case"notebook":return r.Notebook}return r.Panel}r.fromRaw=e}(wr||(wr={})),ie("chatAgentService");let Ny=(yu=class{constructor(e){this.contextKeyService=e,this._agents=[],this._onDidChangeAgents=new A,this.onDidChangeAgents=this._onDidChangeAgents.event}registerAgent(e,t){if(this.getAgent(e))throw new Error(`Agent already registered: ${JSON.stringify(e)}`);const n=this,s=t.slashCommands;t={...t,get slashCommands(){return s.filter(a=>!a.when||n.contextKeyService.contextMatchesRules(Dt.deserialize(a.when)))}};const o={data:t};return this._agents.push(o),Ce(()=>{this._agents=this._agents.filter(a=>a!==o),this._onDidChangeAgents.fire(void 0)})}registerAgentImplementation(e,t){const i=this._getAgentEntry(e);if(!i)throw new Error(`Unknown agent: ${JSON.stringify(e)}`);if(i.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(e)}`);return i.impl=t,this._onDidChangeAgents.fire(new jd(i.data,t)),Ce(()=>{i.impl=void 0,this._onDidChangeAgents.fire(void 0)})}registerDynamicAgent(e,t){const i={data:e,impl:t};return this._agents.push(i),this._onDidChangeAgents.fire(new jd(e,t)),Ce(()=>{this._agents=this._agents.filter(n=>n!==i),this._onDidChangeAgents.fire(void 0)})}updateAgent(e,t){const i=this._getAgentEntry(e);if(!(i!=null&&i.impl))throw new Error(`No activated agent with id ${JSON.stringify(e)} registered`);i.data.metadata={...i.data.metadata,...t},this._onDidChangeAgents.fire(new jd(i.data,i.impl))}getDefaultAgent(e){return this.getActivatedAgents().find(t=>!!t.isDefault&&t.locations.includes(e))}getSecondaryAgent(){var e;return(e=yn.find(this._agents.values(),t=>!!t.data.metadata.isSecondary))==null?void 0:e.data}_getAgentEntry(e){return this._agents.find(t=>t.data.id===e)}getAgent(e){var t;return(t=this._getAgentEntry(e))==null?void 0:t.data}getAgents(){return this._agents.map(e=>e.data)}getActivatedAgents(){return Array.from(this._agents.values()).filter(e=>!!e.impl).map(e=>new jd(e.data,e.impl))}getAgentsByName(e){return this.getAgents().filter(t=>t.name===e)}async invokeAgent(e,t,i,n,s){const o=this._getAgentEntry(e);if(!(o!=null&&o.impl))throw new Error(`No activated agent with id ${e}`);return await o.impl.invoke(t,i,n,s)}async getFollowups(e,t,i,n,s){var a;const o=this._getAgentEntry(e);if(!(o!=null&&o.impl))throw new Error(`No activated agent with id ${e}`);return(a=o.impl)!=null&&a.provideFollowups?o.impl.provideFollowups(t,i,n,s):[]}},yu.AGENT_LEADER="@",yu);Ny=H([$(0,YE)],Ny);class jd{constructor(e,t){this.data=e,this.impl=t}get id(){return this.data.id}get name(){return this.data.name??""}get description(){return this.data.description??""}get extensionId(){return this.data.extensionId}get isDefault(){return this.data.isDefault}get metadata(){return this.data.metadata}get slashCommands(){return this.data.slashCommands}get defaultImplicitVariables(){return this.data.defaultImplicitVariables}get locations(){return this.data.locations}async invoke(e,t,i,n){return this.impl.invoke(e,t,i,n)}async provideFollowups(e,t,i,n){return this.impl.provideFollowups?this.impl.provideFollowups(e,t,i,n):[]}provideWelcomeMessage(e){if(this.impl.provideWelcomeMessage)return this.impl.provideWelcomeMessage(e)}provideSampleQuestions(e){if(this.impl.provideSampleQuestions)return this.impl.provideSampleQuestions(e)}}const Zc="**",im="/",qd="[/\\\\]",Gd="[^/\\\\]",H5=/\//g;function My(r,e){switch(r){case 0:return"";case 1:return`${Gd}*?`;default:return`(?:${qd}|${Gd}+${qd}${e?`|${qd}${Gd}+`:""})*?`}}function nm(r,e){if(!r)return[];const t=[];let i=!1,n=!1,s="";for(const o of r){switch(o){case e:if(!i&&!n){t.push(s),s="";continue}break;case"{":i=!0;break;case"}":i=!1;break;case"[":n=!0;break;case"]":n=!1;break}s+=o}return s&&t.push(s),t}function Fy(r){if(!r)return"";let e="";const t=nm(r,im);if(t.every(i=>i===Zc))e=".*";else{let i=!1;t.forEach((n,s)=>{if(n===Zc){if(i)return;e+=My(2,s===t.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of n){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let d;u==="-"?d=u:(u==="^"||u==="!")&&!l?d="^":u===im?d="":d=Ao(u),l+=d;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const h=`(?:${nm(a,",").map(g=>Fy(g)).join("|")})`;e+=h,o=!1,a="";break}case"]":{e+="["+l+"]",c=!1,l="";break}case"?":e+=Gd;continue;case"*":e+=My(1);continue;default:e+=Ao(u)}}s<t.length-1&&(t[s+1]!==Zc||s+2<t.length)&&(e+=qd)}i=n===Zc})}return e}const U5=/^\*\*\/\*\.[\w\.-]+$/,W5=/^\*\*\/([\w\.-]+)\/?$/,B5=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,V5=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,z5=/^\*\*((\/[\w\.-]+)+)\/?$/,j5=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Hy=new ig(1e4),Uy=function(){return!1},an=function(){return null};function rm(r,e){if(!r)return an;let t;typeof r!="string"?t=r.pattern:t=r,t=t.trim();const i=`${t}_${!!e.trimForExclusions}`;let n=Hy.get(i);if(n)return Wy(n,r);let s;return U5.test(t)?n=q5(t.substr(4),t):(s=W5.exec(sm(t,e)))?n=G5(s[1],t):(e.trimForExclusions?V5:B5).test(t)?n=Q5(t,e):(s=z5.exec(sm(t,e)))?n=By(s[1].substr(1),t,!0):(s=j5.exec(sm(t,e)))?n=By(s[1],t,!1):n=J5(t),Hy.set(i,n),Wy(n,r)}function Wy(r,e){if(typeof e=="string")return r;const t=function(i,n){return md(i,e.base,!cr)?r($4(i.substr(e.base.length),Hi),n):null};return t.allBasenames=r.allBasenames,t.allPaths=r.allPaths,t.basenames=r.basenames,t.patterns=r.patterns,t}function sm(r,e){return e.trimForExclusions&&r.endsWith("/**")?r.substr(0,r.length-2):r}function q5(r,e){return function(t,i){return typeof t=="string"&&t.endsWith(r)?e:null}}function G5(r,e){const t=`/${r}`,i=`\\${r}`,n=function(o,a){return typeof o!="string"?null:a?a===r?e:null:o===r||o.endsWith(t)||o.endsWith(i)?e:null},s=[r];return n.basenames=s,n.patterns=[e],n.allBasenames=s,n}function Q5(r,e){const t=Vy(r.slice(1,-1).split(",").map(a=>rm(a,e)).filter(a=>a!==an),r),i=t.length;if(!i)return an;if(i===1)return t[0];const n=function(a,c){for(let l=0,u=t.length;l<u;l++)if(t[l](a,c))return r;return null},s=t.find(a=>!!a.allBasenames);s&&(n.allBasenames=s.allBasenames);const o=t.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(n.allPaths=o),n}function By(r,e,t){const i=Hi===Fe.sep,n=i?r:r.replace(H5,Hi),s=Hi+n,o=Fe.sep+r;let a;return t?a=function(c,l){return typeof c=="string"&&(c===n||c.endsWith(s)||!i&&(c===r||c.endsWith(o)))?e:null}:a=function(c,l){return typeof c=="string"&&(c===n||!i&&c===r)?e:null},a.allPaths=[(t?"*/":"./")+r],a}function J5(r){try{const e=new RegExp(`^${Fy(r)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?r:null}}catch{return an}}function el(r,e,t){return!r||typeof e!="string"?!1:jo(r)(e,void 0,t)}function jo(r,e={}){if(!r)return Uy;if(typeof r=="string"||K5(r)){const t=rm(r,e);if(t===an)return Uy;const i=function(n,s){return!!t(n,s)};return t.allBasenames&&(i.allBasenames=t.allBasenames),t.allPaths&&(i.allPaths=t.allPaths),i}return X5(r,e)}function K5(r){const e=r;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function X5(r,e){const t=Vy(Object.getOwnPropertyNames(r).map(a=>Y5(a,r[a],e)).filter(a=>a!==an)),i=t.length;if(!i)return an;if(!t.some(a=>!!a.requiresSiblings)){if(i===1)return t[0];const a=function(u,d){let h;for(let g=0,b=t.length;g<b;g++){const _=t[g](u,d);if(typeof _=="string")return _;gr(_)&&(h||(h=[]),h.push(_))}return h?(async()=>{for(const g of h){const b=await g;if(typeof b=="string")return b}return null})():null},c=t.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=t.reduce((u,d)=>d.allPaths?u.concat(d.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const n=function(a,c,l){let u,d;for(let h=0,g=t.length;h<g;h++){const b=t[h];b.requiresSiblings&&l&&(c||(c=hi(a)),u||(u=c.substr(0,c.length-vg(a).length)));const _=b(a,c,u,l);if(typeof _=="string")return _;gr(_)&&(d||(d=[]),d.push(_))}return d?(async()=>{for(const h of d){const g=await h;if(typeof g=="string")return g}return null})():null},s=t.find(a=>!!a.allBasenames);s&&(n.allBasenames=s.allBasenames);const o=t.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(n.allPaths=o),n}function Y5(r,e,t){if(e===!1)return an;const i=rm(r,t);if(i===an)return an;if(typeof e=="boolean")return i;if(e){const n=e.when;if(typeof n=="string"){const s=(o,a,c,l)=>{if(!l||!i(o,a))return null;const u=n.replace("$(basename)",()=>c),d=l(u);return gr(d)?d.then(h=>h?r:null):d?r:null};return s.requiresSiblings=!0,s}}return i}function Vy(r,e){const t=r.filter(a=>!!a.basenames);if(t.length<2)return r;const i=t.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let n;if(e){n=[];for(let a=0,c=i.length;a<c;a++)n.push(e)}else n=t.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const s=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const d=a.charCodeAt(u-1);if(d===47||d===92)break}c=a.substr(u)}const l=i.indexOf(c);return l!==-1?n[l]:null};s.basenames=i,s.patterns=n,s.allBasenames=i;const o=r.filter(a=>!a.basenames);return o.push(s),o}ie("notebookDocumentService");const om=["W","X","Y","Z","a","b","c","d","e","f"],Z5=new RegExp(`^[${om.join("")}]+`),zy=7;function e7(r){if(r.scheme!==Y.vscodeNotebookCell)return;const e=r.fragment.indexOf("s");if(e<0)return;const t=parseInt(r.fragment.substring(0,e).replace(Z5,""),zy),i=VS(r.fragment.substring(e+1)).toString();if(!isNaN(t))return{handle:t,notebook:r.with({scheme:i,fragment:null})}}function t7(r,e){const t=e.toString(zy),n=`${t.length<om.length?om[t.length-1]:"z"}${t}s${rb(ve.fromString(r.scheme),!0,!0)}`;return r.with({scheme:Y.vscodeNotebookCell,fragment:n})}var qo;(function(r){r[r.Markup=1]="Markup",r[r.Code=2]="Code"})(qo||(qo={})),kn.latex,kn.markdown,kn.text,kn.latex,kn.markdown,kn.text;var tl;(function(r){r[r.Unconfirmed=1]="Unconfirmed",r[r.Pending=2]="Pending",r[r.Executing=3]="Executing"})(tl||(tl={}));var jy;(function(r){r[r.Unconfirmed=1]="Unconfirmed",r[r.Pending=2]="Pending",r[r.Executing=3]="Executing"})(jy||(jy={}));var ji;(function(r){r[r.ModelChange=1]="ModelChange",r[r.Move=2]="Move",r[r.ChangeCellLanguage=5]="ChangeCellLanguage",r[r.Initialize=6]="Initialize",r[r.ChangeCellMetadata=7]="ChangeCellMetadata",r[r.Output=8]="Output",r[r.OutputItem=9]="OutputItem",r[r.ChangeCellContent=10]="ChangeCellContent",r[r.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",r[r.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",r[r.ChangeCellMime=13]="ChangeCellMime",r[r.Unknown=100]="Unknown"})(ji||(ji={}));var qy;(function(r){r[r.Handle=0]="Handle",r[r.Index=1]="Index"})(qy||(qy={}));var Gy;(function(r){r.scheme=Y.vscodeNotebookCell;function e(a,c){return t7(a,c)}r.generate=e;function t(a){return e7(a)}r.parse=t;function i(a,c){return a.with({scheme:Y.vscodeNotebookCellOutput,fragment:`op${c??""},${a.scheme!==Y.file?a.scheme:""}`})}r.generateCellOutputUri=i;function n(a){if(a.scheme!==Y.vscodeNotebookCellOutput)return;const c=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(a.fragment);if(!c)return;const l=c[1]&&c[1]!==""?c[1]:void 0,u=c[2];return{outputId:l,notebook:a.with({scheme:u||Y.file,fragment:null})}}r.parseCellOutputUri=n;function s(a,c,l){return r.generate(a,c).with({scheme:l})}r.generateCellPropertyUri=s;function o(a,c){if(a.scheme===c)return r.parse(a.with({scheme:r.scheme}))}r.parseCellPropertyUri=o})(Gy||(Gy={})),new Z("notebookEditorCursorAtBoundary","none"),new Z("notebookEditorCursorAtLineBoundary","none");var Qy;(function(r){r.default="default",r.option="option"})(Qy||(Qy={}));const Qa=class Qa{static create(e){return`${Qa._prefix}${e}`}static parse(e){if(e.startsWith(Qa._prefix))return e.substring(Qa._prefix.length)}};Qa._prefix="notebook/";let Jy=Qa;function Ky(r){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(r)}const i7=new TextDecoder;function n7(r){const e=[];let t=!1;for(const o of r)(e.length===0||t)&&(e.push(o),t=!0);let i=s7(e);const n=ve.concat(e.map(o=>ve.wrap(o))),s=u7(n);return i=i||s.byteLength!==n.byteLength,{data:s,didCompression:i}}const Qd=`${String.fromCharCode(27)}[A`,am=Qd.split("").map(r=>r.charCodeAt(0)),r7=10;function s7(r){let e=!1;return r.forEach((t,i)=>{if(i===0||t.length<Qd.length)return;const n=r[i-1],s=t.subarray(0,Qd.length);if(s[0]===am[0]&&s[1]===am[1]&&s[2]===am[2]){const o=n.lastIndexOf(r7);if(o===-1)return;e=!0,r[i-1]=n.subarray(0,o),r[i]=t.subarray(Qd.length)}}),e}function o7(r){let e=r;do r=e,e=r.replace(/[^\n]\x08/gm,"");while(e.length<r.length);return r}function a7(r){for(r=r.replace(/\r+\n/gm,`
`);r.search(/\r[^$]/g)>-1;){const e=r.match(/^(.*)\r+/m)[1];let t=r.match(/\r+(.*)$/m)[1];t=t+e.slice(t.length,e.length),r=r.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,t)}return r}const c7="\b".charCodeAt(0),l7="\r".charCodeAt(0);function u7(r){return!r.buffer.includes(c7)&&!r.buffer.includes(l7)?r:ve.fromString(a7(o7(i7.decode(r.buffer))))}const d7=ie("editorGroupsService");var Xy;(function(r){r[r.UP=0]="UP",r[r.DOWN=1]="DOWN",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT"})(Xy||(Xy={}));var Yy;(function(r){r[r.HORIZONTAL=0]="HORIZONTAL",r[r.VERTICAL=1]="VERTICAL"})(Yy||(Yy={}));var Zy;(function(r){r[r.FIRST=0]="FIRST",r[r.LAST=1]="LAST",r[r.NEXT=2]="NEXT",r[r.PREVIOUS=3]="PREVIOUS"})(Zy||(Zy={}));var ex;(function(r){r[r.MAXIMIZE=0]="MAXIMIZE",r[r.EXPAND=1]="EXPAND",r[r.EVEN=2]="EVEN"})(ex||(ex={}));var tx;(function(r){r[r.COPY_EDITORS=0]="COPY_EDITORS",r[r.MOVE_EDITORS=1]="MOVE_EDITORS"})(tx||(tx={}));var ix;(function(r){r[r.CREATION_TIME=0]="CREATION_TIME",r[r.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",r[r.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(ix||(ix={})),ie("editorService");const h7=-1,f7=-2,nx="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$";ie("extensionGalleryService");var rx;(function(r){r.Unsupported="Unsupported",r.Deprecated="Deprecated",r.Malicious="Malicious",r.Incompatible="Incompatible",r.IncompatibleTargetPlatform="IncompatibleTargetPlatform",r.ReleaseVersionNotFound="ReleaseVersionNotFound",r.Invalid="Invalid",r.Download="Download",r.DownloadSignature="DownloadSignature",r.UpdateMetadata="UpdateMetadata",r.Extract="Extract",r.Scanning="Scanning",r.Delete="Delete",r.Rename="Rename",r.CorruptZip="CorruptZip",r.IncompleteZip="IncompleteZip",r.Signature="Signature",r.NotAllowed="NotAllowed",r.Gallery="Gallery",r.Unknown="Unknown",r.Internal="Internal"})(rx||(rx={}));var sx;(function(r){r.Timeout="Timeout",r.Cancelled="Cancelled",r.Failed="Failed"})(sx||(sx={})),ie("extensionManagementService"),ie("IGlobalExtensionEnablementService"),ie("IExtensionTipsService"),lg("vs/platform/extensionManagement/common/extensionManagement","extensions","Extensions"),lg("vs/platform/extensionManagement/common/extensionManagement","preferences","Preferences");function cm(r){if(!r)return;const e=r.indexOf("+");return e<0?r:r.substr(0,e)}const p7=["Azure","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","AI","Chat","Other"];class Xe{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const i=typeof e=="string"?e:e.value,n=typeof t=="string"?t:t.value;return os(i,n)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}}class _s{get size(){return this._set.size}constructor(e){if(this._set=new Set,e)for(const t of e)this.add(t)}add(e){this._set.add(Xe.toKey(e))}delete(e){return this._set.delete(Xe.toKey(e))}has(e){return this._set.has(Xe.toKey(e))}}class br{constructor(){this._map=new Map}clear(){this._map.clear()}delete(e){this._map.delete(Xe.toKey(e))}get(e){return this._map.get(Xe.toKey(e))}has(e){return this._map.has(Xe.toKey(e))}set(e,t){this._map.set(Xe.toKey(e),t)}values(){return this._map.values()}forEach(e){this._map.forEach(e)}[Symbol.iterator](){return this._map[Symbol.iterator]()}}ie("IBuiltinExtensionsScannerService"),ie("telemetryService"),ie("customEndpointTelemetryService");class lm{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}}const g7="extensionTelemetryLog",m7=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function v7(r){if(!r)return"none";const e=cm(r);return m7.has(e)?e:"other"}function _7(r,e){if(!r||!r.includes("/")&&!r.includes("\\"))return r;let t=r;const i=[];for(const a of e)for(;;){const c=a.exec(r);if(!c)break;i.push([c.index,a.lastIndex])}const n=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,s=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(t="";;){const a=s.exec(r);if(!a)break;const c=i.some(([l,u])=>a.index<u&&l<s.lastIndex);!n.test(a[0])&&!c&&(t+=r.substring(o,a.index)+"<REDACTED: user-file-path>",o=s.lastIndex)}return o<r.length&&(t+=r.substr(o)),t}function w7(r){if(!r)return r;const e=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"Email",regex:/@[a-zA-Z0-9-]+\.[a-zA-Z0-9-]+/}];for(const t of e)if(t.regex.test(r))return`<REDACTED: ${t.label}>`;return r}function ox(r,e){return Ed(r,t=>{if(t instanceof lm||Object.hasOwnProperty.call(t,"isTrustedTelemetryValue"))return t.value;if(typeof t=="string"){let i=t.replaceAll("%20"," ");i=_7(i,e);for(const n of e)i=i.replace(n,"");return i=w7(i),i}})}new Xe("pprice.better-merge");class b7{constructor(){this._generators=new Map,this._cache=new WeakMap}register(e,t){this._generators.set(e,t)}readActivationEvents(e){return this._cache.has(e)||this._cache.set(e,this._readActivationEvents(e)),this._cache.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const i of e){const n=this.readActivationEvents(i);n.length>0&&(t[Xe.toKey(i.identifier)]=n)}return t}_readActivationEvents(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let i=0;i<t.length;i++)t[i]==="onUri"&&(t[i]=`onUri:${Xe.toKey(e.identifier)}`);if(!e.contributes)return t;for(const i in e.contributes){const n=this._generators.get(i);if(!n)continue;const s=e.contributes[i],o=Array.isArray(s)?s:[s];try{n(o,t)}catch(a){Ni(a)}}return t}}const y7=new b7,x7=Object.freeze({identifier:new Xe("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:y.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1});ie("extensionService");class ax{constructor(e){this.dependency=e}}function At(r,e){return r.enabledApiProposals?r.enabledApiProposals.includes(e):!1}function M(r,e){var t;if(!At(r,e))throw new Error(`Extension '${r.identifier.value}' CANNOT use API proposal: ${e}.
Its package.json#enabledApiProposals-property declares: ${((t=r.enabledApiProposals)==null?void 0:t.join(", "))??"[]"} but NOT ${e}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${r.identifier.value}`)}ie("remoteAuthorityResolverService");class C7{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}}class S7{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}}var Dn;(function(r){r.Unknown="Unknown",r.NotAvailable="NotAvailable",r.TemporarilyNotAvailable="TemporarilyNotAvailable",r.NoResolverFound="NoResolverFound",r.InvalidAuthority="InvalidAuthority"})(Dn||(Dn={}));function cx(r){const e=r.indexOf("+");return e===-1?r:r.substring(0,e)}var um,ws,In,dm,bs,yr,ys,hm,fm,Jd,il,pm,cn,ln,gm,ni,mm;function se(r){return Object.assign(r,{apply:function(...t){if(t.length===0)return Reflect.construct(r,[]);{const i=t.length===1?[]:t[1];return Reflect.construct(r,i,t[0].constructor)}},call:function(...t){if(t.length===0)return Reflect.construct(r,[]);{const[i,...n]=t;return Reflect.construct(r,n,i.constructor)}}})}var vm;(function(r){r[r.Top=0]="Top",r[r.Bottom=1]="Bottom"})(vm||(vm={}));let Re=um=(_S=class{constructor(e){le(this,Xs,void 0);J(this,Xs,e)}static from(...e){let t=e;return new um(function(){if(t){for(const i of t)i&&typeof i.dispose=="function"&&i.dispose();t=void 0}})}dispose(){typeof I(this,Xs)=="function"&&(I(this,Xs).call(this),J(this,Xs,void 0))}},Xs=new WeakMap,_S);Re=um=H([se],Re);let Ee=ws=class{static Min(...e){if(e.length===0)throw new TypeError;let t=e[0];for(let i=1;i<e.length;i++){const n=e[i];n.isBefore(t)&&(t=n)}return t}static Max(...e){if(e.length===0)throw new TypeError;let t=e[0];for(let i=1;i<e.length;i++){const n=e[i];n.isAfter(t)&&(t=n)}return t}static isPosition(e){if(!e)return!1;if(e instanceof ws)return!0;const{line:t,character:i}=e;return typeof t=="number"&&typeof i=="number"}static of(e){if(e instanceof ws)return e;if(this.isPosition(e))return new ws(e.line,e.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this._line}get character(){return this._character}constructor(e,t){if(e<0)throw xe("line must be non-negative");if(t<0)throw xe("character must be non-negative");this._line=e,this._character=t}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,t=0){if(e===null||t===null)throw xe();let i;return typeof e>"u"?i=0:typeof e=="number"?i=e:(i=typeof e.lineDelta=="number"?e.lineDelta:0,t=typeof e.characterDelta=="number"?e.characterDelta:0),i===0&&t===0?this:new ws(this.line+i,this.character+t)}with(e,t=this.character){if(e===null||t===null)throw xe();let i;return typeof e>"u"?i=this.line:typeof e=="number"?i=e:(i=typeof e.line=="number"?e.line:this.line,t=typeof e.character=="number"?e.character:this.character),i===this.line&&t===this.character?this:new ws(i,t)}toJSON(){return{line:this.line,character:this.character}}};Ee=ws=H([se],Ee);let ye=In=class{static isRange(e){return e instanceof In?!0:e?Ee.isPosition(e.start)&&Ee.isPosition(e.end):!1}static of(e){if(e instanceof In)return e;if(this.isRange(e))return new In(e.start,e.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this._start}get end(){return this._end}constructor(e,t,i,n){let s,o;if(typeof e=="number"&&typeof t=="number"&&typeof i=="number"&&typeof n=="number"?(s=new Ee(e,t),o=new Ee(i,n)):Ee.isPosition(e)&&Ee.isPosition(t)&&(s=Ee.of(e),o=Ee.of(t)),!s||!o)throw new Error("Invalid arguments");s.isBefore(o)?(this._start=s,this._end=o):(this._start=o,this._end=s)}contains(e){return In.isRange(e)?this.contains(e.start)&&this.contains(e.end):Ee.isPosition(e)?!(Ee.of(e).isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){const t=Ee.Max(e.start,this._start),i=Ee.Min(e.end,this._end);if(!t.isAfter(i))return new In(t,i)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;const t=Ee.Min(e.start,this._start),i=Ee.Max(e.end,this.end);return new In(t,i)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,t=this.end){if(e===null||t===null)throw xe();let i;return e?Ee.isPosition(e)?i=e:(i=e.start||this.start,t=e.end||this.end):i=this.start,i.isEqual(this._start)&&t.isEqual(this.end)?this:new In(i,t)}toJSON(){return[this.start,this.end]}};ye=In=H([se],ye);let Pn=dm=class extends ye{static isSelection(e){return e instanceof dm?!0:e?ye.isRange(e)&&Ee.isPosition(e.anchor)&&Ee.isPosition(e.active)&&typeof e.isReversed=="boolean":!1}get anchor(){return this._anchor}get active(){return this._active}constructor(e,t,i,n){let s,o;if(typeof e=="number"&&typeof t=="number"&&typeof i=="number"&&typeof n=="number"?(s=new Ee(e,t),o=new Ee(i,n)):Ee.isPosition(e)&&Ee.isPosition(t)&&(s=Ee.of(e),o=Ee.of(t)),!s||!o)throw new Error("Invalid arguments");super(s,o),this._anchor=s,this._active=o}get isReversed(){return this._anchor===this._end}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}};Pn=dm=H([se],Pn);const lx=r=>{if(typeof r!="string"||r.length===0||!/^[0-9A-Za-z_\-]+$/.test(r))throw xe("connectionToken")};class E7{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,i){if(typeof e!="string"||e.length===0)throw xe("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw xe("port");typeof i<"u"&&lx(i),this.host=e,this.port=Math.round(t),this.connectionToken=i}}class Kd{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&lx(t)}}class un extends Error{static NotAvailable(e,t){return new un(e,Dn.NotAvailable,t)}static TemporarilyNotAvailable(e){return new un(e,Dn.TemporarilyNotAvailable)}constructor(e,t=Dn.Unknown,i){super(e),this._message=e,this._code=t,this._detail=i,Object.setPrototypeOf(this,un.prototype)}}var qi;(function(r){r[r.LF=1]="LF",r[r.CRLF=2]="CRLF"})(qi||(qi={}));var Go;(function(r){r[r.Replace=1]="Replace",r[r.Append=2]="Append",r[r.Prepend=3]="Prepend"})(Go||(Go={}));let xr=bs=class{static isTextEdit(e){return e instanceof bs?!0:e?ye.isRange(e)&&typeof e.newText=="string":!1}static replace(e,t){return new bs(e,t)}static insert(e,t){return bs.replace(new ye(e,e),t)}static delete(e){return bs.replace(e,"")}static setEndOfLine(e){const t=new bs(new ye(new Ee(0,0),new Ee(0,0)),"");return t.newEol=e,t}get range(){return this._range}set range(e){if(e&&!ye.isRange(e))throw xe("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw xe("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw xe("newEol");this._newEol=e}constructor(e,t){this._range=e,this._newText=t}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};xr=bs=H([se],xr);let Xd=yr=class{static isNotebookCellEdit(e){return e instanceof yr?!0:e?An.isNotebookRange(e)&&Array.isArray(e.newCells):!1}static replaceCells(e,t){return new yr(e,t)}static insertCells(e,t){return new yr(new An(e,e),t)}static deleteCells(e){return new yr(e,[])}static updateCellMetadata(e,t){const i=new yr(new An(e,e),[]);return i.newCellMetadata=t,i}static updateNotebookMetadata(e){const t=new yr(new An(0,0),[]);return t.newNotebookMetadata=e,t}constructor(e,t){this.range=e,this.newCells=t}};Xd=yr=H([se],Xd);class xs{static isSnippetTextEdit(e){return e instanceof xs?!0:e?ye.isRange(e.range)&&Cs.isSnippetString(e.snippet):!1}static replace(e,t){return new xs(e,t)}static insert(e,t){return xs.replace(new ye(e,e),t)}constructor(e,t){this.range=e,this.snippet=t}}let Cr=class{constructor(){this._edits=[]}_allEntries(){return this._edits}renameFile(e,t,i,n){this._edits.push({_type:1,from:e,to:t,options:i,metadata:n})}createFile(e,t,i){this._edits.push({_type:1,from:void 0,to:e,options:t,metadata:i})}deleteFile(e,t,i){this._edits.push({_type:1,from:e,to:void 0,options:t,metadata:i})}replaceNotebookMetadata(e,t,i){this._edits.push({_type:3,metadata:i,uri:e,edit:{editType:5,metadata:t},notebookMetadata:t})}replaceNotebookCells(e,t,i,n){const s=t.start,o=t.end;(s!==o||i.length>0)&&this._edits.push({_type:5,uri:e,index:s,count:o-s,cells:i,metadata:n})}replaceNotebookCellMetadata(e,t,i,n){this._edits.push({_type:3,metadata:n,uri:e,edit:{editType:3,index:t,metadata:i}})}replace(e,t,i,n){this._edits.push({_type:2,uri:e,edit:new xr(t,i),metadata:n})}insert(e,t,i,n){this.replace(e,new ye(t,t),i,n)}delete(e,t,i){this.replace(e,t,"",i)}has(e){return this._edits.some(t=>t._type===2&&t.uri.toString()===e.toString())}set(e,t){if(t)for(const i of t){if(!i)continue;let n,s;Array.isArray(i)?(n=i[0],s=i[1]):n=i,Xd.isNotebookCellEdit(n)?n.newCellMetadata?this.replaceNotebookCellMetadata(e,n.range.start,n.newCellMetadata,s):n.newNotebookMetadata?this.replaceNotebookMetadata(e,n.newNotebookMetadata,s):this.replaceNotebookCells(e,n.range,n.newCells,s):xs.isSnippetTextEdit(n)?this._edits.push({_type:6,uri:e,range:n.range,edit:n.snippet,metadata:s}):this._edits.push({_type:2,uri:e,edit:n,metadata:s})}else{for(let i=0;i<this._edits.length;i++){const n=this._edits[i];switch(n._type){case 2:case 6:case 3:case 5:n.uri.toString()===e.toString()&&(this._edits[i]=void 0);break}}DS(this._edits)}}get(e){const t=[];for(const i of this._edits)i._type===2&&i.uri.toString()===e.toString()&&t.push(i.edit);return t}entries(){const e=new mt;for(const t of this._edits)if(t._type===2){let i=e.get(t.uri);i||(i=[t.uri,[]],e.set(t.uri,i)),i[1].push(t.edit)}return[...e.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};Cr=H([se],Cr);let Cs=ys=class{static isSnippetString(e){return e instanceof ys?!0:e?typeof e.value=="string":!1}static _escape(e){return e.replace(/\$|}|\\/g,"\\$&")}constructor(e){this._tabstop=1,this.value=e||""}appendText(e){return this.value+=ys._escape(e),this}appendTabstop(e=this._tabstop++){return this.value+="$",this.value+=e,this}appendPlaceholder(e,t=this._tabstop++){if(typeof e=="function"){const i=new ys;i._tabstop=this._tabstop,e(i),this._tabstop=i._tabstop,e=i.value}else e=ys._escape(e);return this.value+="${",this.value+=t,this.value+=":",this.value+=e,this.value+="}",this}appendChoice(e,t=this._tabstop++){const i=e.map(n=>n.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=t,this.value+="|",this.value+=i,this.value+="|}",this}appendVariable(e,t){if(typeof t=="function"){const i=new ys;i._tabstop=this._tabstop,t(i),this._tabstop=i._tabstop,t=i.value}else typeof t=="string"&&(t=t.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=e,t&&(this.value+=":",this.value+=t),this.value+="}",this}};Cs=ys=H([se],Cs);var Ss;(function(r){r[r.Unnecessary=1]="Unnecessary",r[r.Deprecated=2]="Deprecated"})(Ss||(Ss={}));var Nt;(function(r){r[r.Hint=3]="Hint",r[r.Information=2]="Information",r[r.Warning=1]="Warning",r[r.Error=0]="Error"})(Nt||(Nt={}));let yi=hm=class{static isLocation(e){return e instanceof hm?!0:e?ye.isRange(e.range)&&y.isUri(e.uri):!1}constructor(e,t){if(this.uri=e,t)if(ye.isRange(t))this.range=ye.of(t);else if(Ee.isPosition(t))this.range=new ye(t,t);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};yi=hm=H([se],yi);let nl=class{static is(e){return e?typeof e.message=="string"&&e.location&&ye.isRange(e.location.range)&&y.isUri(e.location.uri):!1}constructor(e,t){this.location=e,this.message=t}static isEqual(e,t){return e===t?!0:!e||!t?!1:e.message===t.message&&e.location.range.isEqual(t.location.range)&&e.location.uri.toString()===t.location.uri.toString()}};nl=H([se],nl);let Yd=class{constructor(e,t,i=Nt.Error){if(!ye.isRange(e))throw new TypeError("range must be set");if(!t)throw new TypeError("message must be set");this.range=e,this.message=t,this.severity=i}toJSON(){return{severity:Nt[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(e,t){return e===t?!0:!e||!t?!1:e.message===t.message&&e.severity===t.severity&&e.code===t.code&&e.severity===t.severity&&e.source===t.source&&e.range.isEqual(t.range)&&ar(e.tags,t.tags)&&ar(e.relatedInformation,t.relatedInformation,nl.isEqual)}};Yd=H([se],Yd);let Zd=class{constructor(e,t){if(!e)throw new Error("Illegal argument, contents must be defined");Array.isArray(e)?this.contents=e:this.contents=[e],this.range=t}};Zd=H([se],Zd);var rl;(function(r){r[r.Text=0]="Text",r[r.Read=1]="Read",r[r.Write=2]="Write"})(rl||(rl={}));let eh=class{constructor(e,t=rl.Text){this.range=e,this.kind=t}toJSON(){return{range:this.range,kind:rl[this.kind]}}};eh=H([se],eh);let th=class{constructor(e,t){this.uri=e,this.highlights=t}toJSON(){return{uri:this.uri,highlights:this.highlights.map(e=>e.toJSON())}}};th=H([se],th);var Ke;(function(r){r[r.File=0]="File",r[r.Module=1]="Module",r[r.Namespace=2]="Namespace",r[r.Package=3]="Package",r[r.Class=4]="Class",r[r.Method=5]="Method",r[r.Property=6]="Property",r[r.Field=7]="Field",r[r.Constructor=8]="Constructor",r[r.Enum=9]="Enum",r[r.Interface=10]="Interface",r[r.Function=11]="Function",r[r.Variable=12]="Variable",r[r.Constant=13]="Constant",r[r.String=14]="String",r[r.Number=15]="Number",r[r.Boolean=16]="Boolean",r[r.Array=17]="Array",r[r.Object=18]="Object",r[r.Key=19]="Key",r[r.Null=20]="Null",r[r.EnumMember=21]="EnumMember",r[r.Struct=22]="Struct",r[r.Event=23]="Event",r[r.Operator=24]="Operator",r[r.TypeParameter=25]="TypeParameter"})(Ke||(Ke={}));var sl;(function(r){r[r.Deprecated=1]="Deprecated"})(sl||(sl={}));let ol=fm=class{static validate(e){if(!e.name)throw new Error("name must not be falsy")}constructor(e,t,i,n,s){this.name=e,this.kind=t,this.containerName=s,typeof i=="string"&&(this.containerName=i),n instanceof yi?this.location=n:i instanceof ye&&(this.location=new yi(n,i)),fm.validate(this)}toJSON(){return{name:this.name,kind:Ke[this.kind],location:this.location,containerName:this.containerName}}};ol=fm=H([se],ol);let al=Jd=class{static validate(e){var t;if(!e.name)throw new Error("name must not be falsy");if(!e.range.contains(e.selectionRange))throw new Error("selectionRange must be contained in fullRange");(t=e.children)==null||t.forEach(Jd.validate)}constructor(e,t,i,n,s){this.name=e,this.detail=t,this.kind=i,this.range=n,this.selectionRange=s,this.children=[],Jd.validate(this)}};al=Jd=H([se],al);var cl;(function(r){r[r.Invoke=1]="Invoke",r[r.Automatic=2]="Automatic"})(cl||(cl={}));let ih=class{constructor(e,t){this.title=e,this.kind=t}};ih=H([se],ih);let st=(Ja=class{constructor(e){this.value=e}append(e){return new il(this.value?this.value+il.sep+e:e)}intersects(e){return this.contains(e)||e.contains(this)}contains(e){return this.value===e.value||e.value.startsWith(this.value+il.sep)}},il=Ja,Ja.sep=".",Ja);st=il=H([se],st),st.Empty=new st(""),st.QuickFix=st.Empty.append("quickfix"),st.Refactor=st.Empty.append("refactor"),st.RefactorExtract=st.Refactor.append("extract"),st.RefactorInline=st.Refactor.append("inline"),st.RefactorMove=st.Refactor.append("move"),st.RefactorRewrite=st.Refactor.append("rewrite"),st.Source=st.Empty.append("source"),st.SourceOrganizeImports=st.Source.append("organizeImports"),st.SourceFixAll=st.Source.append("fixAll"),st.Notebook=st.Empty.append("notebook");let ll=class{constructor(e,t){if(this.range=e,this.parent=t,t&&!t.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};ll=H([se],ll);let _m=class{constructor(e,t,i,n,s,o){this.kind=e,this.name=t,this.detail=i,this.uri=n,this.range=s,this.selectionRange=o}},ux=class{constructor(e,t){this.fromRanges=t,this.from=e}},dx=class{constructor(e,t){this.fromRanges=t,this.to=e}};var Qo;(function(r){r[r.Information=0]="Information",r[r.Warning=1]="Warning",r[r.Error=2]="Error"})(Qo||(Qo={}));let nh=class{constructor(e,t){this.range=e,this.command=t}get isResolved(){return!!this.command}};nh=H([se],nh);let Ri=pm=(wS=class{constructor(e,t=!1){le(this,Vt,void 0);J(this,Vt,new N0(e,{supportThemeIcons:t}))}static isMarkdownString(e){return e instanceof pm?!0:e&&e.appendCodeblock&&e.appendMarkdown&&e.appendText&&e.value!==void 0}get value(){return I(this,Vt).value}set value(e){I(this,Vt).value=e}get isTrusted(){return I(this,Vt).isTrusted}set isTrusted(e){I(this,Vt).isTrusted=e}get supportThemeIcons(){return I(this,Vt).supportThemeIcons}set supportThemeIcons(e){I(this,Vt).supportThemeIcons=e}get supportHtml(){return I(this,Vt).supportHtml}set supportHtml(e){I(this,Vt).supportHtml=e}get baseUri(){return I(this,Vt).baseUri}set baseUri(e){I(this,Vt).baseUri=e}appendText(e){return I(this,Vt).appendText(e),this}appendMarkdown(e){return I(this,Vt).appendMarkdown(e),this}appendCodeblock(e,t){return I(this,Vt).appendCodeblock(t??"",e),this}},Vt=new WeakMap,wS);Ri=pm=H([se],Ri);let wm=class{constructor(e,t){this.label=e,this.documentation=t}};wm=H([se],wm);let bm=class{constructor(e,t){this.label=e,this.documentation=t,this.parameters=[]}};bm=H([se],bm);let ym=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};ym=H([se],ym);var xm;(function(r){r[r.Invoke=1]="Invoke",r[r.TriggerCharacter=2]="TriggerCharacter",r[r.ContentChange=3]="ContentChange"})(xm||(xm={}));var Cm;(function(r){r[r.Type=1]="Type",r[r.Parameter=2]="Parameter"})(Cm||(Cm={}));let rh=class{constructor(e){this.value=e}};rh=H([se],rh);let sh=class{constructor(e,t,i){this.position=e,this.label=t,this.kind=i}};sh=H([se],sh);var Jo;(function(r){r[r.Invoke=0]="Invoke",r[r.TriggerCharacter=1]="TriggerCharacter",r[r.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Jo||(Jo={}));var he;(function(r){r[r.Text=0]="Text",r[r.Method=1]="Method",r[r.Function=2]="Function",r[r.Constructor=3]="Constructor",r[r.Field=4]="Field",r[r.Variable=5]="Variable",r[r.Class=6]="Class",r[r.Interface=7]="Interface",r[r.Module=8]="Module",r[r.Property=9]="Property",r[r.Unit=10]="Unit",r[r.Value=11]="Value",r[r.Enum=12]="Enum",r[r.Keyword=13]="Keyword",r[r.Snippet=14]="Snippet",r[r.Color=15]="Color",r[r.File=16]="File",r[r.Reference=17]="Reference",r[r.Folder=18]="Folder",r[r.EnumMember=19]="EnumMember",r[r.Constant=20]="Constant",r[r.Struct=21]="Struct",r[r.Event=22]="Event",r[r.Operator=23]="Operator",r[r.TypeParameter=24]="TypeParameter",r[r.User=25]="User",r[r.Issue=26]="Issue"})(he||(he={}));var ul;(function(r){r[r.Deprecated=1]="Deprecated"})(ul||(ul={}));let oh=class{constructor(e,t){this.label=e,this.kind=t}toJSON(){return{label:this.label,kind:this.kind&&he[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};oh=H([se],oh);let Ko=class{constructor(e=[],t=!1){this.items=e,this.isIncomplete=t}};Ko=H([se],Ko);let Sm=class{constructor(e,t,i){this.insertText=e,this.range=t,this.command=i}};Sm=H([se],Sm);let Em=class{constructor(e){this.commands=void 0,this.suppressSuggestions=void 0,this.items=e}};Em=H([se],Em);var Es;(function(r){r[r.Unknown=0]="Unknown",r[r.Word=1]="Word",r[r.Line=2]="Line",r[r.Suggest=3]="Suggest"})(Es||(Es={}));var dl;(function(r){r[r.Active=-1]="Active",r[r.Beside=-2]="Beside",r[r.One=1]="One",r[r.Two=2]="Two",r[r.Three=3]="Three",r[r.Four=4]="Four",r[r.Five=5]="Five",r[r.Six=6]="Six",r[r.Seven=7]="Seven",r[r.Eight=8]="Eight",r[r.Nine=9]="Nine"})(dl||(dl={}));var Sr;(function(r){r[r.Left=1]="Left",r[r.Right=2]="Right"})(Sr||(Sr={}));function k7(r,e){return`${Xe.toKey(r)}.${e}`}var Gi;(function(r){r[r.Off=0]="Off",r[r.On=1]="On",r[r.Relative=2]="Relative",r[r.Interval=3]="Interval"})(Gi||(Gi={}));var Xo;(function(r){r[r.Manual=1]="Manual",r[r.AfterDelay=2]="AfterDelay",r[r.FocusOut=3]="FocusOut"})(Xo||(Xo={}));var ah;(function(r){r[r.Default=0]="Default",r[r.InCenter=1]="InCenter",r[r.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",r[r.AtTop=3]="AtTop"})(ah||(ah={}));var Yo;(function(r){r[r.Keyboard=1]="Keyboard",r[r.Mouse=2]="Mouse",r[r.Command=3]="Command"})(Yo||(Yo={}));var hl;(function(r){r[r.Undo=1]="Undo",r[r.Redo=2]="Redo"})(hl||(hl={}));var ks;(function(r){r[r.OpenOpen=0]="OpenOpen",r[r.ClosedClosed=1]="ClosedClosed",r[r.OpenClosed=2]="OpenClosed",r[r.ClosedOpen=3]="ClosedOpen"})(ks||(ks={})),function(r){function e(t){switch(t){case"keyboard":return r.Keyboard;case"mouse":return r.Mouse;case"api":return r.Command}}r.fromValue=e}(Yo||(Yo={}));var Zo;(function(r){r[r.Other=0]="Other",r[r.Comment=1]="Comment",r[r.String=2]="String",r[r.RegEx=3]="RegEx"})(Zo||(Zo={})),function(r){function e(t){switch(t){case r.Other:return"other";case r.Comment:return"comment";case r.String:return"string";case r.RegEx:return"regex"}return"other"}r.toString=e}(Zo||(Zo={}));let ch=class{constructor(e,t){if(t&&!y.isUri(t))throw xe("target");if(!ye.isRange(e)||e.isEmpty)throw xe("range");this.range=e,this.target=t}};ch=H([se],ch);let ea=class{constructor(e,t,i,n){this.red=e,this.green=t,this.blue=i,this.alpha=n}};ea=H([se],ea);let lh=class{constructor(e,t){if(t&&!(t instanceof ea))throw xe("color");if(!ye.isRange(e)||e.isEmpty)throw xe("range");this.range=e,this.color=t}};lh=H([se],lh);let uh=class{constructor(e){if(!e||typeof e!="string")throw xe("label");this.label=e}};uh=H([se],uh);var km;(function(r){r[r.Error=0]="Error",r[r.Warning=1]="Warning",r[r.Information=2]="Information"})(km||(km={}));var Dm;(function(r){r[r.Unknown=0]="Unknown",r[r.Shutdown=1]="Shutdown",r[r.Process=2]="Process",r[r.User=3]="User",r[r.Extension=4]="Extension"})(Dm||(Dm={}));class D7{constructor(e,t,i){if(this.startIndex=e,this.length=t,this.tooltip=i,typeof e!="number"||e<0)throw xe("startIndex");if(typeof t!="number"||t<1)throw xe("length");if(i!==void 0&&typeof i!="string")throw xe("tooltip")}}class I7{constructor(e){this.uri=e}}class P7{constructor(e){this.terminalCommand=e}}var Im;(function(r){r[r.Panel=1]="Panel",r[r.Editor=2]="Editor"})(Im||(Im={}));class T7{constructor(e){if(this.options=e,typeof e!="object")throw xe("options")}}var Pm;(function(r){r[r.Always=1]="Always",r[r.Silent=2]="Silent",r[r.Never=3]="Never"})(Pm||(Pm={}));var Tm;(function(r){r[r.Shared=1]="Shared",r[r.Dedicated=2]="Dedicated",r[r.New=3]="New"})(Tm||(Tm={}));let fl=(Gn=class{static from(e){switch(e){case"clean":return cn.Clean;case"build":return cn.Build;case"rebuild":return cn.Rebuild;case"test":return cn.Test;default:return}}constructor(e,t){if(this.label=t,typeof e!="string"||typeof t!="string")throw xe("name");this._id=e}get id(){return this._id}},cn=Gn,Gn.Clean=new cn("clean","Clean"),Gn.Build=new cn("build","Build"),Gn.Rebuild=new cn("rebuild","Rebuild"),Gn.Test=new cn("test","Test"),Gn);fl=cn=H([se],fl);function hx(r){let e="";for(let t=0;t<r.length;t++)e+=r[t].replace(/,/g,",,")+",";return e}let ta=class{constructor(e,t,i){if(typeof e!="string")throw xe("process");this._args=[],this._process=e,t!==void 0&&(Array.isArray(t)?(this._args=t,this._options=i):this._options=t)}get process(){return this._process}set process(e){if(typeof e!="string")throw xe("process");this._process=e}get args(){return this._args}set args(e){Array.isArray(e)||(e=[]),this._args=e}get options(){return this._options}set options(e){this._options=e}computeId(){const e=[];if(e.push("process"),this._process!==void 0&&e.push(this._process),this._args&&this._args.length>0)for(const t of this._args)e.push(t);return hx(e)}};ta=H([se],ta);let Ds=class{constructor(e,t,i){if(this._args=[],Array.isArray(t)){if(!e)throw xe("command can't be undefined or null");if(typeof e!="string"&&typeof e.value!="string")throw xe("command");this._command=e,this._args=t,this._options=i}else{if(typeof e!="string")throw xe("commandLine");this._commandLine=e,this._options=t}}get commandLine(){return this._commandLine}set commandLine(e){if(typeof e!="string")throw xe("commandLine");this._commandLine=e}get command(){return this._command?this._command:""}set command(e){if(typeof e!="string"&&typeof e.value!="string")throw xe("command");this._command=e}get args(){return this._args}set args(e){this._args=e||[]}get options(){return this._options}set options(e){this._options=e}computeId(){const e=[];if(e.push("shell"),this._commandLine!==void 0&&e.push(this._commandLine),this._command!==void 0&&e.push(typeof this._command=="string"?this._command:this._command.value),this._args&&this._args.length>0)for(const t of this._args)e.push(typeof t=="string"?t:t.value);return hx(e)}};Ds=H([se],Ds);var Am;(function(r){r[r.Escape=1]="Escape",r[r.Strong=2]="Strong",r[r.Weak=3]="Weak"})(Am||(Am={}));var Is;(function(r){r[r.Global=1]="Global",r[r.Workspace=2]="Workspace"})(Is||(Is={}));class Rm{constructor(e){this._callback=e}computeId(){return"customExecution"+En()}set callback(e){this._callback=e}get callback(){return this._callback}}let dh=(Qn=class{constructor(e,t,i,n,s,o){this.__deprecated=!1,this._definition=this.definition=e;let a;typeof t=="string"?(this._name=this.name=t,this._source=this.source=i,this.execution=n,a=s,this.__deprecated=!0):t===Is.Global||t===Is.Workspace?(this.target=t,this._name=this.name=i,this._source=this.source=n,this.execution=s,a=o):(this.target=t,this._name=this.name=i,this._source=this.source=n,this.execution=s,a=o),typeof a=="string"?(this._problemMatchers=[a],this._hasDefinedMatchers=!0):Array.isArray(a)?(this._problemMatchers=a,this._hasDefinedMatchers=!0):(this._problemMatchers=[],this._hasDefinedMatchers=!1),this._isBackground=!1,this._presentationOptions=Object.create(null),this._runOptions=Object.create(null)}get _id(){return this.__id}set _id(e){this.__id=e}get _deprecated(){return this.__deprecated}clear(){this.__id!==void 0&&(this.__id=void 0,this._scope=void 0,this.computeDefinitionBasedOnExecution())}computeDefinitionBasedOnExecution(){this._execution instanceof ta?this._definition={type:ln.ProcessType,id:this._execution.computeId()}:this._execution instanceof Ds?this._definition={type:ln.ShellType,id:this._execution.computeId()}:this._execution instanceof Rm?this._definition={type:ln.ExtensionCallbackType,id:this._execution.computeId()}:this._definition={type:ln.EmptyType,id:En()}}get definition(){return this._definition}set definition(e){if(e==null)throw xe("Kind can't be undefined or null");this.clear(),this._definition=e}get scope(){return this._scope}set target(e){this.clear(),this._scope=e}get name(){return this._name}set name(e){if(typeof e!="string")throw xe("name");this.clear(),this._name=e}get execution(){return this._execution}set execution(e){e===null&&(e=void 0),this.clear(),this._execution=e;const t=this._definition.type;(ln.EmptyType===t||ln.ProcessType===t||ln.ShellType===t||ln.ExtensionCallbackType===t)&&this.computeDefinitionBasedOnExecution()}get problemMatchers(){return this._problemMatchers}set problemMatchers(e){if(Array.isArray(e))this.clear(),this._problemMatchers=e,this._hasDefinedMatchers=!0;else{this.clear(),this._problemMatchers=[],this._hasDefinedMatchers=!1;return}}get hasDefinedMatchers(){return this._hasDefinedMatchers}get isBackground(){return this._isBackground}set isBackground(e){e!==!0&&e!==!1&&(e=!1),this.clear(),this._isBackground=e}get source(){return this._source}set source(e){if(typeof e!="string"||e.length===0)throw xe("source must be a string of length > 0");this.clear(),this._source=e}get group(){return this._group}set group(e){e===null&&(e=void 0),this.clear(),this._group=e}get detail(){return this._detail}set detail(e){e===null&&(e=void 0),this._detail=e}get presentationOptions(){return this._presentationOptions}set presentationOptions(e){e==null&&(e=Object.create(null)),this.clear(),this._presentationOptions=e}get runOptions(){return this._runOptions}set runOptions(e){e==null&&(e=Object.create(null)),this.clear(),this._runOptions=e}},ln=Qn,Qn.ExtensionCallbackType="customExecution",Qn.ProcessType="process",Qn.ShellType="shell",Qn.EmptyType="$empty",Qn);dh=ln=H([se],dh);var Ps;(function(r){r[r.SourceControl=1]="SourceControl",r[r.Window=10]="Window",r[r.Notification=15]="Notification"})(Ps||(Ps={}));var Lm;(function(r){function e(t){const i=t;return fr(i.value)?i.tooltip&&!Oe(i.tooltip)?(console.log("INVALID view badge, invalid tooltip",i.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",i.value),!1)}r.isViewBadge=e})(Lm||(Lm={}));let hh=gm=class{static isTreeItem(e,t){var n,s;const i=e;if(i.checkboxState!==void 0){const o=fr(i.checkboxState)?i.checkboxState:Ft(i.checkboxState)&&fr(i.checkboxState.state)?i.checkboxState.state:void 0,a=!fr(i.checkboxState)&&Ft(i.checkboxState)?i.checkboxState.tooltip:void 0;if(o===void 0||o!==dn.Checked&&o!==dn.Unchecked||a!==void 0&&!Oe(a))return console.log("INVALID tree item, invalid checkboxState",i.checkboxState),!1}if(e instanceof gm)return!0;if(i.label!==void 0&&!Oe(i.label)&&!((n=i.label)!=null&&n.label))return console.log("INVALID tree item, invalid label",i.label),!1;if(i.id!==void 0&&!Oe(i.id))return console.log("INVALID tree item, invalid id",i.id),!1;if(i.iconPath!==void 0&&!Oe(i.iconPath)&&!y.isUri(i.iconPath)&&(!i.iconPath||!Oe(i.iconPath.id))){const o=i.iconPath;if(!o||!Oe(o.light)&&!y.isUri(o.light)&&!Oe(o.dark)&&!y.isUri(o.dark))return console.log("INVALID tree item, invalid iconPath",i.iconPath),!1}return i.description!==void 0&&!Oe(i.description)&&typeof i.description!="boolean"?(console.log("INVALID tree item, invalid description",i.description),!1):i.resourceUri!==void 0&&!y.isUri(i.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",i.resourceUri),!1):i.tooltip!==void 0&&!Oe(i.tooltip)&&!(i.tooltip instanceof Ri)?(console.log("INVALID tree item, invalid tooltip",i.tooltip),!1):i.command!==void 0&&!i.command.command?(console.log("INVALID tree item, invalid command",i.command),!1):i.collapsibleState!==void 0&&i.collapsibleState<Ts.None&&i.collapsibleState>Ts.Expanded?(console.log("INVALID tree item, invalid collapsibleState",i.collapsibleState),!1):i.contextValue!==void 0&&!Oe(i.contextValue)?(console.log("INVALID tree item, invalid contextValue",i.contextValue),!1):i.accessibilityInformation!==void 0&&!((s=i.accessibilityInformation)!=null&&s.label)?(console.log("INVALID tree item, invalid accessibilityInformation",i.accessibilityInformation),!1):!0}constructor(e,t=Ts.None){this.collapsibleState=t,y.isUri(e)?this.resourceUri=e:this.label=e}};hh=gm=H([se],hh);var Ts;(function(r){r[r.None=0]="None",r[r.Collapsed=1]="Collapsed",r[r.Expanded=2]="Expanded"})(Ts||(Ts={}));var dn;(function(r){r[r.Unchecked=0]="Unchecked",r[r.Checked=1]="Checked"})(dn||(dn={}));let fh=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(e){this.value=e}};fh=H([se],fh);class ph extends fh{}class A7 extends ph{constructor(t){super("");le(this,xu,void 0);J(this,xu,t)}asFile(){return I(this,xu)}}xu=new WeakMap;class R7{constructor(e,t,i,n){this.name=e,this.uri=t,this._itemId=i,this._getData=n}data(){return this._getData()}}let pl=(bS=class{constructor(e){le(this,Ys);le(this,Jn,new Map);for(const[t,i]of e??[]){const n=I(this,Jn).get(Gu(this,Ys,Qu).call(this,t));n?n.push(i):I(this,Jn).set(Gu(this,Ys,Qu).call(this,t),[i])}}get(e){var t;return(t=I(this,Jn).get(Gu(this,Ys,Qu).call(this,e)))==null?void 0:t[0]}set(e,t){I(this,Jn).set(Gu(this,Ys,Qu).call(this,e),[t])}forEach(e,t){for(const[i,n]of I(this,Jn))for(const s of n)e.call(t,s,i,this)}*[Symbol.iterator](){for(const[e,t]of I(this,Jn))for(const i of t)yield[e,i]}},Jn=new WeakMap,Ys=new WeakSet,Qu=function(e){return e.toLowerCase()},bS);pl=H([se],pl);let Om=class{constructor(e,t,i){this.insertText=e,this.title=t,this.kind=i}};Om=H([se],Om);var $m;(function(r){r[r.Automatic=0]="Automatic",r[r.PasteAs=1]="PasteAs"})($m||($m={}));const Ka=class Ka{constructor(e){this.value=e}append(...e){return new Ka((this.value?[this.value,...e]:e).join(Ka.sep))}intersects(e){return this.contains(e)||e.contains(this)}contains(e){return this.value===e.value||e.value.startsWith(this.value+Ka.sep)}};Ka.sep=".";let ia=Ka;ia.Empty=new ia("");let Nm=class{constructor(e,t,i){this.title=t,this.insertText=e,this.kind=i}};Nm=H([se],Nm);let Kt=class{constructor(e,t){this.id=e,this.color=t}static isThemeIcon(e){return typeof e.id!="string"?(console.log("INVALID ThemeIcon, invalid id",e.id),!1):!0}};Kt=H([se],Kt),Kt.File=new Kt("file"),Kt.Folder=new Kt("folder");let gl=class{constructor(e){this.id=e}};gl=H([se],gl);var na;(function(r){r[r.Global=1]="Global",r[r.Workspace=2]="Workspace",r[r.WorkspaceFolder=3]="WorkspaceFolder"})(na||(na={}));let ra=class{get base(){return this._base}set base(e){this._base=e,this._baseUri=y.file(e)}get baseUri(){return this._baseUri}set baseUri(e){this._baseUri=e,this._base=e.fsPath}constructor(e,t){if(typeof e!="string"&&(!e||!y.isUri(e)&&!y.isUri(e.uri)))throw xe("base");if(typeof t!="string")throw xe("pattern");typeof e=="string"?this.baseUri=y.file(e):y.isUri(e)?this.baseUri=e:this.baseUri=e.uri,this.pattern=t}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};ra=H([se],ra);const fx=new WeakMap;function L7(r,e){fx.set(r,e)}let sa=class{constructor(e,t,i,n,s){this.enabled=typeof e=="boolean"?e:!0,typeof t=="string"&&(this.condition=t),typeof i=="string"&&(this.hitCondition=i),typeof n=="string"&&(this.logMessage=n),typeof s=="string"&&(this.mode=s)}get id(){return this._id||(this._id=fx.get(this)??En()),this._id}};sa=H([se],sa);let As=class extends sa{constructor(e,t,i,n,s,o){if(super(t,i,n,s,o),e===null)throw xe("location");this.location=e}};As=H([se],As);let Rs=class extends sa{constructor(e,t,i,n,s,o){super(t,i,n,s,o),this.functionName=e}};Rs=H([se],Rs);let gh=class extends sa{constructor(e,t,i,n,s,o,a,c){if(super(n,s,o,a,c),!t)throw xe("dataId");this.label=e,this.dataId=t,this.canPersist=i}};gh=H([se],gh);let mh=class{constructor(e,t,i){this.command=e,this.args=t||[],this.options=i}};mh=H([se],mh);let ml=class{constructor(e,t){this.port=e,this.host=t}};ml=H([se],ml);let vh=class{constructor(e){this.path=e}};vh=H([se],vh);let _h=class{constructor(e){this.implementation=e}};_h=H([se],_h);class px{constructor(e,t,i){this.session=e,this.threadId=t,this.frameId=i}}class gx{constructor(e,t){this.session=e,this.threadId=t}}let wh=class{constructor(e,t){this.range=e,this.expression=t}};wh=H([se],wh);var vl;(function(r){r[r.Invoke=0]="Invoke",r[r.Automatic=1]="Automatic"})(vl||(vl={}));let bh=class{constructor(e,t){this.range=e,this.text=t}};bh=H([se],bh);let yh=class{constructor(e,t,i=!0){this.range=e,this.variableName=t,this.caseSensitiveLookup=i}};yh=H([se],yh);let xh=class{constructor(e,t){this.range=e,this.expression=t}};xh=H([se],xh);let Mm=class{constructor(e,t){this.frameId=e,this.stoppedLocation=t}};Mm=H([se],Mm);var Fm;(function(r){r[r.AIGenerated=1]="AIGenerated"})(Fm||(Fm={}));class O7{constructor(e,t){this.newSymbolName=e,this.tags=t}}var oa;(function(r){r[r.Changed=1]="Changed",r[r.Created=2]="Created",r[r.Deleted=3]="Deleted"})(oa||(oa={}));let bt=ni=class extends Error{static FileExists(e){return new ni(e,Se.FileExists,ni.FileExists)}static FileNotFound(e){return new ni(e,Se.FileNotFound,ni.FileNotFound)}static FileNotADirectory(e){return new ni(e,Se.FileNotADirectory,ni.FileNotADirectory)}static FileIsADirectory(e){return new ni(e,Se.FileIsADirectory,ni.FileIsADirectory)}static NoPermissions(e){return new ni(e,Se.NoPermissions,ni.NoPermissions)}static Unavailable(e){return new ni(e,Se.Unavailable,ni.Unavailable)}constructor(e,t=Se.Unknown,i){super(y.isUri(e)?e.toString(!0):e),this.code=(i==null?void 0:i.name)??"Unknown",yy(this,t),Object.setPrototypeOf(this,ni.prototype),typeof Error.captureStackTrace=="function"&&typeof i=="function"&&Error.captureStackTrace(this,i)}};bt=ni=H([se],bt);let Hm=class{constructor(e,t,i){this.start=e,this.end=t,this.kind=i}};Hm=H([se],Hm);var Tn;(function(r){r[r.Comment=1]="Comment",r[r.Imports=2]="Imports",r[r.Region=3]="Region"})(Tn||(Tn={}));var _l;(function(r){r[r.Collapsed=0]="Collapsed",r[r.Expanded=1]="Expanded"})(_l||(_l={}));var Um;(function(r){r[r.Editing=0]="Editing",r[r.Preview=1]="Preview"})(Um||(Um={}));var Wm;(function(r){r[r.Published=0]="Published",r[r.Draft=1]="Draft"})(Wm||(Wm={}));var wl;(function(r){r[r.Unresolved=0]="Unresolved",r[r.Resolved=1]="Resolved"})(wl||(wl={}));var bl;(function(r){r[r.Current=0]="Current",r[r.Outdated=1]="Outdated"})(bl||(bl={}));class Bm{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}}function $7(r){return typeof r>"u"||X4(r)}class Vm{constructor(e){if(this._prevLine=0,this._prevChar=0,this._dataIsSortedAndDeltaEncoded=!0,this._data=[],this._dataLen=0,this._tokenTypeStrToInt=new Map,this._tokenModifierStrToInt=new Map,this._hasLegend=!1,e){this._hasLegend=!0;for(let t=0,i=e.tokenTypes.length;t<i;t++)this._tokenTypeStrToInt.set(e.tokenTypes[t],t);for(let t=0,i=e.tokenModifiers.length;t<i;t++)this._tokenModifierStrToInt.set(e.tokenModifiers[t],t)}}push(e,t,i,n,s){if(typeof e=="number"&&typeof t=="number"&&typeof i=="number"&&typeof n=="number"&&(typeof s=="number"||typeof s>"u"))return typeof s>"u"&&(s=0),this._pushEncoded(e,t,i,n,s);if(ye.isRange(e)&&typeof t=="string"&&$7(i))return this._push(e,t,i);throw xe()}_push(e,t,i){if(!this._hasLegend)throw new Error("Legend must be provided in constructor");if(e.start.line!==e.end.line)throw new Error("`range` cannot span multiple lines");if(!this._tokenTypeStrToInt.has(t))throw new Error("`tokenType` is not in the provided legend");const n=e.start.line,s=e.start.character,o=e.end.character-e.start.character,a=this._tokenTypeStrToInt.get(t);let c=0;if(i)for(const l of i){if(!this._tokenModifierStrToInt.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this._tokenModifierStrToInt.get(l);c|=1<<u>>>0}this._pushEncoded(n,s,o,a,c)}_pushEncoded(e,t,i,n,s){if(this._dataIsSortedAndDeltaEncoded&&(e<this._prevLine||e===this._prevLine&&t<this._prevChar)){this._dataIsSortedAndDeltaEncoded=!1;const c=this._data.length/5|0;let l=0,u=0;for(let d=0;d<c;d++){let h=this._data[5*d],g=this._data[5*d+1];h===0?(h=l,g+=u):h+=l,this._data[5*d]=h,this._data[5*d+1]=g,l=h,u=g}}let o=e,a=t;this._dataIsSortedAndDeltaEncoded&&this._dataLen>0&&(o-=this._prevLine,o===0&&(a-=this._prevChar)),this._data[this._dataLen++]=o,this._data[this._dataLen++]=a,this._data[this._dataLen++]=i,this._data[this._dataLen++]=n,this._data[this._dataLen++]=s,this._prevLine=e,this._prevChar=t}static _sortAndDeltaEncode(e){const t=[],i=e.length/5|0;for(let a=0;a<i;a++)t[a]=a;t.sort((a,c)=>{const l=e[5*a],u=e[5*c];if(l===u){const d=e[5*a+1],h=e[5*c+1];return d-h}return l-u});const n=new Uint32Array(e.length);let s=0,o=0;for(let a=0;a<i;a++){const c=5*t[a],l=e[c+0],u=e[c+1],d=e[c+2],h=e[c+3],g=e[c+4],b=l-s,_=b===0?u-o:u,v=5*a;n[v+0]=b,n[v+1]=_,n[v+2]=d,n[v+3]=h,n[v+4]=g,s=l,o=u}return n}build(e){return this._dataIsSortedAndDeltaEncoded?new aa(new Uint32Array(this._data),e):new aa(Vm._sortAndDeltaEncode(this._data),e)}}class aa{constructor(e,t){this.resultId=t,this.data=e}}class mx{constructor(e,t,i){this.start=e,this.deleteCount=t,this.data=i}}class Ch{constructor(e,t){this.resultId=t,this.edits=e}}var Sh;(function(r){r[r.Separate=0]="Separate",r[r.MergeWithParent=1]="MergeWithParent"})(Sh||(Sh={}));class N7{constructor(e){this.name=e}}let yl=(Cu=class{constructor(){}},Cu.Back={iconPath:new Kt("arrow-left")},Cu);yl=H([se],yl);var xl;(function(r){r[r.Separator=-1]="Separator",r[r.Default=0]="Default"})(xl||(xl={}));var ca;(function(r){r[r.Info=1]="Info",r[r.Warning=2]="Warning",r[r.Error=3]="Error"})(ca||(ca={}));var Ls;(function(r){r[r.UI=1]="UI",r[r.Workspace=2]="Workspace"})(Ls||(Ls={}));class zm{static validate(e){if(typeof e.badge=="string"){let t=Hb(e.badge,0);if(t<e.badge.length&&(t+=Hb(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!Kt.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,i){this.badge=e,this.tooltip=t,this.color=i}}let Eh=class{constructor(e){this.kind=e}};Eh=H([se],Eh);var Er;(function(r){r[r.Light=1]="Light",r[r.Dark=2]="Dark",r[r.HighContrast=3]="HighContrast",r[r.HighContrastLight=4]="HighContrastLight"})(Er||(Er={}));let An=class Ww{static isNotebookRange(e){return e instanceof Ww?!0:e?typeof e.start=="number"&&typeof e.end=="number":!1}get start(){return this._start}get end(){return this._end}get isEmpty(){return this._start===this._end}constructor(e,t){if(e<0)throw xe("start must be positive");if(t<0)throw xe("end must be positive");e<=t?(this._start=e,this._end=t):(this._start=t,this._end=e)}with(e){let t=this._start,i=this._end;return e.start!==void 0&&(t=e.start),e.end!==void 0&&(i=e.end),t===this._start&&i===this._end?this:new Ww(t,i)}},kh=class Bw{static validate(e){if(typeof e.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof e.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof e.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(e){return Array.isArray(e)&&e.every(t=>Bw.isNotebookCellData(t))}static isNotebookCellData(e){return!0}constructor(e,t,i,n,s,o,a){this.kind=e,this.value=t,this.languageId=i,this.mime=n,this.outputs=s??[],this.metadata=o,this.executionSummary=a,Bw.validate(this)}},vx=class{constructor(e){this.cells=e}},_x=(Si=class{static isNotebookCellOutputItem(e){return e instanceof Si?!0:e?typeof e.mime=="string"&&e.data instanceof Uint8Array:!1}static error(e){const t={name:e.name,message:e.message,stack:e.stack};return Si.json(t,"application/vnd.code.notebook.error")}static stdout(e){return Si.text(e,"application/vnd.code.notebook.stdout")}static stderr(e){return Si.text(e,"application/vnd.code.notebook.stderr")}static bytes(e,t="application/octet-stream"){return new Si(e,t)}static text(e,t=kn.text){const i=I(Si,Cp).encode(String(e));return new Si(i,t)}static json(e,t="text/x-json"){const i=JSON.stringify(e,void 0,"	");return Si.text(i,t)}constructor(e,t){this.data=e,this.mime=t;const i=iy(t,!0);if(!i)throw new Error(`INVALID mime type: ${t}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=i}},Cp=new WeakMap,le(Si,Cp,new TextEncoder),Si),Dh=class Vw{static isNotebookCellOutput(e){return e instanceof Vw?!0:!e||typeof e!="object"?!1:typeof e.id=="string"&&Array.isArray(e.items)}static ensureUniqueMimeTypes(e,t=!1){const i=new Set,n=new Set;for(let s=0;s<e.length;s++){const o=e[s],a=iy(o.mime);if(!i.has(a)||Ky(a)){i.add(a);continue}n.add(s),t&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return n.size===0?e:e.filter((s,o)=>!n.has(o))}constructor(e,t,i){this.items=Vw.ensureUniqueMimeTypes(e,!0),typeof t=="string"?(this.id=t,this.metadata=i):(this.id=En(),this.metadata=t??i)}};var Os;(function(r){r[r.Markup=1]="Markup",r[r.Code=2]="Code"})(Os||(Os={}));var la;(function(r){r[r.Idle=1]="Idle",r[r.Pending=2]="Pending",r[r.Executing=3]="Executing"})(la||(la={}));var Ih;(function(r){r[r.Left=1]="Left",r[r.Right=2]="Right"})(Ih||(Ih={}));var Ph;(function(r){r[r.Default=0]="Default",r[r.InCenter=1]="InCenter",r[r.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",r[r.AtTop=3]="AtTop"})(Ph||(Ph={}));class M7{constructor(e,t){this.text=e,this.alignment=t}}var jm;(function(r){r[r.Default=1]="Default",r[r.Preferred=2]="Preferred"})(jm||(jm={}));var Th;(function(r){r[r.Default=1]="Default",r[r.Preferred=2]="Preferred",r[r.Hidden=-1]="Hidden"})(Th||(Th={}));let wx=class{constructor(e,t=[]){this.uri=e,this.provides=ko(t)}},F7=class{constructor(e){this.label=e}};var Cl;(function(r){r[r.Named=1]="Named",r[r.Indexed=2]="Indexed"})(Cl||(Cl={}));let qm=class{constructor(e,t){this.label=e,this.timestamp=t}};qm=H([se],qm);var ua;(function(r){r[r.Production=1]="Production",r[r.Development=2]="Development",r[r.Test=3]="Test"})(ua||(ua={}));var Ah;(function(r){r[r.Node=1]="Node",r[r.Webworker=2]="Webworker"})(Ah||(Ah={}));var kr;(function(r){r[r.Other=0]="Other",r[r.Comment=1]="Comment",r[r.String=2]="String",r[r.RegEx=3]="RegEx"})(kr||(kr={}));class H7{constructor(e,t){this.ranges=e,this.wordPattern=t}}class U7{constructor(e){this._autoForwardAction=e}get autoForwardAction(){return this._autoForwardAction}}var Gm;(function(r){r[r.Queued=1]="Queued",r[r.Running=2]="Running",r[r.Passed=3]="Passed",r[r.Failed=4]="Failed",r[r.Skipped=5]="Skipped",r[r.Errored=6]="Errored"})(Gm||(Gm={}));var da;(function(r){r[r.Run=1]="Run",r[r.Debug=2]="Debug",r[r.Coverage=3]="Coverage"})(da||(da={}));let Rh=class{constructor(e=void 0,t=void 0,i=void 0,n=!1){this.include=e,this.exclude=t,this.profile=i,this.continuous=n}};Rh=H([se],Rh);let Lh=mm=class{static diff(e,t,i){const n=new mm(e);return n.expectedOutput=t,n.actualOutput=i,n}constructor(e){this.message=e}};Lh=mm=H([se],Lh);let Sl=class{constructor(e){this.id=e}};Sl=H([se],Sl);class Oh{constructor(e,t){this.covered=e,this.total=t,$h(this)}}function $h(r){if(r){if(r.covered>r.total)throw new Error(`The total number of covered items (${r.covered}) cannot be greater than the total (${r.total})`);if(r.total<0)throw new Error(`The number of covered items (${r.total}) cannot be negative`)}}class Qm{static fromDetails(e,t){const i=new Oh(0,0),n=new Oh(0,0),s=new Oh(0,0);for(const a of t)if("branches"in a){i.total+=1,i.covered+=a.executed?1:0;for(const c of a.branches)n.total+=1,n.covered+=c.executed?1:0}else s.total+=1,s.covered+=a.executed?1:0;const o=new Qm(e,i,n.total>0?n:void 0,s.total>0?s:void 0);return o.detailedCoverage=t,o}constructor(e,t,i,n){this.uri=e,this.statementCoverage=t,this.branchCoverage=i,this.declarationCoverage=n}}class W7{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i=[]){this.executed=e,this.location=t,this.branches=i}}class B7{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.executed=e,this.location=t,this.label=i}}class bx{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.name=e,this.executed=t,this.location=i}}var Jm;(function(r){r[r.None=0]="None",r[r.Option=1]="Option",r[r.Default=2]="Default",r[r.Preferred=3]="Preferred"})(Jm||(Jm={}));var Km;(function(r){r[r.Untrusted=0]="Untrusted",r[r.Trusted=1]="Trusted",r[r.Unspecified=2]="Unspecified"})(Km||(Km={}));var Xm;(function(r){r[r.Notify=1]="Notify",r[r.OpenBrowser=2]="OpenBrowser",r[r.OpenPreview=3]="OpenPreview",r[r.Silent=4]="Silent",r[r.Ignore=5]="Ignore",r[r.OpenBrowserOnce=6]="OpenBrowserOnce"})(Xm||(Xm={}));let Ym=class{constructor(e,t,i,n,s,o){this.kind=e,this.name=t,this.detail=i,this.uri=n,this.range=s,this.selectionRange=o}};class Zm{constructor(e){this.uri=e}}class Nh{constructor(e,t){this.original=e,this.modified=t}}class yx{constructor(e,t,i,n){this.base=e,this.input1=t,this.input2=i,this.result=n}}class e1{constructor(e,t){this.uri=e,this.viewType=t}}class xx{constructor(e){this.viewType=e}}class t1{constructor(e,t){this.uri=e,this.notebookType=t}}class i1{constructor(e,t,i){this.original=e,this.modified=t,this.notebookType=i}}class Cx{constructor(){}}class Sx{constructor(e,t){this.uri=e,this.inputBoxUri=t}}class Ex{constructor(e){this.providerId=e}}class kx{constructor(e){this.textDiffs=e}}var n1;(function(r){r[r.Down=0]="Down",r[r.Up=1]="Up"})(n1||(n1={}));var r1;(function(r){r[r.Action=1]="Action",r[r.Toolbar=2]="Toolbar"})(r1||(r1={}));var Rn;(function(r){r[r.Short=1]="Short",r[r.Medium=2]="Medium",r[r.Full=3]="Full"})(Rn||(Rn={}));class V7{constructor(e,t){this.label=e,this.values=t}}var Dr;(function(r){r[r.Unhelpful=0]="Unhelpful",r[r.Helpful=1]="Helpful",r[r.Undone=2]="Undone",r[r.Accepted=3]="Accepted",r[r.Bug=4]="Bug"})(Dr||(Dr={}));var El;(function(r){r[r.Unhelpful=0]="Unhelpful",r[r.Helpful=1]="Helpful"})(El||(El={}));let Mh=class{constructor(e){this.value=typeof e=="string"?new Ri(e):e}};class Fh{constructor(e,t){this.value=e,this.baseUri=t}}let Hh=class{constructor(e,t){this.value=e,this.title=t}},ha=class{constructor(e){this.value=e}},Uh=class{constructor(e){this.value=e}},Ir=class{constructor(e){this.value=e}};class Dx{constructor(e,t,i,n){this.prompt=e,this.command=t,this.variables=i,this.participant=n}}class Ix{constructor(e,t,i,n){this.response=e,this.result=t,this.participant=i,this.command=n}}var $s;(function(r){r[r.Panel=1]="Panel",r[r.Terminal=2]="Terminal",r[r.Notebook=3]="Notebook",r[r.Editor=4]="Editor"})($s||($s={}));class Wh{constructor(e){this.content=e}}class Bh{constructor(e,t){this.content=e,this.name=t}}class Vh{constructor(e,t){this.content=e,this.name=t}}class Ln extends Error{static NotFound(e){return new Ln(e,Ln.NotFound.name)}static NoPermissions(e){return new Ln(e,Ln.NoPermissions.name)}constructor(e,t,i){super(e,{cause:i}),this.name="LanguageModelError",this.code=t??""}}var s1;(function(r){r[r.SymbolInformation=1]="SymbolInformation",r[r.CommandInformation=2]="CommandInformation",r[r.SearchInformation=3]="SearchInformation",r[r.SettingInformation=4]="SettingInformation"})(s1||(s1={}));var o1;(function(r){r[r.Started=1]="Started",r[r.Recognizing=2]="Recognizing",r[r.Recognized=3]="Recognized",r[r.Stopped=4]="Stopped"})(o1||(o1={}));var a1;(function(r){r[r.Recognized=1]="Recognized",r[r.Stopped=2]="Stopped"})(a1||(a1={}));class z7{constructor(e,t){this.text=e,this.range=t}}var kl;(function(r){r[r.Invoke=0]="Invoke",r[r.Automatic=1]="Automatic"})(kl||(kl={}));var Li;(function(r){function e(i){const{selectionStartLineNumber:n,selectionStartColumn:s,positionLineNumber:o,positionColumn:a}=i,c=new Ee(n-1,s-1),l=new Ee(o-1,a-1);return new Pn(c,l)}r.to=e;function t(i){const{anchor:n,active:s}=i;return{selectionStartLineNumber:n.line+1,selectionStartColumn:n.character+1,positionLineNumber:s.line+1,positionColumn:s.character+1}}r.from=t})(Li||(Li={}));var F;(function(r){function e(i){if(!i)return;const{start:n,end:s}=i;return{startLineNumber:n.line+1,startColumn:n.character+1,endLineNumber:s.line+1,endColumn:s.character+1}}r.from=e;function t(i){if(!i)return;const{startLineNumber:n,startColumn:s,endLineNumber:o,endColumn:a}=i;return new ye(n-1,s-1,o-1,a-1)}r.to=t})(F||(F={}));var Pr;(function(r){function e(i){return{uri:i.uri,range:F.from(i.range)}}r.from=e;function t(i){return new yi(y.revive(i.uri),F.to(i.range))}r.to=t})(Pr||(Pr={}));var c1;(function(r){function e(t){switch(t){case 1:return kr.Comment;case 0:return kr.Other;case 3:return kr.RegEx;case 2:return kr.String}}r.to=e})(c1||(c1={}));var qe;(function(r){function e(i){return new Ee(i.lineNumber-1,i.column-1)}r.to=e;function t(i){return{lineNumber:i.line+1,column:i.character+1}}r.from=t})(qe||(qe={}));var fa;(function(r){function e(n,s,o){return Yt(ko(n).map(a=>t(a,s,o)))}r.from=e;function t(n,s,o){if(typeof n=="string")return{$serialized:!0,language:n,isBuiltin:o==null?void 0:o.isBuiltin};if(n)return{$serialized:!0,language:n.language,scheme:i(n.scheme,s),pattern:pi.from(n.pattern)??void 0,exclusive:n.exclusive,notebookType:n.notebookType,isBuiltin:o==null?void 0:o.isBuiltin}}function i(n,s){return s&&typeof n=="string"?s.transformOutgoingScheme(n):n}})(fa||(fa={}));var zh;(function(r){function e(i){switch(i){case Ss.Unnecessary:return 1;case Ss.Deprecated:return 2}}r.from=e;function t(i){switch(i){case 1:return Ss.Unnecessary;case 2:return Ss.Deprecated;default:return}}r.to=t})(zh||(zh={}));var pa;(function(r){function e(i){let n;return i.code&&(Oe(i.code)||fr(i.code)?n=String(i.code):n={value:String(i.code.value),target:i.code.target}),{...F.from(i.range),message:i.message,source:i.source,code:n,severity:qh.from(i.severity),relatedInformation:i.relatedInformation&&i.relatedInformation.map(jh.from),tags:Array.isArray(i.tags)?Yt(i.tags.map(zh.from)):void 0}}r.from=e;function t(i){var s;const n=new Yd(F.to(i),i.message,qh.to(i.severity));return n.source=i.source,n.code=Oe(i.code)?i.code:(s=i.code)==null?void 0:s.value,n.relatedInformation=i.relatedInformation&&i.relatedInformation.map(jh.to),n.tags=i.tags&&Yt(i.tags.map(zh.to)),n}r.to=t})(pa||(pa={}));var jh;(function(r){function e(i){return{...F.from(i.location.range),message:i.message,resource:i.location.uri}}r.from=e;function t(i){return new nl(new yi(i.resource,F.to(i)),i.message)}r.to=t})(jh||(jh={}));var qh;(function(r){function e(i){switch(i){case Nt.Error:return ii.Error;case Nt.Warning:return ii.Warning;case Nt.Information:return ii.Info;case Nt.Hint:return ii.Hint}return ii.Error}r.from=e;function t(i){switch(i){case ii.Info:return Nt.Information;case ii.Warning:return Nt.Warning;case ii.Error:return Nt.Error;case ii.Hint:return Nt.Hint;default:return Nt.Error}}r.to=t})(qh||(qh={}));var yt;(function(r){function e(i){return typeof i=="number"&&i>=dl.One?i-1:i===dl.Beside?f7:h7}r.from=e;function t(i){if(typeof i=="number"&&i>=0)return i+1;throw new Error("invalid 'EditorGroupColumn'")}r.to=t})(yt||(yt={}));function j7(r){return typeof r.range<"u"}function Px(r){return r.length===0?!0:!!j7(r[0])}var Le;(function(r){function e(a){return a.map(r.from)}r.fromMany=e;function t(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function i(a){let c;if(t(a)){const{language:h,value:g}=a;c={value:"```"+h+`
`+g+"\n```\n"}}else Ri.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=h=>{try{let g=y.parse(h,!0);g=g.with({query:n(g.query,l)}),l[h]=g}catch{}return""},d=new ty.Renderer;return d.link=u,d.image=h=>typeof h=="string"?u(Ik(h).href):"",ty(c.value,{renderer:d}),c}r.from=i;function n(a,c){if(!a)return a;let l;try{l=v5(a)}catch{}if(!l)return a;let u=!1;return l=Ed(l,d=>{if(y.isUri(d)){const h=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[h]=d,u=!0,h}else return}),u?JSON.stringify(l):a}function s(a){const c=new Ri(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?y.from(a.baseUri):void 0,c}r.to=s;function o(a){if(a)return typeof a=="string"?a:r.from(a)}r.fromStrict=o})(Le||(Le={}));function q7(r){return Px(r)?r.map(e=>({range:F.from(e.range),hoverMessage:Array.isArray(e.hoverMessage)?Le.fromMany(e.hoverMessage):e.hoverMessage?Le.from(e.hoverMessage):void 0,renderOptions:e.renderOptions})):r.map(e=>({range:F.from(e)}))}function Gh(r){return typeof r>"u"?r:typeof r=="string"?y.file(r):r}var ga;(function(r){function e(t){return typeof t>"u"?t:{contentText:t.contentText,contentIconPath:t.contentIconPath?Gh(t.contentIconPath):void 0,border:t.border,borderColor:t.borderColor,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,color:t.color,backgroundColor:t.backgroundColor,margin:t.margin,width:t.width,height:t.height}}r.from=e})(ga||(ga={}));var Qh;(function(r){function e(t){return typeof t>"u"?t:{backgroundColor:t.backgroundColor,outline:t.outline,outlineColor:t.outlineColor,outlineStyle:t.outlineStyle,outlineWidth:t.outlineWidth,border:t.border,borderColor:t.borderColor,borderRadius:t.borderRadius,borderSpacing:t.borderSpacing,borderStyle:t.borderStyle,borderWidth:t.borderWidth,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,cursor:t.cursor,color:t.color,opacity:t.opacity,letterSpacing:t.letterSpacing,gutterIconPath:t.gutterIconPath?Gh(t.gutterIconPath):void 0,gutterIconSize:t.gutterIconSize,overviewRulerColor:t.overviewRulerColor,before:t.before?ga.from(t.before):void 0,after:t.after?ga.from(t.after):void 0}}r.from=e})(Qh||(Qh={}));var l1;(function(r){function e(t){if(typeof t>"u")return t;switch(t){case ks.OpenOpen:return 0;case ks.ClosedClosed:return 1;case ks.OpenClosed:return 2;case ks.ClosedOpen:return 3}}r.from=e})(l1||(l1={}));var u1;(function(r){function e(t){return{isWholeLine:t.isWholeLine,rangeBehavior:t.rangeBehavior?l1.from(t.rangeBehavior):void 0,overviewRulerLane:t.overviewRulerLane,light:t.light?Qh.from(t.light):void 0,dark:t.dark?Qh.from(t.dark):void 0,backgroundColor:t.backgroundColor,outline:t.outline,outlineColor:t.outlineColor,outlineStyle:t.outlineStyle,outlineWidth:t.outlineWidth,border:t.border,borderColor:t.borderColor,borderRadius:t.borderRadius,borderSpacing:t.borderSpacing,borderStyle:t.borderStyle,borderWidth:t.borderWidth,fontStyle:t.fontStyle,fontWeight:t.fontWeight,textDecoration:t.textDecoration,cursor:t.cursor,color:t.color,opacity:t.opacity,letterSpacing:t.letterSpacing,gutterIconPath:t.gutterIconPath?Gh(t.gutterIconPath):void 0,gutterIconSize:t.gutterIconSize,overviewRulerColor:t.overviewRulerColor,before:t.before?ga.from(t.before):void 0,after:t.after?ga.from(t.after):void 0}}r.from=e})(u1||(u1={}));var It;(function(r){function e(i){return{text:i.newText,eol:i.newEol&&wa.from(i.newEol),range:F.from(i.range)}}r.from=e;function t(i){const n=new xr(F.to(i.range),i.text);return n.newEol=typeof i.eol>"u"?void 0:wa.to(i.eol),n}r.to=t})(It||(It={}));var Xt;(function(r){function e(i,n){var o;const s={edits:[]};if(i instanceof Cr){const a=new Zw;for(const c of i._allEntries())c._type===1&&y.isUri(c.to)&&c.from===void 0&&a.add(c.to);for(const c of i._allEntries())if(c._type===1){let l;(o=c.options)!=null&&o.contents&&(ArrayBuffer.isView(c.options.contents)?l={type:"base64",value:rb(ve.wrap(c.options.contents))}:l={type:"dataTransferItem",id:c.options.contents._itemId}),s.edits.push({oldResource:c.from,newResource:c.to,options:{...c.options,contents:l},metadata:c.metadata})}else c._type===2?s.edits.push({resource:c.uri,textEdit:It.from(c.edit),versionId:a.has(c.uri)||n==null?void 0:n.getTextDocumentVersion(c.uri),metadata:c.metadata}):c._type===6?s.edits.push({resource:c.uri,textEdit:{range:F.from(c.range),text:c.edit.value,insertAsSnippet:!0},versionId:a.has(c.uri)||n==null?void 0:n.getTextDocumentVersion(c.uri),metadata:c.metadata}):c._type===3?s.edits.push({metadata:c.metadata,resource:c.uri,cellEdit:c.edit,notebookMetadata:c.notebookMetadata,notebookVersionId:n==null?void 0:n.getNotebookDocumentVersion(c.uri)}):c._type===5&&s.edits.push({metadata:c.metadata,resource:c.uri,notebookVersionId:n==null?void 0:n.getNotebookDocumentVersion(c.uri),cellEdit:{editType:1,index:c.index,count:c.count,cells:c.cells.map(Rl.from)}})}return s}r.from=e;function t(i){const n=new Cr,s=new mt;for(const o of i.edits)if(o.textEdit){const a=o,c=y.revive(a.resource),l=F.to(a.textEdit.range),u=a.textEdit.text,d=a.textEdit.insertAsSnippet;let h;d?h=xs.replace(l,new Cs(u)):h=xr.replace(l,u);const g=s.get(c);g?g.push(h):s.set(c,[h])}else n.renameFile(y.revive(o.oldResource),y.revive(o.newResource),o.options);for(const[o,a]of s)n.set(o,a);return n}r.to=t})(Xt||(Xt={}));var Oi;(function(r){const e=Object.create(null);e[Ke.File]=0,e[Ke.Module]=1,e[Ke.Namespace]=2,e[Ke.Package]=3,e[Ke.Class]=4,e[Ke.Method]=5,e[Ke.Property]=6,e[Ke.Field]=7,e[Ke.Constructor]=8,e[Ke.Enum]=9,e[Ke.Interface]=10,e[Ke.Function]=11,e[Ke.Variable]=12,e[Ke.Constant]=13,e[Ke.String]=14,e[Ke.Number]=15,e[Ke.Boolean]=16,e[Ke.Array]=17,e[Ke.Object]=18,e[Ke.Key]=19,e[Ke.Null]=20,e[Ke.EnumMember]=21,e[Ke.Struct]=22,e[Ke.Event]=23,e[Ke.Operator]=24,e[Ke.TypeParameter]=25;function t(n){return typeof e[n]=="number"?e[n]:6}r.from=t;function i(n){for(const s in e)if(e[s]===n)return Number(s);return Ke.Property}r.to=i})(Oi||(Oi={}));var On;(function(r){function e(i){switch(i){case sl.Deprecated:return 1}}r.from=e;function t(i){switch(i){case 1:return sl.Deprecated}}r.to=t})(On||(On={}));var Dl;(function(r){function e(i){return{name:i.name,kind:Oi.from(i.kind),tags:i.tags&&i.tags.map(On.from),containerName:i.containerName,location:xi.from(i.location)}}r.from=e;function t(i){const n=new ol(i.name,Oi.to(i.kind),i.containerName,xi.to(i.location));return n.tags=i.tags&&i.tags.map(On.to),n}r.to=t})(Dl||(Dl={}));var d1;(function(r){function e(i){var s;const n={name:i.name||"!!MISSING: name!!",detail:i.detail,range:F.from(i.range),selectionRange:F.from(i.selectionRange),kind:Oi.from(i.kind),tags:((s=i.tags)==null?void 0:s.map(On.from))??[]};return i.children&&(n.children=i.children.map(e)),n}r.from=e;function t(i){const n=new al(i.name,i.detail,Oi.to(i.kind),F.to(i.range),F.to(i.selectionRange));return xc(i.tags)&&(n.tags=i.tags.map(On.to)),i.children&&(n.children=i.children.map(t)),n}r.to=t})(d1||(d1={}));var Ns;(function(r){function e(i){const n=new _m(Oi.to(i.kind),i.name,i.detail||"",y.revive(i.uri),F.to(i.range),F.to(i.selectionRange));return n._sessionId=i._sessionId,n._itemId=i._itemId,n}r.to=e;function t(i,n,s){var o;if(n=n??i._sessionId,s=s??i._itemId,n===void 0||s===void 0)throw new Error("invalid item");return{_sessionId:n,_itemId:s,name:i.name,detail:i.detail,kind:Oi.from(i.kind),uri:i.uri,range:F.from(i.range),selectionRange:F.from(i.selectionRange),tags:(o=i.tags)==null?void 0:o.map(On.from)}}r.from=t})(Ns||(Ns={}));var h1;(function(r){function e(t){return new ux(Ns.to(t.from),t.fromRanges.map(i=>F.to(i)))}r.to=e})(h1||(h1={}));var f1;(function(r){function e(t){return new dx(Ns.to(t.to),t.fromRanges.map(i=>F.to(i)))}r.to=e})(f1||(f1={}));var xi;(function(r){function e(i){return{range:i.range&&F.from(i.range),uri:i.uri}}r.from=e;function t(i){return new yi(y.revive(i.uri),F.to(i.range))}r.to=t})(xi||(xi={}));var Il;(function(r){function e(i){const n=i,s=i;return{originSelectionRange:n.originSelectionRange?F.from(n.originSelectionRange):void 0,uri:n.targetUri?n.targetUri:s.uri,range:F.from(n.targetRange?n.targetRange:s.range),targetSelectionRange:n.targetSelectionRange?F.from(n.targetSelectionRange):void 0}}r.from=e;function t(i){return{targetUri:y.revive(i.uri),targetRange:F.to(i.range),targetSelectionRange:i.targetSelectionRange?F.to(i.targetSelectionRange):void 0,originSelectionRange:i.originSelectionRange?F.to(i.originSelectionRange):void 0}}r.to=t})(Il||(Il={}));var Jh;(function(r){function e(i){return{range:F.from(i.range),contents:Le.fromMany(i.contents)}}r.from=e;function t(i){return new Zd(i.contents.map(Le.to),F.to(i.range))}r.to=t})(Jh||(Jh={}));var p1;(function(r){function e(i){return{range:F.from(i.range),expression:i.expression}}r.from=e;function t(i){return new wh(F.to(i.range),i.expression)}r.to=t})(p1||(p1={}));var Kh;(function(r){function e(i){if(i instanceof bh)return{type:"text",range:F.from(i.range),text:i.text};if(i instanceof yh)return{type:"variable",range:F.from(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};if(i instanceof xh)return{type:"expression",range:F.from(i.range),expression:i.expression};throw new Error("Unknown 'InlineValue' type")}r.from=e;function t(i){switch(i.type){case"text":return{range:F.to(i.range),text:i.text};case"variable":return{range:F.to(i.range),variableName:i.variableName,caseSensitiveLookup:i.caseSensitiveLookup};case"expression":return{range:F.to(i.range),expression:i.expression}}}r.to=t})(Kh||(Kh={}));var Xh;(function(r){function e(i){return{frameId:i.frameId,stoppedLocation:F.from(i.stoppedLocation)}}r.from=e;function t(i){return new Mm(i.frameId,F.to(i.stoppedLocation))}r.to=t})(Xh||(Xh={}));var ma;(function(r){function e(i){return{range:F.from(i.range),kind:i.kind}}r.from=e;function t(i){return new eh(F.to(i.range),i.kind)}r.to=t})(ma||(ma={}));var g1;(function(r){function e(i){return{uri:i.uri,highlights:i.highlights.map(ma.from)}}r.from=e;function t(i){return new th(y.revive(i.uri),i.highlights.map(ma.to))}r.to=t})(g1||(g1={}));var m1;(function(r){function e(t){switch(t){case 1:return Jo.TriggerCharacter;case 2:return Jo.TriggerForIncompleteCompletions;case 0:default:return Jo.Invoke}}r.to=e})(m1||(m1={}));var v1;(function(r){function e(t){return{triggerKind:m1.to(t.triggerKind),triggerCharacter:t.triggerCharacter}}r.to=e})(v1||(v1={}));var Yh;(function(r){function e(i){switch(i){case ul.Deprecated:return 1}}r.from=e;function t(i){switch(i){case 1:return ul.Deprecated}}r.to=t})(Yh||(Yh={}));var Zh;(function(r){const e=new Map([[he.Method,0],[he.Function,1],[he.Constructor,2],[he.Field,3],[he.Variable,4],[he.Class,5],[he.Interface,7],[he.Struct,6],[he.Module,8],[he.Property,9],[he.Unit,12],[he.Value,13],[he.Constant,14],[he.Enum,15],[he.EnumMember,16],[he.Keyword,17],[he.Snippet,27],[he.Text,18],[he.Color,19],[he.File,20],[he.Reference,21],[he.Folder,23],[he.Event,10],[he.Operator,11],[he.TypeParameter,24],[he.Issue,26],[he.User,25]]);function t(s){return e.get(s)??9}r.from=t;const i=new Map([[0,he.Method],[1,he.Function],[2,he.Constructor],[3,he.Field],[4,he.Variable],[5,he.Class],[7,he.Interface],[6,he.Struct],[8,he.Module],[9,he.Property],[12,he.Unit],[13,he.Value],[14,he.Constant],[15,he.Enum],[16,he.EnumMember],[17,he.Keyword],[27,he.Snippet],[18,he.Text],[19,he.Color],[20,he.File],[21,he.Reference],[23,he.Folder],[10,he.Event],[11,he.Operator],[24,he.TypeParameter],[25,he.User],[26,he.Issue]]);function n(s){return i.get(s)??he.Property}r.to=n})(Zh||(Zh={}));var _1;(function(r){function e(t,i){var s;const n=new oh(t.label);return n.insertText=t.insertText,n.kind=Zh.to(t.kind),n.tags=(s=t.tags)==null?void 0:s.map(Yh.to),n.detail=t.detail,n.documentation=ps(t.documentation)?Le.to(t.documentation):t.documentation,n.sortText=t.sortText,n.filterText=t.filterText,n.preselect=t.preselect,n.commitCharacters=t.commitCharacters,Qe.isIRange(t.range)?n.range=F.to(t.range):typeof t.range=="object"&&(n.range={inserting:F.to(t.range.insert),replacing:F.to(t.range.replace)}),n.keepWhitespace=typeof t.insertTextRules>"u"?!1:!!(t.insertTextRules&1),typeof t.insertTextRules<"u"&&t.insertTextRules&4?n.insertText=new Cs(t.insertText):(n.insertText=t.insertText,n.textEdit=n.range instanceof ye?new xr(n.range,n.insertText):void 0),t.additionalTextEdits&&t.additionalTextEdits.length>0&&(n.additionalTextEdits=t.additionalTextEdits.map(o=>It.to(o))),n.command=i&&t.command?i.fromInternal(t.command):void 0,n}r.to=e})(_1||(_1={}));var ef;(function(r){function e(i){if(typeof i.label!="string"&&!Array.isArray(i.label))throw new TypeError("Invalid label");return{label:i.label,documentation:Le.fromStrict(i.documentation)}}r.from=e;function t(i){return{label:i.label,documentation:ps(i.documentation)?Le.to(i.documentation):i.documentation}}r.to=t})(ef||(ef={}));var tf;(function(r){function e(i){return{label:i.label,documentation:Le.fromStrict(i.documentation),parameters:Array.isArray(i.parameters)?i.parameters.map(ef.from):[],activeParameter:i.activeParameter}}r.from=e;function t(i){return{label:i.label,documentation:ps(i.documentation)?Le.to(i.documentation):i.documentation,parameters:Array.isArray(i.parameters)?i.parameters.map(ef.to):[],activeParameter:i.activeParameter}}r.to=t})(tf||(tf={}));var Pl;(function(r){function e(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(tf.from):[]}}r.from=e;function t(i){return{activeSignature:i.activeSignature,activeParameter:i.activeParameter,signatures:Array.isArray(i.signatures)?i.signatures.map(tf.to):[]}}r.to=t})(Pl||(Pl={}));var w1;(function(r){function e(t,i){const n=new sh(qe.to(i.position),typeof i.label=="string"?i.label:i.label.map(b1.to.bind(void 0,t)),i.kind&&nf.to(i.kind));return n.textEdits=i.textEdits&&i.textEdits.map(It.to),n.tooltip=ps(i.tooltip)?Le.to(i.tooltip):i.tooltip,n.paddingLeft=i.paddingLeft,n.paddingRight=i.paddingRight,n}r.to=e})(w1||(w1={}));var b1;(function(r){function e(t,i){const n=new rh(i.label);return n.tooltip=ps(i.tooltip)?Le.to(i.tooltip):i.tooltip,Xg.is(i.command)&&(n.command=t.fromInternal(i.command)),i.location&&(n.location=xi.to(i.location)),n}r.to=e})(b1||(b1={}));var nf;(function(r){function e(i){return i}r.from=e;function t(i){return i}r.to=t})(nf||(nf={}));var Ms;(function(r){function e(i){return{range:F.from(i.range),url:i.target,tooltip:i.tooltip}}r.from=e;function t(i){let n;if(i.url)try{n=typeof i.url=="string"?y.parse(i.url,!0):y.revive(i.url)}catch{}return new ch(F.to(i.range),n)}r.to=t})(Ms||(Ms={}));var rf;(function(r){function e(i){const n=new uh(i.label);return i.textEdit&&(n.textEdit=It.to(i.textEdit)),i.additionalTextEdits&&(n.additionalTextEdits=i.additionalTextEdits.map(s=>It.to(s))),n}r.to=e;function t(i){return{label:i.label,textEdit:i.textEdit?It.from(i.textEdit):void 0,additionalTextEdits:i.additionalTextEdits?i.additionalTextEdits.map(n=>It.from(n)):void 0}}r.from=t})(rf||(rf={}));var va;(function(r){function e(i){return new ea(i[0],i[1],i[2],i[3])}r.to=e;function t(i){return[i.red,i.green,i.blue,i.alpha]}r.from=t})(va||(va={}));var y1;(function(r){function e(i){return{range:F.from(i.range)}}r.from=e;function t(i){return new ll(F.to(i.range))}r.to=t})(y1||(y1={}));var sf;(function(r){function e(t){switch(t){case 2:return Xo.AfterDelay;case 1:return Xo.Manual;case 3:case 4:return Xo.FocusOut}}r.to=e})(sf||(sf={}));var _a;(function(r){function e(i){switch(i){case Gi.Off:return 0;case Gi.Relative:return 2;case Gi.Interval:return 3;case Gi.On:default:return 1}}r.from=e;function t(i){switch(i){case 0:return Gi.Off;case 2:return Gi.Relative;case 3:return Gi.Interval;case 1:default:return Gi.On}}r.to=t})(_a||(_a={}));var wa;(function(r){function e(i){if(i===qi.CRLF)return 1;if(i===qi.LF)return 0}r.from=e;function t(i){if(i===1)return qi.CRLF;if(i===0)return qi.LF}r.to=t})(wa||(wa={}));var x1;(function(r){function e(t){if(typeof t=="object")return t.viewId;switch(t){case Ps.SourceControl:return 3;case Ps.Window:return 10;case Ps.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}r.from=e})(x1||(x1={}));var of;(function(r){function e(i){const n={start:i.start+1,end:i.end+1};return i.kind&&(n.kind=af.from(i.kind)),n}r.from=e;function t(i){const n={start:i.start-1,end:i.end-1};return i.kind&&(n.kind=af.to(i.kind)),n}r.to=t})(of||(of={}));var af;(function(r){function e(i){if(i)switch(i){case Tn.Comment:return Wo.Comment;case Tn.Imports:return Wo.Imports;case Tn.Region:return Wo.Region}}r.from=e;function t(i){if(i)switch(i.value){case Wo.Comment.value:return Tn.Comment;case Wo.Imports.value:return Tn.Imports;case Wo.Region.value:return Tn.Region}}r.to=t})(af||(af={}));var Tl;(function(r){function e(t){if(t)return{pinned:typeof t.preview=="boolean"?!t.preview:void 0,inactive:t.background,preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?F.from(t.selection):void 0,override:typeof t.override=="boolean"?M5.id:void 0}}r.from=e})(Tl||(Tl={}));var pi;(function(r){function e(s){return s instanceof ra?s.toJSON():typeof s=="string"?s:t(s)||i(s)?new ra(s.baseUri??s.base,s.pattern).toJSON():s}r.from=e;function t(s){const o=s;return o?y.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function i(s){const o=s;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function n(s){return typeof s=="string"?s:new ra(y.revive(s.baseUri),s.pattern)}r.to=n})(pi||(pi={}));var C1;(function(r){function e(t){if(t){if(Array.isArray(t))return t.map(e);if(typeof t=="string")return t;{const i=t;return{language:i.language,scheme:i.scheme,pattern:pi.from(i.pattern),exclusive:i.exclusive,notebookType:i.notebookType}}}else return}r.from=e})(C1||(C1={}));var cf;(function(r){function e(i){return!!i&&typeof i=="object"&&"documents"in i&&Array.isArray(i.documents)&&i.documents.every(n=>Array.isArray(n)&&n.every(s=>s&&typeof s=="object"&&"uri"in s&&y.isUri(s.uri)&&"version"in s&&typeof s.version=="number"&&"ranges"in s&&Array.isArray(s.ranges)&&s.ranges.every(o=>o instanceof ye)))}r.is=e;function t(i){return{documents:i.documents.map(n=>n.map(s=>({uri:y.from(s.uri),version:s.version,ranges:s.ranges.map(o=>F.from(o))})))}}r.from=t})(cf||(cf={}));var hn;(function(r){function e(i){return{start:i.start,end:i.end}}r.from=e;function t(i){return new An(i.start,i.end)}r.to=t})(hn||(hn={}));var ba;(function(r){function e(i){return{timing:typeof i.runStartTime=="number"&&typeof i.runEndTime=="number"?{startTime:i.runStartTime,endTime:i.runEndTime}:void 0,executionOrder:i.executionOrder,success:i.lastRunSuccess}}r.to=e;function t(i){var n,s;return{lastRunSuccess:i.success,runStartTime:(n=i.timing)==null?void 0:n.startTime,runEndTime:(s=i.timing)==null?void 0:s.endTime,executionOrder:i.executionOrder}}r.from=t})(ba||(ba={}));var S1;(function(r){function e(t){if(t===tl.Unconfirmed)return la.Pending;if(t===tl.Pending)return;if(t===tl.Executing)return la.Executing;throw new Error(`Unknown state: ${t}`)}r.to=e})(S1||(S1={}));var Al;(function(r){function e(i){switch(i){case Os.Markup:return qo.Markup;case Os.Code:default:return qo.Code}}r.from=e;function t(i){switch(i){case qo.Markup:return Os.Markup;case qo.Code:default:return Os.Code}}r.to=t})(Al||(Al={}));var Tr;(function(r){function e(i){const n={metadata:i.metadata??Object.create(null),cells:[]};for(const s of i.cells)kh.validate(s),n.cells.push(Rl.from(s));return n}r.from=e;function t(i){const n=new vx(i.cells.map(Rl.to));return eE(i.metadata)||(n.metadata=i.metadata),n}r.to=t})(Tr||(Tr={}));var Rl;(function(r){function e(i){return{cellKind:Al.from(i.kind),language:i.languageId,mime:i.mime,source:i.value,metadata:i.metadata,internalMetadata:ba.from(i.executionSummary??{}),outputs:i.outputs?i.outputs.map(Ar.from):[]}}r.from=e;function t(i){return new kh(Al.to(i.cellKind),i.source,i.language,i.mime,i.outputs?i.outputs.map(Ar.to):void 0,i.metadata,i.internalMetadata?ba.to(i.internalMetadata):void 0)}r.to=t})(Rl||(Rl={}));var ya;(function(r){function e(i){return{mime:i.mime,valueBytes:ve.wrap(i.data)}}r.from=e;function t(i){return new _x(i.valueBytes.buffer,i.mime)}r.to=t})(ya||(ya={}));var Ar;(function(r){function e(i){return{outputId:i.id,items:i.items.map(ya.from),metadata:i.metadata}}r.from=e;function t(i){const n=i.items.map(ya.to);return new Dh(n,i.outputId,i.metadata)}r.to=t})(Ar||(Ar={}));var lf;(function(r){function e(n){return i(n)?{include:pi.from(n.include)??void 0,exclude:pi.from(n.exclude)??void 0}:pi.from(n)??void 0}r.from=e;function t(n){return i(n)?{include:pi.to(n.include),exclude:pi.to(n.exclude)}:pi.to(n)}r.to=t;function i(n){const s=n;return s?!Gt(s.include)&&!Gt(s.exclude):!1}})(lf||(lf={}));var E1;(function(r){function e(t,i,n){const s=typeof t.command=="string"?{title:"",command:t.command}:t.command;return{alignment:t.alignment===Ih.Left?1:2,command:i.toInternal(s,n),text:t.text,tooltip:t.tooltip,accessibilityInformation:t.accessibilityInformation,priority:t.priority}}r.from=e})(E1||(E1={}));var k1;(function(r){function e(t,i,n){const s=typeof t.command=="string"?{title:"",command:t.command}:t.command;return{command:i.toInternal(s,n),label:t.label,description:t.description,detail:t.detail,documentation:t.documentation}}r.from=e})(k1||(k1={}));var D1;(function(r){function e(t){return{transientOutputs:(t==null?void 0:t.transientOutputs)??!1,transientCellMetadata:(t==null?void 0:t.transientCellMetadata)??{},transientDocumentMetadata:(t==null?void 0:t.transientDocumentMetadata)??{},cellContentMetadata:(t==null?void 0:t.cellContentMetadata)??{}}}r.from=e})(D1||(D1={}));var uf;(function(r){function e(i){return{uri:i.uri,provides:i.provides}}r.from=e;function t(i){return new wx(y.revive(i.uri),i.provides)}r.to=t})(uf||(uf={}));var xa;(function(r){function e(i){return{message:Le.fromStrict(i.message)||"",type:0,expected:i.expectedOutput,actual:i.actualOutput,contextValue:i.contextValue,location:i.location&&{range:F.from(i.location.range),uri:i.location.uri}}}r.from=e;function t(i){const n=new Lh(typeof i.message=="string"?i.message:Le.to(i.message));return n.actualOutput=i.actual,n.expectedOutput=i.expected,n.contextValue=i.contextValue,n.location=i.location?xi.to(i.location):void 0,n}r.to=t})(xa||(xa={}));var Qi;(function(r){r.namespace=Nd,r.denamespace=gy})(Qi||(Qi={}));var Rr;(function(r){function e(i){const n=Vd(i).controllerId;return{extId:be.fromExtHostTestItem(i,n).toString(),label:i.label,uri:y.revive(i.uri),busy:i.busy,tags:i.tags.map(s=>Qi.namespace(n,s.id)),range:Qe.lift(F.from(i.range)),description:i.description||null,sortText:i.sortText||null,error:i.error&&Le.fromStrict(i.error)||null}}r.from=e;function t(i){return{parent:void 0,error:void 0,id:be.fromString(i.extId).localId,label:i.label,uri:y.revive(i.uri),tags:(i.tags||[]).map(n=>{const{tagId:s}=Qi.denamespace(n);return new Sl(s)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:F.to(i.range||void 0),canResolveChildren:!1,busy:i.busy,description:i.description||void 0,sortText:i.sortText||void 0}}r.toPlain=t})(Rr||(Rr={})),function(r){function e(i){return{id:i.id}}r.from=e;function t(i){return new Sl(i.id)}r.to=t}(Qi||(Qi={}));var I1;(function(r){const e=(i,n)=>{const s=i.value;if(!s)return;const o={...Rr.toPlain(s.item),parent:n,taskStates:s.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map(xa.to)})),children:[]};if(i.children)for(const a of i.children.values()){const c=e(a,o);c&&o.children.push(c)}return o};function t(i){const n=new w5;for(const a of i.items)n.insert(be.fromString(a.item.extId).path,a);const s=[n.nodes],o=[];for(;s.length;)for(const a of s.pop())a.value?o.push(a):a.children&&s.push(a.children.values());return{completedAt:i.completedAt,results:o.map(a=>e(a)).filter(as)}}r.to=t})(I1||(I1={}));var df;(function(r){function e(s){return{covered:s.covered,total:s.total}}function t(s){return"line"in s?qe.from(s):F.from(s)}function i(s){if(typeof s.executed=="number"&&s.executed<0)throw new Error(`Invalid coverage count ${s.executed}`);return"branches"in s?{count:s.executed,location:t(s.location),type:1,branches:s.branches.length?s.branches.map(o=>({count:o.executed,location:o.location&&t(o.location),label:o.label})):void 0}:{type:0,name:s.name,count:s.executed,location:t(s.location)}}r.fromDetails=i;function n(s,o){return $h(o.statementCoverage),$h(o.branchCoverage),$h(o.declarationCoverage),{id:s,uri:o.uri,statement:e(o.statementCoverage),branch:o.branchCoverage&&e(o.branchCoverage),declaration:o.declarationCoverage&&e(o.declarationCoverage)}}r.fromFile=n})(df||(df={}));var P1;(function(r){function e(t){switch(t){case 1:return cl.Invoke;case 2:return cl.Automatic}}r.to=e})(P1||(P1={}));var Fs;(function(r){function e(i){const n=new Ym(Oi.to(i.kind),i.name,i.detail||"",y.revive(i.uri),F.to(i.range),F.to(i.selectionRange));return n._sessionId=i._sessionId,n._itemId=i._itemId,n}r.to=e;function t(i,n,s){var o;if(n=n??i._sessionId,s=s??i._itemId,n===void 0||s===void 0)throw new Error("invalid item");return{_sessionId:n,_itemId:s,kind:Oi.from(i.kind),name:i.name,detail:i.detail??"",uri:i.uri,range:F.from(i.range),selectionRange:F.from(i.selectionRange),tags:(o=i.tags)==null?void 0:o.map(On.from)}}r.from=t})(Fs||(Fs={}));var hf;(function(r){function e(t){if(t)return{value:t.value,tooltip:t.tooltip}}r.from=e})(hf||(hf={}));var ff;(function(r){function e(s,o,a){const c=o.fileData;return c?new A7(new R7(c.name,y.revive(c.uri),c.id,ng(()=>a(c.id)))):s===kn.uriList&&o.uriListData?new ph(n(o.uriListData)):new ph(o.asString)}r.to=e;async function t(s,o){const a=await o.asString();if(s===kn.uriList)return{asString:a,fileData:void 0,uriListData:i(a)};const c=o.asFile();return{asString:a,fileData:c?{name:c.name,uri:c.uri,id:c._itemId??c.id}:void 0}}r.from=t;function i(s){return jg.split(s).map(o=>{if(o.startsWith("#"))return o;try{return y.parse(o)}catch{}return o})}function n(s){return jg.create(s.map(o=>typeof o=="string"?o:y.revive(o)))}})(ff||(ff={}));var Lr;(function(r){function e(i,n){const s=i.items.map(([o,a])=>[o,ff.to(o,a,n)]);return new pl(s)}r.toDataTransfer=e;async function t(i){const n={items:[]},s=[];for(const[o,a]of i)s.push((async()=>{n.items.push([o,await ff.from(o,a)])})());return await Promise.all(s),n}r.from=t})(Lr||(Lr={}));var Ll;(function(r){function e(i,n){return{kind:"reply",agentId:i.participant??(n==null?void 0:n.agentId)??"",subCommand:i.command??(n==null?void 0:n.command),message:i.prompt,title:i.label}}r.from=e;function t(i){return{prompt:i.message,label:i.title,participant:i.agentId,command:i.subCommand}}r.to=t})(Ll||(Ll={}));var T1;(function(r){function e(t){return"commandId"in t?{kind:"command",title:t.title??"",commandId:t.commandId??"",when:t.when??"",args:t.args}:{kind:"reply",message:t.message,title:t.title,tooltip:t.tooltip}}r.from=e})(T1||(T1={}));var pf;(function(r){function e(i){switch(i.role){case 0:return new Wh(i.content);case 1:return new Bh(i.content);case 2:return new Vh(i.content)}}r.to=e;function t(i){if(i instanceof Wh)return{role:0,content:i.content};if(i instanceof Bh)return{role:1,content:i.content};if(i instanceof Vh)return{role:2,content:i.content};throw new Error("Invalid LanguageModelMessage")}r.from=t})(pf||(pf={}));var Ca;(function(r){function e(n){const s={};for(const o of Object.keys(n))s[o]=n[o].map(r.to);return s}r.objectTo=e;function t(n){return{level:gf.to(n.level),kind:n.kind,value:xb(n.value)?y.revive(n.value):n.value,description:n.description}}r.to=t;function i(n){return{level:gf.from(n.level),kind:n.kind,value:n.value,description:n.description}}r.from=i})(Ca||(Ca={}));var gf;(function(r){function e(i){switch(i){case"short":return Rn.Short;case"medium":return Rn.Medium;case"full":default:return Rn.Full}}r.to=e;function t(i){switch(i){case Rn.Short:return"short";case Rn.Medium:return"medium";case Rn.Full:default:return"full"}}r.from=t})(gf||(gf={}));var A1;(function(r){function e(t){switch(t){case 1:return Dr.Helpful;case 0:return Dr.Unhelpful;case 2:return Dr.Undone;case 3:return Dr.Accepted;case 4:return Dr.Bug}}r.to=e})(A1||(A1={}));var Ol;(function(r){function e(i){return{kind:"markdownContent",content:Le.from(i.value)}}r.to=e;function t(i){return new Mh(Le.to(i.content))}r.from=t})(Ol||(Ol={}));var $l;(function(r){function e(i){const{value:n,baseUri:s}=i;function o(a,c){return a.map(l=>{const u=y.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:cs(s),uri:s,children:o(n,s)}}}r.to=e;function t(i){const n=on(i.treeData);function s(c){return c.map(l=>({name:l.label,children:l.children&&s(l.children)}))}const o=n.uri,a=n.children?s(n.children):[];return new Fh(a,o)}r.from=t})($l||($l={}));var Nl;(function(r){function e(i){return{kind:"inlineReference",name:i.title,inlineReference:y.isUri(i.value)?i.value:Pr.from(i.value)}}r.to=e;function t(i){const n=on(i);return new Hh(y.isUri(n.inlineReference)?n.inlineReference:Pr.to(n.inlineReference),i.name)}r.from=t})(Nl||(Nl={}));var Sa;(function(r){function e(i){return{kind:"progressMessage",content:Le.from(i.value)}}r.to=e;function t(i){return new ha(i.content.value)}r.from=t})(Sa||(Sa={}));var Ml;(function(r){function e(i,n,s){return{kind:"command",command:n.toInternal(i.value,s)??{command:i.value.command,title:i.value.title}}}r.to=e;function t(i,n){return new Uh(n.fromInternal(i.command)??{command:i.command.id,title:i.command.title})}r.from=t})(Ml||(Ml={}));var Or;(function(r){function e(i){return"variableName"in i.value?{kind:"reference",reference:{variableName:i.value.variableName,value:y.isUri(i.value.value)||!i.value.value?i.value.value:Pr.from(i.value.value)}}:{kind:"reference",reference:y.isUri(i.value)?i.value:Pr.from(i.value)}}r.to=e;function t(i){const n=on(i),s=o=>y.isUri(o)?o:Pr.to(o);return new Ir("variableName"in n.reference?{variableName:n.reference.variableName,value:n.reference.value&&s(n.reference.value)}:s(n.reference))}r.from=t})(Or||(Or={}));var mf;(function(r){function e(n,s,o){return n instanceof Mh?Ol.to(n):n instanceof Hh?Nl.to(n):n instanceof Ir?Or.to(n):n instanceof ha?Sa.to(n):n instanceof Fh?$l.to(n):n instanceof Uh?Ml.to(n,s,o):{kind:"content",content:""}}r.to=e;function t(n,s){switch(n.kind){case"reference":return Or.from(n);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return i(n,s)}}r.from=t;function i(n,s){switch(n.kind){case"markdownContent":return Ol.from(n);case"inlineReference":return Nl.from(n);case"progressMessage":return;case"treeData":return $l.from(n);case"command":return Ml.from(n,s)}}r.fromContent=i})(mf||(mf={}));var vf;(function(r){function e(i,n){return"markdownContent"in n?(M(i,"chatParticipantAdditions"),{content:Le.from(n.markdownContent),kind:"markdownContent"}):"content"in n?"vulnerabilities"in n&&n.vulnerabilities?(M(i,"chatParticipantAdditions"),{content:n.content,vulnerabilities:n.vulnerabilities,kind:"vulnerability"}):typeof n.content=="string"?{content:n.content,kind:"content"}:(M(i,"chatParticipantAdditions"),{content:Le.from(n.content),kind:"markdownContent"}):"documents"in n?{documents:n.documents.map(s=>({uri:s.uri,version:s.version,ranges:s.ranges.map(o=>F.from(o))})),kind:"usedContext"}:"reference"in n?{reference:"uri"in n.reference?{uri:n.reference.uri,range:F.from(n.reference.range)}:n.reference,kind:"reference"}:"inlineReference"in n?{inlineReference:"uri"in n.inlineReference?{uri:n.inlineReference.uri,range:F.from(n.inlineReference.range)}:n.inlineReference,name:n.title,kind:"inlineReference"}:"participant"in n?(M(i,"chatParticipantAdditions"),{agentId:n.participant,command:n.command,kind:"agentDetection"}):"message"in n?{content:Le.from(n.message),kind:"progressMessage"}:void 0}r.from=e;function t(i,n){switch(i.kind){case"markdownContent":return{content:i.content.value};case"inlineReference":return{inlineReference:xb(i.inlineReference)?y.revive(i.inlineReference):Pr.to(i.inlineReference),title:i.name};case"command":return{command:n.fromInternal(i.command)??{command:i.command.id,title:i.command.title}};default:return}}r.toProgressContent=t})(vf||(vf={}));var R1;(function(r){function e(t){return{prompt:t.message,command:t.command,variables:t.variables.variables.map(_f.to),location:L1.to(t.location)}}r.to=e})(R1||(R1={}));var L1;(function(r){function e(t){switch(t){case wr.Notebook:return $s.Notebook;case wr.Terminal:return $s.Terminal;case wr.Panel:return $s.Panel;case wr.Editor:return $s.Editor}}r.to=e})(L1||(L1={}));var _f;(function(r){function e(t){return{name:t.name,range:t.range&&[t.range.start,t.range.endExclusive],values:t.values.map(Ca.to)}}r.to=e})(_f||(_f={}));var O1;(function(r){function e(t){return{label:t.label,values:t.values.map(Ca.from),insertText:t.insertText,detail:t.detail,documentation:t.documentation}}r.from=e})(O1||(O1={}));var Ea;(function(r){function e(t){return{errorDetails:t.errorDetails,metadata:t.metadata}}r.to=e})(Ea||(Ea={}));var $1;(function(r){function e(t,i,n){if(i.action.kind==="vote")return;const s=Ea.to(t);return i.action.kind==="command"?{action:{kind:"command",commandButton:vf.toProgressContent(i.action.commandButton,n)},result:s}:i.action.kind==="followUp"?{action:{kind:"followUp",followup:Ll.to(i.action.followup)},result:s}:{action:i.action,result:s}}r.to=e})($1||($1={}));var wf;(function(r){function e(t,i,n){return"terminalCommand"in t?{terminalCommand:t.terminalCommand,shouldExecute:t.shouldExecute}:"uri"in t?{uri:t.uri}:i.toInternal(t,n)}r.from=e})(wf||(wf={}));var N1;(function(r){function e(t){return{kind:M1.to(t.kind)}}r.to=e})(N1||(N1={}));var M1;(function(r){function e(t){switch(t){case 0:return Es.Word;case 1:return Es.Line;case 2:return Es.Suggest;default:return Es.Unknown}}r.to=e})(M1||(M1={}));var F1;(function(r){function e(t,i){return{id:i,label:t.label,description:t.description,canEdit:t.canEdit,collapsibleState:t.collapsibleState||0,contextValue:t.contextValue}}r.from=e})(F1||(F1={}));var H1;(function(r){r[r.Information=1]="Information",r[r.Warning=2]="Warning"})(H1||(H1={}));const Tx="⟪ ",Ax=" characters skipped ⟫",G7=(Tx.length+Ax.length+5)*2;ie("searchService");function Q7(r){return!!r.preview}class J7{constructor(e,t,i,n){this.ranges=t,this.webviewIndex=n;const s=Array.isArray(t)?t:[t];if(i&&i.matchLines===1&&K7(s)){e=J4(e,i.matchLines);let o="",a=0,c=0;const l=Math.floor(i.charsPerLine/5),u=[];for(const d of s){const h=Math.max(d.startColumn-l,0),g=d.startColumn+i.charsPerLine;if(h>c+l+G7){const b=Tx+(h-c)+Ax;o+=b+e.slice(h,g),a+=h-(c+b.length)}else o+=e.slice(c,g);u.push(new X7(0,d.startColumn-a,d.endColumn-a)),c=g}this.preview={text:o,matches:Array.isArray(this.ranges)?u:u[0]}}else{const o=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber;this.preview={text:e,matches:Cc(t,a=>new Rx(a.startLineNumber-o,a.startColumn,a.endLineNumber-o,a.endColumn))}}}}function K7(r){const e=r[0].startLineNumber;for(const t of r)if(t.startLineNumber!==e||t.endLineNumber!==e)return!1;return!0}class Rx{constructor(e,t,i,n){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=n}}class X7 extends Rx{constructor(e,t,i){super(e,t,e,i)}}function Y7(r,e=!0){const t=r&&r.files&&r.files.exclude,i=e&&r&&r.search&&r.search.exclude;if(!t&&!i)return;if(!t||!i)return t||i;let n=Object.create(null);return n=fs(n,rt(t)),n=fs(n,rt(i),!0),n}function Lx(r,e){return r.excludePattern&&el(r.excludePattern,e)?!1:r.includePattern||r.usingSearchPaths?r.includePattern&&el(r.includePattern,e)?!0:r.usingSearchPaths?!!r.folderQueries&&r.folderQueries.some(t=>{const i=t.folder.fsPath;if(md(e,i)){const n=Ic(i,e);return!t.includePattern||!!el(t.includePattern,n)}else return!1}):!1:!0}var Ox;(function(r){r[r.unknownEncoding=1]="unknownEncoding",r[r.regexParseError=2]="regexParseError",r[r.globParseError=3]="globParseError",r[r.invalidLiteral=4]="invalidLiteral",r[r.rgProcessError=5]="rgProcessError",r[r.other=6]="other",r[r.canceled=7]="canceled"})(Ox||(Ox={}));function bf(r,e){const t={...r||{},...e||{}};return Object.keys(t).filter(i=>{const n=t[i];return typeof n=="boolean"&&n})}class $x{constructor(e,t){this._parsedIncludeExpression=null,this._excludeExpression={...e.excludePattern||{},...t.excludePattern||{}},this._parsedExcludeExpression=jo(this._excludeExpression);let i=e.includePattern;t.includePattern&&(i?i={...i,...t.includePattern}:i=t.includePattern),i&&(this._parsedIncludeExpression=jo(i))}matchesExcludesSync(e,t,i){return!!(this._parsedExcludeExpression&&this._parsedExcludeExpression(e,t,i))}includedInQuerySync(e,t,i){return!(this._parsedExcludeExpression&&this._parsedExcludeExpression(e,t,i)||this._parsedIncludeExpression&&!this._parsedIncludeExpression(e,t,i))}includedInQuery(e,t,i){const n=this._parsedExcludeExpression(e,t,i),s=()=>this._parsedIncludeExpression?!!this._parsedIncludeExpression(e,t,i):!0;return gr(n)?n.then(o=>o?!1:s()):s()}hasSiblingExcludeClauses(){return Z7(this._excludeExpression)}}function Z7(r){for(const e in r)if(typeof r[e]!="boolean")return!0;return!1}function e9(r){if(!r)return;let e;return t=>(e||(e=(r()||Promise.resolve([])).then(i=>i?Nx(i):{})),e.then(i=>!!i[t]))}function t9(r){if(!r)return;let e;return t=>{if(!e){const i=r();e=i?Nx(i):{}}return!!e[t]}}function Nx(r){const e={};for(const t of r)e[t]=!0;return e}function Fl(r,e,t){return new Tc(i=>U1(i,t)).isEqual(r,e)}function i9(r,e,t){return Fl(r.uri,e.uri,t)?0:ss(r.uri.toString(),e.uri.toString())}function n9(r,e,t){return r.index!==e.index?r.index<e.index?-1:1:Fl(r.uri,e.uri,t)?ss(r.name,e.name):ss(r.uri.toString(),e.uri.toString())}function Mx(r,e,t,i){const n=r.slice(0).sort((o,a)=>t(o,a,i)),s=e.slice(0).sort((o,a)=>t(o,a,i));return kS(n,s,(o,a)=>t(o,a,i))}function U1(r,e){const t=e.getCapabilities(r.scheme);return!(t&&t&1024)}class ka extends vk{static toExtHostWorkspace(e,t,i,n){if(!e)return{workspace:null,added:[],removed:[]};const{id:s,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=e,d=[],h=t;t?a.forEach((v,E)=>{const k=y.revive(v.uri),S=ka._findFolder(i||t,k,n);S?(S.name=v.name,S.index=v.index,d.push(S)):d.push({uri:k,name:v.name,index:E})}):d.push(...a.map(({uri:v,name:E,index:k})=>({uri:y.revive(v),name:E,index:k}))),d.sort((v,E)=>v.index<E.index?-1:1);const g=new ka(s,o,d,!!l,c?y.revive(c):null,!!u,v=>U1(v,n)),{added:b,removed:_}=Mx(h?h.workspaceFolders:[],g.workspaceFolders,i9,n);return{workspace:g,added:b,removed:_}}static _findFolder(e,t,i){for(let n=0;n<e.folders.length;n++){const s=e.workspaceFolders[n];if(Fl(s.uri,t,i))return s}}constructor(e,t,i,n,s,o,a){super(e,i.map(c=>new T0(c)),n,s,a),this._name=t,this._isUntitled=o,this._workspaceFolders=[],this._structure=Pi.forUris(a),i.forEach(c=>{this._workspaceFolders.push(c),this._structure.set(c.uri,c)})}get name(){return this._name}get isUntitled(){return this._isUntitled}get workspaceFolders(){return this._workspaceFolders.slice(0)}getWorkspaceFolder(e,t){return t&&this._structure.get(e)&&(e=Pg(e)),this._structure.findSubstr(e)}resolveWorkspaceFolder(e){return this._structure.get(e)}}let W1=class{constructor(e,t,i,n,s){this._onDidChangeWorkspace=new A,this.onDidChangeWorkspace=this._onDidChangeWorkspace.event,this._onDidGrantWorkspaceTrust=new A,this.onDidGrantWorkspaceTrust=this._onDidGrantWorkspaceTrust.event,this._activeSearchCallbacks=[],this._trusted=!1,this._editSessionIdentityProviders=new Map,this._providerHandlePool=0,this._onWillCreateEditSessionIdentityEvent=new Ec,this._canonicalUriProviders=new Map,this._logService=n,this._extHostFileSystemInfo=i,this._uriTransformerService=s,this._requestIdProvider=new gk,this._barrier=new Bi,this._proxy=e.getProxy(G.MainThreadWorkspace),this._messageService=e.getProxy(G.MainThreadMessageService);const o=t.workspace;this._confirmedWorkspace=o?new ka(o.id,o.name,[],!!o.transient,o.configuration?y.revive(o.configuration):null,!!o.isUntitled,a=>U1(a,i)):void 0}$initializeWorkspace(e,t){this._trusted=t,this.$acceptWorkspaceData(e),this._barrier.open()}waitForInitializeCall(){return this._barrier.wait()}get workspace(){return this._actualWorkspace}get name(){return this._actualWorkspace?this._actualWorkspace.name:void 0}get workspaceFile(){if(this._actualWorkspace&&this._actualWorkspace.configuration)return this._actualWorkspace.isUntitled?y.from({scheme:Y.untitled,path:cs(Pg(this._actualWorkspace.configuration))}):this._actualWorkspace.configuration}get _actualWorkspace(){return this._unconfirmedWorkspace||this._confirmedWorkspace}getWorkspaceFolders(){if(this._actualWorkspace)return this._actualWorkspace.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this._barrier.wait(),!!this._actualWorkspace)return this._actualWorkspace.workspaceFolders.slice(0)}updateWorkspaceFolders(e,t,i,...n){const s=[];if(Array.isArray(n)&&n.forEach(u=>{y.isUri(u.uri)&&!s.some(d=>Fl(d.uri,u.uri,this._extHostFileSystemInfo))&&s.push({uri:u.uri,name:u.name||Ig(u.uri)})}),this._unconfirmedWorkspace||[t,i].some(u=>typeof u!="number"||u<0)||i===0&&s.length===0)return!1;const o=this._actualWorkspace?this._actualWorkspace.workspaceFolders:[];if(t+i>o.length)return!1;const a=o.slice(0);a.splice(t,i,...s.map(u=>({uri:u.uri,name:u.name||Ig(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const d=a[u];if(a.some((h,g)=>g!==u&&Fl(d.uri,h.uri,this._extHostFileSystemInfo)))return!1}a.forEach((u,d)=>u.index=d);const{added:c,removed:l}=Mx(o,a,n9,this._extHostFileSystemInfo);if(c.length===0&&l.length===0)return!1;if(this._proxy){const u=e.displayName||e.name;this._proxy.$updateWorkspaceFolders(u,t,i,s).then(void 0,d=>{this._unconfirmedWorkspace=void 0;const h={source:{identifier:e.identifier,label:e.displayName||e.name}};this._messageService.$showMessage(mk.Error,f("vs/workbench/api/common/extHostWorkspace","updateerror","Extension '{0}' failed to update workspace folders: {1}",u,d.toString()),h,[])})}return this.trySetWorkspaceFolders(a),!0}getWorkspaceFolder(e,t){if(this._actualWorkspace)return this._actualWorkspace.getWorkspaceFolder(e,t)}async getWorkspaceFolder2(e,t){if(await this._barrier.wait(),!!this._actualWorkspace)return this._actualWorkspace.getWorkspaceFolder(e,t)}async resolveWorkspaceFolder(e){if(await this._barrier.wait(),!!this._actualWorkspace)return this._actualWorkspace.resolveWorkspaceFolder(e)}getPath(){if(!this._actualWorkspace)return;const{folders:e}=this._actualWorkspace;if(e.length!==0)return e[0].uri.fsPath}getRelativePath(e,t){let i,n="";if(typeof e=="string"?(i=y.file(e),n=e):typeof e<"u"&&(i=e,n=e.fsPath),!i)return n;const s=this.getWorkspaceFolder(i,!0);if(!s)return n;typeof t>"u"&&this._actualWorkspace&&(t=this._actualWorkspace.folders.length>1);let o=Yb(s.uri,i);return t&&s.name&&(o=`${s.name}/${o}`),o}trySetWorkspaceFolders(e){this._actualWorkspace&&(this._unconfirmedWorkspace=ka.toExtHostWorkspace({id:this._actualWorkspace.id,name:this._actualWorkspace.name,configuration:this._actualWorkspace.configuration,folders:e,isUntitled:this._actualWorkspace.isUntitled},this._actualWorkspace,void 0,this._extHostFileSystemInfo).workspace||void 0)}$acceptWorkspaceData(e){const{workspace:t,added:i,removed:n}=ka.toExtHostWorkspace(e,this._confirmedWorkspace,this._unconfirmedWorkspace,this._extHostFileSystemInfo);this._confirmedWorkspace=t||void 0,this._unconfirmedWorkspace=void 0,this._onDidChangeWorkspace.fire(Object.freeze({added:i,removed:n}))}findFiles(e,t,i,n,s=wt.None){this._logService.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${n.value}, entryPoint: findFiles`);let o="",a=!0;return t===null?a=!1:t!==void 0&&(typeof t=="string"?o=t:o=t.pattern),this._findFilesImpl(e,void 0,{exclude:o,maxResults:i,useDefaultExcludes:a,useDefaultSearchExcludes:!1,useIgnoreFiles:!1},s)}findFiles2(e,t={},i,n=wt.None){return this._logService.trace(`extHostWorkspace#findFiles2: fileSearch, extension: ${i.value}, entryPoint: findFiles2`),this._findFilesImpl(void 0,e,t,n)}async _findFilesImpl(e,t,i,n=wt.None){if(n&&n.isCancellationRequested)return Promise.resolve([]);const s=typeof i.exclude=="string"?i.exclude:i.exclude?i.exclude.pattern:void 0,o={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useGlobalIgnoreFiles=="boolean"?!i.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof i.useParentIgnoreFiles=="boolean"?!i.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof i.useDefaultExcludes=="boolean"?!i.useDefaultExcludes:!1,disregardSearchExcludeSettings:typeof i.useDefaultSearchExcludes=="boolean"?!i.useDefaultSearchExcludes:!1,maxResults:i.maxResults,excludePattern:s,shouldGlobSearch:typeof i.fuzzy=="boolean"?!i.fuzzy:!0,_reason:"startFileSearch"};let a;if(e){const{includePattern:c,folder:l}=B1(pi.from(e));a=l,o.includePattern=c}else{const{includePattern:c,folder:l}=B1(pi.from(t));a=l,o.filePattern=c}return this._proxy.$startFileSearch(a??null,o,n).then(c=>Array.isArray(c)?c.map(l=>y.revive(l)):[])}async findTextInFiles(e,t,i,n,s=wt.None){this._logService.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${n.value}, entryPoint: findTextInFiles`);const o=this._requestIdProvider.getNext(),a=typeof t.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:t.previewOptions,{includePattern:c,folder:l}=B1(pi.from(t.include)),u=typeof t.exclude=="string"?t.exclude:t.exclude?t.exclude.pattern:void 0,d={ignoreSymlinks:typeof t.followSymlinks=="boolean"?!t.followSymlinks:void 0,disregardIgnoreFiles:typeof t.useIgnoreFiles=="boolean"?!t.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof t.useGlobalIgnoreFiles=="boolean"?!t.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof t.useParentIgnoreFiles=="boolean"?!t.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof t.useDefaultExcludes=="boolean"?!t.useDefaultExcludes:!0,fileEncoding:t.encoding,maxResults:t.maxResults,previewOptions:a,afterContext:t.afterContext,beforeContext:t.beforeContext,includePattern:c,excludePattern:u};if(this._activeSearchCallbacks[o]=h=>{const g=y.revive(h.resource);h.results.forEach(b=>{const _=on(b);Q7(_)?i({uri:g,preview:{text:_.preview.text,matches:Cc(_.preview.matches,v=>new ye(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn))},ranges:Cc(_.ranges,v=>new ye(v.startLineNumber,v.startColumn,v.endLineNumber,v.endColumn))}):i({uri:g,text:_.text,lineNumber:_.lineNumber})})},s.isCancellationRequested)return{};try{const h=await this._proxy.$startTextSearch(e,l??null,d,o,s);return delete this._activeSearchCallbacks[o],h||{}}catch(h){throw delete this._activeSearchCallbacks[o],h}}$handleTextSearchResult(e,t){var i,n;(n=(i=this._activeSearchCallbacks)[t])==null||n.call(i,e)}async save(e){const t=await this._proxy.$save(e,{saveAs:!1});return y.revive(t)}async saveAs(e){const t=await this._proxy.$save(e,{saveAs:!0});return y.revive(t)}saveAll(e){return this._proxy.$saveAll(e)}resolveProxy(e){return this._proxy.$resolveProxy(e)}loadCertificates(){return this._proxy.$loadCertificates()}get trusted(){return this._trusted}requestWorkspaceTrust(e){return this._proxy.$requestWorkspaceTrust(e)}$onDidGrantWorkspaceTrust(){this._trusted||(this._trusted=!0,this._onDidGrantWorkspaceTrust.fire())}registerEditSessionIdentityProvider(e,t){if(this._editSessionIdentityProviders.has(e))throw new Error(`A provider has already been registered for scheme ${e}`);this._editSessionIdentityProviders.set(e,t);const i=this._uriTransformerService.transformOutgoingScheme(e),n=this._providerHandlePool++;return this._proxy.$registerEditSessionIdentityProvider(n,i),Ce(()=>{this._editSessionIdentityProviders.delete(e),this._proxy.$unregisterEditSessionIdentityProvider(n)})}async $getEditSessionIdentifier(e,t){this._logService.info("Getting edit session identifier for workspaceFolder",e);const i=await this.resolveWorkspaceFolder(y.revive(e));if(!i){this._logService.warn("Unable to resolve workspace folder");return}this._logService.info("Invoking #provideEditSessionIdentity for workspaceFolder",i);const n=this._editSessionIdentityProviders.get(i.uri.scheme);if(this._logService.info(`Provider for scheme ${i.uri.scheme} is defined: `,!!n),!n)return;const s=await n.provideEditSessionIdentity(i,t);if(this._logService.info("Provider returned edit session identifier: ",s),!!s)return s}async $provideEditSessionIdentityMatch(e,t,i,n){var c;this._logService.info("Getting edit session identifier for workspaceFolder",e);const s=await this.resolveWorkspaceFolder(y.revive(e));if(!s){this._logService.warn("Unable to resolve workspace folder");return}this._logService.info("Invoking #provideEditSessionIdentity for workspaceFolder",s);const o=this._editSessionIdentityProviders.get(s.uri.scheme);if(this._logService.info(`Provider for scheme ${s.uri.scheme} is defined: `,!!o),!o)return;const a=await((c=o.provideEditSessionIdentityMatch)==null?void 0:c.call(o,t,i,n));if(this._logService.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(e){return(t,i,n)=>{const s=function(a){t.call(i,a)};return s.extension=e,this._onWillCreateEditSessionIdentityEvent.event(s,void 0,n)}}async $onWillCreateEditSessionIdentity(e,t,i){const n=await this.resolveWorkspaceFolder(y.revive(e));if(n===void 0)throw new Error("Unable to resolve workspace folder");await this._onWillCreateEditSessionIdentityEvent.fireAsync({workspaceFolder:n},t,async(s,o)=>{const a=Date.now();await Promise.resolve(s),Date.now()-a>i&&this._logService.warn("SLOW edit session create-participant",o.extension.identifier)}),t.isCancellationRequested}registerCanonicalUriProvider(e,t){if(this._canonicalUriProviders.has(e))throw new Error(`A provider has already been registered for scheme ${e}`);this._canonicalUriProviders.set(e,t);const i=this._uriTransformerService.transformOutgoingScheme(e),n=this._providerHandlePool++;return this._proxy.$registerCanonicalUriProvider(n,i),Ce(()=>{this._canonicalUriProviders.delete(e),this._proxy.$unregisterCanonicalUriProvider(n)})}async provideCanonicalUri(e,t,i){var o;const n=this._canonicalUriProviders.get(e.scheme);if(!n)return;const s=await((o=n.provideCanonicalUri)==null?void 0:o.call(n,y.revive(e),t,i));if(s)return s}async $provideCanonicalUri(e,t,i){return this.provideCanonicalUri(y.revive(e),{targetScheme:t},i)}};W1=H([$(0,We),$(1,Wt),$(2,Fo),$(3,Je),$(4,Cd)],W1);const $n=ie("IExtHostWorkspace");function B1(r){let e,t;return r&&(typeof r=="string"?e=r:(e=r.pattern,t=y.revive(r.baseUri))),{includePattern:e,folder:t}}var V1;(function(r){r.DEFAULT={allowTrailingComma:!0}})(V1||(V1={}));function r9(r,e=!1){let t=0;const i=r.length;let n="",s=0,o=16,a=0;function c(_){let v=0,E=0;for(;v<_;){const k=r.charCodeAt(t);if(k>=48&&k<=57)E=E*16+k-48;else if(k>=65&&k<=70)E=E*16+k-65+10;else if(k>=97&&k<=102)E=E*16+k-97+10;else break;t++,v++}return v<_&&(E=-1),E}function l(_){t=_,n="",s=0,o=16,a=0}function u(){const _=t;if(r.charCodeAt(t)===48)t++;else for(t++;t<r.length&&Da(r.charCodeAt(t));)t++;if(t<r.length&&r.charCodeAt(t)===46)if(t++,t<r.length&&Da(r.charCodeAt(t)))for(t++;t<r.length&&Da(r.charCodeAt(t));)t++;else return a=3,r.substring(_,t);let v=t;if(t<r.length&&(r.charCodeAt(t)===69||r.charCodeAt(t)===101))if(t++,(t<r.length&&r.charCodeAt(t)===43||r.charCodeAt(t)===45)&&t++,t<r.length&&Da(r.charCodeAt(t))){for(t++;t<r.length&&Da(r.charCodeAt(t));)t++;v=t}else a=3;return r.substring(_,v)}function d(){let _="",v=t;for(;;){if(t>=i){_+=r.substring(v,t),a=2;break}const E=r.charCodeAt(t);if(E===34){_+=r.substring(v,t),t++;break}if(E===92){if(_+=r.substring(v,t),t++,t>=i){a=2;break}switch(r.charCodeAt(t++)){case 34:_+='"';break;case 92:_+="\\";break;case 47:_+="/";break;case 98:_+="\b";break;case 102:_+="\f";break;case 110:_+=`
`;break;case 114:_+="\r";break;case 116:_+="	";break;case 117:{const S=c(4);S>=0?_+=String.fromCharCode(S):a=4;break}default:a=5}v=t;continue}if(E>=0&&E<=31)if(yf(E)){_+=r.substring(v,t),a=2;break}else a=6;t++}return _}function h(){if(n="",a=0,s=t,t>=i)return s=i,o=17;let _=r.charCodeAt(t);if(z1(_)){do t++,n+=String.fromCharCode(_),_=r.charCodeAt(t);while(z1(_));return o=15}if(yf(_))return t++,n+=String.fromCharCode(_),_===13&&r.charCodeAt(t)===10&&(t++,n+=`
`),o=14;switch(_){case 123:return t++,o=1;case 125:return t++,o=2;case 91:return t++,o=3;case 93:return t++,o=4;case 58:return t++,o=6;case 44:return t++,o=5;case 34:return t++,n=d(),o=10;case 47:{const v=t-1;if(r.charCodeAt(t+1)===47){for(t+=2;t<i&&!yf(r.charCodeAt(t));)t++;return n=r.substring(v,t),o=12}if(r.charCodeAt(t+1)===42){t+=2;const E=i-1;let k=!1;for(;t<E;){if(r.charCodeAt(t)===42&&r.charCodeAt(t+1)===47){t+=2,k=!0;break}t++}return k||(t++,a=1),n=r.substring(v,t),o=13}return n+=String.fromCharCode(_),t++,o=16}case 45:if(n+=String.fromCharCode(_),t++,t===i||!Da(r.charCodeAt(t)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return n+=u(),o=11;default:for(;t<i&&g(_);)t++,_=r.charCodeAt(t);if(s!==t){switch(n=r.substring(s,t),n){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return n+=String.fromCharCode(_),t++,o=16}}function g(_){if(z1(_)||yf(_))return!1;switch(_){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function b(){let _;do _=h();while(_>=12&&_<=15);return _}return{setPosition:l,getPosition:()=>t,scan:e?b:h,getToken:()=>o,getTokenValue:()=>n,getTokenOffset:()=>s,getTokenLength:()=>t-s,getTokenError:()=>a}}function z1(r){return r===32||r===9||r===11||r===12||r===160||r===5760||r>=8192&&r<=8203||r===8239||r===8287||r===12288||r===65279}function yf(r){return r===10||r===13||r===8232||r===8233}function Da(r){return r>=48&&r<=57}function s9(r,e,t=V1.DEFAULT){const i=r9(r,!1);function n(j){return j?()=>j(i.getTokenOffset(),i.getTokenLength()):()=>!0}function s(j){return j?Be=>j(Be,i.getTokenOffset(),i.getTokenLength()):()=>!0}const o=n(e.onObjectBegin),a=s(e.onObjectProperty),c=n(e.onObjectEnd),l=n(e.onArrayBegin),u=n(e.onArrayEnd),d=s(e.onLiteralValue),h=s(e.onSeparator),g=n(e.onComment),b=s(e.onError),_=t&&t.disallowComments,v=t&&t.allowTrailingComma;function E(){for(;;){const j=i.scan();switch(i.getTokenError()){case 4:k(14);break;case 5:k(15);break;case 3:k(13);break;case 1:_||k(11);break;case 2:k(12);break;case 6:k(16);break}switch(j){case 12:case 13:_?k(10):g();break;case 16:k(1);break;case 15:case 14:break;default:return j}}}function k(j,Be=[],W=[]){if(b(j),Be.length+W.length>0){let U=i.getToken();for(;U!==17;){if(Be.indexOf(U)!==-1){E();break}else if(W.indexOf(U)!==-1)break;U=E()}}}function S(j){const Be=i.getTokenValue();return j?d(Be):a(Be),E(),!0}function O(){switch(i.getToken()){case 11:{let j=0;try{j=JSON.parse(i.getTokenValue()),typeof j!="number"&&(k(2),j=0)}catch{k(2)}d(j);break}case 7:d(null);break;case 8:d(!0);break;case 9:d(!1);break;default:return!1}return E(),!0}function T(){return i.getToken()!==10?(k(3,[],[2,5]),!1):(S(!1),i.getToken()===6?(h(":"),E(),ee()||k(4,[],[2,5])):k(5,[],[2,5]),!0)}function z(){o(),E();let j=!1;for(;i.getToken()!==2&&i.getToken()!==17;){if(i.getToken()===5){if(j||k(4,[],[]),h(","),E(),i.getToken()===2&&v)break}else j&&k(6,[],[]);T()||k(4,[],[2,5]),j=!0}return c(),i.getToken()!==2?k(7,[2],[]):E(),!0}function ae(){l(),E();let j=!1;for(;i.getToken()!==4&&i.getToken()!==17;){if(i.getToken()===5){if(j||k(4,[],[]),h(","),E(),i.getToken()===4&&v)break}else j&&k(6,[],[]);ee()||k(4,[],[4,5]),j=!0}return u(),i.getToken()!==4?k(8,[4],[]):E(),!0}function ee(){switch(i.getToken()){case 3:return ae();case 1:return z();case 10:return S(!0);default:return O()}}return E(),i.getToken()===17?t.allowEmptyContent?!0:(k(4,[],[]),!1):ee()?(i.getToken()!==17&&k(9,[],[]),!0):(k(4,[],[]),!1)}const j1=ie("configurationService");function q1(r,e){const t=Object.create(null);for(const i in r)Fx(t,i,r[i],e);return t}function Fx(r,e,t,i){const n=e.split("."),s=n.pop();let o=r;for(let a=0;a<n.length;a++){const c=n[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":break;default:i(`Ignoring ${e} as ${n.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[s]=t}catch{i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(o)}`)}else i(`Ignoring ${e} as ${n.join(".")} is ${JSON.stringify(o)}`)}function o9(r,e){const t=e.split(".");Hx(r,t)}function Hx(r,e){const t=e.shift();if(e.length===0){delete r[t];return}if(Object.keys(r).indexOf(t)!==-1){const i=r[t];typeof i=="object"&&!Array.isArray(i)&&(Hx(i,e),Object.keys(i).length===0&&delete r[t])}}function xf(r,e,t){function i(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const n=e.split("."),s=i(r,n);return typeof s>"u"?t:s}function a9(r){return r.replace(/[\[\]]/g,"")}const Cf={JSONContribution:"base.contributions.json"};function c9(r){return r.length>0&&r.charAt(r.length-1)==="#"?r.substring(0,r.length-1):r}class l9{constructor(){this._onDidChangeSchema=new A,this.onDidChangeSchema=this._onDidChangeSchema.event,this.schemasById={}}registerSchema(e,t){this.schemasById[c9(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}}const u9=new l9;Jt.add(Cf.JSONContribution,u9);var Ux;(function(r){r.Multiline="multilineText",r.Singleline="singlelineText"})(Ux||(Ux={}));const Sf={Configuration:"base.contributions.configuration"};var Wx;(function(r){r[r.APPLICATION=1]="APPLICATION",r[r.MACHINE=2]="MACHINE",r[r.WINDOW=3]="WINDOW",r[r.RESOURCE=4]="RESOURCE",r[r.LANGUAGE_OVERRIDABLE=5]="LANGUAGE_OVERRIDABLE",r[r.MACHINE_OVERRIDABLE=6]="MACHINE_OVERRIDABLE"})(Wx||(Wx={}));const Hs="vscode://schemas/settings/resourceLanguage",Ef=Jt.as(Cf.JSONContribution);class d9{constructor(){this.overrideIdentifiers=new Set,this._onDidSchemaChange=new A,this.onDidSchemaChange=this._onDidSchemaChange.event,this._onDidUpdateConfiguration=new A,this.onDidUpdateConfiguration=this._onDidUpdateConfiguration.event,this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:f("vs/platform/configuration/common/configurationRegistry","defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},Ef.registerSchema(Hs,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){const i=new Set;this.doRegisterConfigurations(e,t,i),Ef.registerSchema(Hs,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}deregisterConfigurations(e){const t=new Set;this.doDeregisterConfigurations(e,t),Ef.registerSchema(Hs,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){const i=new Set;this.doDeregisterConfigurations(t,i),this.doRegisterConfigurations(e,!1,i),Ef.registerSchema(Hs,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){const i=[];for(const{overrides:n,source:s}of e)for(const o in n)if(t.add(o),fn.test(o)){const a=this.configurationDefaultsOverrides.get(o),c=(a==null?void 0:a.valuesSources)??new Map;if(s)for(const h of Object.keys(n[o]))c.set(h,s);const l={...(a==null?void 0:a.value)||{},...n[o]};this.configurationDefaultsOverrides.set(o,{source:s,value:l,valuesSources:c});const u=a9(o),d={type:"object",default:l,description:f("vs/platform/configuration/common/configurationRegistry","defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",u),$ref:Hs,defaultDefaultValue:l,source:Oe(s)?void 0:s,defaultValueSource:s};i.push(...Hl(o)),this.configurationProperties[o]=d,this.defaultLanguageConfigurationOverridesNode.properties[o]=d}else{this.configurationDefaultsOverrides.set(o,{value:n[o],source:s});const a=this.configurationProperties[o];a&&(this.updatePropertyDefaultValue(o,a),this.updateSchema(o,a))}this.doRegisterOverrideIdentifiers(i)}deregisterDefaultConfigurations(e){const t=new Set;this.doDeregisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doDeregisterDefaultConfigurations(e,t){var i;for(const{overrides:n,source:s}of e)for(const o in n){const a=this.configurationDefaultsOverrides.get(o),c=Oe(s)?s:s==null?void 0:s.id,l=Oe(a==null?void 0:a.source)?a==null?void 0:a.source:(i=a==null?void 0:a.source)==null?void 0:i.id;if(c===l)if(t.add(o),this.configurationDefaultsOverrides.delete(o),fn.test(o))delete this.configurationProperties[o],delete this.defaultLanguageConfigurationOverridesNode.properties[o];else{const u=this.configurationProperties[o];u&&(this.updatePropertyDefaultValue(o,u),this.updateSchema(o,u))}}this.updateOverridePropertyPatternKey()}deltaConfiguration(e){let t=!1;const i=new Set;e.removedDefaults&&(this.doDeregisterDefaultConfigurations(e.removedDefaults,i),t=!0),e.addedDefaults&&(this.doRegisterDefaultConfigurations(e.addedDefaults,i),t=!0),e.removedConfigurations&&this.doDeregisterConfigurations(e.removedConfigurations,i),e.addedConfigurations&&this.doRegisterConfigurations(e.addedConfigurations,!1,i),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:i,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(const t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,i){e.forEach(n=>{this.validateAndRegisterProperties(n,t,n.extensionInfo,n.restrictedProperties,void 0,i),this.configurationContributors.push(n),this.registerJSONConfiguration(n)})}doDeregisterConfigurations(e,t){const i=n=>{var s,o;if(n.properties)for(const a in n.properties){t.add(a);const c=this.configurationProperties[a];(s=c==null?void 0:c.policy)!=null&&s.name&&this.policyConfigurations.delete(c.policy.name),delete this.configurationProperties[a],this.removeFromSchema(a,n.properties[a])}(o=n.allOf)==null||o.forEach(a=>i(a))};for(const n of e){i(n);const s=this.configurationContributors.indexOf(n);s!==-1&&this.configurationContributors.splice(s,1)}}validateAndRegisterProperties(e,t=!0,i,n,s=3,o){var l;s=Gt(e.scope)?s:e.scope;const a=e.properties;if(a)for(const u in a){const d=a[u];if(t&&p9(u,d)){delete a[u];continue}if(d.source=i,d.defaultDefaultValue=a[u].default,this.updatePropertyDefaultValue(u,d),fn.test(u)?d.scope=void 0:(d.scope=Gt(d.scope)?s:d.scope,d.restricted=Gt(d.restricted)?!!(n!=null&&n.includes(u)):d.restricted),a[u].hasOwnProperty("included")&&!a[u].included){this.excludedConfigurationProperties[u]=a[u],delete a[u];continue}else this.configurationProperties[u]=a[u],(l=a[u].policy)!=null&&l.name&&this.policyConfigurations.set(a[u].policy.name,u);!a[u].deprecationMessage&&a[u].markdownDeprecationMessage&&(a[u].deprecationMessage=a[u].markdownDeprecationMessage),o.add(u)}const c=e.allOf;if(c)for(const u of c)this.validateAndRegisterProperties(u,t,i,n,s,o)}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getConfigurationDefaultsOverrides(){return this.configurationDefaultsOverrides}registerJSONConfiguration(e){const t=i=>{const n=i.properties;if(n)for(const o in n)this.updateSchema(o,n[o]);const s=i.allOf;s==null||s.forEach(t)};t(e)}updateSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:break;case 5:this.resourceLanguageSettingsSchema.properties[e]=t;break}}removeFromSchema(e,t){switch(t.scope){case 1:break;case 2:break;case 6:break;case 3:break;case 4:case 5:delete this.resourceLanguageSettingsSchema.properties[e];break}}updateOverridePropertyPatternKey(){for(const e of this.overrideIdentifiers.values()){const t=`[${e}]`,i={type:"object",description:f("vs/platform/configuration/common/configurationRegistry","overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:f("vs/platform/configuration/common/configurationRegistry","overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Hs};this.updatePropertyDefaultValue(t,i)}}registerOverridePropertyPatternKey(){f("vs/platform/configuration/common/configurationRegistry","overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),f("vs/platform/configuration/common/configurationRegistry","overrideSettings.errorMessage","This setting does not support per-language configuration."),this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){const i=this.configurationDefaultsOverrides.get(e);let n=i==null?void 0:i.value,s=i==null?void 0:i.source;Eg(n)&&(n=t.defaultDefaultValue,s=void 0),Eg(n)&&(n=f9(t.type)),t.default=n,t.defaultValueSource=s}}const Bx="\\[([^\\]]+)\\]",Vx=new RegExp(Bx,"g"),h9=`^(${Bx})+$`,fn=new RegExp(h9);function Hl(r){const e=[];if(fn.test(r)){let t=Vx.exec(r);for(;t!=null&&t.length;){const i=t[1].trim();i&&e.push(i),t=Vx.exec(r)}}return Eo(e)}function f9(r){switch(Array.isArray(r)?r[0]:r){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}const kf=new d9;Jt.add(Sf.Configuration,kf);function p9(r,e){var t,i,n,s;return r.trim()?fn.test(r)?f("vs/platform/configuration/common/configurationRegistry","config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",r):kf.getConfigurationProperties()[r]!==void 0?f("vs/platform/configuration/common/configurationRegistry","config.property.duplicate","Cannot register '{0}'. This property is already registered.",r):(t=e.policy)!=null&&t.name&&kf.getPolicyConfigurations().get((i=e.policy)==null?void 0:i.name)!==void 0?f("vs/platform/configuration/common/configurationRegistry","config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",r,(n=e.policy)==null?void 0:n.name,kf.getPolicyConfigurations().get((s=e.policy)==null?void 0:s.name)):null:f("vs/platform/configuration/common/configurationRegistry","config.property.empty","Cannot register an empty property")}function Ul(r){return Object.isFrozen(r)?r:S0(r)}class ri{constructor(e={},t=[],i=[],n){this._contents=e,this._keys=t,this._overrides=i,this.raw=n,this.overrideConfigurations=new Map}get rawConfiguration(){var e;if(!this._rawConfiguration)if((e=this.raw)!=null&&e.length){const t=this.raw.map(i=>{if(i instanceof ri)return i;const n=new g9("");return n.parseRaw(i),n.configurationModel});this._rawConfiguration=t.reduce((i,n)=>n===i?n:i.merge(n),t[0])}else this._rawConfiguration=this;return this._rawConfiguration}get contents(){return this._contents}get overrides(){return this._overrides}get keys(){return this._keys}isEmpty(){return this._keys.length===0&&Object.keys(this._contents).length===0&&this._overrides.length===0}getValue(e){return e?xf(this.contents,e):this.contents}inspect(e,t){const i=this;return{get value(){return Ul(i.rawConfiguration.getValue(e))},get override(){return t?Ul(i.rawConfiguration.getOverrideValue(e,t)):void 0},get merged(){return Ul(t?i.rawConfiguration.override(t).getValue(e):i.rawConfiguration.getValue(e))},get overrides(){const n=[];for(const{contents:s,identifiers:o,keys:a}of i.rawConfiguration.overrides){const c=new ri(s,a).getValue(e);c!==void 0&&n.push({identifiers:o,value:c})}return n.length?Ul(n):void 0}}}getOverrideValue(e,t){const i=this.getContentsForOverrideIdentifer(t);return i?e?xf(i,e):i:void 0}getKeysForOverrideIdentifier(e){const t=[];for(const i of this.overrides)i.identifiers.includes(e)&&t.push(...i.keys);return Eo(t)}getAllOverrideIdentifiers(){const e=[];for(const t of this.overrides)e.push(...t.identifiers);return Eo(e)}override(e){let t=this.overrideConfigurations.get(e);return t||(t=this.createOverrideConfigurationModel(e),this.overrideConfigurations.set(e,t)),t}merge(...e){var o,a;const t=rt(this.contents),i=rt(this.overrides),n=[...this.keys],s=(o=this.raw)!=null&&o.length?[...this.raw]:[this];for(const c of e)if(s.push(...(a=c.raw)!=null&&a.length?c.raw:[c]),!c.isEmpty()){this.mergeContents(t,c.contents);for(const l of c.overrides){const[u]=i.filter(d=>ar(d.identifiers,l.identifiers));u?(this.mergeContents(u.contents,l.contents),u.keys.push(...l.keys),u.keys=Eo(u.keys)):i.push(rt(l))}for(const l of c.keys)n.indexOf(l)===-1&&n.push(l)}return new ri(t,n,i,s.every(c=>c instanceof ri)?void 0:s)}createOverrideConfigurationModel(e){const t=this.getContentsForOverrideIdentifer(e);if(!t||typeof t!="object"||!Object.keys(t).length)return this;const i={};for(const n of Eo([...Object.keys(this.contents),...Object.keys(t)])){let s=this.contents[n];const o=t[n];o&&(typeof s=="object"&&typeof o=="object"?(s=rt(s),this.mergeContents(s,o)):s=o),i[n]=s}return new ri(i,this.keys,this.overrides)}mergeContents(e,t){for(const i of Object.keys(t)){if(i in e&&Ft(e[i])&&Ft(t[i])){this.mergeContents(e[i],t[i]);continue}e[i]=rt(t[i])}}getContentsForOverrideIdentifer(e){let t=null,i=null;const n=s=>{s&&(i?this.mergeContents(i,s):i=rt(s))};for(const s of this.overrides)s.identifiers.length===1&&s.identifiers[0]===e?t=s.contents:s.identifiers.includes(e)&&n(s.contents);return n(t),i}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(e,t){this.updateValue(e,t,!0)}setValue(e,t){this.updateValue(e,t,!1)}removeValue(e){const t=this.keys.indexOf(e);t!==-1&&(this.keys.splice(t,1),o9(this.contents,e),fn.test(e)&&this.overrides.splice(this.overrides.findIndex(i=>ar(i.identifiers,Hl(e))),1))}updateValue(e,t,i){Fx(this.contents,e,t,n=>console.error(n)),i=i||this.keys.indexOf(e)===-1,i&&this.keys.push(e),fn.test(e)&&this.overrides.push({identifiers:Hl(e),keys:Object.keys(this.contents[e]),contents:q1(this.contents[e],n=>console.error(n))})}}class g9{constructor(e){this._name=e,this._raw=null,this._configurationModel=null,this._restrictedConfigurations=[],this._parseErrors=[]}get configurationModel(){return this._configurationModel||new ri}get restrictedConfigurations(){return this._restrictedConfigurations}get errors(){return this._parseErrors}parse(e,t){if(!Gt(e)){const i=this.doParseContent(e);this.parseRaw(i,t)}}reparse(e){this._raw&&this.parseRaw(this._raw,e)}parseRaw(e,t){this._raw=e;const{contents:i,keys:n,overrides:s,restricted:o,hasExcludedProperties:a}=this.doParseRaw(e,t);this._configurationModel=new ri(i,n,s,a?[e]:void 0),this._restrictedConfigurations=o||[]}doParseContent(e){let t={},i=null,n=[];const s=[];function o(c){Array.isArray(n)?n.push(c):i!==null&&(n[i]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(n),n=c,i=null},onObjectProperty:c=>{i=c},onObjectEnd:()=>{n=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(n),n=c,i=null},onArrayEnd:()=>{n=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{}};if(e)try{s9(e,a),t=n[0]||{}}catch(c){console.error(`Error while parsing settings file ${this._name}: ${c}`),this._parseErrors=[c]}return t}doParseRaw(e,t){const i=Jt.as(Sf.Configuration).getConfigurationProperties(),n=this.filter(e,i,!0,t);e=n.raw;const s=q1(e,c=>console.error(`Conflict in settings file ${this._name}: ${c}`)),o=Object.keys(e),a=this.toOverrides(e,c=>console.error(`Conflict in settings file ${this._name}: ${c}`));return{contents:s,keys:o,overrides:a,restricted:n.restricted,hasExcludedProperties:n.hasExcludedProperties}}filter(e,t,i,n){var c,l,u;let s=!1;if(!(n!=null&&n.scopes)&&!(n!=null&&n.skipRestricted)&&!((c=n==null?void 0:n.exclude)!=null&&c.length))return{raw:e,restricted:[],hasExcludedProperties:s};const o={},a=[];for(const d in e)if(fn.test(d)&&i){const h=this.filter(e[d],t,!1,n);o[d]=h.raw,s=s||h.hasExcludedProperties,a.push(...h.restricted)}else{const h=t[d],g=h?typeof h.scope<"u"?h.scope:3:void 0;h!=null&&h.restricted&&a.push(d),!((l=n.exclude)!=null&&l.includes(d))&&((u=n.include)!=null&&u.includes(d)||(g===void 0||n.scopes===void 0||n.scopes.includes(g))&&!(n.skipRestricted&&(h!=null&&h.restricted)))?o[d]=e[d]:s=!0}return{raw:o,restricted:a,hasExcludedProperties:s}}toOverrides(e,t){const i=[];for(const n of Object.keys(e))if(fn.test(n)){const s={};for(const o in e[n])s[o]=e[n][o];i.push({identifiers:Hl(n),keys:Object.keys(s),contents:q1(s,t)})}return i}}class m9{constructor(e,t,i,n,s,o,a,c,l,u,d,h,g){this.key=e,this.overrides=t,this._value=i,this.overrideIdentifiers=n,this.defaultConfiguration=s,this.policyConfiguration=o,this.applicationConfiguration=a,this.userConfiguration=c,this.localUserConfiguration=l,this.remoteUserConfiguration=u,this.workspaceConfiguration=d,this.folderConfigurationModel=h,this.memoryConfigurationModel=g}get value(){return Ul(this._value)}toInspectValue(e){return(e==null?void 0:e.value)!==void 0||(e==null?void 0:e.override)!==void 0||(e==null?void 0:e.overrides)!==void 0?e:void 0}get defaultInspectValue(){return this._defaultInspectValue||(this._defaultInspectValue=this.defaultConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._defaultInspectValue}get defaultValue(){return this.defaultInspectValue.merged}get default(){return this.toInspectValue(this.defaultInspectValue)}get policyInspectValue(){return this._policyInspectValue===void 0&&(this._policyInspectValue=this.policyConfiguration?this.policyConfiguration.inspect(this.key):null),this._policyInspectValue}get policyValue(){var e;return(e=this.policyInspectValue)==null?void 0:e.merged}get policy(){var e;return((e=this.policyInspectValue)==null?void 0:e.value)!==void 0?{value:this.policyInspectValue.value}:void 0}get applicationInspectValue(){return this._applicationInspectValue===void 0&&(this._applicationInspectValue=this.applicationConfiguration?this.applicationConfiguration.inspect(this.key):null),this._applicationInspectValue}get applicationValue(){var e;return(e=this.applicationInspectValue)==null?void 0:e.merged}get application(){return this.toInspectValue(this.applicationInspectValue)}get userInspectValue(){return this._userInspectValue||(this._userInspectValue=this.userConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userInspectValue}get userValue(){return this.userInspectValue.merged}get user(){return this.toInspectValue(this.userInspectValue)}get userLocalInspectValue(){return this._userLocalInspectValue||(this._userLocalInspectValue=this.localUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userLocalInspectValue}get userLocalValue(){return this.userLocalInspectValue.merged}get userLocal(){return this.toInspectValue(this.userLocalInspectValue)}get userRemoteInspectValue(){return this._userRemoteInspectValue||(this._userRemoteInspectValue=this.remoteUserConfiguration.inspect(this.key,this.overrides.overrideIdentifier)),this._userRemoteInspectValue}get userRemoteValue(){return this.userRemoteInspectValue.merged}get userRemote(){return this.toInspectValue(this.userRemoteInspectValue)}get workspaceInspectValue(){return this._workspaceInspectValue===void 0&&(this._workspaceInspectValue=this.workspaceConfiguration?this.workspaceConfiguration.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceInspectValue}get workspaceValue(){var e;return(e=this.workspaceInspectValue)==null?void 0:e.merged}get workspace(){return this.toInspectValue(this.workspaceInspectValue)}get workspaceFolderInspectValue(){return this._workspaceFolderInspectValue===void 0&&(this._workspaceFolderInspectValue=this.folderConfigurationModel?this.folderConfigurationModel.inspect(this.key,this.overrides.overrideIdentifier):null),this._workspaceFolderInspectValue}get workspaceFolderValue(){var e;return(e=this.workspaceFolderInspectValue)==null?void 0:e.merged}get workspaceFolder(){return this.toInspectValue(this.workspaceFolderInspectValue)}get memoryInspectValue(){return this._memoryInspectValue===void 0&&(this._memoryInspectValue=this.memoryConfigurationModel.inspect(this.key,this.overrides.overrideIdentifier)),this._memoryInspectValue}get memoryValue(){return this.memoryInspectValue.merged}get memory(){return this.toInspectValue(this.memoryInspectValue)}}let G1=class xS{constructor(e,t,i,n,s=new ri,o=new ri,a=new mt,c=new ri,l=new mt){this._defaultConfiguration=e,this._policyConfiguration=t,this._applicationConfiguration=i,this._localUserConfiguration=n,this._remoteUserConfiguration=s,this._workspaceConfiguration=o,this._folderConfigurations=a,this._memoryConfiguration=c,this._memoryConfigurationByResource=l,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations=new mt,this._userConfiguration=null}getValue(e,t,i){return this.getConsolidatedConfigurationModel(e,t,i).getValue(e)}updateValue(e,t,i={}){let n;i.resource?(n=this._memoryConfigurationByResource.get(i.resource),n||(n=new ri,this._memoryConfigurationByResource.set(i.resource,n))):n=this._memoryConfiguration,t===void 0?n.removeValue(e):n.setValue(e,t),i.resource||(this._workspaceConsolidatedConfiguration=null)}inspect(e,t,i){const n=this.getConsolidatedConfigurationModel(e,t,i),s=this.getFolderConfigurationModelForResource(t.resource,i),o=t.resource?this._memoryConfigurationByResource.get(t.resource)||this._memoryConfiguration:this._memoryConfiguration,a=new Set;for(const c of n.overrides)for(const l of c.identifiers)n.getOverrideValue(e,l)!==void 0&&a.add(l);return new m9(e,t,n.getValue(e),a.size?[...a]:void 0,this._defaultConfiguration,this._policyConfiguration.isEmpty()?void 0:this._policyConfiguration,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,i?this._workspaceConfiguration:void 0,s||void 0,o)}keys(e){const t=this.getFolderConfigurationModelForResource(void 0,e);return{default:this._defaultConfiguration.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this._workspaceConfiguration.keys.slice(0),workspaceFolder:t?t.keys.slice(0):[]}}updateDefaultConfiguration(e){this._defaultConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updatePolicyConfiguration(e){this._policyConfiguration=e}updateApplicationConfiguration(e){this._applicationConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateLocalUserConfiguration(e){this._localUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateRemoteUserConfiguration(e){this._remoteUserConfiguration=e,this._userConfiguration=null,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateWorkspaceConfiguration(e){this._workspaceConfiguration=e,this._workspaceConsolidatedConfiguration=null,this._foldersConsolidatedConfigurations.clear()}updateFolderConfiguration(e,t){this._folderConfigurations.set(e,t),this._foldersConsolidatedConfigurations.delete(e)}deleteFolderConfiguration(e){this.folderConfigurations.delete(e),this._foldersConsolidatedConfigurations.delete(e)}compareAndUpdateDefaultConfiguration(e,t){const i=[];if(!t){const{added:n,updated:s,removed:o}=$r(this._defaultConfiguration,e);t=[...n,...s,...o]}for(const n of t)for(const s of Hl(n)){const o=this._defaultConfiguration.getKeysForOverrideIdentifier(s),a=e.getKeysForOverrideIdentifier(s),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!zi(this._defaultConfiguration.override(s).getValue(l),e.override(s).getValue(l)))];i.push([s,c])}return this.updateDefaultConfiguration(e),{keys:t,overrides:i}}compareAndUpdatePolicyConfiguration(e){const{added:t,updated:i,removed:n}=$r(this._policyConfiguration,e),s=[...t,...i,...n];return s.length&&this.updatePolicyConfiguration(e),{keys:s,overrides:[]}}compareAndUpdateApplicationConfiguration(e){const{added:t,updated:i,removed:n,overrides:s}=$r(this.applicationConfiguration,e),o=[...t,...i,...n];return o.length&&this.updateApplicationConfiguration(e),{keys:o,overrides:s}}compareAndUpdateLocalUserConfiguration(e){const{added:t,updated:i,removed:n,overrides:s}=$r(this.localUserConfiguration,e),o=[...t,...i,...n];return o.length&&this.updateLocalUserConfiguration(e),{keys:o,overrides:s}}compareAndUpdateRemoteUserConfiguration(e){const{added:t,updated:i,removed:n,overrides:s}=$r(this.remoteUserConfiguration,e),o=[...t,...i,...n];return o.length&&this.updateRemoteUserConfiguration(e),{keys:o,overrides:s}}compareAndUpdateWorkspaceConfiguration(e){const{added:t,updated:i,removed:n,overrides:s}=$r(this.workspaceConfiguration,e),o=[...t,...i,...n];return o.length&&this.updateWorkspaceConfiguration(e),{keys:o,overrides:s}}compareAndUpdateFolderConfiguration(e,t){const i=this.folderConfigurations.get(e),{added:n,updated:s,removed:o,overrides:a}=$r(i,t),c=[...n,...s,...o];return(c.length||!i)&&this.updateFolderConfiguration(e,t),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(e){const t=this.folderConfigurations.get(e);if(!t)throw new Error("Unknown folder");this.deleteFolderConfiguration(e);const{added:i,updated:n,removed:s,overrides:o}=$r(t,void 0);return{keys:[...i,...n,...s],overrides:o}}get defaults(){return this._defaultConfiguration}get applicationConfiguration(){return this._applicationConfiguration}get userConfiguration(){return this._userConfiguration||(this._userConfiguration=this._remoteUserConfiguration.isEmpty()?this._localUserConfiguration:this._localUserConfiguration.merge(this._remoteUserConfiguration)),this._userConfiguration}get localUserConfiguration(){return this._localUserConfiguration}get remoteUserConfiguration(){return this._remoteUserConfiguration}get workspaceConfiguration(){return this._workspaceConfiguration}get folderConfigurations(){return this._folderConfigurations}getConsolidatedConfigurationModel(e,t,i){let n=this.getConsolidatedConfigurationModelForResource(t,i);return t.overrideIdentifier&&(n=n.override(t.overrideIdentifier)),!this._policyConfiguration.isEmpty()&&this._policyConfiguration.getValue(e)!==void 0&&(n=n.merge(this._policyConfiguration)),n}getConsolidatedConfigurationModelForResource({resource:e},t){let i=this.getWorkspaceConsolidatedConfiguration();if(t&&e){const n=t.getFolder(e);n&&(i=this.getFolderConsolidatedConfiguration(n.uri)||i);const s=this._memoryConfigurationByResource.get(e);s&&(i=i.merge(s))}return i}getWorkspaceConsolidatedConfiguration(){return this._workspaceConsolidatedConfiguration||(this._workspaceConsolidatedConfiguration=this._defaultConfiguration.merge(this.applicationConfiguration,this.userConfiguration,this._workspaceConfiguration,this._memoryConfiguration)),this._workspaceConsolidatedConfiguration}getFolderConsolidatedConfiguration(e){let t=this._foldersConsolidatedConfigurations.get(e);if(!t){const i=this.getWorkspaceConsolidatedConfiguration(),n=this._folderConfigurations.get(e);n?(t=i.merge(n),this._foldersConsolidatedConfigurations.set(e,t)):t=i}return t}getFolderConfigurationModelForResource(e,t){if(t&&e){const i=t.getFolder(e);if(i)return this._folderConfigurations.get(i.uri)}}toData(){return{defaults:{contents:this._defaultConfiguration.contents,overrides:this._defaultConfiguration.overrides,keys:this._defaultConfiguration.keys},policy:{contents:this._policyConfiguration.contents,overrides:this._policyConfiguration.overrides,keys:this._policyConfiguration.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys},user:{contents:this.userConfiguration.contents,overrides:this.userConfiguration.overrides,keys:this.userConfiguration.keys},workspace:{contents:this._workspaceConfiguration.contents,overrides:this._workspaceConfiguration.overrides,keys:this._workspaceConfiguration.keys},folders:[...this._folderConfigurations.keys()].reduce((e,t)=>{const{contents:i,overrides:n,keys:s}=this._folderConfigurations.get(t);return e.push([t,{contents:i,overrides:n,keys:s}]),e},[])}}allKeys(){const e=new Set;return this._defaultConfiguration.keys.forEach(t=>e.add(t)),this.userConfiguration.keys.forEach(t=>e.add(t)),this._workspaceConfiguration.keys.forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.keys.forEach(i=>e.add(i))),[...e.values()]}allOverrideIdentifiers(){const e=new Set;return this._defaultConfiguration.getAllOverrideIdentifiers().forEach(t=>e.add(t)),this.userConfiguration.getAllOverrideIdentifiers().forEach(t=>e.add(t)),this._workspaceConfiguration.getAllOverrideIdentifiers().forEach(t=>e.add(t)),this._folderConfigurations.forEach(t=>t.getAllOverrideIdentifiers().forEach(i=>e.add(i))),[...e.values()]}getAllKeysForOverrideIdentifier(e){const t=new Set;return this._defaultConfiguration.getKeysForOverrideIdentifier(e).forEach(i=>t.add(i)),this.userConfiguration.getKeysForOverrideIdentifier(e).forEach(i=>t.add(i)),this._workspaceConfiguration.getKeysForOverrideIdentifier(e).forEach(i=>t.add(i)),this._folderConfigurations.forEach(i=>i.getKeysForOverrideIdentifier(e).forEach(n=>t.add(n))),[...t.values()]}static parse(e){const t=this.parseConfigurationModel(e.defaults),i=this.parseConfigurationModel(e.policy),n=this.parseConfigurationModel(e.application),s=this.parseConfigurationModel(e.user),o=this.parseConfigurationModel(e.workspace),a=e.folders.reduce((c,l)=>(c.set(y.revive(l[0]),this.parseConfigurationModel(l[1])),c),new mt);return new xS(t,i,n,s,new ri,o,a,new ri,new mt)}static parseConfigurationModel(e){return new ri(e.contents,e.keys,e.overrides)}};class v9{constructor(e,t,i,n){this.change=e,this.previous=t,this.currentConfiguraiton=i,this.currentWorkspace=n,this._marker=`
`,this._markerCode1=this._marker.charCodeAt(0),this._markerCode2=".".charCodeAt(0),this.affectedKeys=new Set,this._previousConfiguration=void 0;for(const s of e.keys)this.affectedKeys.add(s);for(const[,s]of e.overrides)for(const o of s)this.affectedKeys.add(o);this._affectsConfigStr=this._marker;for(const s of this.affectedKeys)this._affectsConfigStr+=s+this._marker}get previousConfiguration(){return!this._previousConfiguration&&this.previous&&(this._previousConfiguration=G1.parse(this.previous.data)),this._previousConfiguration}affectsConfiguration(e,t){var a;const i=this._marker+e,n=this._affectsConfigStr.indexOf(i);if(n<0)return!1;const s=n+i.length;if(s>=this._affectsConfigStr.length)return!1;const o=this._affectsConfigStr.charCodeAt(s);if(o!==this._markerCode1&&o!==this._markerCode2)return!1;if(t){const c=this.previousConfiguration?this.previousConfiguration.getValue(e,t,(a=this.previous)==null?void 0:a.workspace):void 0,l=this.currentConfiguraiton.getValue(e,t,this.currentWorkspace);return!zi(c,l)}return!0}}function $r(r,e){const{added:t,removed:i,updated:n}=zx(e==null?void 0:e.rawConfiguration,r==null?void 0:r.rawConfiguration),s=[],o=(r==null?void 0:r.getAllOverrideIdentifiers())||[],a=(e==null?void 0:e.getAllOverrideIdentifiers())||[];if(e){const c=a.filter(l=>!o.includes(l));for(const l of c)s.push([l,e.getKeysForOverrideIdentifier(l)])}if(r){const c=o.filter(l=>!a.includes(l));for(const l of c)s.push([l,r.getKeysForOverrideIdentifier(l)])}if(e&&r){for(const c of o)if(a.includes(c)){const l=zx({contents:r.getOverrideValue(void 0,c)||{},keys:r.getKeysForOverrideIdentifier(c)},{contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)});s.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:t,removed:i,updated:n,overrides:s}}function zx(r,e){const t=r?e?r.keys.filter(s=>e.keys.indexOf(s)===-1):[...r.keys]:[],i=e?r?e.keys.filter(s=>r.keys.indexOf(s)===-1):[...e.keys]:[],n=[];if(r&&e){for(const s of e.keys)if(r.keys.indexOf(s)!==-1){const o=xf(e.contents,s),a=xf(r.contents,s);zi(o,a)||n.push(s)}}return{added:t,removed:i,updated:n}}function Wl(r,e){if(e){const t=e.split(".");let i=r;for(let n=0;i&&n<t.length;n++)i=i[t[n]];return i}}function _9(r){return r instanceof y}function w9(r){return r&&r.uri instanceof y&&r.languageId&&typeof r.languageId=="string"}function b9(r){return r&&!r.uri&&r.languageId&&typeof r.languageId=="string"}function y9(r){return r&&r.uri instanceof y&&(!r.name||typeof r.name=="string")&&(!r.index||typeof r.index=="number")}function jx(r){if(_9(r))return{resource:r};if(w9(r))return{resource:r.uri,overrideIdentifier:r.languageId};if(b9(r))return{overrideIdentifier:r.languageId};if(y9(r))return{resource:r.uri};if(r===null)return{resource:null}}let Q1=class{constructor(e,t,i){this._proxy=e.getProxy(G.MainThreadConfiguration),this._extHostWorkspace=t,this._logService=i,this._barrier=new Bi,this._actual=null}getConfigProvider(){return this._barrier.wait().then(e=>this._actual)}$initializeConfiguration(e){this._actual=new x9(this._proxy,this._extHostWorkspace,e,this._logService),this._barrier.open()}$acceptConfigurationChanged(e,t){this.getConfigProvider().then(i=>i.$acceptConfigurationChanged(e,t))}};Q1=H([$(0,We),$(1,$n),$(2,Je)],Q1);class x9{constructor(e,t,i,n){this._onDidChangeConfiguration=new A,this._proxy=e,this._logService=n,this._extHostWorkspace=t,this._configuration=G1.parse(i),this._configurationScopes=this._toMap(i.configurationScopes)}get onDidChangeConfiguration(){return this._onDidChangeConfiguration&&this._onDidChangeConfiguration.event}$acceptConfigurationChanged(e,t){const i={data:this._configuration.toData(),workspace:this._extHostWorkspace.workspace};this._configuration=G1.parse(e),this._configurationScopes=this._toMap(e.configurationScopes),this._onDidChangeConfiguration.fire(this._toConfigurationChangeEvent(t,i))}getConfiguration(e,t,i){const n=jx(t)||{},s=this._toReadonlyValue(e?Wl(this._configuration.getValue(void 0,n,this._extHostWorkspace.workspace),e):this._configuration.getValue(void 0,n,this._extHostWorkspace.workspace));e&&this._validateConfigurationAccess(e,n,i==null?void 0:i.identifier);function o(c){if(c==null)return null;if(typeof c=="boolean")return c?2:5;switch(c){case na.Global:return 2;case na.Workspace:return 5;case na.WorkspaceFolder:return 6}}const a={has(c){return typeof Wl(s,c)<"u"},get:(c,l)=>{this._validateConfigurationAccess(e?`${e}.${c}`:c,n,i==null?void 0:i.identifier);let u=Wl(s,c);if(typeof u>"u")u=l;else{let d;const h=(g,b)=>{if(Ft(g)){let _;const v=()=>{d=d||rt(s),_=_||Wl(d,b)};return new Proxy(g,{get:(E,k)=>{if(typeof k=="string"&&k.toLowerCase()==="tojson")return v(),()=>_;if(d)return _=_||Wl(d,b),_[k];const S=E[k];return typeof k=="string"?h(S,`${b}.${k}`):S},set:(E,k,S)=>(v(),_&&(_[k]=S),!0),deleteProperty:(E,k)=>(v(),_&&delete _[k],!0),defineProperty:(E,k,S)=>(v(),_&&Object.defineProperty(_,k,S),!0)})}return Array.isArray(g)?rt(g):g};u=h(u,c)}return u},update:(c,l,u,d)=>{c=e?`${e}.${c}`:c;const h=o(u);return l!==void 0?this._proxy.$updateConfigurationOption(h,c,l,n,d):this._proxy.$removeConfigurationOption(h,c,n,d)},inspect:c=>{var u,d,h,g,b,_,v,E,k,S,O;c=e?`${e}.${c}`:c;const l=this._configuration.inspect(c,n,this._extHostWorkspace.workspace);if(l)return{key:c,defaultValue:rt(((u=l.policy)==null?void 0:u.value)??((d=l.default)==null?void 0:d.value)),globalValue:rt(((h=l.user)==null?void 0:h.value)??((g=l.application)==null?void 0:g.value)),workspaceValue:rt((b=l.workspace)==null?void 0:b.value),workspaceFolderValue:rt((_=l.workspaceFolder)==null?void 0:_.value),defaultLanguageValue:rt((v=l.default)==null?void 0:v.override),globalLanguageValue:rt(((E=l.user)==null?void 0:E.override)??((k=l.application)==null?void 0:k.override)),workspaceLanguageValue:rt((S=l.workspace)==null?void 0:S.override),workspaceFolderLanguageValue:rt((O=l.workspaceFolder)==null?void 0:O.override),languageIds:rt(l.overrideIdentifiers)}}};return typeof s=="object"&&fs(a,s,!1),Object.freeze(a)}_toReadonlyValue(e){const t=i=>Ft(i)?new Proxy(i,{get:(n,s)=>t(n[s]),set:(n,s,o)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(n,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(n,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:n=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):i;return t(e)}_validateConfigurationAccess(e,t,i){const n=fn.test(e)?4:this._configurationScopes.get(e),s=i?`[${i.value}] `:"";if(n===4){typeof(t==null?void 0:t.resource)>"u"&&this._logService.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(n===3){t!=null&&t.resource&&this._logService.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}_toConfigurationChangeEvent(e,t){const i=new v9(e,t,this._configuration,this._extHostWorkspace.workspace);return Object.freeze({affectsConfiguration:(n,s)=>i.affectsConfiguration(n,jx(s))})}_toMap(e){return e.reduce((t,i)=>(t.set(i[0],i[1]),t),new Map)}}const Nn=ie("IExtHostConfiguration");class C9{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}}class Us{static isHostExtension(e,t,i){if(t.getExtensionDescription(e))return!1;const n=i.getExtensionDescription(e);return n?!!((n.main||n.browser)&&n.api==="none"):!1}constructor(e,t){this._activationEventsReader=e,this._onDidChange=new A,this.onDidChange=this._onDidChange.event,this._versionId=0,this._extensionDescriptions=t,this._initialize()}_initialize(){this._extensionDescriptions.sort(E9),this._extensionsMap=new br,this._extensionsArr=[],this._activationMap=new Map;for(const e of this._extensionDescriptions){if(this._extensionsMap.has(e.identifier)){console.error("Extension `"+e.identifier.value+"` is already registered");continue}this._extensionsMap.set(e.identifier,e),this._extensionsArr.push(e);const t=this._activationEventsReader.readActivationEvents(e);for(const i of t)this._activationMap.has(i)||this._activationMap.set(i,[]),this._activationMap.get(i).push(e)}}set(e){return this._extensionDescriptions=e,this._initialize(),this._versionId++,this._onDidChange.fire(void 0),{versionId:this._versionId}}deltaExtensions(e,t){this._extensionDescriptions=qx(this._extensionDescriptions,t),this._extensionDescriptions=this._extensionDescriptions.concat(e);const i=Us._findLoopingExtensions(this._extensionDescriptions);return this._extensionDescriptions=qx(this._extensionDescriptions,i.map(n=>n.identifier)),this._initialize(),this._versionId++,this._onDidChange.fire(void 0),new C9(this._versionId,i)}static _findLoopingExtensions(e){const t=new class{constructor(){this._arcs=new Map,this._nodesSet=new Set,this._nodesArr=[]}addNode(a){this._nodesSet.has(a)||(this._nodesSet.add(a),this._nodesArr.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this._arcs.has(a)?this._arcs.get(a).push(c):this._arcs.set(a,[c])}getArcs(a){return this._arcs.has(a)?this._arcs.get(a):[]}hasOnlyGoodArcs(a,c){const l=t.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this._nodesArr}},i=new br;for(const a of e)if(i.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)t.addArc(Xe.toKey(a.identifier),Xe.toKey(c));const n=new Set;t.getNodes().filter(a=>t.getArcs(a).length===0).forEach(a=>n.add(a));const s=t.getNodes().filter(a=>!n.has(a));let o;do{o=!1;for(let a=0;a<s.length;a++){const c=s[a];t.hasOnlyGoodArcs(c,n)&&(s.splice(a,1),a--,n.add(c),o=!0)}}while(o);return s.map(a=>i.get(a))}containsActivationEvent(e){return this._activationMap.has(e)}containsExtension(e){return this._extensionsMap.has(e)}getExtensionDescriptionsForActivationEvent(e){const t=this._activationMap.get(e);return t?t.slice(0):[]}getAllExtensionDescriptions(){return this._extensionsArr.slice(0)}getSnapshot(){return new S9(this._versionId,this.getAllExtensionDescriptions())}getExtensionDescription(e){const t=this._extensionsMap.get(e);return t||void 0}getExtensionDescriptionByUUID(e){for(const t of this._extensionsArr)if(t.uuid===e)return t}getExtensionDescriptionByIdOrUUID(e,t){return this.getExtensionDescription(e)??(t?this.getExtensionDescriptionByUUID(t):void 0)}}class S9{constructor(e,t){this.versionId=e,this.extensions=t}}function E9(r,e){const t=r.isBuiltin?0:r.isUnderDevelopment?2:1,i=e.isBuiltin?0:e.isUnderDevelopment?2:1;if(t!==i)return t-i;const n=Fe.basename(r.extensionLocation.path),s=Fe.basename(e.extensionLocation.path);return n<s?-1:n>s?1:0}function qx(r,e){const t=new _s(e);return r.filter(i=>!t.has(i.identifier))}const Sp=class Sp{constructor(e,t,i,n){this.startup=e,this.codeLoadingTime=t,this.activateCallTime=i,this.activateResolvedTime=n}};Sp.NONE=new Sp(!1,-1,-1,-1);let Ia=Sp;class Gx{constructor(e){this._startup=e,this._codeLoadingStart=-1,this._codeLoadingStop=-1,this._activateCallStart=-1,this._activateCallStop=-1,this._activateResolveStart=-1,this._activateResolveStop=-1}_delta(e,t){return e===-1||t===-1?-1:t-e}build(){return new Ia(this._startup,this._delta(this._codeLoadingStart,this._codeLoadingStop),this._delta(this._activateCallStart,this._activateCallStop),this._delta(this._activateResolveStart,this._activateResolveStop))}codeLoadingStart(){this._codeLoadingStart=Date.now()}codeLoadingStop(){this._codeLoadingStop=Date.now()}activateCallStart(){this._activateCallStart=Date.now()}activateCallStop(){this._activateCallStop=Date.now()}activateResolveStart(){this._activateResolveStart=Date.now()}activateResolveStop(){this._activateResolveStop=Date.now()}}class Df{constructor(e,t,i,n,s,o){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=i,this.module=n,this.exports=s,this.subscriptions=o}}class k9 extends Df{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,[])}}class D9 extends Df{constructor(){super(!1,null,Ia.NONE,{activate:void 0,deactivate:void 0},void 0,[])}}class If extends Df{constructor(e){super(!0,e,Ia.NONE,{activate:void 0,deactivate:void 0},void 0,[])}}let J1=class{constructor(e,t,i,n){this._logService=n,this._registry=e,this._globalRegistry=t,this._host=i,this._operations=new br,this._alreadyActivatedEvents=Object.create(null)}dispose(){for(const[e,t]of this._operations)t.dispose()}async waitForActivatingExtensions(){const e=[];for(const[t,i]of this._operations)e.push(i.wait());await Promise.all(e)}isActivated(e){const t=this._operations.get(e);return!!(t&&t.value)}getActivatedExtension(e){const t=this._operations.get(e);if(!t||!t.value)throw new Error(`Extension '${e.value}' is not known or not activated`);return t.value}async activateByEvent(e,t){if(this._alreadyActivatedEvents[e])return;const i=this._registry.getExtensionDescriptionsForActivationEvent(e);await this._activateExtensions(i.map(n=>({id:n.identifier,reason:{startup:t,extensionId:n.identifier,activationEvent:e}}))),this._alreadyActivatedEvents[e]=!0}activateById(e,t){const i=this._registry.getExtensionDescription(e);if(!i)throw new Error(`Extension '${e.value}' is not known`);return this._activateExtensions([{id:i.identifier,reason:t}])}async _activateExtensions(e){const t=e.filter(i=>!this.isActivated(i.id)).map(i=>this._handleActivationRequest(i));await Promise.all(t.map(i=>i.wait()))}_handleActivationRequest(e){if(this._operations.has(e.id))return this._operations.get(e.id);if(this._isHostExtension(e.id))return this._createAndSaveOperation(e,null,[],null);const t=this._registry.getExtensionDescription(e.id);if(!t){const s=new Error(`Cannot activate unknown extension '${e.id.value}'`),o=this._createAndSaveOperation(e,null,[],new If(s));return this._host.onExtensionActivationError(e.id,s,new ax(e.id.value)),o}const i=[],n=typeof t.extensionDependencies>"u"?[]:t.extensionDependencies;for(const s of n){if(this._isResolvedExtension(s))continue;const o=this._operations.get(s);if(o){i.push(o);continue}if(this._isHostExtension(s)){i.push(this._handleActivationRequest({id:this._globalRegistry.getExtensionDescription(s).identifier,reason:e.reason}));continue}const a=this._registry.getExtensionDescription(s);if(a){if(!a.main&&!a.browser)continue;i.push(this._handleActivationRequest({id:a.identifier,reason:e.reason}));continue}const c=t.displayName||t.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${s}'`),u=this._createAndSaveOperation(e,t.displayName,[],new If(l));return this._host.onExtensionActivationError(t.identifier,l,new ax(s)),u}return this._createAndSaveOperation(e,t.displayName,i,null)}_createAndSaveOperation(e,t,i,n){const s=new K1(e.id,t,e.reason,i,n,this._host,this._logService);return this._operations.set(e.id,s),s}_isHostExtension(e){return Us.isHostExtension(e,this._registry,this._globalRegistry)}_isResolvedExtension(e){const t=this._globalRegistry.getExtensionDescription(e);return t?!t.main&&!t.browser:!1}};J1=H([$(3,Je)],J1);let K1=class{get value(){return this._value}get friendlyName(){return this._displayName||this._id.value}constructor(e,t,i,n,s,o,a){this._id=e,this._displayName=t,this._reason=i,this._deps=n,this._value=s,this._host=o,this._logService=a,this._barrier=new Bi,this._isDisposed=!1,this._initialize()}dispose(){this._isDisposed=!0}wait(){return this._barrier.wait()}async _initialize(){await this._waitForDepsThenActivate(),this._barrier.open()}async _waitForDepsThenActivate(){if(!this._value){for(;this._deps.length>0;){for(let e=0;e<this._deps.length;e++){const t=this._deps[e];if(t.value&&!t.value.activationFailed){this._deps.splice(e,1),e--;continue}if(t.value&&t.value.activationFailed){const i=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${t.friendlyName}' failed to activate`);i.detail=t.value.activationFailedError,this._value=new If(i),this._host.onExtensionActivationError(this._id,i,null);return}}this._deps.length>0&&await Promise.race(this._deps.map(e=>e.wait()))}await this._activate()}}async _activate(){try{this._value=await this._host.actualActivateExtension(this._id,this._reason)}catch(e){const t=new Error;if(e&&e.name&&(t.name=e.name),e&&e.message?t.message=`Activating extension '${this._id.value}' failed: ${e.message}.`:t.message=`Activating extension '${this._id.value}' failed: ${e}.`,e&&e.stack&&(t.stack=e.stack),this._value=new If(t),this._isDisposed&&Yr(e))return;this._host.onExtensionActivationError(this._id,t,null),this._logService.error(`Activating extension ${this._id.value} failed due to an error:`),this._logService.error(e)}}};K1=H([$(6,Je)],K1);class Qx{constructor(e,t){this._logService=t,this._onDidChangeStorage=new A,this.onDidChangeStorage=this._onDidChangeStorage.event,this._proxy=e.getProxy(G.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this._proxy.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,i){const n=await this._proxy.$initializeExtensionStorage(e,t);let s;return n&&(s=this.safeParseValue(e,t,n)),s||i}setValue(e,t,i){return this._proxy.$setValue(e,t,i)}$acceptValue(e,t,i){const n=this.safeParseValue(e,t,i);n&&this._onDidChangeStorage.fire({shared:e,key:t,value:n})}safeParseValue(e,t,i){try{return JSON.parse(i)}catch(n){this._logService.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${n}`)}}}const X1=ie("IExtHostStorage");class Jx{constructor(e,t,i){this._deferredPromises=new Map,this._id=e,this._shared=t,this._storage=i,this._init=this._storage.initializeExtensionStorage(this._shared,this._id,Object.create(null)).then(n=>(this._value=n,this)),this._storageListener=this._storage.onDidChangeStorage(n=>{n.shared===this._shared&&n.key===this._id&&(this._value=n.value)}),this._scheduler=new Ac(()=>{const n=this._deferredPromises;this._deferredPromises=new Map,(async()=>{try{await this._storage.setValue(this._shared,this._id,this._value);for(const s of n.values())s.complete()}catch(s){for(const o of n.values())o.error(s)}})()},0)}keys(){return Object.entries(this._value??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this._init}get(e,t){let i=this._value[e];return typeof i>"u"&&(i=t),i}update(e,t){this._value[e]=t;const i=this._deferredPromises.get(e);if(i!==void 0)return i.p;const n=new Oo;return this._deferredPromises.set(e,n),this._scheduler.isScheduled()||this._scheduler.schedule(),n.p}dispose(){this._storageListener.dispose()}}class I9 extends Jx{setKeysForSync(e){this._storage.registerExtensionStorageKeysToSync({id:this._id,version:this._extension.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this._extension=e}}var pn;let Y1=pn=class{constructor(e,t){this._fileSystemProvider=new Map,this._writeQueue=new SE,this._proxy=e.getProxy(G.MainThreadFileSystem);const i=this;this.value=Object.freeze({async stat(n){try{let s;const o=i._fileSystemProvider.get(n.scheme);return o?(await i._proxy.$ensureActivation(n.scheme),s=await o.impl.stat(n)):s=await i._proxy.$stat(n),{type:s.type,ctime:s.ctime,mtime:s.mtime,size:s.size,permissions:s.permissions===zo.Readonly?1:void 0}}catch(s){pn._handleError(s)}},async readDirectory(n){try{const s=i._fileSystemProvider.get(n.scheme);return s?(await i._proxy.$ensureActivation(n.scheme),(await s.impl.readDirectory(n)).slice()):await i._proxy.$readdir(n)}catch(s){return pn._handleError(s)}},async createDirectory(n){try{const s=i._fileSystemProvider.get(n.scheme);return s&&!s.isReadonly?(await i._proxy.$ensureActivation(n.scheme),await i.mkdirp(s.impl,s.extUri,n)):await i._proxy.$mkdir(n)}catch(s){return pn._handleError(s)}},async readFile(n){try{const s=i._fileSystemProvider.get(n.scheme);return s?(await i._proxy.$ensureActivation(n.scheme),(await s.impl.readFile(n)).slice()):(await i._proxy.$readFile(n)).buffer}catch(s){return pn._handleError(s)}},async writeFile(n,s){try{const o=i._fileSystemProvider.get(n.scheme);return o&&!o.isReadonly?(await i._proxy.$ensureActivation(n.scheme),await i.mkdirp(o.impl,o.extUri,o.extUri.dirname(n)),await i._writeQueue.queueFor(n,()=>Promise.resolve(o.impl.writeFile(n,s,{create:!0,overwrite:!0})))):await i._proxy.$writeFile(n,ve.wrap(s))}catch(o){return pn._handleError(o)}},async delete(n,s){try{const o=i._fileSystemProvider.get(n.scheme);return o&&!o.isReadonly&&!(s!=null&&s.useTrash)?(await i._proxy.$ensureActivation(n.scheme),await o.impl.delete(n,{recursive:!1,...s})):await i._proxy.$delete(n,{recursive:!1,useTrash:!1,atomic:!1,...s})}catch(o){return pn._handleError(o)}},async rename(n,s,o){try{return await i._proxy.$rename(n,s,{overwrite:!1,...o})}catch(a){return pn._handleError(a)}},async copy(n,s,o){try{return await i._proxy.$copy(n,s,{overwrite:!1,...o})}catch(a){return pn._handleError(a)}},isWritableFileSystem(n){const s=t.getCapabilities(n);if(typeof s=="number")return!(s&2048)}})}async mkdirp(e,t,i){const n=[];for(;!t.isEqual(i,t.dirname(i));)try{if(!((await e.stat(i)).type&vs.Directory))throw bt.FileExists(`Unable to create folder '${i.scheme===Y.file?i.fsPath:i.toString(!0)}' that already exists but is not a directory`);break}catch(s){if(tm(s)!==Se.FileNotFound)throw s;n.push(t.basename(i)),i=t.dirname(i)}for(let s=n.length-1;s>=0;s--){i=t.joinPath(i,n[s]);try{await e.createDirectory(i)}catch(o){if(tm(o)!==Se.FileExists)throw o}}}static _handleError(e){if(e instanceof bt)throw e;if(e instanceof zd)switch(e.code){case Se.FileExists:throw bt.FileExists(e.message);case Se.FileNotFound:throw bt.FileNotFound(e.message);case Se.FileNotADirectory:throw bt.FileNotADirectory(e.message);case Se.FileIsADirectory:throw bt.FileIsADirectory(e.message);case Se.NoPermissions:throw bt.NoPermissions(e.message);case Se.Unavailable:throw bt.Unavailable(e.message);default:throw new bt(e.message,e.name)}if(!(e instanceof Error))throw new bt(String(e));if(e.name==="ENOPRO"||e.message.includes("ENOPRO"))throw bt.Unavailable(e.message);switch(e.name){case Se.FileExists:throw bt.FileExists(e.message);case Se.FileNotFound:throw bt.FileNotFound(e.message);case Se.FileNotADirectory:throw bt.FileNotADirectory(e.message);case Se.FileIsADirectory:throw bt.FileIsADirectory(e.message);case Se.NoPermissions:throw bt.NoPermissions(e.message);case Se.Unavailable:throw bt.Unavailable(e.message);default:throw new bt(e.message,e.name)}}addFileSystemProvider(e,t,i){return this._fileSystemProvider.set(e,{impl:t,extUri:i!=null&&i.isCaseSensitive?He:mE,isReadonly:!!(i!=null&&i.isReadonly)}),Ce(()=>this._fileSystemProvider.delete(e))}getFileSystemProviderExtUri(e){var t;return((t=this._fileSystemProvider.get(e))==null?void 0:t.extUri)??He}};Y1=pn=H([$(0,We),$(1,Fo)],Y1);const Pf=ie("IExtHostConsumerFileSystem"),Z1=ie("IExtensionStoragePaths");let ev=class{constructor(e,t,i){this._logService=t,this._extHostFileSystem=i,this._workspace=e.workspace??void 0,this._environment=e.environment,this.whenReady=this._getOrCreateWorkspaceStoragePath().then(n=>this._value=n)}async _getWorkspaceStorageURI(e){return y.joinPath(this._environment.workspaceStorageHome,e)}async _getOrCreateWorkspaceStoragePath(){var i;if(!this._workspace)return Promise.resolve(void 0);const e=this._workspace.id,t=await this._getWorkspaceStorageURI(e);try{return await this._extHostFileSystem.value.stat(t),this._logService.trace("[ExtHostStorage] storage dir already exists",t),t}catch{}try{return this._logService.trace("[ExtHostStorage] creating dir and metadata-file",t),await this._extHostFileSystem.value.createDirectory(t),await this._extHostFileSystem.value.writeFile(y.joinPath(t,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this._workspace.id,configuration:(i=y.revive(this._workspace.configuration))==null?void 0:i.toString(),name:this._workspace.name},void 0,2))),t}catch(n){this._logService.error("[ExtHostStorage]",n);return}}workspaceValue(e){if(this._value)return y.joinPath(this._value,e.identifier.value)}globalValue(e){return y.joinPath(this._environment.globalStorageHome,e.identifier.value.toLowerCase())}onWillDeactivateAll(){}};ev=H([$(0,Wt),$(1,Je),$(2,Pf)],ev),ie("tunnelService");var Kx;(function(r){r.Http="http",r.Https="https"})(Kx||(Kx={}));var Ws;(function(r){r.ConstantPrivate="constantPrivate",r.Private="private",r.Public="public"})(Ws||(Ws={}));var Xx;(function(r){r[r.Notify=1]="Notify",r[r.OpenBrowser=2]="OpenBrowser",r[r.OpenPreview=3]="OpenPreview",r[r.Silent=4]="Silent",r[r.Ignore=5]="Ignore",r[r.OpenBrowserOnce=6]="OpenBrowserOnce"})(Xx||(Xx={}));function P9(r){if(r.scheme!=="http"&&r.scheme!=="https")return;const e=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(r.authority);if(e)return{address:e[1],port:+e[2]}}const tv=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function Yx(r){return tv.indexOf(r)>=0}const iv=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function Zx(r){return iv.indexOf(r)>=0}class T9{constructor(e,t,i){this.remoteAddress=e,this.localAddress=t,this._dispose=i,this._onDispose=new A,this.onDidDispose=this._onDispose.event}dispose(){return this._onDispose.fire(),this._dispose()}}let e2=class{constructor(e,t){this.logService=e,this.configurationService=t,this._onTunnelOpened=new A,this.onTunnelOpened=this._onTunnelOpened.event,this._onTunnelClosed=new A,this.onTunnelClosed=this._onTunnelClosed.event,this._onAddedTunnelProvider=new A,this.onAddedTunnelProvider=this._onAddedTunnelProvider.event,this._tunnels=new Map,this._canElevate=!1,this._canChangeProtocol=!0,this._privacyOptions=[],this._factoryInProgress=new Set}get hasTunnelProvider(){return!!this._tunnelProvider}get defaultTunnelHost(){const e=this.configurationService.getValue("remote.localPortHost");return!e||e==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(e){return this._tunnelProvider=e,e?(this._onAddedTunnelProvider.fire(),{dispose:()=>{this._tunnelProvider=void 0,this._canElevate=!1,this._privacyOptions=[]}}):(this._canElevate=!1,this._privacyOptions=[],this._onAddedTunnelProvider.fire(),{dispose:()=>{}})}setTunnelFeatures(e){this._canElevate=e.elevation,this._privacyOptions=e.privacyOptions,this._canChangeProtocol=e.protocol}get canChangeProtocol(){return this._canChangeProtocol}get canElevate(){return this._canElevate}get canChangePrivacy(){return this._privacyOptions.length>0}get privacyOptions(){return this._privacyOptions}get tunnels(){return this.getTunnels()}async getTunnels(){const e=[],t=Array.from(this._tunnels.values());for(const i of t){const n=Array.from(i.values());for(const s of n){const o=await s.value;o&&typeof o!="string"&&e.push(o)}}return e}async dispose(){for(const e of this._tunnels.values()){for(const{value:t}of e.values())await t.then(i=>typeof i!="string"?i==null?void 0:i.dispose():void 0);e.clear()}this._tunnels.clear()}setEnvironmentTunnel(e,t,i,n,s){this.addTunnelToMap(e,t,Promise.resolve({tunnelRemoteHost:e,tunnelRemotePort:t,localAddress:i,privacy:n,protocol:s,dispose:()=>Promise.resolve()}))}async getExistingTunnel(e,t){(Zx(e)||Yx(e))&&(e=tv[0]);const i=this.getTunnelFromMap(e,t);if(i)return++i.refcount,i.value}openTunnel(e,t,i,n,s,o=!1,a,c){this.logService.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${t}:${i} on local port ${s}.`);const l=this._tunnelProvider??e;if(!l)return;if(t||(t="localhost"),n||(n=this.defaultTunnelHost),this._tunnelProvider&&this._factoryInProgress.has(i)){this.logService.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.retainOrCreateTunnel(l,t,i,n,s,o,a,c);return u?u.then(d=>{if(d){if(typeof d=="string")return this.logService.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.removeEmptyOrErrorTunnelFromMap(t,i),d}else{this.logService.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.removeEmptyOrErrorTunnelFromMap(t,i);return}this.logService.trace("ForwardedPorts: (TunnelService) New tunnel established.");const h=this.makeTunnel(d);return(d.tunnelRemoteHost!==t||d.tunnelRemotePort!==i)&&this.logService.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&d.privacy!==a&&this.logService.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this._onTunnelOpened.fire(h),h}):(this.logService.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}makeTunnel(e){return{tunnelRemotePort:e.tunnelRemotePort,tunnelRemoteHost:e.tunnelRemoteHost,tunnelLocalPort:e.tunnelLocalPort,localAddress:e.localAddress,privacy:e.privacy,protocol:e.protocol,dispose:async()=>{this.logService.trace(`ForwardedPorts: (TunnelService) dispose request for ${e.tunnelRemoteHost}:${e.tunnelRemotePort} `);const t=this._tunnels.get(e.tunnelRemoteHost);if(t){const i=t.get(e.tunnelRemotePort);i&&(i.refcount--,await this.tryDisposeTunnel(e.tunnelRemoteHost,e.tunnelRemotePort,i))}}}}async tryDisposeTunnel(e,t,i){if(i.refcount<=0){this.logService.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${e}:${t}.`);const n=i.value.then(async s=>{s&&typeof s!="string"&&(await s.dispose(!0),this._onTunnelClosed.fire({host:s.tunnelRemoteHost,port:s.tunnelRemotePort}))});return this._tunnels.has(e)&&this._tunnels.get(e).delete(t),n}}async closeTunnel(e,t){this.logService.trace(`ForwardedPorts: (TunnelService) close request for ${e}:${t} `);const i=this._tunnels.get(e);if(i&&i.has(t)){const n=i.get(t);n.refcount=0,await this.tryDisposeTunnel(e,t,n)}}addTunnelToMap(e,t,i){this._tunnels.has(e)||this._tunnels.set(e,new Map),this._tunnels.get(e).set(t,{refcount:1,value:i})}async removeEmptyOrErrorTunnelFromMap(e,t){const i=this._tunnels.get(e);if(i){const n=i.get(t),s=n?await n.value:void 0;(!s||typeof s=="string")&&i.delete(t),i.size===0&&this._tunnels.delete(e)}}getTunnelFromMap(e,t){const i=[e];Yx(e)?(i.push(...tv),i.push(...iv)):Zx(e)&&i.push(...iv);const n=i.map(s=>this._tunnels.get(s));for(const s of n){const o=s==null?void 0:s.get(t);if(o)return o}}canTunnel(e){return!!P9(e)}createWithProvider(e,t,i,n,s,o,a){this.logService.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${t}:${i} on local port ${n}.`);const c=i;this._factoryInProgress.add(c);const l=n===void 0?i:n,u={elevationRequired:s?this.isPortPrivileged(l):!1},d={remoteAddress:{host:t,port:i},localAddressPort:n,privacy:o,public:o?o!==Ws.Private:void 0,protocol:a},h=e.forwardPort(d,u);return h?(this.addTunnelToMap(t,i,h),h.finally(()=>{this.logService.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this._factoryInProgress.delete(c)})):this._factoryInProgress.delete(c),h}};e2=H([$(0,Je),$(1,j1)],e2);class A9 extends T9{}var nv;(function(r){function e(i){return{remoteAddress:i.remoteAddress,localAddress:i.localAddress,public:!!i.public,privacy:i.privacy??(i.public?Ws.Public:Ws.Private),protocol:i.protocol}}r.fromApiTunnel=e;function t(i){return{remoteAddress:{host:i.tunnelRemoteHost,port:i.tunnelRemotePort},localAddress:i.localAddress,public:i.privacy!==Ws.ConstantPrivate&&i.privacy!==Ws.ConstantPrivate,privacy:i.privacy,protocol:i.protocol}}r.fromServiceTunnel=t})(nv||(nv={}));const rv=ie("IExtHostTunnelService");let sv=class extends Ne{constructor(e,t,i){super(),this.logService=i,this._showCandidatePort=()=>Promise.resolve(!0),this._extensionTunnels=new Map,this._onDidChangeTunnels=new A,this.onDidChangeTunnels=this._onDidChangeTunnels.event,this._providerHandleCounter=0,this._portAttributesProviders=new Map,this._proxy=e.getProxy(G.MainThreadTunnelService)}async openTunnel(e,t){this.logService.trace(`ForwardedPorts: (ExtHostTunnelService) ${e.identifier.value} called openTunnel API for ${t.remoteAddress.host}:${t.remoteAddress.port}.`);const i=await this._proxy.$openTunnel(t,e.displayName);if(i){const n=new A9(i.remoteAddress,i.localAddress,()=>this._proxy.$closeTunnel(i.remoteAddress));return this._register(n),n}}async getTunnels(){return this._proxy.$getTunnels()}nextPortAttributesProviderHandle(){return this._providerHandleCounter++}registerPortsAttributesProvider(e,t){e.portRange===void 0&&e.commandPattern===void 0&&this.logService.error("PortAttributesProvider must specify either a portRange or a commandPattern");const i=this.nextPortAttributesProviderHandle();return this._portAttributesProviders.set(i,{selector:e,provider:t}),this._proxy.$registerPortsAttributesProvider(e,i),new Re(()=>{this._portAttributesProviders.delete(i),this._proxy.$unregisterPortsAttributesProvider(i)})}async $providePortAttributes(e,t,i,n,s){const o=[];for(const c of e){const l=this._portAttributesProviders.get(c);if(!l)return[];o.push(...await Promise.all(t.map(async u=>{let d;try{d=await l.provider.providePortAttributes({port:u,pid:i,commandLine:n},s)}catch{d=await l.provider.providePortAttributes(u,i,n,s)}return{providedAttributes:d,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(e){}registerTunnelProvider(e,t){var n,s;if(this._forwardPortProvider)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this._forwardPortProvider=async(o,a)=>await e.provideTunnel(o,a,wt.None)??void 0;const i=t.tunnelFeatures?{elevation:!!((n=t.tunnelFeatures)!=null&&n.elevation),privacyOptions:(s=t.tunnelFeatures)==null?void 0:s.privacyOptions,protocol:t.tunnelFeatures.protocol===void 0?!0:t.tunnelFeatures.protocol}:void 0;return this._proxy.$setTunnelProvider(i),Promise.resolve(Ce(()=>{this._forwardPortProvider=void 0,this._proxy.$setTunnelProvider(void 0)}))}async setTunnelFactory(e,t){var i,n,s,o;if(e){e.candidatePortSource!==void 0&&this._proxy.$setCandidatePortSource(e.candidatePortSource),e.showCandidatePort&&(this._showCandidatePort=e.showCandidatePort,this._proxy.$setCandidateFilter());const a=e.tunnelFactory??(t?this.makeManagedTunnelFactory(t):void 0);if(a){this._forwardPortProvider=a;let c=((i=e.tunnelFeatures)==null?void 0:i.privacyOptions)??[];(n=e.tunnelFeatures)!=null&&n.public&&c.length===0&&(c=[{id:"private",label:f("vs/workbench/api/common/extHostTunnelService","tunnelPrivacy.private","Private"),themeIcon:"lock"},{id:"public",label:f("vs/workbench/api/common/extHostTunnelService","tunnelPrivacy.public","Public"),themeIcon:"eye"}]);const l=e.tunnelFeatures?{elevation:!!((s=e.tunnelFeatures)!=null&&s.elevation),public:!!((o=e.tunnelFeatures)!=null&&o.public),privacyOptions:c,protocol:!0}:void 0;this._proxy.$setTunnelProvider(l)}}else this._forwardPortProvider=void 0;return Ce(()=>{this._forwardPortProvider=void 0})}makeManagedTunnelFactory(e){}async $closeTunnel(e,t){if(this._extensionTunnels.has(e.host)){const i=this._extensionTunnels.get(e.host);i.has(e.port)&&(t&&i.get(e.port).disposeListener.dispose(),await i.get(e.port).tunnel.dispose(),i.delete(e.port))}}async $onDidTunnelsChange(){this._onDidChangeTunnels.fire()}async $forwardPort(e,t){if(this._forwardPortProvider)try{this.logService.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const i=this._forwardPortProvider(e,t);if(this.logService.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),i!==void 0){const n=await i;if(this.logService.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),n===void 0){this.logService.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this._extensionTunnels.has(e.remoteAddress.host)||this._extensionTunnels.set(e.remoteAddress.host,new Map);const s=this._register(n.onDidDispose(()=>(this.logService.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this._proxy.$closeTunnel(n.remoteAddress))));return this._extensionTunnels.get(e.remoteAddress.host).set(e.remoteAddress.port,{tunnel:n,disposeListener:s}),nv.fromApiTunnel(n)}else this.logService.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(i){if(this.logService.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),i instanceof Error)return i.message}}async $applyCandidateFilter(e){const t=await Promise.all(e.map(n=>this._showCandidatePort(n.host,n.port,n.detail??""))),i=e.filter((n,s)=>t[s]);return this.logService.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${e.map(n=>n.port).join(", ")} to ${i.map(n=>n.port).join(", ")}`),i}};sv=H([$(0,We),$(1,Wt),$(2,Je)],sv);function R9(r){return[...r.entries()]}function L9(r){return r?[...r.entries()]:[]}class O9{constructor(e){this._callback=e,this._terminalBufferMap=new Map}dispose(){for(const e of this._terminalBufferMap.values())e.dispose()}startBuffering(e,t,i=5){const n=t(s=>{const o=typeof s=="string"?s:s.data;let a=this._terminalBufferMap.get(e);if(a){a.data.push(o);return}const c=setTimeout(()=>this.flushBuffer(e),i);a={data:[o],timeoutId:c,dispose:()=>{clearTimeout(c),this.flushBuffer(e),n.dispose()}},this._terminalBufferMap.set(e,a)});return n}stopBuffering(e){const t=this._terminalBufferMap.get(e);t==null||t.dispose()}flushBuffer(e){const t=this._terminalBufferMap.get(e);t&&(this._terminalBufferMap.delete(e),this._callback(e,t.data.join("")))}}const Bs=(r,e,t,i)=>{let n=e;return{enumerable:!0,configurable:!1,get(){return n},set(s){var o;if(!t(n,s)){const a=n;n=s,(o=r.listener)==null||o.call(r,i(s,a))}}}},Pa=(r,e)=>r===e,Nr={range:(r,e)=>r===e?!0:!r||!e?!1:r.isEqual(e),label:Pa,description:Pa,sortText:Pa,busy:Pa,error:Pa,canResolveChildren:Pa,tags:(r,e)=>!(r.length!==e.length||r.some(t=>!e.find(i=>t.id===i.id)))},Ta=r=>e=>({op:4,update:r(e)}),$9=(r,e)=>({range:(()=>{let t;const i=Ta(n=>({range:Qe.lift(F.from(n))}));return{enumerable:!0,configurable:!1,get(){return t},set(n){var s,o;(s=r.listener)==null||s.call(r,{op:6}),Nr.range(t,n)||(t=n,(o=r.listener)==null||o.call(r,i(n)))}}})(),label:Bs(r,e,Nr.label,Ta(t=>({label:t}))),description:Bs(r,void 0,Nr.description,Ta(t=>({description:t}))),sortText:Bs(r,void 0,Nr.sortText,Ta(t=>({sortText:t}))),canResolveChildren:Bs(r,!1,Nr.canResolveChildren,t=>({op:2,state:t})),busy:Bs(r,!1,Nr.busy,Ta(t=>({busy:t}))),error:Bs(r,void 0,Nr.error,Ta(t=>({error:Le.fromStrict(t)||null}))),tags:Bs(r,[],Nr.tags,(t,i)=>({op:1,new:t.map(Qi.from),old:i.map(Qi.from)}))}),N9=r=>{const e=be.fromString(r.extId),t=new Vs(e.controllerId,e.localId,r.label,y.revive(r.uri)||void 0);return t.range=F.to(r.range||void 0),t.description=r.description||void 0,t.sortText=r.sortText||void 0,t.tags=r.tags.map(i=>Qi.to({id:gy(i).tagId})),t},t2=r=>{let e;for(const t of r.tests){const i=N9(t.item);Vd(i).parent=e,e=i}return e};class Vs{constructor(e,t,i,n){if(t.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(t)} symbol`);const s=R5(this,e);Object.defineProperties(this,{id:{value:t,enumerable:!0,writable:!1},uri:{value:n,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return s.parent instanceof ov?void 0:s.parent}},children:{value:A5(s,Vd,Vs),enumerable:!0,writable:!1},...$9(s,i)})}}class ov extends Vs{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}}class M9 extends I5{constructor(e,t,i){super({controllerId:e,getDocumentVersion:n=>{var s;return n&&((s=i.getDocument(n))==null?void 0:s.version)},getApiFor:Vd,getChildren:n=>n.children,root:new ov(e,t),toITestItem:Rr.from})}}let av=class extends Ne{constructor(e,t){super(),this.initData=e,this.loggerService=t,this._onDidChangeTelemetryEnabled=this._register(new A),this.onDidChangeTelemetryEnabled=this._onDidChangeTelemetryEnabled.event,this._onDidChangeTelemetryConfiguration=this._register(new A),this.onDidChangeTelemetryConfiguration=this._onDidChangeTelemetryConfiguration.event,this._productConfig={usage:!0,error:!0},this._level=0,this._telemetryIsSupported=!1,this._inLoggingOnlyMode=!1,this._telemetryLoggers=new Map,this.extHostTelemetryLogFile=y.revive(this.initData.environment.extensionTelemetryLogResource),this._inLoggingOnlyMode=this.initData.environment.isExtensionTelemetryLoggingOnly,this._outputLogger=t.createLogger(this.extHostTelemetryLogFile,{id:g7,name:f("vs/workbench/api/common/extHostTelemetry","extensionTelemetryLog","Extension Telemetry{0}",this._inLoggingOnlyMode?" (Not Sent)":""),hidden:!0}),this._register(this._outputLogger),this._register(t.onDidChangeLogLevel(i=>{ZE(i)&&this.updateLoggerVisibility()})),this._outputLogger.info("Below are logs for extension telemetry events sent to the telemetry output channel API once the log level is set to trace."),this._outputLogger.info("===========================================================")}updateLoggerVisibility(){this.loggerService.setVisibility(this.extHostTelemetryLogFile,this._telemetryIsSupported&&this.loggerService.getLogLevel()===$e.Trace)}getTelemetryConfiguration(){return this._level===3}getTelemetryDetails(){return{isCrashEnabled:this._level>=1,isErrorsEnabled:this._productConfig.error?this._level>=2:!1,isUsageEnabled:this._productConfig.usage?this._level>=3:!1}}instantiateLogger(e,t,i){const n=this.getTelemetryDetails(),s=new i2(t,i,e,this._outputLogger,this._inLoggingOnlyMode,this.getBuiltInCommonProperties(e),{isUsageEnabled:n.isUsageEnabled,isErrorsEnabled:n.isErrorsEnabled}),o=this._telemetryLoggers.get(e.identifier.value)??[];return this._telemetryLoggers.set(e.identifier.value,[...o,s]),s.apiTelemetryLogger}$initializeTelemetryLevel(e,t,i){this._level=e,this._telemetryIsSupported=t,this._productConfig=i??{usage:!0,error:!0},this.updateLoggerVisibility()}getBuiltInCommonProperties(e){const t=Object.create(null);switch(t["common.extname"]=`${e.publisher}.${e.name}`,t["common.extversion"]=e.version,t["common.vscodemachineid"]=this.initData.telemetryInfo.machineId,t["common.vscodesessionid"]=this.initData.telemetryInfo.sessionId,t["common.sqmid"]=this.initData.telemetryInfo.sqmId,t["common.vscodeversion"]=this.initData.version,t["common.isnewappinstall"]=n2(this.initData.telemetryInfo.firstSessionDate),t["common.product"]=this.initData.environment.appHost,this.initData.uiKind){case kc.Web:t["common.uikind"]="web";break;case kc.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}return t["common.remotename"]=cm(v7(this.initData.remote.authority)),t}$onDidChangeTelemetryLevel(e){this._oldTelemetryEnablement=this.getTelemetryConfiguration(),this._level=e;const t=this.getTelemetryDetails();this._telemetryLoggers.forEach((i,n)=>{const s=i.filter(o=>!o.isDisposed);s.length===0?this._telemetryLoggers.delete(n):this._telemetryLoggers.set(n,s)}),this._telemetryLoggers.forEach(i=>{for(const n of i)n.updateTelemetryEnablements(t.isUsageEnabled,t.isErrorsEnabled)}),this._oldTelemetryEnablement!==this.getTelemetryConfiguration()&&this._onDidChangeTelemetryEnabled.fire(this.getTelemetryConfiguration()),this._onDidChangeTelemetryConfiguration.fire(this.getTelemetryDetails()),this.updateLoggerVisibility()}onExtensionError(e,t){const i=this._telemetryLoggers.get(e.value),n=i==null?void 0:i.filter(o=>!o.isDisposed);if(!n)return this._telemetryLoggers.delete(e.value),!1;let s=!1;for(const o of n)o.ignoreUnhandledExtHostErrors||(o.logError(t),s=!0);return s}};av=H([$(0,Wt),$(1,No)],av);class i2{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,i,n,s,o,a){this._extension=i,this._logger=n,this._inLoggingOnlyMode=s,this._commonProperties=o,this._onDidChangeEnableStates=new A,this.ignoreUnhandledExtHostErrors=(t==null?void 0:t.ignoreUnhandledErrors)??!1,this._ignoreBuiltinCommonProperties=(t==null?void 0:t.ignoreBuiltInCommonProperties)??!1,this._additionalCommonProperties=t==null?void 0:t.additionalCommonProperties,this._sender=e,this._telemetryEnablements={isUsageEnabled:a.isUsageEnabled,isErrorsEnabled:a.isErrorsEnabled}}updateTelemetryEnablements(e,t){this._apiObject&&(this._telemetryEnablements={isUsageEnabled:e,isErrorsEnabled:t},this._onDidChangeEnableStates.fire(this._apiObject))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=ox(t,[]),this._additionalCommonProperties&&(t=fs(t,this._additionalCommonProperties)),this._ignoreBuiltinCommonProperties||(t=fs(t,this._commonProperties)),"properties"in e?e.properties=t:e=t,e}logEvent(e,t){var i;this._sender&&(this._extension.publisher==="vscode"?e=this._extension.name+"/"+e:e=this._extension.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this._inLoggingOnlyMode||(i=this._sender)==null||i.sendEventData(e,t),this._logger.trace(e,t))}logUsage(e,t){this._telemetryEnablements.isUsageEnabled&&this.logEvent(e,t)}logError(e,t){if(!(!this._telemetryEnablements.isErrorsEnabled||!this._sender))if(typeof e=="string")this.logEvent(e,t);else{const i={name:e.name,message:e.message,stack:e.stack,cause:e.cause},n=ox(i,[]),s=new Error(n.message,{cause:n.cause});s.stack=n.stack,s.name=n.name,t=this.mixInCommonPropsAndCleanData(t||{}),this._inLoggingOnlyMode||this._sender.sendErrorData(s,t),this._logger.trace("exception",t)}}get apiTelemetryLogger(){if(!this._apiObject){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e._telemetryEnablements.isUsageEnabled},get isErrorsEnabled(){return e._telemetryEnablements.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e._onDidChangeEnableStates.event.bind(e)};this._apiObject=Object.freeze(t)}return this._apiObject}get isDisposed(){return!this._sender}dispose(){var e;if((e=this._sender)!=null&&e.flush){let t=this._sender;this._sender=void 0,Promise.resolve(t.flush()).then(t=void 0),this._apiObject=void 0}else this._sender=void 0}}function n2(r){const e=Date.now()-new Date(r).getTime();return isNaN(e)?!1:e<1e3*60*60*24}const Tf=ie("IExtHostTelemetry");let cv=(yS=class{constructor(e,t,i){le(this,Kn,void 0);le(this,Su,void 0);le(this,Eu,void 0);this._commands=new Map,this._apiCommands=new Map,J(this,Kn,e.getProxy(G.MainThreadCommands)),this._logService=t,J(this,Eu,i),J(this,Su,e.getProxy(G.MainThreadTelemetry)),this.converter=new F9(this,n=>{const s=this._apiCommands.get(n);return(s==null?void 0:s.result)===me.Void?s:void 0},t),this._argumentProcessors=[{processArgument(n){return on(n)}},{processArgument(n){return Ed(n,function(s){if(Qe.isIRange(s))return F.to(s);if(Ai.isIPosition(s))return qe.to(s);if(Qe.isIRange(s.range)&&y.isUri(s.uri))return xi.to(s);if(s instanceof ve)return s.buffer.buffer;if(!Array.isArray(s))return s})}}]}registerArgumentProcessor(e){this._argumentProcessors.push(e)}registerApiCommand(e){const t=this.registerCommand(!1,e.id,async(...i)=>{const n=e.args.map((o,a)=>{if(!o.validate(i[a]))throw new Error(`Invalid argument '${o.name}' when running '${e.id}', received: ${typeof i[a]=="object"?JSON.stringify(i[a],null,"	"):i[a]} `);return o.convert(i[a])}),s=await this.executeCommand(e.internalId,...n);return e.result.convert(s,i,this.converter)},void 0,{description:e.description,args:e.args,returns:e.result.description});return this._apiCommands.set(e.id,e),new Re(()=>{t.dispose(),this._apiCommands.delete(e.id)})}registerCommand(e,t,i,n,s,o){if(this._logService.trace("ExtHostCommands#registerCommand",t),!t.trim().length)throw new Error("invalid id");if(this._commands.has(t))throw new Error(`command '${t}' already exists`);return this._commands.set(t,{callback:i,thisArg:n,metadata:s,extension:o}),e&&I(this,Kn).$registerCommand(t),new Re(()=>{this._commands.delete(t)&&e&&I(this,Kn).$unregisterCommand(t)})}executeCommand(e,...t){return this._logService.trace("ExtHostCommands#executeCommand",e),this._doExecuteCommand(e,t,!0)}async _doExecuteCommand(e,t,i){if(this._commands.has(e))return I(this,Kn).$fireCommandActivationEvent(e),this._executeContributedCommand(e,t,!1);{let n=!1;const s=Ed(t,function(o){if(o instanceof Ee)return qe.from(o);if(o instanceof ye)return F.from(o);if(o instanceof yi)return xi.from(o);if(An.isNotebookRange(o))return hn.from(o);if(o instanceof ArrayBuffer)return n=!0,ve.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return n=!0,ve.wrap(o);if(o instanceof ve)return n=!0,o;if(!Array.isArray(o))return o});try{const o=await I(this,Kn).$executeCommand(e,n?new nn(s):s,i);return on(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this._doExecuteCommand(e,t,!1);throw o}}}async _executeContributedCommand(e,t,i){var l,u,d;const n=this._commands.get(e);if(!n)throw new Error("Unknown command");const{callback:s,thisArg:o,metadata:a}=n;if(a!=null&&a.args)for(let h=0;h<a.args.length;h++)try{iE(t[h],a.args[h].constraint)}catch{throw new Error(`Running the contributed command: '${e}' failed. Illegal argument '${a.args[h].name}' - ${a.args[h].description}`)}const c=xn.create();try{return await s.apply(o,t)}catch(h){if(e===this.converter.delegatingCommandId){const g=this.converter.getActualCommand(...t);g&&(e=g.command)}if(this._logService.error(h,e,(l=n.extension)==null?void 0:l.identifier),!i)throw h;if((u=n.extension)!=null&&u.identifier){const g=I(this,Eu).onExtensionError(n.extension.identifier,h);this._logService.trace("forwarded error to extension?",g,(d=n.extension)==null?void 0:d.identifier)}throw new class extends Error{constructor(){var b,_;super($o(h)),this.id=e,this.source=((b=n.extension)==null?void 0:b.displayName)??((_=n.extension)==null?void 0:_.name)}}}finally{this._reportTelemetry(n,e,c.elapsed())}}_reportTelemetry(e,t,i){e.extension&&I(this,Su).$publicLog2("Extension:ActionExecuted",{extensionId:e.extension.identifier.value,id:new lm(t),duration:i})}$executeContributedCommand(e,...t){this._logService.trace("ExtHostCommands#$executeContributedCommand",e);const i=this._commands.get(e);return i?(t=t.map(n=>this._argumentProcessors.reduce((s,o)=>{var a;return o.processArgument(s,(a=i.extension)==null?void 0:a.identifier)},n)),this._executeContributedCommand(e,t,!0)):Promise.reject(new Error(`Contributed command '${e}' does not exist.`))}getCommands(e=!1){return this._logService.trace("ExtHostCommands#getCommands",e),I(this,Kn).$getCommands().then(t=>(e&&(t=t.filter(i=>i[0]!=="_")),t))}$getContributedCommandMetadata(){const e=Object.create(null);for(const[t,i]of this._commands){const{metadata:n}=i;n&&(e[t]=n)}return Promise.resolve(e)}},Kn=new WeakMap,Su=new WeakMap,Eu=new WeakMap,yS);cv=H([$(0,We),$(1,Je),$(2,Tf)],cv);const Aa=ie("IExtHostCommands");class F9{constructor(e,t,i){this._commands=e,this._lookupApiCommand=t,this._logService=i,this.delegatingCommandId=`__vsc${En()}`,this._cache=new Map,this._cachIdPool=0,this._commands.registerCommand(!0,this.delegatingCommandId,this._executeConvertedCommand,this)}toInternal(e,t){if(!e)return;const i={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return i;const n=this._lookupApiCommand(e.command);if(n)i.id=n.internalId,i.arguments=n.args.map((s,o)=>s.convert(e.arguments&&e.arguments[o]));else if(xc(e.arguments)){const s=`${e.command} /${++this._cachIdPool}`;this._cache.set(s,e),t.add(Ce(()=>{this._cache.delete(s),this._logService.trace("CommandsConverter#DISPOSE",s)})),i.$ident=s,i.id=this.delegatingCommandId,i.arguments=[s],this._logService.trace("CommandsConverter#CREATE",e.command,s)}return i}fromInternal(e){return typeof e.$ident=="string"?this._cache.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this._cache.get(e[0])}_executeConvertedCommand(...e){const t=this.getActualCommand(...e);return this._logService.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this._commands.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}}const lt=class lt{static Arr(e){return new lt(`${e.name}_array`,`Array of ${e.name}, ${e.description}`,t=>Array.isArray(t)&&t.every(i=>e.validate(i)),t=>t.map(i=>e.convert(i)))}constructor(e,t,i,n){this.name=e,this.description=t,this.validate=i,this.convert=n}optional(){return new lt(this.name,`(optional) ${this.description}`,e=>e==null||this.validate(e),e=>e===void 0?void 0:e===null?null:this.convert(e))}with(e,t){return new lt(e??this.name,t??this.description,this.validate,this.convert)}};lt.Uri=new lt("uri","Uri of a text document",e=>y.isUri(e),e=>e),lt.Position=new lt("position","A position in a text document",e=>Ee.isPosition(e),qe.from),lt.Range=new lt("range","A range in a text document",e=>ye.isRange(e),F.from),lt.Selection=new lt("selection","A selection in a text document",e=>Pn.isSelection(e),Li.from),lt.Number=new lt("number","",e=>typeof e=="number",e=>e),lt.String=new lt("string","",e=>typeof e=="string",e=>e),lt.StringArray=lt.Arr(lt.String),lt.CallHierarchyItem=new lt("item","A call hierarchy item",e=>e instanceof _m,Ns.from),lt.TypeHierarchyItem=new lt("item","A type hierarchy item",e=>e instanceof Ym,Fs.from),lt.TestItem=new lt("testItem","A VS Code TestItem",e=>e instanceof Vs,Rr.from);let B=lt;const Ep=class Ep{constructor(e,t){this.description=e,this.convert=t}};Ep.Void=new Ep("no result",e=>e);let me=Ep;class _e{constructor(e,t,i,n,s){this.id=e,this.internalId=t,this.description=i,this.args=n,this.result=s}}const Ra=ie("IExtHostTerminalService");class r2 extends Ne{constructor(e,t,i,n){super(),this._proxy=e,this._id=t,this._creationOptions=i,this._name=n,this._disposed=!1,this._state={isInteractedWith:!1},this.isOpen=!1,this._onWillDispose=this._register(new A),this.onWillDispose=this._onWillDispose.event,this._creationOptions=Object.freeze(this._creationOptions),this._pidPromise=new Promise(o=>this._pidPromiseComplete=o);const s=this;this.value={get name(){return s._name||""},get processId(){return s._pidPromise},get creationOptions(){return s._creationOptions},get exitStatus(){return s._exitStatus},get state(){return s._state},get selection(){return s._selection},get shellIntegration(){return s.shellIntegration},sendText(o,a=!0){s._checkDisposed(),s._proxy.$sendText(s._id,o,a)},show(o){s._checkDisposed(),s._proxy.$show(s._id,o)},hide(){s._checkDisposed(),s._proxy.$hide(s._id)},dispose(){s._disposed||(s._disposed=!0,s._proxy.$dispose(s._id))},get dimensions(){if(!(s._cols===void 0||s._rows===void 0))return{columns:s._cols,rows:s._rows}}}}dispose(){this._onWillDispose.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this._proxy.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??(t==null?void 0:t.cwd)??void 0,env:e.env??void 0,icon:o2(e.iconPath)??void 0,color:Ho.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:(t==null?void 0:t.forceShellIntegration)??void 0,isFeatureTerminal:(t==null?void 0:t.isFeatureTerminal)??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:(t==null?void 0:t.useShellEnvironment)??void 0,location:(t==null?void 0:t.location)||this._serializeParentTerminal(e.location,t==null?void 0:t.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,i,n,s){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this._proxy.$createTerminal(this._id,{name:this._name,isExtensionCustomPtyTerminal:!0,icon:n,color:Ho.isThemeColor(s)?s.id:void 0,location:(t==null?void 0:t.location)||this._serializeParentTerminal(e,i),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}_serializeParentTerminal(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:yt.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}_checkDisposed(){if(this._disposed)throw new Error("Terminal has already been disposed")}set name(e){this._name=e}setExitStatus(e,t){this._exitStatus=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this._cols&&t===this._rows||e===0||t===0?!1:(this._cols=e,this._rows=t,!0)}setInteractedWith(){return this._state.isInteractedWith?!1:(this._state={isInteractedWith:!0},!0)}setSelection(e){this._selection=e}_setProcessId(e){this._pidPromiseComplete?(this._pidPromiseComplete(e),this._pidPromiseComplete=void 0):this._pidPromise.then(t=>{t!==e&&(this._pidPromise=Promise.resolve(e))})}}class lv{get onProcessReady(){return this._onProcessReady.event}constructor(e){this._pty=e,this.id=0,this.shouldPersist=!1,this._onProcessData=new A,this.onProcessData=this._onProcessData.event,this._onProcessReady=new A,this._onDidChangeProperty=new A,this.onDidChangeProperty=this._onDidChangeProperty.event,this._onProcessExit=new A,this.onProcessExit=this._onProcessExit.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this._pty.close()}input(e){var t,i;(i=(t=this._pty).handleInput)==null||i.call(t,e)}resize(e,t){var i,n;(n=(i=this._pty).setDimensions)==null||n.call(i,{columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){var t,i,n,s,o,a,c,l;this._pty.onDidWrite(u=>this._onProcessData.fire(u)),(i=(t=this._pty).onDidClose)==null||i.call(t,(u=void 0)=>{this._onProcessExit.fire(u===void 0?void 0:u)}),(s=(n=this._pty).onDidOverrideDimensions)==null||s.call(n,u=>{u&&this._onDidChangeProperty.fire({type:"overrideDimensions",value:{cols:u.columns,rows:u.rows}})}),(a=(o=this._pty).onDidChangeName)==null||a.call(o,u=>{this._onDidChangeProperty.fire({type:"title",value:u})}),this._pty.open(e||void 0),e&&((l=(c=this._pty).setDimensions)==null||l.call(c,e)),this._onProcessReady.fire({pid:-1,cwd:"",windowsPty:void 0})}}let H9=1,uv=class extends Ne{get activeTerminal(){var e;return(e=this._activeTerminal)==null?void 0:e.value}get terminals(){return this._terminals.map(e=>e.value)}constructor(e,t,i){super(),this._extHostCommands=t,this._terminals=[],this._terminalProcesses=new Map,this._terminalProcessDisposables={},this._extensionTerminalAwaitingStart={},this._getTerminalPromises={},this._environmentVariableCollections=new Map,this._lastQuickFixCommands=this._register(new Do),this._linkProviders=new Set,this._profileProviders=new Map,this._quickFixProviders=new Map,this._terminalLinkCache=new Map,this._terminalLinkCancellationSource=new Map,this._onDidCloseTerminal=new A,this.onDidCloseTerminal=this._onDidCloseTerminal.event,this._onDidOpenTerminal=new A,this.onDidOpenTerminal=this._onDidOpenTerminal.event,this._onDidChangeActiveTerminal=new A,this.onDidChangeActiveTerminal=this._onDidChangeActiveTerminal.event,this._onDidChangeTerminalDimensions=new A,this.onDidChangeTerminalDimensions=this._onDidChangeTerminalDimensions.event,this._onDidChangeTerminalState=new A,this.onDidChangeTerminalState=this._onDidChangeTerminalState.event,this._onDidChangeShell=new A,this.onDidChangeShell=this._onDidChangeShell.event,this._onDidWriteTerminalData=new A({onWillAddFirstListener:()=>this._proxy.$startSendingDataEvents(),onDidRemoveLastListener:()=>this._proxy.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this._onDidWriteTerminalData.event,this._onDidExecuteCommand=new A({onWillAddFirstListener:()=>this._proxy.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this._proxy.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this._onDidExecuteCommand.event,this._proxy=i.getProxy(G.MainThreadTerminalService),this._bufferer=new O9(this._proxy.$sendProcessData),this._proxy.$registerProcessSupport(e),this._extHostCommands.registerArgumentProcessor({processArgument:n=>{const s=o=>{var c;const a=o;return(c=this.getTerminalById(a.instanceId))==null?void 0:c.value};switch(n==null?void 0:n.$mid){case 15:return s(n);default:{if(Array.isArray(n))for(let o=0;o<n.length&&n[o].$mid===15;o++)n[o]=s(n[o]);return n}}}}),this._register({dispose:()=>{for(const[n,s]of this._terminalProcesses)s.shutdown(!0)}})}getDefaultShell(e){const t=e?this._defaultAutomationProfile:this._defaultProfile;return(t==null?void 0:t.path)||""}getDefaultShellArgs(e){const t=e?this._defaultAutomationProfile:this._defaultProfile;return(t==null?void 0:t.args)||[]}createExtensionTerminal(e,t){const i=new r2(this._proxy,En(),e,e.name),n=new lv(e.pty);return i.createExtensionTerminal(e.location,t,this._serializeParentTerminal(e,t).resolvedExtHostIdentifier,o2(e.iconPath),W9(e.color)).then(s=>{const o=this._setupExtHostProcessListeners(s,n);this._terminalProcessDisposables[s]=o}),this._terminals.push(i),i.value}_serializeParentTerminal(e,t){if(t=t||{},e.location&&typeof e.location=="object"&&"parentTerminal"in e.location){const i=e.location.parentTerminal;if(i){const n=this._terminals.find(s=>s.value===i);n&&(t.resolvedExtHostIdentifier=n._id)}}else e.location&&typeof e.location!="object"?t.location=e.location:t.location&&typeof t.location=="object"&&"splitActiveTerminal"in t.location&&(t.location={splitActiveTerminal:!0});return t}attachPtyToTerminal(e,t){if(!this.getTerminalById(e))throw new Error(`Cannot resolve terminal with id ${e} for virtual process`);const n=new lv(t),s=this._setupExtHostProcessListeners(e,n);this._terminalProcessDisposables[e]=s}async $acceptActiveTerminalChanged(e){const t=this._activeTerminal;if(e===null){this._activeTerminal=void 0,t!==this._activeTerminal&&this._onDidChangeActiveTerminal.fire(this._activeTerminal);return}const i=this.getTerminalById(e);i&&(this._activeTerminal=i,t!==this._activeTerminal&&this._onDidChangeActiveTerminal.fire(this._activeTerminal.value))}async $acceptTerminalProcessData(e,t){const i=this.getTerminalById(e);i&&this._onDidWriteTerminalData.fire({terminal:i.value,data:t})}async $acceptTerminalDimensions(e,t,i){const n=this.getTerminalById(e);n&&n.setDimensions(t,i)&&this._onDidChangeTerminalDimensions.fire({terminal:n.value,dimensions:n.value.dimensions})}async $acceptDidExecuteCommand(e,t){const i=this.getTerminalById(e);i&&this._onDidExecuteCommand.fire({terminal:i.value,...t})}async $acceptTerminalMaximumDimensions(e,t,i){var n;(n=this._terminalProcesses.get(e))==null||n.resize(t,i)}async $acceptTerminalTitleChange(e,t){const i=this.getTerminalById(e);i&&(i.name=t)}async $acceptTerminalClosed(e,t,i){const n=this._getTerminalObjectIndexById(this._terminals,e);if(n!==null){const s=this._terminals.splice(n,1)[0];s.setExitStatus(t,i),this._onDidCloseTerminal.fire(s.value)}}$acceptTerminalOpened(e,t,i,n){if(t){const a=this._getTerminalObjectIndexById(this._terminals,t);if(a!==null){this._terminals[a]._id=e,this._onDidOpenTerminal.fire(this.terminals[a]),this._terminals[a].isOpen=!0;return}}const s={name:n.name,shellPath:n.executable,shellArgs:n.args,cwd:typeof n.cwd=="string"?n.cwd:y.revive(n.cwd),env:n.env,hideFromUser:n.hideFromUser},o=new r2(this._proxy,e,s,i);this._terminals.push(o),this._onDidOpenTerminal.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(e,t){const i=this.getTerminalById(e);i==null||i._setProcessId(t)}async $startExtensionTerminal(e,t){const i=this.getTerminalById(e);if(!i)return{message:f("vs/workbench/api/common/extHostTerminalService","launchFail.idMissingOnExtHost","Could not find the terminal with id {0} on the extension host",e)};i.isOpen||await new Promise(s=>{const o=this.onDidOpenTerminal(async a=>{a===i.value&&(o.dispose(),s())})});const n=this._terminalProcesses.get(e);n?n.startSendingEvents(t):this._extensionTerminalAwaitingStart[e]={initialDimensions:t}}_setupExtHostProcessListeners(e,t){const i=new Pe;i.add(t.onProcessReady(s=>this._proxy.$sendProcessReady(e,s.pid,s.cwd,s.windowsPty))),i.add(t.onDidChangeProperty(s=>this._proxy.$sendProcessProperty(e,s))),this._bufferer.startBuffering(e,t.onProcessData),i.add(t.onProcessExit(s=>this._onProcessExit(e,s))),this._terminalProcesses.set(e,t);const n=this._extensionTerminalAwaitingStart[e];return n&&t instanceof lv&&(t.startSendingEvents(n.initialDimensions),delete this._extensionTerminalAwaitingStart[e]),i}$acceptProcessAckDataEvent(e,t){var i;(i=this._terminalProcesses.get(e))==null||i.acknowledgeDataEvent(t)}$acceptProcessInput(e,t){var i;(i=this._terminalProcesses.get(e))==null||i.input(t)}$acceptTerminalInteraction(e){const t=this.getTerminalById(e);t!=null&&t.setInteractedWith()&&this._onDidChangeTerminalState.fire(t.value)}$acceptTerminalSelection(e,t){var i;(i=this.getTerminalById(e))==null||i.setSelection(t)}$acceptProcessResize(e,t,i){var n;try{(n=this._terminalProcesses.get(e))==null||n.resize(t,i)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(e,t){var i;(i=this._terminalProcesses.get(e))==null||i.shutdown(t)}$acceptProcessRequestInitialCwd(e){var t;(t=this._terminalProcesses.get(e))==null||t.getInitialCwd().then(i=>this._proxy.$sendProcessProperty(e,{type:"initialCwd",value:i}))}$acceptProcessRequestCwd(e){var t;(t=this._terminalProcesses.get(e))==null||t.getCwd().then(i=>this._proxy.$sendProcessProperty(e,{type:"cwd",value:i}))}$acceptProcessRequestLatency(e){return Promise.resolve(e)}registerLinkProvider(e){return this._linkProviders.add(e),this._linkProviders.size===1&&this._proxy.$startLinkProvider(),new Re(()=>{this._linkProviders.delete(e),this._linkProviders.size===0&&this._proxy.$stopLinkProvider()})}registerProfileProvider(e,t,i){if(this._profileProviders.has(t))throw new Error(`Terminal profile provider "${t}" already registered`);return this._profileProviders.set(t,i),this._proxy.$registerProfileProvider(t,e.identifier.value),new Re(()=>{this._profileProviders.delete(t),this._proxy.$unregisterProfileProvider(t)})}registerTerminalQuickFixProvider(e,t,i){if(this._quickFixProviders.has(e))throw new Error(`Terminal quick fix provider "${e}" is already registered`);return this._quickFixProviders.set(e,i),this._proxy.$registerQuickFixProvider(e,t),new Re(()=>{this._quickFixProviders.delete(e),this._proxy.$unregisterQuickFixProvider(e)})}async $provideTerminalQuickFixes(e,t){const i=new kt().token;if(i.isCancellationRequested)return;const n=this._quickFixProviders.get(e);if(!n)return;const s=await n.provideTerminalQuickFixes(t,i);if(s===null||Array.isArray(s)&&s.length===0)return;const o=new Pe;if(this._lastQuickFixCommands.value=o,!Array.isArray(s))return s?wf.from(s,this._extHostCommands.converter,o):void 0;const a=[];for(const c of s){const l=wf.from(c,this._extHostCommands.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(e,t){var s;const i=new kt().token;let n=await((s=this._profileProviders.get(e))==null?void 0:s.provideTerminalProfile(i));if(!i.isCancellationRequested){if(n&&!("options"in n)&&(n={options:n}),!n||!("options"in n))throw new Error(`No terminal profile options provided for id "${e}"`);if("pty"in n.options){this.createExtensionTerminal(n.options,t);return}this.createTerminalFromOptions(n.options,t)}}async $provideLinks(e,t){const i=this.getTerminalById(e);if(!i)return[];this._terminalLinkCache.delete(e);const n=this._terminalLinkCancellationSource.get(e);n==null||n.dispose(!0);const s=new kt;this._terminalLinkCancellationSource.set(e,s);const o=[],a={terminal:i.value,line:t},c=[];for(const d of this._linkProviders)c.push(Rg.withAsyncBody(async h=>{s.token.onCancellationRequested(()=>h({provider:d,links:[]}));const g=await d.provideTerminalLinks(a,s.token)||[];s.token.isCancellationRequested||h({provider:d,links:g})}));const l=await Promise.all(c);if(s.token.isCancellationRequested)return[];const u=new Map;for(const d of l)d&&d.links.length>0&&o.push(...d.links.map(h=>{const g={id:H9++,startIndex:h.startIndex,length:h.length,label:h.tooltip};return u.set(g.id,{provider:d.provider,link:h}),g}));return this._terminalLinkCache.set(e,u),o}$activateLink(e,t){var n;const i=(n=this._terminalLinkCache.get(e))==null?void 0:n.get(t);i&&i.provider.handleTerminalLink(i.link)}_onProcessExit(e,t){this._bufferer.stopBuffering(e),this._terminalProcesses.delete(e),delete this._extensionTerminalAwaitingStart[e];const i=this._terminalProcessDisposables[e];i&&(i.dispose(),delete this._terminalProcessDisposables[e]),this._proxy.$sendProcessExit(e,t)}getTerminalById(e){return this._getTerminalObjectById(this._terminals,e)}getTerminalIdByApiObject(e){const t=this._terminals.findIndex(i=>i.value===e);return t>=0?t:null}_getTerminalObjectById(e,t){const i=this._getTerminalObjectIndexById(e,t);return i!==null?e[i]:null}_getTerminalObjectIndexById(e,t){const i=e.findIndex(n=>n._id===t);return i>=0?i:null}getEnvironmentVariableCollection(e){let t=this._environmentVariableCollections.get(e.identifier.value);return t||(t=new s2,this._setEnvironmentVariableCollection(e.identifier.value,t)),t.getScopedEnvironmentVariableCollection(void 0)}_syncEnvironmentVariableCollection(e,t){const i=R9(t.map),n=L9(t.descriptionMap);this._proxy.$setEnvironmentVariableCollection(e,t.persistent,i.length===0?void 0:i,n)}$initEnvironmentVariableCollections(e){e.forEach(t=>{const i=t[0],n=new s2(t[1]);this._setEnvironmentVariableCollection(i,n)})}$acceptDefaultProfile(e,t){const i=this._defaultProfile;this._defaultProfile=e,this._defaultAutomationProfile=t,(i==null?void 0:i.path)!==e.path&&this._onDidChangeShell.fire(e.path)}_setEnvironmentVariableCollection(e,t){this._environmentVariableCollections.set(e,t),t.onDidChangeCollection(()=>{this._syncEnvironmentVariableCollection(e,t)})}};uv=H([$(1,Aa),$(2,We)],uv);class s2{get persistent(){return this._persistent}set persistent(e){this._persistent=e,this._onDidChangeCollection.fire()}get onDidChangeCollection(){return this._onDidChangeCollection&&this._onDidChangeCollection.event}constructor(e){this.map=new Map,this.scopedCollections=new Map,this.descriptionMap=new Map,this._persistent=!0,this._onDidChangeCollection=new A,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.getScopeKey(e);let i=this.scopedCollections.get(t);return i||(i=new U9(this,e),this.scopedCollections.set(t,i),i.onDidChangeCollection(()=>this._onDidChangeCollection.fire())),i}replace(e,t,i,n){this._setIfDiffers(e,{value:t,type:Go.Replace,options:i??{applyAtProcessCreation:!0},scope:n})}append(e,t,i,n){this._setIfDiffers(e,{value:t,type:Go.Append,options:i??{applyAtProcessCreation:!0},scope:n})}prepend(e,t,i,n){this._setIfDiffers(e,{value:t,type:Go.Prepend,options:i??{applyAtProcessCreation:!0},scope:n})}_setIfDiffers(e,t){var o,a,c,l,u,d;if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const i=this.getKey(e,t.scope),n=this.map.get(i),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!n||n.value!==t.value||n.type!==t.type||((o=n.options)==null?void 0:o.applyAtProcessCreation)!==s.applyAtProcessCreation||((a=n.options)==null?void 0:a.applyAtShellIntegration)!==s.applyAtShellIntegration||((l=(c=n.scope)==null?void 0:c.workspaceFolder)==null?void 0:l.index)!==((d=(u=t.scope)==null?void 0:u.workspaceFolder)==null?void 0:d.index)){const h=this.getKey(e,t.scope),g={variable:e,...t,options:s};this.map.set(h,g),this._onDidChangeCollection.fire()}}get(e,t){const i=this.getKey(e,t),n=this.map.get(i);return n?a2(n):void 0}getKey(e,t){const i=this.getScopeKey(t);return i.length?`${e}:::${i}`:e}getScopeKey(e){return this.getWorkspaceKey(e==null?void 0:e.workspaceFolder)??""}getWorkspaceKey(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[i,n]of this.map)this.getScopeKey(n.scope)===this.getScopeKey(e)&&t.set(n.variable,a2(n));return t}delete(e,t){const i=this.getKey(e,t);this.map.delete(i),this._onDidChangeCollection.fire()}clear(e){var t,i;if(e!=null&&e.workspaceFolder){for(const[n,s]of this.map)((i=(t=s.scope)==null?void 0:t.workspaceFolder)==null?void 0:i.index)===e.workspaceFolder.index&&this.map.delete(n);this.clearDescription(e)}else this.map.clear(),this.descriptionMap.clear();this._onDidChangeCollection.fire()}setDescription(e,t){const i=this.getScopeKey(t),n=this.descriptionMap.get(i);if(!n||n.description!==e){let s;typeof e=="string"?s=e:s=e==null?void 0:e.value.split(`

`)[0];const o={description:s,scope:t};this.descriptionMap.set(i,o),this._onDidChangeCollection.fire()}}getDescription(e){var i;const t=this.getScopeKey(e);return(i=this.descriptionMap.get(t))==null?void 0:i.description}clearDescription(e){const t=this.getScopeKey(e);this.descriptionMap.delete(t)}}class U9{get persistent(){return this.collection.persistent}set persistent(e){this.collection.persistent=e}get onDidChangeCollection(){return this._onDidChangeCollection&&this._onDidChangeCollection.event}constructor(e,t){this.collection=e,this.scope=t,this._onDidChangeCollection=new A}getScoped(e){return this.collection.getScopedEnvironmentVariableCollection(e)}replace(e,t,i){this.collection.replace(e,t,i,this.scope)}append(e,t,i){this.collection.append(e,t,i,this.scope)}prepend(e,t,i){this.collection.prepend(e,t,i,this.scope)}get(e){return this.collection.get(e,this.scope)}forEach(e,t){this.collection.getVariableMap(this.scope).forEach((i,n)=>e.call(t,n,i,this),this.scope)}[Symbol.iterator](){return this.collection.getVariableMap(this.scope).entries()}delete(e){this.collection.delete(e,this.scope),this._onDidChangeCollection.fire(void 0)}clear(){this.collection.clear(this.scope)}set description(e){this.collection.setDescription(e,this.scope)}get description(){return this.collection.getDescription(this.scope)}}let dv=class extends uv{constructor(e,t){super(!1,e,t)}createTerminal(e,t,i){throw new Zp}createTerminalFromOptions(e,t){throw new Zp}};dv=H([$(0,Aa),$(1,We)],dv);function o2(r){if(!(!r||typeof r=="string"))return"id"in r?{id:r.id,color:r.color}:r}function W9(r){return Ho.isThemeColor(r)?r:void 0}function a2(r){const e={...r};return delete e.scope,e.options=e.options??void 0,delete e.variable,e}const B9=ie("progressService"),vw=class vw{get value(){return this._value}constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}};vw.None=Object.freeze({report(){}});let Af=vw,c2=class extends Ne{constructor(e,t){super(),this.deferred=new Oo,t.withProgress(e,i=>(this.reporter=i,this.lastStep&&i.report(this.lastStep),this.deferred.p)),this._register(Ce(()=>this.deferred.complete()))}report(e){this.reporter?this.reporter.report(e):this.lastStep=e}};c2=H([$(1,B9)],c2),ie("editorProgressService");const l2="__";ie("IAuthenticationService"),ie("IAuthenticationExtensionsService");const hv=ie("IExtHostAuthentication");let fv=class{constructor(e){this._authenticationProviders=new Map,this._onDidChangeSessions=new A,this.onDidChangeSessions=this._onDidChangeSessions.event,this._getSessionTaskSingler=new u2,this._getSessionsTaskSingler=new u2,this._proxy=e.getProxy(G.MainThreadAuthentication)}async getSession(e,t,i,n={}){const s=Xe.toKey(e.identifier),o=[...i].sort().join(" ");return await this._getSessionTaskSingler.getOrCreate(`${s} ${t} ${o}`,async()=>{await this._proxy.$ensureProvider(t);const a=e.displayName||e.name;return this._proxy.$getSession(t,i,s,a,n)})}async getSessions(e,t,i){const n=Xe.toKey(e.identifier),s=[...i].sort().join(" ");return await this._getSessionsTaskSingler.getOrCreate(`${n} ${s}`,async()=>{await this._proxy.$ensureProvider(t);const o=e.displayName||e.name;return this._proxy.$getSessions(t,i,n,o)})}async removeSession(e,t){const i=this._authenticationProviders.get(e);return i?i.provider.removeSession(t):this._proxy.$removeSession(e,t)}registerAuthenticationProvider(e,t,i,n){if(this._authenticationProviders.get(e))throw new Error(`An authentication provider with id '${e}' is already registered.`);this._authenticationProviders.set(e,{label:t,provider:i,options:n??{supportsMultipleAccounts:!1}});const s=i.onDidChangeSessions(o=>this._proxy.$sendDidChangeSessions(e,o));return this._proxy.$registerAuthenticationProvider(e,t,(n==null?void 0:n.supportsMultipleAccounts)??!1),new Re(()=>{s.dispose(),this._authenticationProviders.delete(e),this._proxy.$unregisterAuthenticationProvider(e)})}$createSession(e,t,i){const n=this._authenticationProviders.get(e);if(n)return Promise.resolve(n.provider.createSession(t,i));throw new Error(`Unable to find authentication provider with handle: ${e}`)}$removeSession(e,t){const i=this._authenticationProviders.get(e);if(i)return Promise.resolve(i.provider.removeSession(t));throw new Error(`Unable to find authentication provider with handle: ${e}`)}$getSessions(e,t){const i=this._authenticationProviders.get(e);if(i)return Promise.resolve(i.provider.getSessions(t));throw new Error(`Unable to find authentication provider with handle: ${e}`)}$onDidChangeAuthenticationSessions(e,t){return e.startsWith(l2)||this._onDidChangeSessions.fire({provider:{id:e,label:t}}),Promise.resolve()}};fv=H([$(0,We)],fv);class u2{constructor(){this._inFlightPromises=new Map}getOrCreate(e,t){const i=this._inFlightPromises.get(e);if(i)return i;const n=t().finally(()=>this._inFlightPromises.delete(e));return this._inFlightPromises.set(e,n),n}}var pv;const gv=ie("IExtHostLanguageModels");class d2{constructor(e,t){this.option=e,this.stream=new Lg,this.stream=t??new Lg}}class V9{constructor(){this._responseStreams=new Map,this._defaultStream=new Lg,this._isDone=!1,this._isStreaming=!1;const e=this;this.apiObject={stream:e._defaultStream.asyncIterable}}*_streams(){if(this._responseStreams.size>0)for(const[,e]of this._responseStreams)yield e.stream;else yield this._defaultStream}handleFragment(e){if(this._isDone)return;this._isStreaming=!0;let t=this._responseStreams.get(e.index);t||(this._responseStreams.size===0?t=new d2(e.index,this._defaultStream):t=new d2(e.index),this._responseStreams.set(e.index,t)),t.stream.emitOne(e.part)}get isStreaming(){return this._isStreaming}reject(e){this._isDone=!0;for(const t of this._streams())t.reject(e)}resolve(){this._isDone=!0;for(const e of this._streams())e.resolve()}}let mv=(Xa=class{constructor(e,t,i){this._logService=t,this._extHostAuthentication=i,this._onDidChangeModelAccess=new A,this._onDidChangeProviders=new A,this.onDidChangeProviders=this._onDidChangeProviders.event,this._languageModels=new Map,this._allLanguageModelData=new Map,this._modelAccessList=new br,this._pendingRequest=new Map,this._languageAccessInformationExtensions=new Set,this._proxy=e.getProxy(G.MainThreadLanguageModels)}dispose(){this._onDidChangeModelAccess.dispose(),this._onDidChangeProviders.dispose()}registerLanguageModel(e,t,i,n){const s=pv._idPool++;this._languageModels.set(s,{extension:e.identifier,provider:i,languageModelId:t});let o;return n.auth&&(o={providerLabel:e.displayName||e.name,accountLabel:typeof n.auth=="object"?n.auth.label:void 0}),this._proxy.$registerLanguageModelProvider(s,t,{extension:e.identifier,identifier:t,model:n.name??"",auth:o}),Ce(()=>{this._languageModels.delete(s),this._proxy.$unregisterProvider(s)})}async $provideLanguageModelResponse(e,t,i,n,s,o){const a=this._languageModels.get(e);if(!a)return;const c=new Af(async l=>{if(o.isCancellationRequested){this._logService.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}this._proxy.$handleProgressChunk(t,{index:l.index,part:l.part})});return a.provider.provideLanguageModelResponse2(n.map(pf.to),s,Xe.toKey(i),c,o)}$updateLanguageModels(e){var n;const t=[],i=[];if(e.added)for(const s of e.added)this._allLanguageModelData.set(s.identifier,s),t.push(s.model);if(e.removed)for(const s of e.removed){this._allLanguageModelData.delete(s),i.push(s);for(const[o,a]of this._pendingRequest)a.languageModelId===s&&(a.res.reject(new sr),this._pendingRequest.delete(o))}this._onDidChangeProviders.fire(Object.freeze({added:Object.freeze(t),removed:Object.freeze(i)})),(n=e.added)==null||n.forEach(this._fakeAuthPopulate,this)}getLanguageModelIds(){return Array.from(this._allLanguageModelData.keys())}$updateModelAccesslist(e){const t=new Array;for(const{from:i,to:n,enabled:s}of e){const o=this._modelAccessList.get(i)??new _s;if(o.has(n)!==s){s?o.add(n):o.delete(n),this._modelAccessList.set(i,o);const c={from:i,to:n};t.push(c),this._onDidChangeModelAccess.fire(c)}}}async sendChatRequest(e,t,i,n,s){var g;const o=e.identifier,a=await this._proxy.$prepareChatAccess(o,t,n.justification);if(!a||!this._allLanguageModelData.has(t))throw Ln.NotFound(`Language model '${t}' is unknown.`);if(this._isUsingAuth(o,a)&&(!await this._getAuthAccess(e,{identifier:a.extension,displayName:a.auth.providerLabel},n.justification,n.silent)||!((g=this._modelAccessList.get(o))!=null&&g.has(a.extension))))throw Ln.NoPermissions(`Language model '${t}' cannot be used by '${o.value}'.`);const c=Math.random()*1e6|0,l=this._proxy.$fetchResponse(o,t,c,i.map(pf.from),n.modelOptions??{},s),u=new Bi,d=new V9;this._pendingRequest.set(c,{languageModelId:t,res:d});let h;if(l.catch(b=>{u.isOpen()?d.reject(b):h=b}).finally(()=>{this._pendingRequest.delete(c),d.resolve(),u.open()}),await u.wait(),h)throw new Ln(`Language model '${t}' errored, check cause for more details`,"Unknown",h);return d.apiObject}async $handleResponseFragment(e,t){const i=this._pendingRequest.get(e);i&&i.res.handleFragment(t)}async _getAuthAccess(e,t,i,n){const s=l2+t.identifier.value;if(await this._extHostAuthentication.getSession(e,s,[],{silent:!0}))return this.$updateModelAccesslist([{from:e.identifier,to:t.identifier,enabled:!0}]),!0;if(n)return!1;try{const a=i?f("vs/workbench/api/common/extHostLanguageModels","chatAccessWithJustification",`To allow access to the language models provided by {0}. Justification:

{1}`,t.displayName,i):f("vs/workbench/api/common/extHostLanguageModels","chatAccess","To allow access to the language models provided by {0}",t.displayName);return await this._extHostAuthentication.getSession(e,s,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:e.identifier,to:t.identifier,enabled:!0}]),!0}catch{return!1}}_isUsingAuth(e,t){return!!t.auth&&!Xe.equals(t.extension,e)}async _fakeAuthPopulate(e){for(const t of this._languageAccessInformationExtensions)try{await this._getAuthAccess(t,{identifier:e.extension,displayName:""},void 0,!0)}catch(i){this._logService.error("Fake Auth request failed"),this._logService.error(i)}}createLanguageModelAccessInformation(e){this._languageAccessInformationExtensions.add(e);const t=this,i=St.signal(St.filter(this._onDidChangeModelAccess.event,s=>Xe.equals(s.from,e.identifier))),n=St.signal(this._onDidChangeProviders.event);return{get onDidChange(){return St.any(i,n)},canSendRequest(s){const o=t._allLanguageModelData.get(s);if(!o)return;if(!t._isUsingAuth(e.identifier,o))return!0;const a=t._modelAccessList.get(e.identifier);if(a)return a.has(o.extension)}}}},pv=Xa,Xa._idPool=1,Xa);mv=pv=H([$(0,We),$(1,Je),$(2,hv)],mv);function Bl(r,e=ui){return cE(r,e)?r.charAt(0).toUpperCase()+r.slice(1):r}function z9(r,e){return r.replace(/^~($|\/|\\)/,`${e}$1`)}var h2;(function(r){r[r.TEXT=0]="TEXT",r[r.VARIABLE=1]="VARIABLE",r[r.SEPARATOR=2]="SEPARATOR"})(h2||(h2={}));function f2(r){return r<0?0:r>255?255:r|0}function La(r){return r<0?0:r>4294967295?4294967295:r|0}class Rf{constructor(e){const t=f2(e);this._defaultValue=t,this._asciiMap=Rf._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){const t=new Uint8Array(256);return t.fill(e),t}set(e,t){const i=f2(t);e>=0&&e<256?this._asciiMap[e]=i:this._map.set(e,i)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}}class j9 extends Rf{constructor(e,t){super(0),this._segmenter=null,this._cachedLine=null,this._cachedSegments=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let i=0,n=e.length;i<n;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const n of this._getIntlSegmenterWordsOnLine(e)){if(n.index>t)break;i=n}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this._getIntlSegmenterWordsOnLine(e))if(!(i.index<t))return i;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){const t=[];for(const i of e)this._isWordLike(i)&&t.push(i);return t}_isWordLike(e){return!!e.isWordLike}}const p2=new ig(10);function q9(r,e){const t=`${r}/${e.join(",")}`;let i=p2.get(t);return i||(i=new j9(r,e),p2.set(t,i)),i}var vv;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=4]="Right",r[r.Full=7]="Full"})(vv||(vv={}));var g2;(function(r){r[r.Left=1]="Left",r[r.Center=2]="Center",r[r.Right=3]="Right"})(g2||(g2={}));var m2;(function(r){r[r.Both=0]="Both",r[r.Right=1]="Right",r[r.Left=2]="Left",r[r.None=3]="None"})(m2||(m2={}));class _v{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}}class G9{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}}class Q9{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}}class v2{constructor(e,t,i,n){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=n}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=_2(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=N4(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new G9(t,this.wordSeparators?q9(this.wordSeparators,[]):null,i?this.searchString:null)}}function _2(r){if(!r||r.length===0)return!1;for(let e=0,t=r.length;e<t;e++){const i=r.charCodeAt(e);if(i===10)return!0;if(i===92){if(e++,e>=t)break;const n=r.charCodeAt(e);if(n===110||n===114||n===87)return!0}}return!1}function w2(r,e,t){if(!t)return new _v(r,null);const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n];return new _v(r,i)}function J9(r,e,t,i,n){if(i===0)return!0;const s=e.charCodeAt(i-1);if(r.get(s)!==0||s===13||s===10)return!0;if(n>0){const o=e.charCodeAt(i);if(r.get(o)!==0)return!0}return!1}function K9(r,e,t,i,n){if(i+n===t)return!0;const s=e.charCodeAt(i+n);if(r.get(s)!==0||s===13||s===10)return!0;if(n>0){const o=e.charCodeAt(i+n-1);if(r.get(o)!==0)return!0}return!1}function b2(r,e,t,i,n){return J9(r,e,t,i,n)&&K9(r,e,t,i,n)}class X9{constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){const t=e.length;let i;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(i=this._searchRegex.exec(e),!i))return null;const n=i.index,s=i[0].length;if(n===this._prevMatchStartIndex&&s===this._prevMatchLength){if(s===0){Fb(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=n,this._prevMatchLength=s,!this._wordSeparators||b2(this._wordSeparators,e,t,n,s))return i}while(i);return null}}function y2(r){return r.scheme!==Y.file&&r.scheme!==Y.vscodeRemote}function Y9(r){if(r.folders.length)return r.folders.every(e=>y2(e.uri))?r.folders[0].uri:void 0;if(r.configuration&&y2(r.configuration))return r.configuration}function Z9(r){var e;return(e=Y9(r))==null?void 0:e.scheme}const eD=ie("environmentService"),tD=eD,x2=ie("remoteAgentService");var wv;const iD=ie("pathService");let C2=wv=class{constructor(e,t,i,n){this.localUserHome=e,this.remoteAgentService=t,this.environmentService=i,this.contextService=n,this.resolveOS=(async()=>{const s=await this.remoteAgentService.getEnvironment();return(s==null?void 0:s.os)||d4})(),this.resolveUserHome=(async()=>{const s=await this.remoteAgentService.getEnvironment();return this.maybeUnresolvedUserHome=(s==null?void 0:s.userHome)??e})()}hasValidBasename(e,t,i){return typeof t=="string"||typeof t>"u"?this.resolveOS.then(n=>this.doHasValidBasename(e,n,t)):this.doHasValidBasename(e,t,i)}doHasValidBasename(e,t,i){return e.scheme===Y.file||e.scheme===Y.vscodeRemote?aE(i??cs(e),t===1):!0}get defaultUriScheme(){return wv.findDefaultUriScheme(this.environmentService,this.contextService)}static findDefaultUriScheme(e,t){if(e.remoteAuthority)return Y.vscodeRemote;const i=Z9(t.getWorkspace());if(i)return i;const n=t.getWorkspace().folders[0];if(n)return n.uri.scheme;const s=t.getWorkspace().configuration;return s?s.scheme:Y.file}userHome(e){return e!=null&&e.preferLocal?this.localUserHome:this.resolveUserHome}get resolvedUserHome(){return this.maybeUnresolvedUserHome}get path(){return this.resolveOS.then(e=>e===1?Et:Fe)}async fileURI(e){let t="";if(await this.resolveOS===1&&(e=e.replace(/\\/g,"/")),e[0]==="/"&&e[1]==="/"){const n=e.indexOf("/",2);n===-1?(t=e.substring(2),e="/"):(t=e.substring(2,n),e=e.substring(n)||"/")}return y.from({scheme:Y.file,authority:t,path:e,query:"",fragment:""})}};C2=wv=H([$(1,x2),$(2,tD),$(3,zg)],C2);let S2=class{constructor(e,t,i,n,s){this.configurationService=e,this.workspaceContextService=t,this.editorGroupsService=i,this.logService=n,this.pathService=s}text(e,t,i={}){e=this.getContentPattern(e,i);const n=this.configurationService.getValue(),s=t&&t.some(a=>!this.configurationService.getValue({resource:a}).search.useRipgrep);return{...this.commonQuery(t==null?void 0:t.map(A0),i),type:2,contentPattern:e,previewOptions:i.previewOptions,maxFileSize:i.maxFileSize,usePCRE2:n.search.usePCRE2||s||!1,beforeContext:i.beforeContext,afterContext:i.afterContext,userDisabledExcludesAndIgnoreFiles:i.disregardExcludeSettings&&i.disregardIgnoreFiles}}getContentPattern(e,t){var s,o,a,c;const i=this.configurationService.getValue();e.isRegExp&&(e.pattern=e.pattern.replace(/\r?\n/g,"\\n"));const n={...e,wordSeparators:i.editor.wordSeparators};return this.isCaseSensitive(e,t)&&(n.isCaseSensitive=!0),this.isMultiline(e)&&(n.isMultiline=!0),(s=t.notebookSearchConfig)!=null&&s.includeMarkupInput&&(n.notebookInfo||(n.notebookInfo={}),n.notebookInfo.isInNotebookMarkdownInput=t.notebookSearchConfig.includeMarkupInput),(o=t.notebookSearchConfig)!=null&&o.includeMarkupPreview&&(n.notebookInfo||(n.notebookInfo={}),n.notebookInfo.isInNotebookMarkdownPreview=t.notebookSearchConfig.includeMarkupPreview),(a=t.notebookSearchConfig)!=null&&a.includeCodeInput&&(n.notebookInfo||(n.notebookInfo={}),n.notebookInfo.isInNotebookCellInput=t.notebookSearchConfig.includeCodeInput),(c=t.notebookSearchConfig)!=null&&c.includeOutput&&(n.notebookInfo||(n.notebookInfo={}),n.notebookInfo.isInNotebookCellOutput=t.notebookSearchConfig.includeOutput),n}file(e,t={}){return{...this.commonQuery(e,t),type:1,filePattern:t.filePattern?t.filePattern.trim():t.filePattern,exists:t.exists,sortByScore:t.sortByScore,cacheKey:t.cacheKey,shouldGlobMatchFilePattern:t.shouldGlobSearch}}handleIncludeExclude(e,t){return e?(e=Array.isArray(e)?e.map(Lf):Lf(e),t?this.parseSearchPaths(e):{pattern:bv(...Array.isArray(e)?e:[e])}):{}}commonQuery(e=[],t={}){const i=this.handleIncludeExclude(t.includePattern,t.expandPatterns),n=this.handleIncludeExclude(t.excludePattern,t.expandPatterns),s=e.length>1,o=(i.searchPaths&&i.searchPaths.length?i.searchPaths.map(l=>this.getFolderQueryForSearchPath(l,t,n)):e.map(l=>this.getFolderQueryForRoot(l,t,n,s))).filter(l=>!!l),a={_reason:t._reason,folderQueries:o,usingSearchPaths:!!(i.searchPaths&&i.searchPaths.length),extraFileResources:t.extraFileResources,excludePattern:n.pattern,includePattern:i.pattern,onlyOpenEditors:t.onlyOpenEditors,maxResults:t.maxResults};if(t.onlyOpenEditors){const l=Yt(Xu(this.editorGroupsService.groups.map(h=>h.editors.map(g=>g.resource))));this.logService.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(l));const u=l.filter(h=>Lx(a,h.fsPath)),d=this.commonQueryFromFileList(u);return this.logService.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(d)),{...a,...d}}const c=t.extraFileResources&&t.extraFileResources.filter(l=>Lx(a,l.fsPath));return a.extraFileResources=c&&c.length?c:void 0,a}commonQueryFromFileList(e){const t=[],i=new mt,n={};let s=!1;return e.forEach(o=>{var c;if(o.scheme===Y.walkThrough)return;if(vE(o)){const l=((c=this.workspaceContextService.getWorkspaceFolder(o))==null?void 0:c.uri)??o.with({path:rs(o.fsPath)});let u=i.get(l);u||(s=!0,u={folder:l,includePattern:{}},t.push(u),i.set(l,u));const d=Ic(l.fsPath,o.fsPath);Ro(u.includePattern)[d.replace(/\\/g,"/")]=!0}else o.fsPath&&(s=!0,n[o.fsPath]=!0)}),{folderQueries:t,includePattern:n,usingSearchPaths:!0,excludePattern:s?void 0:{"**/*":!0}}}isCaseSensitive(e,t){if(t.isSmartCase){if(e.isRegExp){if(Bb(e.pattern,!0))return!0}else if(Bb(e.pattern))return!0}return!!e.isCaseSensitive}isMultiline(e){return e.isMultiline||e.isRegExp&&_2(e.pattern)||e.pattern.indexOf(`
`)>=0?!0:!!e.isMultiline}parseSearchPaths(e){const t=d=>mg(d)||/^\.\.?([\/\\]|$)/.test(d),n=(Array.isArray(e)?e:rD(e)).map(d=>{const h=this.pathService.resolvedUserHome;return h?z9(d,h.scheme===Y.file?h.fsPath:h.path):d}),s=Jw(n,d=>t(d)?"searchPaths":"exprSegments"),o=(s.exprSegments||[]).map(d=>Lb(d,"/")).map(d=>Lb(d,"\\")).map(d=>(d[0]==="."&&(d="*"+d),sD(d))),a={},c=this.expandSearchPathPatterns(s.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=Xu(o),u=bv(...l);return u&&(a.pattern=u),a}getExcludesForFolder(e,t){return t.disregardExcludeSettings?void 0:Y7(e,!t.disregardSearchExcludeSettings)}expandSearchPathPatterns(e){if(!e||!e.length)return[];const t=e.flatMap(n=>{let{pathPortion:s,globPortion:o}=nD(n);return o&&(o=yv(o)),this.expandOneSearchPath(s).flatMap(c=>this.resolveOneSearchPathPattern(c,o))}),i=new Map;return t.forEach(n=>{const s=n.searchPath.toString(),o=i.get(s);o?n.pattern&&(o.pattern=o.pattern||{},o.pattern[n.pattern]=!0):i.set(s,{searchPath:n.searchPath,pattern:n.pattern?bv(n.pattern):void 0})}),Array.from(i.values())}expandOneSearchPath(e){if(mg(e)){const t=this.workspaceContextService.getWorkspace().folders;return t[0]&&t[0].uri.scheme!==Y.file?[{searchPath:t[0].uri.with({path:e})}]:[{searchPath:y.file(Po(e))}]}if(this.workspaceContextService.getWorkbenchState()===2){const t=this.workspaceContextService.getWorkspace().folders[0].uri;if(e=Lf(e),e.startsWith("../")||e===".."){const n=Fe.resolve(t.path,e);return[{searchPath:t.with({path:n})}]}const i=yv(e);return[{searchPath:t,pattern:i}]}else{if(e==="./"||e===".\\")return[];{const t=e.replace(/^\.[\/\\]/,""),n=this.workspaceContextService.getWorkspace().folders.map(s=>{const o=t.match(new RegExp(`^${Ao(s.name)}(?:/(.*)|$)`));return o?{match:o,folder:s}:null}).filter(as);if(n.length)return n.map(s=>{const o=s.match[1];return{searchPath:s.folder.uri,pattern:o&&yv(o)}});{const s=e.match(/\.[\/\\](.+)[\/\\]?/),o=s?s[1]:e,a=f("vs/workbench/services/search/common/queryBuilder","search.noWorkspaceWithName","Workspace folder does not exist: {0}",o);throw new Error(a)}}}}resolveOneSearchPathPattern(e,t){const i=e.pattern&&t?`${e.pattern}/${t}`:e.pattern||t,n=[{searchPath:e.searchPath,pattern:i}];return i&&!i.endsWith("**")&&n.push({searchPath:e.searchPath,pattern:i+"/**"}),n}getFolderQueryForSearchPath(e,t,i){const n=this.getFolderQueryForRoot(A0(e.searchPath),t,i,!1);return n?{...n,includePattern:e.pattern}:null}getFolderQueryForRoot(e,t,i,n){var d,h,g,b;let s;const o=y.isUri(e)?e:e.uri;if(i.searchPaths){const _=i.searchPaths.filter(v=>Xb(v.searchPath,o))[0];if(_&&!_.pattern)return null;_&&(s=_.pattern)}const a=this.configurationService.getValue({resource:o}),l={...this.getExcludesForFolder(a,t)||{},...s||{}},u=y.isUri(e)?cs(e):e.name;return{folder:o,folderName:n?u:void 0,excludePattern:Object.keys(l).length>0?l:void 0,fileEncoding:a.files&&a.files.encoding,disregardIgnoreFiles:typeof t.disregardIgnoreFiles=="boolean"?t.disregardIgnoreFiles:!((d=a.search)!=null&&d.useIgnoreFiles),disregardGlobalIgnoreFiles:typeof t.disregardGlobalIgnoreFiles=="boolean"?t.disregardGlobalIgnoreFiles:!((h=a.search)!=null&&h.useGlobalIgnoreFiles),disregardParentIgnoreFiles:typeof t.disregardParentIgnoreFiles=="boolean"?t.disregardParentIgnoreFiles:!((g=a.search)!=null&&g.useParentIgnoreFiles),ignoreSymlinks:typeof t.ignoreSymlinks=="boolean"?t.ignoreSymlinks:!((b=a.search)!=null&&b.followSymlinks)}}};S2=H([$(0,j1),$(1,zg),$(2,d7),$(3,Je),$(4,iD)],S2);function nD(r){const e=r.match(/[\*\{\}\(\)\[\]\?]/);if(e){const t=e.index,i=r.substr(0,t).match(/[/|\\][^/\\]*$/);if(i){let n=r.substr(0,i.index);return n.match(/[/\\]/)||(n+="/"),{pathPortion:n,globPortion:r.substr((i.index||0)+1)}}}return{pathPortion:r}}function bv(...r){return r.length?r.reduce((e,t)=>(e[t]=!0,e),Object.create(null)):void 0}function rD(r){return nm(r,",").map(e=>e.trim()).filter(e=>!!e.length)}function sD(r){return[`**/${r}/**`,`**/${r}`].map(t=>t.replace(/\*\*\/\*\*/g,"**"))}function Lf(r){return r.replace(/\\/g,"/")}function yv(r){return Lf(r).replace(/^\.\//,"").replace(/\/+$/g,"")}const oD=7e3;function aD(r,e){const t=e.activationEvents;if(!t)return Promise.resolve(void 0);const i=[],n=[];for(const u of t)if(/^workspaceContains:/.test(u)){const d=u.substr(18);d.indexOf("*")>=0||d.indexOf("?")>=0||r.forceUsingSearch?n.push(d):i.push(d)}if(i.length===0&&n.length===0)return Promise.resolve(void 0);const{promise:s,resolve:o}=bE(),a=u=>o({activationEvent:u}),c=Promise.all(i.map(u=>cD(r,u,a))).then(()=>{}),l=lD(r,e.identifier,n,a);return Promise.all([c,l]).then(()=>{o(void 0)}),s}async function cD(r,e,t){for(const i of r.folders)if(await r.exists(Lo(y.revive(i),e))){t(`workspaceContains:${e}`);return}}async function lD(r,e,t,i){if(t.length===0)return Promise.resolve(void 0);const n=new kt,s=r.checkExists(r.folders,t,n.token),o=setTimeout(async()=>{n.cancel(),r.logService.info(`Not activating extension '${e.value}': Timed out while searching for 'workspaceContains' pattern ${t.join(",")}`)},oD);let a=!1;try{a=await s}catch(c){Yr(c)||Ni(c)}n.dispose(),clearTimeout(o),a&&i(`workspaceContains:${t.join(",")}`)}class E2{constructor(e){this._onDidChangePassword=new A,this.onDidChangePassword=this._onDidChangePassword.event,this._proxy=e.getProxy(G.MainThreadSecretState)}async $onDidChangePassword(e){this._onDidChangePassword.fire(e)}get(e,t){return this._proxy.$getPassword(e,t)}store(e,t,i){return this._proxy.$setPassword(e,t,i)}delete(e,t){return this._proxy.$deletePassword(e,t)}}const xv=ie("IExtHostSecretState");class uD{constructor(e,t){le(this,Br,void 0);this._onDidChange=new A,this.onDidChange=this._onDidChange.event,this._id=Xe.toKey(e.identifier),J(this,Br,t),I(this,Br).onDidChangePassword(i=>{i.extensionId===this._id&&this._onDidChange.fire({key:i.key})})}get(e){return I(this,Br).get(this._id,e)}store(e,t){return I(this,Br).store(this._id,e,t)}delete(e){return I(this,Br).delete(this._id,e)}}Br=new WeakMap;let Cv=class{constructor(e,t,i){this.logService=i,this.bundleCache=new Map,this._proxy=t.getProxy(G.MainThreadLocalization),this.currentLanguage=e.environment.appLanguage,this.isDefaultLanguage=this.currentLanguage===ts}getMessage(e,t){var c;const{message:i,args:n,comment:s}=t;if(this.isDefaultLanguage)return Rb(i,n??{});let o=i;s&&s.length>0&&(o+=`/${Array.isArray(s)?s.join(""):s}`);const a=(c=this.bundleCache.get(e))==null?void 0:c.contents[o];return a||this.logService.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),Rb(a??i,n??{})}getBundle(e){var t;return(t=this.bundleCache.get(e))==null?void 0:t.contents}getBundleUri(e){var t;return(t=this.bundleCache.get(e))==null?void 0:t.uri}async initializeLocalizedMessages(e){var n;if(this.isDefaultLanguage||!e.l10n&&!e.isBuiltin||this.bundleCache.has(e.identifier.value))return;let t;const i=await this.getBundleLocation(e);if(!i){this.logService.error(`No bundle location found for extension ${e.identifier.value}`);return}try{const s=await this._proxy.$fetchBundleContents(i),o=JSON.parse(s);t=e.isBuiltin?(n=o.contents)==null?void 0:n.bundle:o}catch(s){this.logService.error(`Failed to load translations for ${e.identifier.value} from ${i}: ${s.message}`);return}t&&this.bundleCache.set(e.identifier.value,{contents:t,uri:i})}async getBundleLocation(e){if(e.isBuiltin){const t=await this._proxy.$fetchBuiltInBundleUri(e.identifier.value,this.currentLanguage);return y.revive(t)}return e.l10n?y.joinPath(e.extensionLocation,e.l10n,`bundle.l10n.${this.currentLanguage}.json`):void 0}};Cv=H([$(0,Wt),$(1,We),$(2,Je)],Cv);const Sv=ie("IExtHostLocalizationService"),Ev=ie("IExtHostManagedSockets");let kv=class{constructor(e){this._remoteSocketIdCounter=0,this._factory=null,this._managedRemoteSockets=new Map,this._proxy=e.getProxy(G.MainThreadManagedSockets)}setFactory(e,t){for(const i of this._managedRemoteSockets.values())i.dispose();this._factory&&this._proxy.$unregisterSocketFactory(this._factory.socketFactoryId),this._factory=new dD(e,t),this._proxy.$registerSocketFactory(this._factory.socketFactoryId)}async $openRemoteSocket(e){if(!this._factory||this._factory.socketFactoryId!==e)throw new Error(`No socket factory with id ${e}`);const t=++this._remoteSocketIdCounter,i=await this._factory.makeConnection(),n=new Pe;return this._managedRemoteSockets.set(t,new hD(t,i,n)),n.add(Ce(()=>this._managedRemoteSockets.delete(t))),n.add(i.onDidEnd(()=>{this._proxy.$onDidManagedSocketEnd(t),n.dispose()})),n.add(i.onDidClose(s=>{this._proxy.$onDidManagedSocketClose(t,(s==null?void 0:s.stack)??(s==null?void 0:s.message)),n.dispose()})),n.add(i.onDidReceiveMessage(s=>this._proxy.$onDidManagedSocketHaveData(t,ve.wrap(s)))),t}$remoteSocketWrite(e,t){var i;(i=this._managedRemoteSockets.get(e))==null||i.actual.send(t.buffer)}$remoteSocketEnd(e){const t=this._managedRemoteSockets.get(e);t&&(t.actual.end(),t.dispose())}async $remoteSocketDrain(e){var t,i,n;await((n=(t=this._managedRemoteSockets.get(e))==null?void 0:(i=t.actual).drain)==null?void 0:n.call(i))}};kv=H([$(0,We)],kv);class dD{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}}class hD extends Ne{constructor(e,t,i){super(),this.socketId=e,this.actual=t,this._register(i)}}var Dv;const k2=ie("IHostUtils");let Iv=Dv=class extends Ne{constructor(e,t,i,n,s,o,a,c,l,u,d,h,g){super(),this._extHostManagedSockets=h,this._extHostLanguageModels=g,this._onDidChangeRemoteConnectionData=this._register(new A),this.onDidChangeRemoteConnectionData=this._onDidChangeRemoteConnectionData.event,this._realPathCache=new Map,this._isTerminating=!1,this._hostUtils=t,this._extHostContext=i,this._initData=a,this._extHostWorkspace=n,this._extHostConfiguration=s,this._logService=o,this._extHostTunnelService=l,this._extHostTerminalService=u,this._extHostLocalizationService=d,this._mainThreadWorkspaceProxy=this._extHostContext.getProxy(G.MainThreadWorkspace),this._mainThreadTelemetryProxy=this._extHostContext.getProxy(G.MainThreadTelemetry),this._mainThreadExtensionsProxy=this._extHostContext.getProxy(G.MainThreadExtensionService),this._almostReadyToRunExtensions=new Bi,this._readyToStartExtensionHost=new Bi,this._readyToRunExtensions=new Bi,this._eagerExtensionsActivated=new Bi,this._activationEventsReader=new pD(this._initData.extensions.activationEvents),this._globalRegistry=new Us(this._activationEventsReader,this._initData.extensions.allExtensions);const b=new _s(this._initData.extensions.myExtensions);this._myRegistry=new Us(this._activationEventsReader,P2(this._globalRegistry,b)),is&&(this._logService.info(`Creating extension host with the following global extensions: ${Oa(this._globalRegistry)}`),this._logService.info(`Creating extension host with the following local extensions: ${Oa(this._myRegistry)}`)),this._storage=new Qx(this._extHostContext,this._logService),this._secretState=new E2(this._extHostContext),this._storagePath=c,this._instaService=e.createChild(new Bg([X1,this._storage],[xv,this._secretState])),this._activator=this._register(new J1(this._myRegistry,this._globalRegistry,{onExtensionActivationError:(_,v,E)=>{this._mainThreadExtensionsProxy.$onExtensionActivationError(_,Ju(v),E)},actualActivateExtension:async(_,v)=>{if(Us.isHostExtension(_,this._myRegistry,this._globalRegistry))return await this._mainThreadExtensionsProxy.$activateExtension(_,v),new D9;const E=this._myRegistry.getExtensionDescription(_);return this._activateExtension(E,v)}},this._logService)),this._extensionPathIndex=null,this._resolvers=Object.create(null),this._started=!1,this._remoteConnectionData=this._initData.remote.connectionData}getRemoteConnectionData(){return this._remoteConnectionData}async initialize(){try{await this._beforeAlmostReadyToRunExtensions(),this._almostReadyToRunExtensions.open(),await this._extHostWorkspace.waitForInitializeCall(),wi("code/extHost/ready"),this._readyToStartExtensionHost.open(),this._initData.autoStart&&this._startExtensionHost()}catch(e){Ni(e)}}async _deactivateAll(){this._storagePath.onWillDeactivateAll();let e=[];try{e=this._myRegistry.getAllExtensionDescriptions().map(s=>s.identifier).filter(s=>this.isActivated(s)).map(s=>this._deactivate(s))}catch{}await Promise.all(e)}terminate(e,t=0){if(this._isTerminating)return;this._isTerminating=!0,this._logService.info(`Extension host terminating: ${e}`),this._logService.flush(),this._extHostTerminalService.dispose(),this._activator.dispose(),Dc&&So(n=>{this._logService.error(n)}),this._extHostContext.dispose();const i=this._deactivateAll();Promise.race([mr(5e3),i]).finally(()=>{this._hostUtils.pid?this._logService.info(`Extension host with pid ${this._hostUtils.pid} exiting with code ${t}`):this._logService.info(`Extension host exiting with code ${t}`),this._logService.flush(),this._logService.dispose(),this._hostUtils.exit(t)})}isActivated(e){return this._readyToRunExtensions.isOpen()?this._activator.isActivated(e):!1}async getExtension(e){const t=await this._mainThreadExtensionsProxy.$getExtension(e);return t&&{...t,identifier:new Xe(t.identifier.value),extensionLocation:y.revive(t.extensionLocation)}}_activateByEvent(e,t){return this._activator.activateByEvent(e,t)}_activateById(e,t){return this._activator.activateById(e,t)}activateByIdWithErrors(e,t){return this._activateById(e,t).then(()=>{const i=this._activator.getActivatedExtension(e);if(i.activationFailed)return Promise.reject(i.activationFailedError)})}getExtensionRegistry(){return this._readyToRunExtensions.wait().then(e=>this._myRegistry)}getExtensionExports(e){if(this._readyToRunExtensions.isOpen())return this._activator.getActivatedExtension(e).exports;try{return this._activator.getActivatedExtension(e).exports}catch{return null}}async _realPathExtensionUri(e){if(e.scheme===Y.file&&this._hostUtils.fsRealpath){const t=e.fsPath;this._realPathCache.has(t)||this._realPathCache.set(t,this._hostUtils.fsRealpath(t));const i=await this._realPathCache.get(t);return y.file(i)}return e}async getExtensionPathIndex(){return this._extensionPathIndex||(this._extensionPathIndex=this._createExtensionPathIndex(this._myRegistry.getAllExtensionDescriptions()).then(e=>new fD(e))),this._extensionPathIndex}async _createExtensionPathIndex(e){const t=Pi.forUris(i=>gE.ignorePathCasing(i));return await Promise.all(e.map(async i=>{if(this._getEntryPoint(i)){const n=await this._realPathExtensionUri(i.extensionLocation);t.set(n,i)}})),t}_deactivate(e){let t=Promise.resolve(void 0);if(!this._readyToRunExtensions.isOpen()||!this._activator.isActivated(e))return t;const i=this._activator.getActivatedExtension(e);if(!i)return t;try{typeof i.module.deactivate=="function"&&(t=Promise.resolve(i.module.deactivate()).then(void 0,n=>(this._logService.error(n),Promise.resolve(void 0))))}catch(n){this._logService.error(`An error occurred when deactivating the extension '${e.value}':`),this._logService.error(n)}try{es(i.subscriptions)}catch(n){this._logService.error(`An error occurred when deactivating the subscriptions for extension '${e.value}':`),this._logService.error(n)}return t}async _activateExtension(e,t){return this._initData.remote.isRemote?this._mainThreadExtensionsProxy.$onWillActivateExtension(e.identifier):await this._mainThreadExtensionsProxy.$onWillActivateExtension(e.identifier),this._doActivateExtension(e,t).then(i=>{const n=i.activationTimes;return this._mainThreadExtensionsProxy.$onDidActivateExtension(e.identifier,n.codeLoadingTime,n.activateCallTime,n.activateResolvedTime,t),this._logExtensionActivationTimes(e,t,"success",n),i},i=>{throw this._logExtensionActivationTimes(e,t,"failure"),i})}_logExtensionActivationTimes(e,t,i,n){const s=I2(e,t);this._mainThreadTelemetryProxy.$publicLog2("extensionActivationTimes",{...s,...n||{},outcome:i})}_doActivateExtension(e,t){const i=I2(e,t);this._mainThreadTelemetryProxy.$publicLog2("activatePlugin",i);const n=this._getEntryPoint(e);if(!n)return Promise.resolve(new k9(Ia.NONE));this._logService.info(`ExtensionService#_doActivateExtension ${e.identifier.value}, startup: ${t.startup}, activationEvent: '${t.activationEvent}'${e.identifier.value!==t.extensionId.value?`, root cause: ${t.extensionId.value}`:""}`),this._logService.flush();const s=new Gx(t.startup);return Promise.all([this._loadCommonJSModule(e,Lo(e.extensionLocation,n),s),this._loadExtensionContext(e)]).then(o=>(wi(`code/extHost/willActivateExtension/${e.identifier.value}`),Dv._callActivate(this._logService,e.identifier,o[0],o[1],s))).then(o=>(wi(`code/extHost/didActivateExtension/${e.identifier.value}`),o))}_loadExtensionContext(e){const t=this._extHostLanguageModels.createLanguageModelAccessInformation(e),i=new I9(e,this._storage),n=new Jx(e.identifier.value,!1,this._storage),s=new uD(e,this._secretState),o=e.isUnderDevelopment?this._initData.environment.extensionTestsLocationURI?ua.Test:ua.Development:ua.Production,a=this._initData.remote.isRemote?Ls.Workspace:Ls.UI;return this._logService.trace(`ExtensionService#loadExtensionContext ${e.identifier.value}`),Promise.all([i.whenReady,n.whenReady,this._storagePath.whenReady]).then(()=>{var h;const c=this;let l,u;const d=At(e,"ipc")?(h=this._initData.messagePorts)==null?void 0:h.get(Xe.toKey(e.identifier)):void 0;return Object.freeze({globalState:i,workspaceState:n,secrets:s,subscriptions:[],get languageModelAccessInformation(){return t},get extensionUri(){return e.extensionLocation},get extensionPath(){return e.extensionLocation.fsPath},asAbsolutePath(g){return yb(e.extensionLocation.fsPath,g)},get storagePath(){var g;return(g=c._storagePath.workspaceValue(e))==null?void 0:g.fsPath},get globalStoragePath(){return c._storagePath.globalValue(e).fsPath},get logPath(){return yb(c._initData.logsLocation.fsPath,e.identifier.value)},get logUri(){return y.joinPath(c._initData.logsLocation,e.identifier.value)},get storageUri(){return c._storagePath.workspaceValue(e)},get globalStorageUri(){return c._storagePath.globalValue(e)},get extensionMode(){return o},get extension(){return l===void 0&&(l=new Vl(c,e.identifier,e,a,!1)),l},get extensionRuntime(){return M(e,"extensionRuntime"),c.extensionRuntime},get environmentVariableCollection(){return c._extHostTerminalService.getEnvironmentVariableCollection(e)},get messagePassingProtocol(){if(!u){if(!d)return;const g=St.buffer(St.fromDOMEventEmitter(d,"message",b=>b.data));d.start(),u={onDidReceiveMessage:g,postMessage:d.postMessage.bind(d)}}return u}})})}static _callActivate(e,t,i,n,s){return i=i||{activate:void 0,deactivate:void 0},this._callActivateOptional(e,t,i,n,s).then(o=>new Df(!1,null,s.build(),i,o,n.subscriptions))}static _callActivateOptional(e,t,i,n,s){if(typeof i.activate=="function")try{s.activateCallStart(),e.trace(`ExtensionService#_callActivateOptional ${t.value}`);const o=typeof global=="object"?global:self,a=i.activate.apply(o,[n]);return s.activateCallStop(),s.activateResolveStart(),Promise.resolve(a).then(c=>(s.activateResolveStop(),c))}catch(o){return Promise.reject(o)}else return Promise.resolve(i)}_activateOneStartupFinished(e,t){this._activateById(e.identifier,{startup:!1,extensionId:e.identifier,activationEvent:t}).then(void 0,i=>{this._logService.error(i)})}_activateAllStartupFinishedDeferred(e,t=0){const n=Date.now();fb(()=>{for(let s=t;s<e.length;s+=1){const o=e[s];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-n>50){this._activateAllStartupFinishedDeferred(e,s);break}else this._activateOneStartupFinished(o,a)}})}_activateAllStartupFinished(){this._mainThreadExtensionsProxy.$setPerformanceMarks(i4()),this._extHostConfiguration.getConfigProvider().then(e=>{const t=e.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),i=this._myRegistry.getAllExtensionDescriptions();if(t)this._activateAllStartupFinishedDeferred(i);else for(const n of i)if(n.activationEvents)for(const s of n.activationEvents)s==="onStartupFinished"&&this._activateOneStartupFinished(n,s)})}_handleEagerExtensions(){const e=this._activateByEvent("*",!0).then(void 0,o=>{this._logService.error(o)});this._register(this._extHostWorkspace.onDidChangeWorkspace(o=>this._handleWorkspaceContainsEagerExtensions(o.added)));const t=this._extHostWorkspace.workspace?this._extHostWorkspace.workspace.folders:[],i=this._handleWorkspaceContainsEagerExtensions(t),n=this._handleRemoteResolverEagerExtensions(),s=Promise.all([n,e,i]).then(()=>{});return Promise.race([s,mr(1e4)]).then(()=>{this._activateAllStartupFinished()}),s}_handleWorkspaceContainsEagerExtensions(e){return e.length===0?Promise.resolve(void 0):Promise.all(this._myRegistry.getAllExtensionDescriptions().map(t=>this._handleWorkspaceContainsEagerExtension(e,t))).then(()=>{})}async _handleWorkspaceContainsEagerExtension(e,t){if(this.isActivated(t.identifier))return;const i=!this._initData.remote.isRemote&&!!this._initData.remote.authority,n={logService:this._logService,folders:e.map(o=>o.uri),forceUsingSearch:i||!this._hostUtils.fsExists,exists:o=>this._hostUtils.fsExists(o.fsPath),checkExists:(o,a,c)=>this._mainThreadWorkspaceProxy.$checkExists(o,a,c)},s=await aD(n,t);if(s)return this._activateById(t.identifier,{startup:!0,extensionId:t.identifier,activationEvent:s.activationEvent}).then(void 0,o=>this._logService.error(o))}async _handleRemoteResolverEagerExtensions(){if(this._initData.remote.authority)return this._activateByEvent(`onResolveRemoteAuthority:${this._initData.remote.authority}`,!1)}async $extensionTestsExecute(){await this._eagerExtensionsActivated.wait();try{return await this._doHandleExtensionTests()}catch(e){throw console.error(e),e}}async _doHandleExtensionTests(){const{extensionDevelopmentLocationURI:e,extensionTestsLocationURI:t}=this._initData.environment;if(!e||!t)throw new Error(f("vs/workbench/api/common/extHostExtensionService","extensionTestError1","Cannot load test runner."));const i=await this._loadCommonJSModule(null,t,new Gx(!1));if(!i||typeof i.run!="function")throw new Error(f("vs/workbench/api/common/extHostExtensionService","extensionTestError","Path {0} does not point to a valid extension test runner.",t.toString()));return new Promise((n,s)=>{const o=(l,u)=>{l?(is&&this._logService.error("Test runner called back with error",l),s(l)):(is&&(u?this._logService.info(`Test runner called back with ${u} failures.`):this._logService.info("Test runner called back with successful outcome.")),n(typeof u=="number"&&u>0?1:0))},a=Wi(t),c=i.run(a,o);c&&c.then&&c.then(()=>{is&&this._logService.info("Test runner finished successfully."),n(0)}).catch(l=>{is&&this._logService.error("Test runner finished with error",l),s(l instanceof Error&&l.stack?l.stack:String(l))})})}_startExtensionHost(){if(this._started)throw new Error("Extension host is already started!");return this._started=!0,this._readyToStartExtensionHost.wait().then(()=>this._readyToRunExtensions.open()).then(()=>Promise.race([this._activator.waitForActivatingExtensions(),mr(1e3)])).then(()=>this._handleEagerExtensions()).then(()=>{this._eagerExtensionsActivated.open(),this._logService.info("Eager extensions activated")})}registerRemoteAuthorityResolver(e,t){return this._resolvers[e]=t,Ce(()=>{delete this._resolvers[e]})}async getRemoteExecServer(e){var i;const{resolver:t}=await this._activateAndGetResolver(e);return(i=t==null?void 0:t.resolveExecServer)==null?void 0:i.call(t,e,{resolveAttempt:0})}async _activateAndGetResolver(e){const t=e.indexOf("+");if(t===-1)throw new un("Not an authority that can be resolved!",Dn.InvalidAuthority);const i=e.substr(0,t);return await this._almostReadyToRunExtensions.wait(),await this._activateByEvent(`onResolveRemoteAuthority:${i}`,!1),{authorityPrefix:i,resolver:this._resolvers[i]}}async $resolveAuthority(e,t){var k;const i=xn.create(!1),n=()=>`[resolveAuthority(${cx(e)},${t})][${i.elapsed()}ms] `,s=S=>this._logService.info(`${n()}${S}`),o=S=>this._logService.warn(`${n()}${S}`),a=(S,O=void 0)=>this._logService.error(`${n()}${S}`,O),c=S=>{if(S instanceof un)return{type:"error",error:{code:S._code,message:S._message,detail:S._detail}};throw S},l=async S=>{s(`activating resolver for ${S}...`);const{resolver:O,authorityPrefix:T}=await this._activateAndGetResolver(S);if(!O)throw a(`no resolver for ${T}`),new un(`No remote extension installed to resolve ${T}.`,Dn.NoResolverFound);return{resolver:O,authorityPrefix:T,remoteAuthority:S}},u=e.split(/@|%40/g).reverse();s(`activating remote resolvers ${u.join(" -> ")}`);let d;try{d=await Promise.all(u.map(l)).catch(async S=>{if(!(S instanceof un)||S._code!==Dn.InvalidAuthority)throw S;return o(`resolving nested authorities failed: ${S.message}`),[await l(e)]})}catch(S){return c(S)}const h=new EE;h.cancelAndSet(()=>s("waiting..."),1e3);let g,b;for(const[S,{authorityPrefix:O,resolver:T,remoteAuthority:z}]of d.entries())try{if(S===d.length-1)s("invoking final resolve()..."),wi(`code/extHost/willResolveAuthority/${O}`),g=await T.resolve(z,{resolveAttempt:t,execServer:b}),wi(`code/extHost/didResolveAuthorityOK/${O}`),s("setting tunnel factory..."),this._register(await this._extHostTunnelService.setTunnelFactory(T,Kd.isManagedResolvedAuthority(g)?g:void 0));else{if(s(`invoking resolveExecServer() for ${z}`),wi(`code/extHost/willResolveExecServer/${O}`),b=await((k=T.resolveExecServer)==null?void 0:k.call(T,z,{resolveAttempt:t,execServer:b})),!b)throw new un(`Exec server was not available for ${z}`,Dn.NoResolverFound);wi(`code/extHost/didResolveExecServerOK/${O}`)}}catch(ae){return wi(`code/extHost/didResolveAuthorityError/${O}`),a("returned an error",ae),h.dispose(),c(ae)}h.dispose();const _={environmentTunnels:g.environmentTunnels,features:g.tunnelFeatures?{elevation:g.tunnelFeatures.elevation,privacyOptions:g.tunnelFeatures.privacyOptions,protocol:g.tunnelFeatures.protocol===void 0?!0:g.tunnelFeatures.protocol}:void 0},v={extensionHostEnv:g.extensionHostEnv,isTrusted:g.isTrusted,authenticationSession:g.authenticationSessionForInitializingExtensions?{id:g.authenticationSessionForInitializingExtensions.id,providerId:g.authenticationSessionForInitializingExtensions.providerId}:void 0};s(`returned ${Kd.isManagedResolvedAuthority(g)?"managed authority":`${g.host}:${g.port}`}`);let E;if(Kd.isManagedResolvedAuthority(g)){const S=t;this._extHostManagedSockets.setFactory(S,g.makeConnection),E={authority:e,connectTo:new C7(S),connectionToken:g.connectionToken}}else E={authority:e,connectTo:new S7(g.host,g.port),connectionToken:g.connectionToken};return{type:"ok",value:{authority:E,options:v,tunnelInformation:_}}}async $getCanonicalURI(e,t){this._logService.info(`$getCanonicalURI invoked for authority (${cx(e)})`);const{resolver:i}=await this._activateAndGetResolver(e);if(!i)return null;const n=y.revive(t);if(typeof i.getCanonicalURI>"u")return n;const s=await Ht(()=>i.getCanonicalURI(n));return s||n}async $startExtensionHost(e){e.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:t,myExtensions:i}=D2(this._activationEventsReader,this._globalRegistry,this._myRegistry,e),n=await this._createExtensionPathIndex(i);return(await this.getExtensionPathIndex()).setSearchTree(n),this._globalRegistry.set(t.getAllExtensionDescriptions()),this._myRegistry.set(i),is&&(this._logService.info(`$startExtensionHost: global extensions: ${Oa(this._globalRegistry)}`),this._logService.info(`$startExtensionHost: local extensions: ${Oa(this._myRegistry)}`)),this._startExtensionHost()}$activateByEvent(e,t){return t===1?this._almostReadyToRunExtensions.wait().then(i=>this._activateByEvent(e,!1)):this._readyToRunExtensions.wait().then(i=>this._activateByEvent(e,!1))}async $activate(e,t){return await this._readyToRunExtensions.wait(),this._myRegistry.getExtensionDescription(e)?(await this._activateById(e,t),!0):!1}async $deltaExtensions(e){e.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:t,myExtensions:i}=D2(this._activationEventsReader,this._globalRegistry,this._myRegistry,e),n=await this._createExtensionPathIndex(i);return(await this.getExtensionPathIndex()).setSearchTree(n),this._globalRegistry.set(t.getAllExtensionDescriptions()),this._myRegistry.set(i),is&&(this._logService.info(`$deltaExtensions: global extensions: ${Oa(this._globalRegistry)}`),this._logService.info(`$deltaExtensions: local extensions: ${Oa(this._myRegistry)}`)),Promise.resolve(void 0)}async $test_latency(e){return e}async $test_up(e){return e.byteLength}async $test_down(e){const t=ve.alloc(e),i=Math.random()%256;for(let n=0;n<e;n++)t.writeUInt8(i,n);return t}async $updateRemoteConnectionData(e){this._remoteConnectionData=e,this._onDidChangeRemoteConnectionData.fire()}};Iv=Dv=H([$(0,vd),$(1,k2),$(2,We),$(3,$n),$(4,Nn),$(5,Je),$(6,Wt),$(7,Z1),$(8,rv),$(9,Ra),$(10,Sv),$(11,Ev),$(12,gv)],Iv);function D2(r,e,t,i){r.addActivationEvents(i.addActivationEvents);const n=new Us(r,e.getAllExtensionDescriptions());n.deltaExtensions(i.toAdd,i.toRemove);const s=new _s(t.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of i.myToRemove)s.delete(a);for(const a of i.myToAdd)s.add(a);const o=P2(n,s);return{globalRegistry:n,myExtensions:o}}function I2(r,e){return{id:r.identifier.value,name:r.name,extensionVersion:r.version,publisherDisplayName:r.publisher,activationEvents:r.activationEvents?r.activationEvents.join(","):null,isBuiltin:r.isBuiltin,reason:e.activationEvent,reasonId:e.extensionId.value}}function Oa(r){return r.getAllExtensionDescriptions().map(e=>e.identifier.value).join(",")}const Mr=ie("IExtHostExtensionService");class Vl{constructor(e,t,i,n,s){le(this,Zs,void 0);le(this,ku,void 0);le(this,eo,void 0);J(this,Zs,e),J(this,ku,t),J(this,eo,i.identifier),this.id=i.identifier.value,this.extensionUri=i.extensionLocation,this.extensionPath=Po(Wi(i.extensionLocation)),this.packageJSON=i,this.extensionKind=n,this.isFromDifferentExtensionHost=s}get isActive(){return I(this,Zs).isActivated(I(this,eo))}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return I(this,Zs).getExtensionExports(I(this,eo))}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await I(this,Zs).activateByIdWithErrors(I(this,eo),{startup:!1,extensionId:I(this,ku),activationEvent:"api"}),this.exports}}Zs=new WeakMap,ku=new WeakMap,eo=new WeakMap;function P2(r,e){return r.getAllExtensionDescriptions().filter(t=>e.has(t.identifier))}class fD{constructor(e){this._searchTree=e}setSearchTree(e){this._searchTree=e}findSubstr(e){return this._searchTree.findSubstr(e)}forEach(e){return this._searchTree.forEach(e)}}class pD{constructor(e){this._map=new br,this.addActivationEvents(e)}readActivationEvents(e){return this._map.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this._map.set(t,e[t])}}class gD extends Ne{constructor(e,t=[]){super(),this.logger=new ik([e,...t]),this._register(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.logger.onDidChangeLogLevel}setLevel(e){this.logger.setLevel(e)}getLevel(){return this.logger.getLevel()}trace(e,...t){this.logger.trace(e,...t)}debug(e,...t){this.logger.debug(e,...t)}info(e,...t){this.logger.info(e,...t)}warn(e,...t){this.logger.warn(e,...t)}error(e,...t){this.logger.error(e,...t)}flush(){this.logger.flush()}}let Pv=class extends gD{constructor(e,t,i){const n=i.remote.isRemote?"remoteexthost":e?"workerexthost":"exthost",s=i.remote.isRemote?f("vs/workbench/api/common/extHostLogService","remote","Extension Host (Remote)"):e?f("vs/workbench/api/common/extHostLogService","worker","Extension Host (Worker)"):f("vs/workbench/api/common/extHostLogService","local","Extension Host");super(t.createLogger(n,{name:s}))}};Pv=H([$(1,No),$(2,Wt)],Pv);let Of=class extends nk{constructor(e,t){super(t.logLevel,t.logsLocation,t.loggers.map(i=>on(i))),this._proxy=e.getProxy(G.MainThreadLogger)}$setLogLevel(e,t){t?this.setLogLevel(y.revive(t),e):this.setLogLevel(e)}setVisibility(e,t){super.setVisibility(e,t),this._proxy.$setVisibility(e,t)}doCreateLogger(e,t,i){return new mD(this._proxy,e,t,i)}};Of=H([$(0,We),$(1,Wt)],Of);class mD extends w0{constructor(e,t,i,n){super((n==null?void 0:n.logLevel)==="always"),this.proxy=e,this.file=t,this.isLoggerCreated=!1,this.buffer=[],this.setLevel(i),this.proxy.$createLogger(t,n).then(()=>{this.doLog(this.buffer),this.isLoggerCreated=!0})}log(e,t){const i=[[e,t]];this.isLoggerCreated?this.doLog(i):this.buffer.push(...i)}doLog(e){this.proxy.$log(this.file,e)}flush(){this.proxy.$flush(this.file)}}class T2{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(Je),n=e.get(We).getProxy(G.MainThreadErrors);So(s=>{t.error(s);const o=Ju(s);n.$onUnexpectedError(o)})}static async installFullHandler(e){const t=e.get(Je),i=e.get(We),n=e.get(Mr),s=e.get(Tf),o=i.getProxy(G.MainThreadExtensionService),a=i.getProxy(G.MainThreadErrors),c=await n.getExtensionPathIndex(),l=new WeakMap;function u(g,b){if(l.has(g))return l.get(g).stack;let _="",v,E;for(const S of b)_+=`
	at ${S.toString()}`,E=S.getFileName(),!v&&E&&(v=c.findSubstr(y.file(E)));const k=`${g.name||"Error"}: ${g.message||""}${_}`;return l.set(g,{extensionIdentifier:v==null?void 0:v.identifier,stack:k}),k}const d=Symbol("prepareStackTrace wrapped");let h=u;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return h},set(g){if(g===u||!g||g[d]){h=g||u;return}h=function(b,_){return u(b,_),g.call(Error,b,_)},Object.assign(h,{[d]:!0})}}),So(g=>{t.error(g);const b=Ju(g),_=l.get(g);if(!(_!=null&&_.extensionIdentifier)){a.$onUnexpectedError(b);return}o.$onExtensionRuntimeError(_.extensionIdentifier,b);const v=s.onExtensionError(_.extensionIdentifier,g);t.trace("forwarded error to extension?",v,_)})}}class Tv{constructor(e,t,i,n,s){this._hostUtils=i,this._rpcProtocol=new Ng(e,null,n),t=Tv._transform(t,this._rpcProtocol);const o=new Bg(...ok());o.set(Wt,{_serviceBrand:void 0,...t,messagePorts:s}),o.set(We,new lk(this._rpcProtocol)),o.set(Cd,new uk(n)),o.set(k2,i),o.set(Je,new sn(Pv,[!0],!0)),o.set(No,new sn(Of,[],!0));const a=new xd(o,!0);Dc&&a.invokeFunction(T2.installEarlyHandler),this._logService=a.invokeFunction(c=>c.get(Je)),wi("code/extHost/didCreateServices"),this._hostUtils.pid?this._logService.info(`Extension host with pid ${this._hostUtils.pid} started`):this._logService.info("Extension host started"),this._logService.trace("initData",t),this._extensionService=a.invokeFunction(c=>c.get(Mr)),this._extensionService.initialize(),Dc&&a.invokeFunction(T2.installFullHandler)}async asBrowserUri(e){const t=this._rpcProtocol.getProxy(G.MainThreadExtensionService);return y.revive(await t.$asBrowserUri(e))}async getAllStaticBrowserUris(){return(await this._rpcProtocol.getProxy(G.MainThreadExtensionService).$getAllStaticBrowserUris()).map(([t,i])=>[y.revive(t),y.revive(i)])}terminate(e){this._extensionService.terminate(e)}getExtHostExtensionService(){return this._extensionService}static _transform(e,t){e.extensions.allExtensions.forEach(n=>{n.extensionLocation=y.revive(t.transformIncomingURIs(n.extensionLocation))}),e.environment.appRoot=y.revive(t.transformIncomingURIs(e.environment.appRoot));const i=e.environment.extensionDevelopmentLocationURI;return i&&(e.environment.extensionDevelopmentLocationURI=i.map(n=>y.revive(t.transformIncomingURIs(n)))),e.environment.extensionTestsLocationURI=y.revive(t.transformIncomingURIs(e.environment.extensionTestsLocationURI)),e.environment.globalStorageHome=y.revive(t.transformIncomingURIs(e.environment.globalStorageHome)),e.environment.workspaceStorageHome=y.revive(t.transformIncomingURIs(e.environment.workspaceStorageHome)),e.environment.extensionTelemetryLogResource=y.revive(t.transformIncomingURIs(e.environment.extensionTelemetryLogResource)),e.nlsBaseUrl=y.revive(t.transformIncomingURIs(e.nlsBaseUrl)),e.logsLocation=y.revive(t.transformIncomingURIs(e.logsLocation)),e.workspace=t.transformIncomingURIs(e.workspace),e}}const vD=(function(e){const t=i=>{globalThis.removeEventListener("message",t);const n=i.data;Object.defineProperties(globalThis,{postMessage:{value(s,o){n.postMessage(s,o)}},onmessage:{get(){return n.onmessage},set(s){n.onmessage=s}}}),n.addEventListener("message",s=>{globalThis.dispatchEvent(new MessageEvent("message",{data:s.data,ports:s.ports?[...s.ports]:void 0}))}),n.start(),globalThis.Worker=class{constructor(){throw new TypeError("Nested workers from within nested worker are NOT supported.")}},importScripts(e)};globalThis.addEventListener("message",t)}).toString();class _D extends EventTarget{constructor(e,t,i){super(),this.onmessage=null,this.onmessageerror=null,this.onerror=null;const n=`((${vD})('${t}'))`,s=new Blob([n],{type:"application/javascript"}),o=URL.createObjectURL(s),a=new MessageChannel,c=o,l={type:"_newWorker",id:c,port:a.port2,url:o,options:i};e(l,[a.port2]),this.postMessage=a.port1.postMessage.bind(a.port1),this.terminate=()=>{e({type:"_terminateWorker",id:c}),URL.revokeObjectURL(o),a.port1.close(),a.port2.close()},Object.defineProperties(this,{onmessage:{get(){return a.port1.onmessage},set(u){a.port1.onmessage=u}},onmessageerror:{get(){return a.port1.onmessageerror},set(u){a.port1.onmessageerror=u}}}),a.port1.addEventListener("messageerror",u=>{const d=new MessageEvent("messageerror",{data:u.data});this.dispatchEvent(d)}),a.port1.addEventListener("message",u=>{const d=new MessageEvent("message",{data:u.data});this.dispatchEvent(d)}),a.port1.start()}}new Z("inOutput",!1),new Z("activeLogOutput",!1),new Z("activeLogOutput.levelSettable",!1),new Z("activeLogOutput.level",""),new Z("activeLogOutput.levelIsDefault",!1),new Z("outputView.scrollLock",!1),ie("outputService");var zl;(function(r){r[r.Append=1]="Append",r[r.Replace=2]="Replace",r[r.Clear=3]="Clear"})(zl||(zl={}));const wD={OutputChannels:"workbench.contributions.outputChannels"};class bD{constructor(){this.channels=new Map,this._onDidRegisterChannel=new A,this.onDidRegisterChannel=this._onDidRegisterChannel.event,this._onDidRemoveChannel=new A,this.onDidRemoveChannel=this._onDidRemoveChannel.event}registerChannel(e){this.channels.has(e.id)||(this.channels.set(e.id,e),this._onDidRegisterChannel.fire(e.id))}getChannels(){const e=[];return this.channels.forEach(t=>e.push(t)),e}getChannel(e){return this.channels.get(e)}removeChannel(e){this.channels.delete(e),this._onDidRemoveChannel.fire(e)}}Jt.add(wD.OutputChannels,new bD),new Z("activeOutputChannel","");function yD(r){return r.getFullYear()+"-"+String(r.getMonth()+1).padStart(2,"0")+"-"+String(r.getDate()).padStart(2,"0")+"T"+String(r.getHours()).padStart(2,"0")+":"+String(r.getMinutes()).padStart(2,"0")+":"+String(r.getSeconds()).padStart(2,"0")+"."+(r.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}class A2 extends w0{get disposed(){return this._disposed}constructor(e,t,i,n,s){super(),this.id=e,this.name=t,this.logger=i,this.proxy=n,this.extension=s,this.offset=0,this._disposed=!1,this.visible=!1,this.setLevel(i.getLevel()),this._register(i.onDidChangeLogLevel(o=>this.setLevel(o)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.offset;this.logger.flush(),this.proxy.$update(this.id,zl.Clear,e)}replace(e){const t=this.offset;this.info(e),this.proxy.$update(this.id,zl.Replace,t),this.visible&&this.logger.flush()}show(e,t){this.logger.flush(),this.proxy.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.proxy.$close(this.id)}log(e,t){this.offset+=ve.fromString(t).byteLength,tk(this.logger,e,t),this.visible&&(this.logger.flush(),this.proxy.$update(this.id,zl.Append))}dispose(){super.dispose(),this._disposed||(this.proxy.$dispose(this.id),this._disposed=!0)}}class xD extends A2{appendLine(e){this.append(e)}}let Av=class{constructor(e,t,i,n,s,o){this.initData=t,this.extHostFileSystem=i,this.extHostFileSystemInfo=n,this.loggerService=s,this.logService=o,this.extensionLogDirectoryPromise=new Map,this.namePool=1,this.channels=new Map,this.visibleChannelId=null,this.proxy=e.getProxy(G.MainThreadOutputService),this.outputsLocation=this.extHostFileSystemInfo.extUri.joinPath(t.logsLocation,`output_logging_${yD(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(e){this.visibleChannelId=e;for(const[t,i]of this.channels)i.visible=t===this.visibleChannelId}createOutputChannel(e,t,i){var l,u;if(e=e.trim(),!e)throw new Error("illegal argument `name`. must not be falsy");const n=typeof t=="object"&&t.log,s=Oe(t)?t:void 0;if(Oe(s)&&!s.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=(u=(l=this.initData.environment.extensionLogLevel)==null?void 0:l.find(([d])=>Xe.equals(i.identifier,d)))==null?void 0:u[1];a&&(o=sk(a));const c=n?this.doCreateLogOutputChannel(e,o,i):this.doCreateOutputChannel(e,s,i);return c.then(d=>{this.channels.set(d.id,d),d.visible=d.id===this.visibleChannelId}),n?this.createExtHostLogOutputChannel(e,o??this.logService.getLevel(),c):this.createExtHostOutputChannel(e,c)}async doCreateOutputChannel(e,t,i){this.outputDirectoryPromise||(this.outputDirectoryPromise=this.extHostFileSystem.value.createDirectory(this.outputsLocation).then(()=>this.outputsLocation));const n=await this.outputDirectoryPromise,s=this.extHostFileSystemInfo.extUri.joinPath(n,`${this.namePool++}-${e.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),o=this.loggerService.createLogger(s,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0}),a=await this.proxy.$register(e,s,t,i.identifier.value);return new A2(a,e,o,this.proxy,i)}async doCreateLogOutputChannel(e,t,i){const n=await this.createExtensionLogDirectory(i),s=e.replace(/[\\/:\*\?"<>\|]/g,""),o=this.extHostFileSystemInfo.extUri.joinPath(n,`${s}.log`),a=`${i.identifier.value}.${s}`,c=this.loggerService.createLogger(o,{id:a,name:e,logLevel:t,extensionId:i.identifier.value});return new xD(a,e,c,this.proxy,i)}createExtensionLogDirectory(e){let t=this.extensionLogDirectoryPromise.get(e.identifier.value);if(!t){const i=this.extHostFileSystemInfo.extUri.joinPath(this.initData.logsLocation,e.identifier.value);this.extensionLogDirectoryPromise.set(e.identifier.value,t=(async()=>{try{await this.extHostFileSystem.value.createDirectory(i)}catch(n){if(tm(n)!==Se.FileExists)throw n}return i})())}return t}createExtHostOutputChannel(e,t){let i=!1;const n=()=>{if(i)throw new Error("Channel has been closed")};return{get name(){return e},append(s){n(),t.then(o=>o.append(s))},appendLine(s){n(),t.then(o=>o.appendLine(s))},clear(){n(),t.then(s=>s.clear())},replace(s){n(),t.then(o=>o.replace(s))},show(s,o){n(),t.then(a=>a.show(s,o))},hide(){n(),t.then(s=>s.hide())},dispose(){i=!0,t.then(s=>s.dispose())}}}createExtHostLogOutputChannel(e,t,i){const n=new Pe,s=()=>{if(n.isDisposed)throw new Error("Channel has been closed")},o=n.add(new A);function a(c){t=c,o.fire(c)}return i.then(c=>{n.add(c),c.logLevel!==t&&a(c.logLevel),n.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.createExtHostOutputChannel(e,i),get logLevel(){return t},onDidChangeLogLevel:o.event,trace(c,...l){s(),i.then(u=>u.trace(c,...l))},debug(c,...l){s(),i.then(u=>u.debug(c,...l))},info(c,...l){s(),i.then(u=>u.info(c,...l))},warn(c,...l){s(),i.then(u=>u.warn(c,...l))},error(c,...l){s(),i.then(u=>u.error(c,...l))},dispose(){n.dispose()}}}};Av=H([$(0,We),$(1,Wt),$(2,Pf),$(3,Fo),$(4,No),$(5,Je)],Av);const R2=ie("IExtHostOutputService");var jl;let Rv=(to=class{constructor(e,t){this._logService=t,this._provider=new Map,this._proxy=e.getProxy(G.MainThreadDecorations)}registerFileDecorationProvider(e,t){const i=jl._handlePool++;this._provider.set(i,{provider:e,extensionDescription:t}),this._proxy.$registerDecorationProvider(i,t.identifier.value);const n=e.onDidChangeFileDecorations&&e.onDidChangeFileDecorations(s=>{if(!s){this._proxy.$onDidChange(i,null);return}const o=ko(s);if(o.length<=jl._maxEventSize){this._proxy.$onDidChange(i,o);return}this._logService.warn("[Decorations] CAPPING events from decorations provider",t.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:O4(u.path,"/")})),c=ES(a,(u,d)=>u.rank-d.rank||ss(u.uri.path,d.uri.path)),l=[];e:for(const u of c){let d;for(const h of u){const g=rs(h.uri.path);if(d!==g&&(d=g,l.push(h.uri)>=jl._maxEventSize))break e}}this._proxy.$onDidChange(i,l)});return new Re(()=>{n==null||n.dispose(),this._proxy.$unregisterDecorationProvider(i),this._provider.delete(i)})}async $provideDecorations(e,t,i){if(!this._provider.has(e))return Object.create(null);const n=Object.create(null),{provider:s,extensionDescription:o}=this._provider.get(e);return await Promise.all(t.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(s.provideFileDecoration(y.revive(c),i));if(!u)return;try{zm.validate(u),u.badge&&typeof u.badge!="string"&&M(o,"codiconDecoration"),n[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(d){this._logService.warn(`INVALID decoration from extension '${o.identifier.value}': ${d}`)}}catch(c){this._logService.error(c)}})),n}},jl=to,to._handlePool=0,to._maxEventSize=250,to);Rv=jl=H([$(0,We),$(1,Je)],Rv);const L2=ie("IExtHostDecorations");class CD{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,t){e=La(e);const i=this.values,n=this.prefixSum,s=t.length;return s===0?!1:(this.values=new Uint32Array(i.length+s),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=La(e),t=La(t),this.values[e]===t?!1:(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=La(e),t=La(t);const i=this.values,n=this.prefixSum;if(e>=i.length)return!1;const s=i.length-e;return t>=s&&(t=s),t===0?!1:(this.values=new Uint32Array(i.length-t),this.values.set(i.subarray(0,e),0),this.values.set(i.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(n.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=La(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;t===0&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let i=t;i<=e;i++)this.prefixSum[i]=this.prefixSum[i-1]+this.values[i];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.values.length-1,n=0,s=0,o=0;for(;t<=i;)if(n=t+(i-t)/2|0,s=this.prefixSum[n],o=s-this.values[n],e<o)i=n-1;else if(e>=s)t=n+1;else break;return new SD(n,e-o)}}class SD{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}class ED{constructor(e,t,i,n){this._uri=e,this._lines=t,this._eol=i,this._versionId=n,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return this._cachedTextValue===null&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const i of t)this._acceptDeleteRange(i.range),this._acceptInsertText(new Ai(i.range.startLineNumber,i.range.startColumn),i.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,i=new Uint32Array(t);for(let n=0;n<t;n++)i[n]=this._lines[n].length+e;this._lineStarts=new CD(i)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1));return}this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t){if(t.length===0)return;const i=$b(t);if(i.length===1){this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]+this._lines[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+i[0]);const n=new Uint32Array(i.length-1);for(let s=1;s<i.length;s++)this._lines.splice(e.lineNumber+s-1,0,i[s]),n[s-1]=i[s].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,n)}}const O2="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function kD(r=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(const t of O2)r.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}const DD=kD();function $2(r){let e=DD;if(r&&r instanceof RegExp)if(r.global)e=r;else{let t="g";r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.unicode&&(t+="u"),e=new RegExp(r.source,t)}return e.lastIndex=0,e}const N2=new Sc;N2.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function M2(r,e,t,i,n){if(e=$2(e),n||(n=yn.first(N2)),t.length>n.maxLen){let l=r-n.maxLen/2;return l<0?l=0:i+=l,t=t.substring(l,r+n.maxLen/2),M2(r,e,t,i,n)}const s=Date.now(),o=r-1-i;let a=-1,c=null;for(let l=1;!(Date.now()-s>=n.timeBudget);l++){const u=o-n.windowSize*l;e.lastIndex=Math.max(0,u);const d=ID(e,t,o,a);if(!d&&c||(c=d,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:i+1+c.index,endColumn:i+1+c.index+c[0].length};return e.lastIndex=0,l}return null}function ID(r,e,t,i){let n;for(;n=r.exec(e);){const s=n.index||0;if(s<=t&&r.lastIndex>=t)return n;if(i>0&&s>i)return null}return null}const Lv=new Map;function PD(r,e){e?Lv.set(r,e):Lv.delete(r)}function TD(r){return Lv.get(r)}class AD extends ED{constructor(e,t,i,n,s,o,a){super(t,i,n,s),this._proxy=e,this._languageId=o,this._isDirty=a,this._isDisposed=!1}dispose(){fi(!this._isDisposed),this._isDisposed=!0,this._isDirty=!1}equalLines(e){return ar(this._lines,e)}get document(){if(!this._document){const e=this;this._document={get uri(){return e._uri},get fileName(){return e._uri.fsPath},get isUntitled(){return e._uri.scheme===Y.untitled},get languageId(){return e._languageId},get version(){return e._versionId},get isClosed(){return e._isDisposed},get isDirty(){return e._isDirty},save(){return e._save()},getText(t){return t?e._getTextInRange(t):e.getText()},get eol(){return e._eol===`
`?qi.LF:qi.CRLF},get lineCount(){return e._lines.length},lineAt(t){return e._lineAt(t)},offsetAt(t){return e._offsetAt(t)},positionAt(t){return e._positionAt(t)},validateRange(t){return e._validateRange(t)},validatePosition(t){return e._validatePosition(t)},getWordRangeAtPosition(t,i){return e._getWordRangeAtPosition(t,i)}}}return Object.freeze(this._document)}_acceptLanguageId(e){fi(!this._isDisposed),this._languageId=e}_acceptIsDirty(e){fi(!this._isDisposed),this._isDirty=e}_save(){return this._isDisposed?Promise.reject(new Error("Document has been closed")):this._proxy.$trySaveDocument(this._uri)}_getTextInRange(e){const t=this._validateRange(e);if(t.isEmpty)return"";if(t.isSingleLine)return this._lines[t.start.line].substring(t.start.character,t.end.character);const i=this._eol,n=t.start.line,s=t.end.line,o=[];o.push(this._lines[n].substring(t.start.character));for(let a=n+1;a<s;a++)o.push(this._lines[a]);return o.push(this._lines[s].substring(0,t.end.character)),o.join(i)}_lineAt(e){let t;if(e instanceof Ee?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this._lines.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new RD(t,this._lines[t],t===this._lines.length-1)}_offsetAt(e){return e=this._validatePosition(e),this._ensureLineStarts(),this._lineStarts.getPrefixSum(e.line-1)+e.character}_positionAt(e){e=Math.floor(e),e=Math.max(0,e),this._ensureLineStarts();const t=this._lineStarts.getIndexOf(e),i=this._lines[t.index].length;return new Ee(t.index,Math.min(t.remainder,i))}_validateRange(e){if(!(e instanceof ye))throw new Error("Invalid argument");const t=this._validatePosition(e.start),i=this._validatePosition(e.end);return t===e.start&&i===e.end?e:new ye(t.line,t.character,i.line,i.character)}_validatePosition(e){if(!(e instanceof Ee))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:t,character:i}=e,n=!1;if(t<0)t=0,i=0,n=!0;else if(t>=this._lines.length)t=this._lines.length-1,i=this._lines[t].length,n=!0;else{const s=this._lines[t].length;i<0?(i=0,n=!0):i>s&&(i=s,n=!0)}return n?new Ee(t,i):e}_getWordRangeAtPosition(e,t){const i=this._validatePosition(e);if(!t)t=TD(this._languageId);else if(Ob(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const n=M2(i.character+1,$2(t),this._lines[i.line],0);if(n)return new ye(i.line,n.startColumn-1,i.line,n.endColumn-1)}}class RD{constructor(e,t,i){this._line=e,this._text=t,this._isLastLine=i}get lineNumber(){return this._line}get text(){return this._text}get range(){return new ye(this._line,0,this._line,this._text.length)}get rangeIncludingLineBreak(){return this._isLastLine?this.range:new ye(this._line,0,this._line+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this._text)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this._text.length}}class Ov{constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}}const kp=class kp{constructor(e,t,i){const n=kp._Keys.nextId();e.$registerTextEditorDecorationType(t.identifier,n,u1.from(i)),this.value=Object.freeze({key:n,dispose(){e.$removeTextEditorDecorationType(n)}})}};kp._Keys=new Ov("TextEditorDecorationType");let $v=kp;class LD{constructor(e,t){this._collectedEdits=[],this._setEndOfLine=void 0,this._finalized=!1,this._document=e,this._documentVersionId=e.version,this._undoStopBefore=t.undoStopBefore,this._undoStopAfter=t.undoStopAfter}finalize(){return this._finalized=!0,{documentVersionId:this._documentVersionId,edits:this._collectedEdits,setEndOfLine:this._setEndOfLine,undoStopBefore:this._undoStopBefore,undoStopAfter:this._undoStopAfter}}_throwIfFinalized(){if(this._finalized)throw new Error("Edit is only valid while callback runs")}replace(e,t){this._throwIfFinalized();let i=null;if(e instanceof Ee)i=new ye(e,e);else if(e instanceof ye)i=e;else throw new Error("Unrecognized location");this._pushEdit(i,t,!1)}insert(e,t){this._throwIfFinalized(),this._pushEdit(new ye(e,e),t,!0)}delete(e){this._throwIfFinalized();let t=null;if(e instanceof ye)t=e;else throw new Error("Unrecognized location");this._pushEdit(t,null,!0)}_pushEdit(e,t,i){const n=this._document.validateRange(e);this._collectedEdits.push({range:n,text:t,forceMoveMarkers:i})}setEndOfLine(e){if(this._throwIfFinalized(),e!==qi.LF&&e!==qi.CRLF)throw xe("endOfLine");this._setEndOfLine=e}}class OD{constructor(e,t,i,n){this._proxy=e,this._id=t,this._accept(i),this._logService=n;const s=this;this.value={get tabSize(){return s._tabSize},set tabSize(o){s._setTabSize(o)},get indentSize(){return s._indentSize},set indentSize(o){s._setIndentSize(o)},get insertSpaces(){return s._insertSpaces},set insertSpaces(o){s._setInsertSpaces(o)},get cursorStyle(){return s._cursorStyle},set cursorStyle(o){s._setCursorStyle(o)},get lineNumbers(){return s._lineNumbers},set lineNumbers(o){s._setLineNumbers(o)}}}_accept(e){this._tabSize=e.tabSize,this._indentSize=e.indentSize,this._originalIndentSize=e.originalIndentSize,this._insertSpaces=e.insertSpaces,this._cursorStyle=e.cursorStyle,this._lineNumbers=_a.to(e.lineNumbers)}_validateTabSize(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}_setTabSize(e){const t=this._validateTabSize(e);if(t!==null){if(typeof t=="number"){if(this._tabSize===t)return;this._tabSize=t}this._warnOnError("setTabSize",this._proxy.$trySetOptions(this._id,{tabSize:t}))}}_validateIndentSize(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}_setIndentSize(e){const t=this._validateIndentSize(e);if(t!==null){if(typeof t=="number"){if(this._originalIndentSize===t)return;this._indentSize=t,this._originalIndentSize=t}this._warnOnError("setIndentSize",this._proxy.$trySetOptions(this._id,{indentSize:t}))}}_validateInsertSpaces(e){return e==="auto"?"auto":e==="false"?!1:!!e}_setInsertSpaces(e){const t=this._validateInsertSpaces(e);if(typeof t=="boolean"){if(this._insertSpaces===t)return;this._insertSpaces=t}this._warnOnError("setInsertSpaces",this._proxy.$trySetOptions(this._id,{insertSpaces:t}))}_setCursorStyle(e){this._cursorStyle!==e&&(this._cursorStyle=e,this._warnOnError("setCursorStyle",this._proxy.$trySetOptions(this._id,{cursorStyle:e})))}_setLineNumbers(e){this._lineNumbers!==e&&(this._lineNumbers=e,this._warnOnError("setLineNumbers",this._proxy.$trySetOptions(this._id,{lineNumbers:_a.from(e)})))}assign(e){const t={};let i=!1;if(typeof e.tabSize<"u"){const n=this._validateTabSize(e.tabSize);n==="auto"?(i=!0,t.tabSize=n):typeof n=="number"&&this._tabSize!==n&&(this._tabSize=n,i=!0,t.tabSize=n)}if(typeof e.indentSize<"u"){const n=this._validateIndentSize(e.indentSize);n==="tabSize"?(i=!0,t.indentSize=n):typeof n=="number"&&this._originalIndentSize!==n&&(this._indentSize=n,this._originalIndentSize=n,i=!0,t.indentSize=n)}if(typeof e.insertSpaces<"u"){const n=this._validateInsertSpaces(e.insertSpaces);n==="auto"?(i=!0,t.insertSpaces=n):this._insertSpaces!==n&&(this._insertSpaces=n,i=!0,t.insertSpaces=n)}typeof e.cursorStyle<"u"&&this._cursorStyle!==e.cursorStyle&&(this._cursorStyle=e.cursorStyle,i=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this._lineNumbers!==e.lineNumbers&&(this._lineNumbers=e.lineNumbers,i=!0,t.lineNumbers=_a.from(e.lineNumbers)),i&&this._warnOnError("setOptions",this._proxy.$trySetOptions(this._id,t))}_warnOnError(e,t){t.catch(i=>{this._logService.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this._logService.warn(i)})}}class $D{constructor(e,t,i,n,s,o,a,c){this.id=e,this._proxy=t,this._logService=i,this._disposed=!1,this._hasDecorationsForKey=new Set,this._selections=s,this._options=new OD(this._proxy,this.id,o,i),this._visibleRanges=a,this._viewColumn=c;const l=this;this.value=Object.freeze({get document(){return n.value},set document(u){throw new Zr("document")},get selection(){return l._selections&&l._selections[0]},set selection(u){if(!(u instanceof Pn))throw xe("selection");l._selections=[u],l._trySetSelection()},get selections(){return l._selections},set selections(u){if(!Array.isArray(u)||u.some(d=>!(d instanceof Pn)))throw xe("selections");l._selections=u,l._trySetSelection()},get visibleRanges(){return l._visibleRanges},set visibleRanges(u){throw new Zr("visibleRanges")},get options(){return l._options.value},set options(u){l._disposed||l._options.assign(u)},get viewColumn(){return l._viewColumn},set viewColumn(u){throw new Zr("viewColumn")},edit(u,d={undoStopBefore:!0,undoStopAfter:!0}){if(l._disposed)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new LD(n.value,d);return u(h),l._applyEdit(h)},insertSnippet(u,d,h={undoStopBefore:!0,undoStopAfter:!0}){if(l._disposed)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let g;if(!d||Array.isArray(d)&&d.length===0)g=l._selections.map(b=>F.from(b));else if(d instanceof Ee){const{lineNumber:b,column:_}=qe.from(d);g=[{startLineNumber:b,startColumn:_,endLineNumber:b,endColumn:_}]}else if(d instanceof ye)g=[F.from(d)];else{g=[];for(const b of d)if(b instanceof ye)g.push(F.from(b));else{const{lineNumber:_,column:v}=qe.from(b);g.push({startLineNumber:_,startColumn:v,endLineNumber:_,endColumn:v})}}return t.$tryInsertSnippet(e,n.value.version,u.value,g,h)},setDecorations(u,d){const h=d.length===0;h&&!l._hasDecorationsForKey.has(u.key)||(h?l._hasDecorationsForKey.delete(u.key):l._hasDecorationsForKey.add(u.key),l._runOnProxy(()=>{if(Px(d))return t.$trySetDecorations(e,u.key,q7(d));{const g=new Array(4*d.length);for(let b=0,_=d.length;b<_;b++){const v=d[b];g[4*b]=v.start.line+1,g[4*b+1]=v.start.character+1,g[4*b+2]=v.end.line+1,g[4*b+3]=v.end.character+1}return t.$trySetDecorationsFast(e,u.key,g)}}))},revealRange(u,d){l._runOnProxy(()=>t.$tryRevealRange(e,F.from(u),d||ah.Default))},show(u){t.$tryShowEditor(e,yt.from(u))},hide(){t.$tryHideEditor(e)}})}dispose(){fi(!this._disposed),this._disposed=!0}_acceptOptions(e){fi(!this._disposed),this._options._accept(e)}_acceptVisibleRanges(e){fi(!this._disposed),this._visibleRanges=e}_acceptViewColumn(e){fi(!this._disposed),this._viewColumn=e}_acceptSelections(e){fi(!this._disposed),this._selections=e}async _trySetSelection(){const e=this._selections.map(Li.from);return await this._runOnProxy(()=>this._proxy.$trySetSelections(this.id,e)),this.value}_applyEdit(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const i=t.edits.map(s=>s.range);i.sort((s,o)=>s.end.line===o.end.line?s.end.character===o.end.character?s.start.line===o.start.line?s.start.character-o.start.character:s.start.line-o.start.line:s.end.character-o.end.character:s.end.line-o.end.line);for(let s=0,o=i.length-1;s<o;s++){const a=i[s].end;if(i[s+1].start.isBefore(a))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const n=t.edits.map(s=>({range:F.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this._proxy.$tryApplyEdits(this.id,t.documentVersionId,n,{setEndOfLine:typeof t.setEndOfLine=="number"?wa.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}_runOnProxy(e){return this._disposed?(this._logService.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this._logService.warn(t),null))}}class ND{constructor(e){this.value=e,this._count=0}ref(){this._count++}unref(){return--this._count===0}}let Nv=class{constructor(e,t){this._extHostRpc=e,this._logService=t,this._activeEditorId=null,this._editors=new Map,this._documents=new mt,this._onDidAddDocuments=new A,this._onDidRemoveDocuments=new A,this._onDidChangeVisibleTextEditors=new A,this._onDidChangeActiveTextEditor=new A,this.onDidAddDocuments=this._onDidAddDocuments.event,this.onDidRemoveDocuments=this._onDidRemoveDocuments.event,this.onDidChangeVisibleTextEditors=this._onDidChangeVisibleTextEditors.event,this.onDidChangeActiveTextEditor=this._onDidChangeActiveTextEditor.event}$acceptDocumentsAndEditorsDelta(e){this.acceptDocumentsAndEditorsDelta(e)}acceptDocumentsAndEditorsDelta(e){const t=[],i=[],n=[];if(e.removedDocuments)for(const s of e.removedDocuments){const o=y.revive(s),a=this._documents.get(o);a!=null&&a.unref()&&(this._documents.delete(o),t.push(a.value))}if(e.addedDocuments)for(const s of e.addedDocuments){const o=y.revive(s.uri);let a=this._documents.get(o);if(a&&o.scheme!==Y.vscodeNotebookCell&&o.scheme!==Y.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new ND(new AD(this._extHostRpc.getProxy(G.MainThreadDocuments),o,s.lines,s.EOL,s.versionId,s.languageId,s.isDirty)),this._documents.set(o,a),i.push(a.value)),a.ref()}if(e.removedEditors)for(const s of e.removedEditors){const o=this._editors.get(s);this._editors.delete(s),o&&n.push(o)}if(e.addedEditors)for(const s of e.addedEditors){const o=y.revive(s.documentUri);fi(this._documents.has(o),`document '${o}' does not exist`),fi(!this._editors.has(s.id),`editor '${s.id}' already exists!`);const a=this._documents.get(o).value,c=new $D(s.id,this._extHostRpc.getProxy(G.MainThreadTextEditors),this._logService,new et(()=>a.document),s.selections.map(Li.to),s.options,s.visibleRanges.map(l=>F.to(l)),typeof s.editorPosition=="number"?yt.to(s.editorPosition):void 0);this._editors.set(s.id,c)}e.newActiveEditor!==void 0&&(fi(e.newActiveEditor===null||this._editors.has(e.newActiveEditor),`active editor '${e.newActiveEditor}' does not exist`),this._activeEditorId=e.newActiveEditor),es(t),es(n),e.removedDocuments&&this._onDidRemoveDocuments.fire(t),e.addedDocuments&&this._onDidAddDocuments.fire(i),(e.removedEditors||e.addedEditors)&&this._onDidChangeVisibleTextEditors.fire(this.allEditors().map(s=>s.value)),e.newActiveEditor!==void 0&&this._onDidChangeActiveTextEditor.fire(this.activeEditor())}getDocument(e){var t;return(t=this._documents.get(e))==null?void 0:t.value}allDocuments(){return yn.map(this._documents.values(),e=>e.value)}getEditor(e){return this._editors.get(e)}activeEditor(e){if(!this._activeEditorId)return;const t=this._editors.get(this._activeEditorId);return e?t:t==null?void 0:t.value}allEditors(){return[...this._editors.values()]}};Nv=H([$(0,We),$(1,Je)],Nv);const ql=ie("IExtHostDocumentsAndEditors"),$f=ie("IExtHostApiDeprecationService");let Mv=class{constructor(e,t){this._extHostLogService=t,this._reportedUsages=new Set,this._telemetryShape=e.getProxy(G.MainThreadTelemetry)}report(e,t,i){const n=this.getUsageKey(e,t);this._reportedUsages.has(n)||(this._reportedUsages.add(n),t.isUnderDevelopment&&this._extHostLogService.warn(`[Deprecation Warning] '${e}' is deprecated. ${i}`),this._telemetryShape.$publicLog2("extHostDeprecatedApiUsage",{extensionId:t.identifier.value,apiId:e}))}getUsageKey(e,t){return`${e}-${t.identifier.value}`}};Mv=H([$(0,We),$(1,Je)],Mv);const Nf=Object.freeze({activeComment:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts",aiRelatedInformation:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts",aiTextSearchProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts",authGetSessions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authGetSessions.d.ts",authLearnMore:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts",authSession:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts",canonicalUriProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts",chatParticipant:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipant.d.ts",chatParticipantAdditions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts",chatProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts",chatTab:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts",chatVariableResolver:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts",codeActionAI:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts",codeActionRanges:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts",codiconDecoration:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts",commentReactor:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts",commentThreadApplicability:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts",commentingRangeHint:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts",commentsDraftState:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts",contribCommentEditorActionsMenu:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts",contribCommentPeekContext:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts",contribCommentThreadAdditionalMenu:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts",contribCommentsViewThreadMenus:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts",contribDiffEditorGutterToolBarMenus:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts",contribEditSessions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts",contribEditorContentMenu:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts",contribIssueReporter:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts",contribLabelFormatterWorkspaceTooltip:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts",contribMenuBarHome:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts",contribMergeEditorMenus:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts",contribMultiDiffEditorMenus:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts",contribNotebookStaticPreloads:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts",contribRemoteHelp:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts",contribShareMenu:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts",contribSourceControlHistoryItemGroupMenu:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemGroupMenu.d.ts",contribSourceControlHistoryItemMenu:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts",contribSourceControlInputBoxMenu:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts",contribSourceControlTitleMenu:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts",contribStatusBarItems:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts",contribViewsRemote:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts",contribViewsWelcome:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts",createFileSystemWatcher:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts",customEditorMove:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts",debugFocus:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugFocus.d.ts",debugVisualization:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts",defaultChatParticipant:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",diffCommand:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts",diffContentOptions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts",documentFiltersExclusive:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts",documentPaste:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts",dropMetadata:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.dropMetadata.d.ts",editSessionIdentityProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts",editorInsets:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts",extensionRuntime:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts",extensionsAny:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts",externalUriOpener:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts",fileComments:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts",fileSearchProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts",findFiles2:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts",findTextInFiles:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts",fsChunks:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts",handleIssueUri:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.handleIssueUri.d.ts",idToken:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts",inlineCompletionsAdditions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts",inlineEdit:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts",interactive:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts",interactiveWindow:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts",ipc:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts",languageModels:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModels.d.ts",languageStatusText:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts",mappedEditsProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts",multiDocumentHighlightProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts",newSymbolNamesProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts",notebookCellExecution:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts",notebookCellExecutionState:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts",notebookControllerAffinityHidden:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts",notebookDeprecated:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts",notebookExecution:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts",notebookKernelSource:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts",notebookLiveShare:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts",notebookMessaging:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts",notebookMime:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts",notebookVariableProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts",portsAttributes:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts",profileContentHandlers:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts",quickDiffProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts",quickPickItemTooltip:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts",quickPickSortByLabel:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts",resolvers:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts",scmActionButton:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts",scmHistoryProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts",scmMultiDiffEditor:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts",scmSelectedProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts",scmTextDocument:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts",scmValidation:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts",shareProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts",showLocal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts",speech:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts",tabInputMultiDiff:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts",tabInputTextMerge:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts",taskPresentationGroup:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts",telemetry:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts",terminalDataWriteEvent:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts",terminalDimensions:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts",terminalExecuteCommandEvent:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts",terminalQuickFixProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts",terminalSelection:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts",terminalShellIntegration:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellIntegration.d.ts",testObserver:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts",textSearchProvider:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts",timeline:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts",tokenInformation:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts",treeViewActiveItem:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts",treeViewMarkdownMessage:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts",treeViewReveal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts",tunnelFactory:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts",tunnels:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts",windowActivity:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.windowActivity.d.ts",workspaceTrust:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"});ie("productService");const MD="vscode://schemas/vscode-product",Fv=Jt.as(Cf.JSONContribution);class Gl{static _toSet(e){const t=new _s;for(let i=0,n=e.length;i<n;i++)t.add(e[i].description.identifier);return t}static compute(e,t){if(!e||!e.length)return new Gl(t,[]);if(!t||!t.length)return new Gl([],e);const i=this._toSet(e),n=this._toSet(t),s=t.filter(a=>!i.has(a.description.identifier)),o=e.filter(a=>!n.has(a.description.identifier));return new Gl(s,o)}constructor(e,t){this.added=e,this.removed=t}}class FD{constructor(e,t){this.name=e,this.defaultExtensionKind=t,this._handler=null,this._users=null,this._delta=null}setHandler(e){if(this._handler!==null)throw new Error("Handler already set!");this._handler=e,this._handle()}acceptUsers(e){this._delta=Gl.compute(this._users,e),this._users=e,this._handle()}_handle(){if(!(this._handler===null||this._users===null||this._delta===null))try{this._handler(this._users,this._delta)}catch(e){Ni(e)}}}const HD={type:"string",enum:["ui","workspace"],enumDescriptions:[f("vs/workbench/services/extensions/common/extensionsRegistry","ui","UI extension kind. In a remote window, such extensions are enabled only when available on the local machine."),f("vs/workbench/services/extensions/common/extensionsRegistry","workspace","Workspace extension kind. In a remote window, such extensions are enabled only when available on the remote.")]},F2="vscode://schemas/vscode-extensions",Hv={properties:{engines:{type:"object",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.engines","Engine compatibility."),properties:{vscode:{type:"string",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.engines.vscode","For VS Code extensions, specifies the VS Code version that the extension is compatible with. Cannot be *. For example: ^0.10.5 indicates compatibility with a minimum VS Code version of 0.10.5."),default:"^1.22.0"}}},publisher:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.publisher","The publisher of the VS Code extension."),type:"string"},displayName:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.displayName","The display name for the extension used in the VS Code gallery."),type:"string"},categories:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.categories","The categories used by the VS Code gallery to categorize the extension."),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:p7},{type:"string",const:"Languages",deprecationMessage:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.category.languages.deprecated","Use 'Programming  Languages' instead")}]}},galleryBanner:{type:"object",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.galleryBanner","Banner used in the VS Code marketplace."),properties:{color:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.galleryBanner.color","The banner color on the VS Code marketplace page header."),type:"string"},theme:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.galleryBanner.theme","The color theme for the font used in the banner."),type:"string",enum:["dark","light"]}}},contributes:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.contributes","All contributions of the VS Code extension represented by this package."),type:"object",properties:{},default:{}},preview:{type:"boolean",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.preview","Sets the extension to be flagged as a Preview in the Marketplace.")},enableProposedApi:{type:"boolean",deprecationMessage:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.enableProposedApi.deprecated","Use `enabledApiProposals` instead.")},enabledApiProposals:{markdownDescription:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.enabledApiProposals","Enable API proposals to try them out. Only valid **during development**. Extensions **cannot be published** with this property. For more details visit: https://code.visualstudio.com/api/advanced-topics/using-proposed-api"),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Nf),markdownEnumDescriptions:Object.values(Nf)}},api:{markdownDescription:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.api","Describe the API provided by this extension. For more details visit: https://code.visualstudio.com/api/advanced-topics/remote-extensions#handling-dependencies-with-remote-extensions"),type:"string",enum:["none"],enumDescriptions:[f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.api.none","Give up entirely the ability to export any APIs. This allows other extensions that depend on this extension to run in a separate extension host process or in a remote machine.")]},activationEvents:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents","Activation events for the VS Code extension."),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onWebviewPanel","An activation event emmited when a webview is loaded of a certain viewType"),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onLanguage","An activation event emitted whenever a file that resolves to the specified language gets opened."),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onCommand","An activation event emitted whenever the specified command gets invoked."),body:"onCommand:${2:commandId}"},{label:"onDebug",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onDebug","An activation event emitted whenever a user is about to start debugging or about to setup debug configurations."),body:"onDebug"},{label:"onDebugInitialConfigurations",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onDebugInitialConfigurations",'An activation event emitted whenever a "launch.json" needs to be created (and all provideDebugConfigurations methods need to be called).'),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onDebugDynamicConfigurations",'An activation event emitted whenever a list of all debug configurations needs to be created (and all provideDebugConfigurations methods for the "dynamic" scope need to be called).'),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onDebugResolve","An activation event emitted whenever a debug session with the specific type is about to be launched (and a corresponding resolveDebugConfiguration method needs to be called)."),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onDebugAdapterProtocolTracker","An activation event emitted whenever a debug session with the specific type is about to be launched and a debug protocol tracker might be needed."),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.workspaceContains","An activation event emitted whenever a folder is opened that contains at least a file matching the specified glob pattern."),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onStartupFinished","An activation event emitted after the start-up finished (after all `*` activated extensions have finished activating)."),body:"onStartupFinished"},{label:"onTaskType",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onTaskType","An activation event emitted whenever tasks of a certain type need to be listed or resolved."),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onFileSystem","An activation event emitted whenever a file or folder is accessed with the given scheme."),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onEditSession","An activation event emitted whenever an edit session is accessed with the given scheme."),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onSearch","An activation event emitted whenever a search is started in the folder with the given scheme."),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onView","An activation event emitted whenever the specified view is expanded.")},{label:"onUri",body:"onUri",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onUri","An activation event emitted whenever a system-wide Uri directed towards this extension is open.")},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onOpenExternalUri","An activation event emitted whenever a external uri (such as an http or https link) is being opened.")},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onCustomEditor","An activation event emitted whenever the specified custom editor becomes visible.")},{label:"onNotebook",body:"onNotebook:${1:type}",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onNotebook","An activation event emitted whenever the specified notebook document is opened.")},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onAuthenticationRequest","An activation event emitted whenever sessions are requested from the specified authentication provider.")},{label:"onRenderer",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onRenderer","An activation event emitted whenever a notebook output renderer is used."),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onTerminalProfile","An activation event emitted when a specific terminal profile is launched.")},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onTerminalQuickFixRequest","An activation event emitted when a command matches the selector associated with this ID")},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onWalkthrough","An activation event emitted when a specified walkthrough is opened.")},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.onIssueReporterOpened","An activation event emitted when the issue reporter is opened.")},{label:"*",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.activationEvents.star","An activation event emitted on VS Code startup. To ensure a great end user experience, please use this activation event in your extension only when no other activation events combination works in your use-case."),body:"*"}]}},badges:{type:"array",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.badges","Array of badges to display in the sidebar of the Marketplace's extension page."),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.badges.url","Badge image URL.")},href:{type:"string",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.badges.href","Badge link.")},description:{type:"string",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.badges.description","Badge description.")}}}},markdown:{type:"string",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.markdown","Controls the Markdown rendering engine used in the Marketplace. Either github (default) or standard."),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.qna","Controls the Q&A link in the Marketplace. Set to marketplace to enable the default Marketplace Q & A site. Set to a string to provide the URL of a custom Q & A site. Set to false to disable Q & A altogether."),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.extensionDependencies","Dependencies to other extensions. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:nx}},extensionPack:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.contributes.extensionPack","A set of extensions that can be installed together. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:nx}},extensionKind:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","extensionKind","Define the kind of an extension. `ui` extensions are installed and run on the local machine while `workspace` extensions run on the remote."),type:"array",items:HD,default:["workspace"],defaultSnippets:[{body:["ui"],description:f("vs/workbench/services/extensions/common/extensionsRegistry","extensionKind.ui","Define an extension which can run only on the local machine when connected to remote window.")},{body:["workspace"],description:f("vs/workbench/services/extensions/common/extensionsRegistry","extensionKind.workspace","Define an extension which can run only on the remote machine when connected remote window.")},{body:["ui","workspace"],description:f("vs/workbench/services/extensions/common/extensionsRegistry","extensionKind.ui-workspace","Define an extension which can run on either side, with a preference towards running on the local machine.")},{body:["workspace","ui"],description:f("vs/workbench/services/extensions/common/extensionsRegistry","extensionKind.workspace-ui","Define an extension which can run on either side, with a preference towards running on the remote machine.")},{body:[],description:f("vs/workbench/services/extensions/common/extensionsRegistry","extensionKind.empty","Define an extension which cannot run in a remote context, neither on the local, nor on the remote machine.")}]},capabilities:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities","Declare the set of supported capabilities by the extension."),type:"object",properties:{virtualWorkspaces:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.virtualWorkspaces","Declares whether the extension should be enabled in virtual workspaces. A virtual workspace is a workspace which is not backed by any on-disk resources. When false, this extension will be automatically disabled in virtual workspaces. Default is true."),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.virtualWorkspaces.supported","Declares the level of support for virtual workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.virtualWorkspaces.supported.limited","The extension will be enabled in virtual workspaces with some functionality disabled."),f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.virtualWorkspaces.supported.true","The extension will be enabled in virtual workspaces with all functionality enabled."),f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.virtualWorkspaces.supported.false","The extension will not be enabled in virtual workspaces.")]},description:{type:"string",markdownDescription:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.virtualWorkspaces.description","A description of how virtual workspaces affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}},untrustedWorkspaces:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.untrustedWorkspaces","Declares how the extension should be handled in untrusted workspaces."),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.untrustedWorkspaces.supported","Declares the level of support for untrusted workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.untrustedWorkspaces.supported.limited","The extension will be enabled in untrusted workspaces with some functionality disabled."),f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.untrustedWorkspaces.supported.true","The extension will be enabled in untrusted workspaces with all functionality enabled."),f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.untrustedWorkspaces.supported.false","The extension will not be enabled in untrusted workspaces.")]},restrictedConfigurations:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.untrustedWorkspaces.restrictedConfigurations","A list of configuration keys contributed by the extension that should not use workspace values in untrusted workspaces."),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.capabilities.untrustedWorkspaces.description","A description of how workspace trust affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}}}},sponsor:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.contributes.sponsor","Specify the location from where users can sponsor your extension."),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.contributes.sponsor.url","URL from where users can sponsor your extension. It must be a valid URL with a HTTP or HTTPS protocol. Example value: https://github.com/sponsors/nvaccess"),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.scripts.prepublish","Script executed before the package is published as a VS Code extension."),type:"string"},"vscode:uninstall":{description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.scripts.uninstall","Uninstall hook for VS Code extension. Script that gets executed when the extension is completely uninstalled from VS Code which is when VS Code is restarted (shutdown and start) after the extension is uninstalled. Only Node scripts are supported."),type:"string"}}},icon:{type:"string",description:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.icon","The path to a 128x128 pixel icon.")},l10n:{type:"string",description:f("vs/workbench/services/extensions/common/extensionsRegistry",{key:"vscode.extension.l10n",comment:['{Locked="bundle.l10n._locale_.json"}','{Locked="vscode.l10n API"}']},"The relative path to a folder containing localization (bundle.l10n.*.json) files. Must be specified if you are using the vscode.l10n API.")},pricing:{type:"string",markdownDescription:f("vs/workbench/services/extensions/common/extensionsRegistry","vscode.extension.pricing","The pricing information for the extension. Can be Free (default) or Trial. For more details visit: https://code.visualstudio.com/api/working-with-extensions/publishing-extension#extension-pricing-label"),enum:["Free","Trial"],default:"Free"}}};class UD{constructor(){this._extensionPoints=new Map}registerExtensionPoint(e){if(this._extensionPoints.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new FD(e.extensionPoint,e.defaultExtensionKind);return this._extensionPoints.set(e.extensionPoint,t),e.activationEventsGenerator&&y7.register(e.extensionPoint,e.activationEventsGenerator),Hv.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,Fv.registerSchema(F2,Hv),t}getExtensionPoints(){return Array.from(this._extensionPoints.values())}}const H2={ExtensionsRegistry:"ExtensionsRegistry"};Jt.add(H2.ExtensionsRegistry,new UD);const WD=Jt.as(H2.ExtensionsRegistry);Fv.registerSchema(F2,Hv),Fv.registerSchema(MD,{properties:{extensionEnabledApiProposals:{description:f("vs/workbench/services/extensions/common/extensionsRegistry","product.extensionEnabledApiProposals","API proposals that the respective extensions can freely use."),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Nf),markdownEnumDescriptions:Object.values(Nf)}}]}}}});const BD={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:f("vs/workbench/contrib/tasks/common/taskDefinitionRegistry","TaskDefinition.description","The actual task type. Please note that types starting with a '$' are reserved for internal usage.")},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:f("vs/workbench/contrib/tasks/common/taskDefinitionRegistry","TaskDefinition.properties","Additional properties of the task type"),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:f("vs/workbench/contrib/tasks/common/taskDefinitionRegistry","TaskDefinition.when","Condition which must be true to enable this type of task. Consider using `shellExecutionSupported`, `processExecutionSupported`, and `customExecutionSupported` as appropriate for this task definition. See the [API documentation](https://code.visualstudio.com/api/extension-guides/task-provider#when-clause) for more information."),default:""}}};var Uv;(function(r){function e(t,i,n){if(!t)return;const s=Oe(t.type)?t.type:void 0;if(!s||s.length===0){n.error(f("vs/workbench/contrib/tasks/common/taskDefinitionRegistry","TaskTypeConfiguration.noType","The task type configuration is missing the required 'taskType' property"));return}const o=[];if(Array.isArray(t.required))for(const a of t.required)Oe(a)&&o.push(a);return{extensionId:i.value,taskType:s,required:o,properties:t.properties?rt(t.properties):{},when:t.when?Dt.deserialize(t.when):void 0}}r.from=e})(Uv||(Uv={}));const VD=WD.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(r,e)=>{for(const t of r)t.type&&e.push(`onTaskType:${t.type}`)},jsonSchema:{description:f("vs/workbench/contrib/tasks/common/taskDefinitionRegistry","TaskDefinitionExtPoint","Contributes task kinds"),type:"array",items:BD}});class zD{constructor(){this._onDefinitionsChanged=new A,this.onDefinitionsChanged=this._onDefinitionsChanged.event,this.taskTypes=Object.create(null),this.readyPromise=new Promise((e,t)=>{VD.setHandler((i,n)=>{this._schema=void 0;try{for(const s of n.removed){const o=s.value;for(const a of o)this.taskTypes&&a.type&&this.taskTypes[a.type]&&delete this.taskTypes[a.type]}for(const s of n.added){const o=s.value;for(const a of o){const c=Uv.from(a,s.description.identifier,s.collector);c&&(this.taskTypes[c.taskType]=c)}}(n.removed.length>0||n.added.length>0)&&this._onDefinitionsChanged.fire()}catch{}e(void 0)})})}onReady(){return this.readyPromise}get(e){return this.taskTypes[e]}all(){return Object.keys(this.taskTypes).map(e=>this.taskTypes[e])}getJsonSchema(){if(this._schema===void 0){const e=[];for(const t of this.all()){const i={type:"object",additionalProperties:!1};t.required.length>0&&(i.required=t.required.slice(0)),t.properties!==void 0?i.properties=rt(t.properties):i.properties=Object.create(null),i.properties.type={type:"string",enum:[t.taskType]},e.push(i)}this._schema={oneOf:e}}return this._schema}}const jD=new zD;new Z("taskRunning",!1,f("vs/workbench/contrib/tasks/common/tasks","tasks.taskRunningContext","Whether a task is currently running.")),lg("vs/workbench/contrib/tasks/common/tasks","tasksCategory","Tasks");var Mf;(function(r){r[r.Escape=1]="Escape",r[r.Strong=2]="Strong",r[r.Weak=3]="Weak"})(Mf||(Mf={})),function(r){function e(t){if(!t)return r.Strong;switch(t.toLowerCase()){case"escape":return r.Escape;case"strong":return r.Strong;case"weak":return r.Weak;default:return r.Strong}}r.from=e}(Mf||(Mf={}));var U2;(function(r){r.defaults={cwd:"${workspaceFolder}"}})(U2||(U2={}));var Ql;(function(r){r[r.Always=1]="Always",r[r.Silent=2]="Silent",r[r.Never=3]="Never"})(Ql||(Ql={})),function(r){function e(t){switch(t.toLowerCase()){case"always":return r.Always;case"silent":return r.Silent;case"never":return r.Never;default:return r.Always}}r.fromString=e}(Ql||(Ql={}));var Jl;(function(r){r[r.Never=1]="Never",r[r.OnProblem=2]="OnProblem",r[r.Always=3]="Always"})(Jl||(Jl={})),function(r){function e(t){switch(t.toLowerCase()){case"always":return r.Always;case"never":return r.Never;case"onproblem":return r.OnProblem;default:return r.OnProblem}}r.fromString=e}(Jl||(Jl={}));var Kl;(function(r){r[r.Shared=1]="Shared",r[r.Dedicated=2]="Dedicated",r[r.New=3]="New"})(Kl||(Kl={})),function(r){function e(t){switch(t.toLowerCase()){case"shared":return r.Shared;case"dedicated":return r.Dedicated;case"new":return r.New;default:return r.Shared}}r.fromString=e}(Kl||(Kl={}));var W2;(function(r){r.defaults={echo:!0,reveal:Ql.Always,revealProblems:Jl.Never,focus:!1,panel:Kl.Shared,showReuseMessage:!0,clear:!1}})(W2||(W2={}));var Ff;(function(r){r[r.Shell=1]="Shell",r[r.Process=2]="Process",r[r.CustomExecution=3]="CustomExecution"})(Ff||(Ff={})),function(r){function e(i){switch(i.toLowerCase()){case"shell":return r.Shell;case"process":return r.Process;case"customExecution":return r.CustomExecution;default:return r.Process}}r.fromString=e;function t(i){switch(i){case r.Shell:return"shell";case r.Process:return"process";case r.CustomExecution:return"customExecution";default:return"process"}}r.toString=t}(Ff||(Ff={}));var B2;(function(r){function e(t){return Oe(t)?t:t.value}r.value=e})(B2||(B2={}));var V2;(function(r){r.Clean={_id:"clean",isDefault:!1},r.Build={_id:"build",isDefault:!1},r.Rebuild={_id:"rebuild",isDefault:!1},r.Test={_id:"test",isDefault:!1};function e(i){return i===r.Clean._id||i===r.Build._id||i===r.Rebuild._id||i===r.Test._id}r.is=e;function t(i){if(i!==void 0)return Oe(i)?e(i)?{_id:i,isDefault:!1}:void 0:i}r.from=t})(V2||(V2={}));var z2;(function(r){r.Workspace="workspace",r.Extension="extension",r.InMemory="inMemory",r.WorkspaceFile="workspaceFile",r.User="user";function e(t){switch(t){case r.User:return 2;case r.WorkspaceFile:return 5;default:return 6}}r.toConfigurationTarget=e})(z2||(z2={}));var Wv;(function(r){r[r.default=1]="default",r[r.folderOpen=2]="folderOpen"})(Wv||(Wv={}));var j2;(function(r){r.defaults={reevaluateOnRerun:!0,runOn:Wv.default,instanceLimit:1}})(j2||(j2={}));var Hf;(function(r){r[r.Process=1]="Process",r[r.Terminal=2]="Terminal"})(Hf||(Hf={})),function(r){r._default=r.Terminal}(Hf||(Hf={}));var q2;(function(r){function e(c){return{taskId:c._id,taskName:c.configurationProperties.name,runType:c.configurationProperties.isBackground?"background":"singleRun",group:c.configurationProperties.group,__task:c}}function t(c,l,u){return{...e(c),kind:"start",terminalId:l,resolvedVariables:u}}r.start=t;function i(c,l,u){return{...e(c),kind:"processStarted",terminalId:l,processId:u}}r.processStarted=i;function n(c,l,u){return{...e(c),kind:"processEnded",terminalId:l,exitCode:u}}r.processEnded=n;function s(c,l,u){return{...e(c),kind:"terminated",exitReason:u,terminalId:l}}r.terminated=s;function o(c,l,u){return{...e(l),kind:c,terminalId:u}}r.general=o;function a(){return{kind:"changed"}}r.changed=a})(q2||(q2={}));var Uf;(function(r){function e(i){const n=Object.keys(i).sort();let s="";for(const o of n){let a=i[o];a instanceof Object?a=e(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),s+=o+","+a+","}return s}function t(i){const s={_key:e(i),type:i.taskType};return Object.assign(s,i),s}r.create=t})(Uf||(Uf={}));var G2;(function(r){function e(t,i){const n=jD.get(t.type);if(n===void 0){const c=rt(t);return delete c._key,Uf.create(c)}const s=Object.create(null);s.type=n.taskType;const o=new Set;n.required.forEach(c=>o.add(c));const a=n.properties;for(const c of Object.keys(a)){const l=t[c];if(l!=null)s[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)s[c]=rt(u.default);else switch(u.type){case"boolean":s[c]=!1;break;case"number":case"integer":s[c]=0;break;case"string":s[c]="";break;default:i.error(f("vs/workbench/contrib/tasks/common/tasks","TaskDefinition.missingRequiredProperty","Error: the task identifier '{0}' is missing the required property '{1}'. The task identifier will be ignored.",JSON.stringify(t,void 0,0),c));return}}}return Uf.create(s)}r.createTaskIdentifier=e})(G2||(G2={}));var Wf;(function(r){function e(i){if(i!=null)return i}r.from=e;function t(i){if(i!=null)return i}r.to=t})(Wf||(Wf={}));var Bf;(function(r){function e(i){if(i!=null)return i}r.from=e;function t(i){if(i!=null)return i}r.to=t})(Bf||(Bf={}));var Bv;(function(r){function e(i){if(i!=null)return i}r.from=e;function t(i){if(i!=null)return i}r.to=t})(Bv||(Bv={}));var Xl;(function(r){function e(n){if(n){const s=n;return s&&!!s.process}else return!1}r.is=e;function t(n){if(n==null)return;const s={process:n.process,args:n.args};return n.options&&(s.options=Bv.from(n.options)),s}r.from=t;function i(n){if(n!=null)return new ta(n.process,n.args,n.options)}r.to=i})(Xl||(Xl={}));var Vv;(function(r){function e(i){if(i!=null)return i}r.from=e;function t(i){if(i!=null)return i}r.to=t})(Vv||(Vv={}));var Yl;(function(r){function e(n){if(n){const s=n;return s&&(!!s.commandLine||!!s.command)}else return!1}r.is=e;function t(n){if(n==null)return;const s={};return n.commandLine!==void 0?s.commandLine=n.commandLine:(s.command=n.command,s.args=n.args),n.options&&(s.options=Vv.from(n.options)),s}r.from=t;function i(n){if(!(n==null||n.command===void 0&&n.commandLine===void 0))return n.commandLine?new Ds(n.commandLine,n.options):new Ds(n.command,n.args?n.args:[],n.options)}r.to=i})(Yl||(Yl={}));var Mn;(function(r){function e(n){if(n){const s=n;return s&&s.customExecution==="customExecution"}else return!1}r.is=e;function t(n){return{customExecution:"customExecution"}}r.from=t;function i(n,s){return s.get(n)}r.to=i})(Mn||(Mn={}));var zv;(function(r){function e(t){if(t!=null)return{_id:t.id,isDefault:t.isDefault}}r.from=e})(zv||(zv={}));var Fr;(function(r){function e(n,s){if(n==null)return[];const o=[];for(const a of n){const c=t(a,s);c&&o.push(c)}return o}r.fromMany=e;function t(n,s){if(n==null)return;let o;n.execution instanceof ta?o=Xl.from(n.execution):n.execution instanceof Ds?o=Yl.from(n.execution):n.execution&&n.execution instanceof Rm&&(o=Mn.from(n.execution));const a=Wf.from(n.definition);let c;return n.scope?typeof n.scope=="number"?c=n.scope:c=n.scope.uri:c=Is.Workspace,!a||!c?void 0:{_id:n._id,definition:a,name:n.name,source:{extensionId:s.identifier.value,label:n.source,scope:c},execution:o,isBackground:n.isBackground,group:zv.from(n.group),presentationOptions:Bf.from(n.presentationOptions),problemMatchers:n.problemMatchers,hasDefinedMatchers:n.hasDefinedMatchers,runOptions:n.runOptions?n.runOptions:{reevaluateOnRerun:!0},detail:n.detail}}r.from=t;async function i(n,s,o){if(n==null)return;let a;Xl.is(n.execution)?a=Xl.to(n.execution):Yl.is(n.execution)?a=Yl.to(n.execution):Mn.is(n.execution)&&(a=Mn.to(n._id,o));const c=Wf.to(n.definition);let l;if(n.source&&(n.source.scope!==void 0?typeof n.source.scope=="number"?l=n.source.scope:l=await s.resolveWorkspaceFolder(y.revive(n.source.scope)):l=Is.Workspace),!c||!l)return;const u=new dh(c,l,n.name,n.source.label,a,n.problemMatchers);return n.isBackground!==void 0&&(u.isBackground=n.isBackground),n.group!==void 0&&(u.group=fl.from(n.group._id),u.group&&n.group.isDefault&&(u.group=new fl(u.group.id,u.group.label),n.group.isDefault===!0&&(u.group.isDefault=n.group.isDefault))),n.presentationOptions&&(u.presentationOptions=Bf.to(n.presentationOptions)),n._id&&(u._id=n._id),n.detail&&(u.detail=n.detail),u}r.to=i})(Fr||(Fr={}));var jv;(function(r){function e(i){return i}r.from=e;function t(i){if(i)return Object.assign(Object.create(null),i)}r.to=t})(jv||(jv={}));class qv{constructor(e,t,i){le(this,Du,void 0);this._id=t,this._task=i,J(this,Du,e)}get task(){return this._task}terminate(){I(this,Du).terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}}Du=new WeakMap;let Gv=class{constructor(e,t,i,n,s,o,a,c){this._onDidExecuteTask=new A,this._onDidTerminateTask=new A,this._onDidTaskProcessStarted=new A,this._onDidTaskProcessEnded=new A,this._proxy=e.getProxy(G.MainThreadTask),this._workspaceProvider=i,this._editorService=n,this._configurationService=s,this._terminalService=o,this._handleCounter=0,this._handlers=new Map,this._taskExecutions=new Map,this._taskExecutionPromises=new Map,this._providedCustomExecutions2=new Map,this._notProvidedCustomExecutions=new Set,this._activeCustomExecutions2=new Map,this._logService=a,this._deprecationService=c,this._proxy.$registerSupportedExecutions(!0)}registerTaskProvider(e,t,i){if(!i)return new Re(()=>{});const n=this.nextHandle();return this._handlers.set(n,{type:t,provider:i,extension:e}),this._proxy.$registerTaskProvider(n,t),new Re(()=>{this._handlers.delete(n),this._proxy.$unregisterTaskProvider(n)})}registerTaskSystem(e,t){this._proxy.$registerTaskSystem(e,t)}fetchTasks(e){return this._proxy.$fetchTasks(jv.from(e)).then(async t=>{const i=[];for(const n of t){const s=await Fr.to(n,this._workspaceProvider,this._providedCustomExecutions2);s&&i.push(s)}return i})}get taskExecutions(){const e=[];return this._taskExecutions.forEach(t=>e.push(t)),e}terminateTask(e){if(!(e instanceof qv))throw new Error("No valid task execution provided");return this._proxy.$terminateTask(e._id)}get onDidStartTask(){return this._onDidExecuteTask.event}async $onDidStartTask(e,t,i){const n=this._providedCustomExecutions2.get(e.id);n&&(this._activeCustomExecutions2.set(e.id,n),this._terminalService.attachPtyToTerminal(t,await n.callback(i))),this._lastStartedTask=e.id,this._onDidExecuteTask.fire({execution:await this.getTaskExecution(e)})}get onDidEndTask(){return this._onDidTerminateTask.event}async $OnDidEndTask(e){if(!this._taskExecutionPromises.has(e.id))return;const t=await this.getTaskExecution(e);this._taskExecutionPromises.delete(e.id),this._taskExecutions.delete(e.id),this.customExecutionComplete(e),this._onDidTerminateTask.fire({execution:t})}get onDidStartTaskProcess(){return this._onDidTaskProcessStarted.event}async $onDidStartTaskProcess(e){const t=await this.getTaskExecution(e.id);this._onDidTaskProcessStarted.fire({execution:t,processId:e.processId})}get onDidEndTaskProcess(){return this._onDidTaskProcessEnded.event}async $onDidEndTaskProcess(e){const t=await this.getTaskExecution(e.id);this._onDidTaskProcessEnded.fire({execution:t,exitCode:e.exitCode})}$provideTasks(e,t){const i=this._handlers.get(e);if(!i)return Promise.reject(new Error("no handler found"));const n=[],s=Ht(()=>i.provider.provideTasks(wt.None)).then(o=>this.provideTasksInternal(t,n,i,o));return new Promise(o=>{s.then(a=>{Promise.all(n).then(()=>{o(a)})})})}async $resolveTask(e,t){const i=this._handlers.get(e);if(!i)return Promise.reject(new Error("no handler found"));if(t.definition.type!==i.type)throw new Error(`Unexpected: Task of type [${t.definition.type}] cannot be resolved by provider of type [${i.type}].`);const n=await Fr.to(t,this._workspaceProvider,this._providedCustomExecutions2);if(!n)throw new Error("Unexpected: Task cannot be resolved.");const s=await i.provider.resolveTask(n,wt.None);if(!s)return;this.checkDeprecation(s,i);const o=Fr.from(s,i.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(s.definition!==n.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return Mn.is(o.execution)&&await this.addCustomExecution(o,s,!0),await this.resolveTaskInternal(o)}nextHandle(){return this._handleCounter++}async addCustomExecution(e,t,i){const n=await this._proxy.$createTaskId(e);!i&&!this._providedCustomExecutions2.has(n)&&(this._notProvidedCustomExecutions.add(n),this._activeCustomExecutions2.set(n,t.execution)),this._providedCustomExecutions2.set(n,t.execution)}async getTaskExecution(e,t){if(typeof e=="string"){const s=this._taskExecutionPromises.get(e);if(!s)throw new or("Unexpected: The specified task is missing an execution");return s}const i=this._taskExecutionPromises.get(e.id);if(i)return i;let n;return t?n=Promise.resolve(new qv(this,e.id,t)):n=Fr.to(e.task,this._workspaceProvider,this._providedCustomExecutions2).then(s=>{if(!s)throw new or("Unexpected: Task does not exist.");return new qv(this,e.id,s)}),this._taskExecutionPromises.set(e.id,n),n.then(s=>(this._taskExecutions.set(e.id,s),s))}checkDeprecation(e,t){e._deprecated&&this._deprecationService.report("Task.constructor",t.extension,"Use the Task constructor that takes a `scope` instead.")}customExecutionComplete(e){this._activeCustomExecutions2.get(e.id)&&this._activeCustomExecutions2.delete(e.id),this._notProvidedCustomExecutions.has(e.id)&&this._lastStartedTask!==e.id&&(this._providedCustomExecutions2.delete(e.id),this._notProvidedCustomExecutions.delete(e.id));const i=this._notProvidedCustomExecutions.values();let n=i.next();for(;!n.done;)!this._activeCustomExecutions2.has(n.value)&&this._lastStartedTask!==n.value&&(this._providedCustomExecutions2.delete(n.value),this._notProvidedCustomExecutions.delete(n.value)),n=i.next()}};Gv=H([$(0,We),$(1,Wt),$(2,$n),$(3,ql),$(4,Nn),$(5,Ra),$(6,Je),$(7,$f)],Gv);let Qv=class extends Gv{constructor(e,t,i,n,s,o,a,c){super(e,t,i,n,s,o,a,c),this.registerTaskSystem(Y.vscodeRemote,{scheme:Y.vscodeRemote,authority:"",platform:a4(0)})}async executeTask(e,t){if(!t.execution)throw new Error("Tasks to execute must include an execution");const i=Fr.from(t,e);if(i===void 0)throw new Error("Task is not valid");if(Mn.is(i.execution))await this.addCustomExecution(i,t,!1);else throw new Zp;const n=await this.getTaskExecution(await this._proxy.$getTaskExecution(i),t);return this._proxy.$executeTask(i).catch(s=>{throw new Error(s)}),n}provideTasksInternal(e,t,i,n){const s=[];if(n)for(const o of n){if(this.checkDeprecation(o,i),!o.definition||!e[o.definition.type]){const c=o.source?o.source:"No task source";this._logService.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=Fr.from(o,i.extension);a&&Mn.is(a.execution)?(s.push(a),t.push(this.addCustomExecution(a,o,!0))):this._logService.warn("Only custom execution tasks supported.")}return{tasks:s,extension:i.extension}}async resolveTaskInternal(e){if(Mn.is(e.execution))return e;this._logService.warn("Only custom execution tasks supported.")}async $resolveVariables(e,t){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(e,t,i){}};Qv=H([$(0,We),$(1,Wt),$(2,$n),$(3,ql),$(4,Nn),$(5,Ra),$(6,Je),$(7,$f)],Qv);const Q2=ie("IExtHostTask"),Zl=ie("IExtHostEditorTabs");class J2{constructor(e,t,i){this._activeTabIdGetter=i,this._parentGroup=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this._apiObject){const e=this,t={get isActive(){return e._dto.id===e._activeTabIdGetter()},get label(){return e._dto.label},get input(){return e._input},get isDirty(){return e._dto.isDirty},get isPinned(){return e._dto.isPinned},get isPreview(){return e._dto.isPreview},get group(){return e._parentGroup.apiObject}};this._apiObject=Object.freeze(t)}return this._apiObject}get tabId(){return this._dto.id}acceptDtoUpdate(e){this._dto=e,this._input=this._initInput()}_initInput(){switch(this._dto.input.kind){case 1:return new Zm(y.revive(this._dto.input.uri));case 2:return new Nh(y.revive(this._dto.input.original),y.revive(this._dto.input.modified));case 3:return new yx(y.revive(this._dto.input.base),y.revive(this._dto.input.input1),y.revive(this._dto.input.input2),y.revive(this._dto.input.result));case 6:return new e1(y.revive(this._dto.input.uri),this._dto.input.viewType);case 7:return new xx(this._dto.input.viewType);case 4:return new t1(y.revive(this._dto.input.uri),this._dto.input.notebookType);case 5:return new i1(y.revive(this._dto.input.original),y.revive(this._dto.input.modified),this._dto.input.notebookType);case 8:return new Cx;case 9:return new Sx(y.revive(this._dto.input.uri),y.revive(this._dto.input.inputBoxUri));case 10:return new Ex(this._dto.input.providerId);case 11:return new kx(this._dto.input.diffEditors.map(e=>new Nh(y.revive(e.original),y.revive(e.modified))));default:return}}}class qD{constructor(e,t){this._tabs=[],this._activeTabId="",this._dto=e,this._activeGroupIdGetter=t;for(const i of e.tabs)i.isActive&&(this._activeTabId=i.id),this._tabs.push(new J2(i,this,()=>this.activeTabId()))}get apiObject(){if(!this._apiObject){const e=this,t={get isActive(){return e._dto.groupId===e._activeGroupIdGetter()},get viewColumn(){return yt.to(e._dto.viewColumn)},get activeTab(){var i;return(i=e._tabs.find(n=>n.tabId===e._activeTabId))==null?void 0:i.apiObject},get tabs(){return Object.freeze(e._tabs.map(i=>i.apiObject))}};this._apiObject=Object.freeze(t)}return this._apiObject}get groupId(){return this._dto.groupId}get tabs(){return this._tabs}acceptGroupDtoUpdate(e){this._dto=e}acceptTabOperation(e){if(e.kind===0){const i=new J2(e.tabDto,this,()=>this.activeTabId());return this._tabs.splice(e.index,0,i),e.tabDto.isActive&&(this._activeTabId=i.tabId),i}else if(e.kind===1){const i=this._tabs.splice(e.index,1)[0];if(!i)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return i.tabId===this._activeTabId&&(this._activeTabId=""),i}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const i=this._tabs.splice(e.oldIndex,1)[0];if(!i)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this._tabs.splice(e.index,0,i),i}const t=this._tabs.find(i=>i.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this._activeTabId=e.tabDto.id:this._activeTabId===e.tabDto.id&&!e.tabDto.isActive&&(this._activeTabId=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this._activeTabId}}let Jv=class{constructor(e){this._onDidChangeTabs=new A,this._onDidChangeTabGroups=new A,this._extHostTabGroups=[],this._proxy=e.getProxy(G.MainThreadEditorTabs)}get tabGroups(){if(!this._apiObject){const e=this,t={onDidChangeTabGroups:e._onDidChangeTabGroups.event,onDidChangeTabs:e._onDidChangeTabs.event,get all(){return Object.freeze(e._extHostTabGroups.map(i=>i.apiObject))},get activeTabGroup(){var s;const i=e._activeGroupId;return Ro((s=e._extHostTabGroups.find(o=>o.groupId===i))==null?void 0:s.apiObject)},close:async(i,n)=>{const s=Array.isArray(i)?i:[i];return s.length?GD(s[0])?this._closeGroups(s,n):this._closeTabs(s,n):!0}};this._apiObject=Object.freeze(t)}return this._apiObject}$acceptEditorTabModel(e){var l;const t=new Set(this._extHostTabGroups.map(u=>u.groupId)),i=new Set(e.map(u=>u.groupId)),n=TS(t,i),s=this._extHostTabGroups.filter(u=>n.removed.includes(u.groupId)).map(u=>u.apiObject),o=[],a=[];this._extHostTabGroups=e.map(u=>{const d=new qD(u,()=>this._activeGroupId);return n.added.includes(d.groupId)?o.push(d.apiObject):a.push(d.apiObject),d});const c=Ro((l=e.find(u=>u.isActive===!0))==null?void 0:l.groupId);c!==void 0&&this._activeGroupId!==c&&(this._activeGroupId=c),this._onDidChangeTabGroups.fire(Object.freeze({opened:o,closed:s,changed:a}))}$acceptTabGroupUpdate(e){const t=this._extHostTabGroups.find(i=>i.groupId===e.groupId);if(!t)throw new Error("Update Group IPC call received before group creation.");t.acceptGroupDtoUpdate(e),e.isActive&&(this._activeGroupId=e.groupId),this._onDidChangeTabGroups.fire(Object.freeze({changed:[t.apiObject],opened:[],closed:[]}))}$acceptTabOperation(e){const t=this._extHostTabGroups.find(n=>n.groupId===e.groupId);if(!t)throw new Error("Update Tabs IPC call received before group creation.");const i=t.acceptTabOperation(e);switch(e.kind){case 0:this._onDidChangeTabs.fire(Object.freeze({opened:[i.apiObject],closed:[],changed:[]}));return;case 1:this._onDidChangeTabs.fire(Object.freeze({opened:[],closed:[i.apiObject],changed:[]}));return;case 3:case 2:this._onDidChangeTabs.fire(Object.freeze({opened:[],closed:[],changed:[i.apiObject]}));return}}_findExtHostTabFromApi(e){for(const t of this._extHostTabGroups)for(const i of t.tabs)if(i.apiObject===e)return i}_findExtHostTabGroupFromApi(e){return this._extHostTabGroups.find(t=>t.apiObject===e)}async _closeTabs(e,t){const i=[];for(const n of e){const s=this._findExtHostTabFromApi(n);if(!s)throw new Error("Tab close: Invalid tab not found!");i.push(s.tabId)}return this._proxy.$closeTab(i,t)}async _closeGroups(e,t){const i=[];for(const n of e){const s=this._findExtHostTabGroupFromApi(n);if(!s)throw new Error("Group close: Invalid group not found!");i.push(s.groupId)}return this._proxy.$closeGroup(i,t)}};Jv=H([$(0,We)],Jv);function GD(r){return r.tabs!==void 0}class QD{constructor(){this.pendingRequests=new Map,this.queue=[],this._onError=new A,this._onExit=new A,this.sequence=1}get onError(){return this._onError.event}get onExit(){return this._onExit.event}onMessage(e){this.messageCallback&&this._onError.fire(new Error("attempt to set more than one 'Message' callback")),this.messageCallback=e}onEvent(e){this.eventCallback&&this._onError.fire(new Error("attempt to set more than one 'Event' callback")),this.eventCallback=e}onRequest(e){this.requestCallback&&this._onError.fire(new Error("attempt to set more than one 'Request' callback")),this.requestCallback=e}sendResponse(e){e.seq>0?this._onError.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.internalSend("response",e)}sendRequest(e,t,i,n){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.internalSend("request",s),typeof n=="number"){const o=setTimeout(()=>{clearTimeout(o);const a=this.pendingRequests.get(s.seq);if(a){this.pendingRequests.delete(s.seq);const c={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:f("vs/workbench/contrib/debug/common/abstractDebugAdapter","timeout","Timeout after {0} ms for '{1}'",n,e)};a(c)}},n)}return i&&this.pendingRequests.set(s.seq,i),s.seq}acceptMessage(e){this.messageCallback?this.messageCallback(e):(this.queue.push(e),this.queue.length===1&&this.processQueue())}needsTaskBoundaryBetween(e,t){return e.type!=="event"||t.type!=="event"}async processQueue(){var t,i;let e;for(;this.queue.length;){if((!e||this.needsTaskBoundaryBetween(this.queue[0],e))&&await mr(0),e=this.queue.shift(),!e)return;switch(e.type){case"event":(t=this.eventCallback)==null||t.call(this,e);break;case"request":(i=this.requestCallback)==null||i.call(this,e);break;case"response":{const n=e,s=this.pendingRequests.get(n.request_seq);s&&(this.pendingRequests.delete(n.request_seq),s(n));break}}}}internalSend(e,t){t.type=e,t.seq=this.sequence++,this.sendMessage(t)}async cancelPendingRequests(){if(this.pendingRequests.size===0)return Promise.resolve();const e=new Map;this.pendingRequests.forEach((t,i)=>e.set(i,t)),await mr(500),e.forEach((t,i)=>{t({type:"response",seq:0,request_seq:i,success:!1,command:"canceled",message:"canceled"}),this.pendingRequests.delete(i)})}getPendingRequestIds(){return Array.from(this.pendingRequests.keys())}dispose(){this.queue=[]}}function JD(r){return r.type&&(r.label||r.program||r.runtime)}const KD=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function XD(r){return!!(r&&r.match(KD))}function K2(r){if(typeof r.path=="string"&&!(typeof r.sourceReference=="number"&&r.sourceReference>0)){if(XD(r.path))return y.parse(r.path);if(mg(r.path))return y.file(r.path)}return r.path}function X2(r){if(typeof r.path=="object"){const e=y.revive(r.path);if(e)return e.scheme===Y.file?e.fsPath:e.toString()}return r.path}function YD(r,e){const t=e?K2:X2,i=rt(r);return Y2(i,(n,s)=>{n&&s&&(s.path=t(s))}),i}function ZD(r,e){const t=e?K2:X2,i=rt(r);return Y2(i,(n,s)=>{!n&&s&&(s.path=t(s))}),i}function Y2(r,e){var t;switch(r.type){case"event":{const i=r;switch(i.event){case"output":e(!1,i.body.source);break;case"loadedSource":e(!1,i.body.source);break;case"breakpoint":e(!1,i.body.breakpoint.source);break}break}case"request":{const i=r;switch(i.command){case"setBreakpoints":e(!0,i.arguments.source);break;case"breakpointLocations":e(!0,i.arguments.source);break;case"source":e(!0,i.arguments.source);break;case"gotoTargets":e(!0,i.arguments.source);break;case"launchVSCode":i.arguments.args.forEach(n=>e(!1,n));break}break}case"response":{const i=r;if(i.success&&i.body)switch(i.command){case"stackTrace":i.body.stackFrames.forEach(n=>e(!1,n.source));break;case"loadedSources":i.body.sources.forEach(n=>e(!1,n));break;case"scopes":i.body.scopes.forEach(n=>e(!1,n.source));break;case"setFunctionBreakpoints":i.body.breakpoints.forEach(n=>e(!1,n.source));break;case"setBreakpoints":i.body.breakpoints.forEach(n=>e(!1,n.source));break;case"disassemble":(t=i.body)==null||t.instructions.forEach(s=>e(!1,s.location));break}break}}}ie("configurationResolverService");var Ye;(function(r){r.Unknown="unknown",r.Env="env",r.Config="config",r.Command="command",r.Input="input",r.ExtensionInstallFolder="extensionInstallFolder",r.WorkspaceFolder="workspaceFolder",r.Cwd="cwd",r.WorkspaceFolderBasename="workspaceFolderBasename",r.UserHome="userHome",r.LineNumber="lineNumber",r.SelectedText="selectedText",r.File="file",r.FileWorkspaceFolder="fileWorkspaceFolder",r.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",r.RelativeFile="relativeFile",r.RelativeFileDirname="relativeFileDirname",r.FileDirname="fileDirname",r.FileExtname="fileExtname",r.FileBasename="fileBasename",r.FileBasenameNoExtension="fileBasenameNoExtension",r.FileDirnameBasename="fileDirnameBasename",r.ExecPath="execPath",r.ExecInstallFolder="execInstallFolder",r.PathSeparator="pathSeparator",r.PathSeparatorAlias="/"})(Ye||(Ye={}));class si extends Error{constructor(e,t){super(t),this.variable=e}}const io=class io{constructor(e,t,i,n){this._contributedVariables=new Map,this._context=e,this._labelService=t,this._userHomePromise=i,n&&(this._envVariablesPromise=n.then(s=>this.prepareEnv(s)))}prepareEnv(e){if(ui){const t=Object.create(null);return Object.keys(e).forEach(i=>{t[i.toLowerCase()]=e[i]}),t}return e}resolveWithEnvironment(e,t,i){return this.recursiveResolve({env:this.prepareEnv(e),userHome:void 0},t?t.uri:void 0,i)}async resolveAsync(e,t){const i={env:await this._envVariablesPromise,userHome:await this._userHomePromise};return this.recursiveResolve(i,e?e.uri:void 0,t)}async resolveAnyBase(e,t,i,n){const s=rt(t);ui&&s.windows?Object.keys(s.windows).forEach(a=>s[a]=s.windows[a]):Fi&&s.osx?Object.keys(s.osx).forEach(a=>s[a]=s.osx[a]):cr&&s.linux&&Object.keys(s.linux).forEach(a=>s[a]=s.linux[a]),delete s.windows,delete s.osx,delete s.linux;const o={env:await this._envVariablesPromise,userHome:await this._userHomePromise};return this.recursiveResolve(o,e?e.uri:void 0,s,i,n)}async resolveAnyAsync(e,t,i){return this.resolveAnyBase(e,t,i)}async resolveAnyMap(e,t,i){const n=new Map;return{newConfig:await this.resolveAnyBase(e,t,i,n),resolvedVariables:n}}resolveWithInteractionReplace(e,t,i,n){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(e,t,i,n){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(e,t){if(this._contributedVariables.has(e))throw new Error("Variable "+e+" is contributed twice.");this._contributedVariables.set(e,t)}async recursiveResolve(e,t,i,n,s){if(Oe(i))return this.resolveString(e,t,i,n,s);if(Array.isArray(i))return Promise.all(i.map(o=>this.recursiveResolve(e,t,o,n,s)));if(Ft(i)){const o=Object.create(null),a=await Promise.all(Object.keys(i).map(async c=>[await this.resolveString(e,t,c,n,s),await this.recursiveResolve(e,t,i[c],n,s)]));for(const[c,l]of a)o[c]=l;return o}return i}resolveString(e,t,i,n,s){return F4(i,io.VARIABLE_REGEXP,async(o,a)=>{if(a.includes(io.VARIABLE_LHS))return o;let c=await this.evaluateSingleVariable(e,o,a,t,n);return s==null||s.set(a,c),c!==o&&Oe(c)&&c.match(io.VARIABLE_REGEXP)&&(c=await this.resolveString(e,t,c,n,s)),c})}fsPath(e){return this._labelService?this._labelService.getUriLabel(e,{noPrefix:!0}):e.fsPath}async evaluateSingleVariable(e,t,i,n,s){let o;const a=i.split(":");a.length>1&&(i=a[0],o=a[1]);const c=d=>{const h=this._context.getFilePath();if(h)return Bl(h);throw new si(d,f("vs/workbench/services/configurationResolver/common/variableResolver","canNotResolveFile","Variable {0} can not be resolved. Please open an editor.",t))},l=d=>{const h=c(d);if(this._context.getWorkspaceFolderPathForFile){const g=this._context.getWorkspaceFolderPathForFile();if(g)return Bl(g)}throw new si(d,f("vs/workbench/services/configurationResolver/common/variableResolver","canNotResolveFolderForFile","Variable {0}: can not find workspace folder of '{1}'.",t,hi(h)))},u=d=>{if(o){const h=this._context.getFolderUri(o);if(h)return h;throw new si(d,f("vs/workbench/services/configurationResolver/common/variableResolver","canNotFindFolder","Variable {0} can not be resolved. No such folder '{1}'.",t,o))}if(n)return n;throw this._context.getWorkspaceFolderCount()>1?new si(d,f("vs/workbench/services/configurationResolver/common/variableResolver","canNotResolveWorkspaceFolderMultiRoot","Variable {0} can not be resolved in a multi folder workspace. Scope this variable using ':' and a workspace folder name.",t)):new si(d,f("vs/workbench/services/configurationResolver/common/variableResolver","canNotResolveWorkspaceFolder","Variable {0} can not be resolved. Please open a folder.",t))};switch(i){case"env":if(o){if(e.env){const d=e.env[ui?o.toLowerCase():o];if(Oe(d))return d}return""}throw new si(Ye.Env,f("vs/workbench/services/configurationResolver/common/variableResolver","missingEnvVarName","Variable {0} can not be resolved because no environment variable name is given.",t));case"config":if(o){const d=this._context.getConfigurationValue(n,o);if(Gt(d))throw new si(Ye.Config,f("vs/workbench/services/configurationResolver/common/variableResolver","configNotFound","Variable {0} can not be resolved because setting '{1}' not found.",t,o));if(Ft(d))throw new si(Ye.Config,f("vs/workbench/services/configurationResolver/common/variableResolver","configNoString","Variable {0} can not be resolved because '{1}' is a structured value.",t,o));return d}throw new si(Ye.Config,f("vs/workbench/services/configurationResolver/common/variableResolver","missingConfigName","Variable {0} can not be resolved because no settings name is given.",t));case"command":return this.resolveFromMap(Ye.Command,t,o,s,"command");case"input":return this.resolveFromMap(Ye.Input,t,o,s,"input");case"extensionInstallFolder":if(o){const d=await this._context.getExtension(o);if(!d)throw new si(Ye.ExtensionInstallFolder,f("vs/workbench/services/configurationResolver/common/variableResolver","extensionNotInstalled","Variable {0} can not be resolved because the extension {1} is not installed.",t,o));return this.fsPath(d.extensionLocation)}throw new si(Ye.ExtensionInstallFolder,f("vs/workbench/services/configurationResolver/common/variableResolver","missingExtensionName","Variable {0} can not be resolved because no extension name is given.",t));default:switch(i){case"workspaceRoot":case"workspaceFolder":return Bl(this.fsPath(u(Ye.WorkspaceFolder)));case"cwd":return n||o?Bl(this.fsPath(u(Ye.Cwd))):Io();case"workspaceRootFolderName":case"workspaceFolderBasename":return Bl(hi(this.fsPath(u(Ye.WorkspaceFolderBasename))));case"userHome":{if(e.userHome)return e.userHome;throw new si(Ye.UserHome,f("vs/workbench/services/configurationResolver/common/variableResolver","canNotResolveUserHome","Variable {0} can not be resolved. UserHome path is not defined",t))}case"lineNumber":{const d=this._context.getLineNumber();if(d)return d;throw new si(Ye.LineNumber,f("vs/workbench/services/configurationResolver/common/variableResolver","canNotResolveLineNumber","Variable {0} can not be resolved. Make sure to have a line selected in the active editor.",t))}case"selectedText":{const d=this._context.getSelectedText();if(d)return d;throw new si(Ye.SelectedText,f("vs/workbench/services/configurationResolver/common/variableResolver","canNotResolveSelectedText","Variable {0} can not be resolved. Make sure to have some text selected in the active editor.",t))}case"file":return c(Ye.File);case"fileWorkspaceFolder":return l(Ye.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return hi(l(Ye.FileWorkspaceFolderBasename));case"relativeFile":return n||o?Ic(this.fsPath(u(Ye.RelativeFile)),c(Ye.RelativeFile)):c(Ye.RelativeFile);case"relativeFileDirname":{const d=rs(c(Ye.RelativeFileDirname));if(n||o){const h=Ic(this.fsPath(u(Ye.RelativeFileDirname)),d);return h.length===0?".":h}return d}case"fileDirname":return rs(c(Ye.FileDirname));case"fileExtname":return vg(c(Ye.FileExtname));case"fileBasename":return hi(c(Ye.FileBasename));case"fileBasenameNoExtension":{const d=hi(c(Ye.FileBasenameNoExtension));return d.slice(0,d.length-vg(d).length)}case"fileDirnameBasename":return hi(rs(c(Ye.FileDirnameBasename)));case"execPath":{const d=this._context.getExecPath();return d||t}case"execInstallFolder":{const d=this._context.getAppRoot();return d||t}case"pathSeparator":case"/":return Hi;default:try{const d=o?`${i}:${o}`:i;return this.resolveFromMap(Ye.Unknown,t,d,s,void 0)}catch{return t}}}}resolveFromMap(e,t,i,n,s){if(i&&n){const o=s===void 0?n[i]:n[s+":"+i];if(typeof o=="string")return o;throw new si(e,f("vs/workbench/services/configurationResolver/common/variableResolver","noValueForCommand","Variable {0} can not be resolved because the command has no value.",t))}return t}};io.VARIABLE_LHS="${",io.VARIABLE_REGEXP=/\$\{(.*?)\}/g;let Kv=io;const Xv=ie("IExtHostVariableResolverProvider");class eI extends Kv{constructor(e,t,i,n,s,o,a){function c(){var l;if(i){const u=i.activeEditor();if(u)return u.document.uri;const d=(l=n.tabGroups.all.find(h=>h.isActive))==null?void 0:l.activeTab;if(d!==void 0){if(d.input instanceof Nh||d.input instanceof i1)return d.input.modified;if(d.input instanceof Zm||d.input instanceof t1||d.input instanceof e1)return d.input.uri}}}super({getFolderUri:l=>{const u=o.folders.filter(d=>d.name===l);if(u&&u.length>0)return u[0].uri},getWorkspaceFolderCount:()=>o.folders.length,getConfigurationValue:(l,u)=>s.getConfiguration(void 0,l).get(u),getAppRoot:()=>Io(),getExecPath:()=>pg.VSCODE_EXEC_PATH,getFilePath:()=>{const l=c();if(l)return Po(l.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const l=c();if(l){const u=t.getWorkspaceFolder(l);if(u)return Po(u.uri.fsPath)}}},getSelectedText:()=>{if(i){const l=i.activeEditor();if(l&&!l.selection.isEmpty)return l.document.getText(l.selection)}},getLineNumber:()=>{if(i){const l=i.activeEditor();if(l)return String(l.selection.end.line+1)}},getExtension:l=>e.getExtension(l)},void 0,a?Promise.resolve(a):void 0,Promise.resolve(pg))}}let Yv=class extends Ne{constructor(e,t,i,n,s){super(),this.extensionService=e,this.workspaceService=t,this.editorService=i,this.configurationService=n,this.editorTabs=s,this._resolver=new et(async()=>{const o=await this.configurationService.getConfigProvider(),c={folders:await this.workspaceService.getWorkspaceFolders2()||[]};return this._register(this.workspaceService.onDidChangeWorkspace(async l=>{c.folders=await this.workspaceService.getWorkspaceFolders2()||[]})),new eI(this.extensionService,this.workspaceService,this.editorService,this.editorTabs,o,c,this.homeDir())})}getResolver(){return this._resolver.value}homeDir(){}};Yv=H([$(0,Mr),$(1,$n),$(2,ql),$(3,Nn),$(4,Zl)],Yv);const Z2=ie("IExtHostDebugService");let Zv=class{get onDidStartDebugSession(){return this._onDidStartDebugSession.event}get onDidTerminateDebugSession(){return this._onDidTerminateDebugSession.event}get onDidChangeActiveDebugSession(){return this._onDidChangeActiveDebugSession.event}get activeDebugSession(){var e;return(e=this._activeDebugSession)==null?void 0:e.api}get onDidReceiveDebugSessionCustomEvent(){return this._onDidReceiveDebugSessionCustomEvent.event}get activeDebugConsole(){return this._activeDebugConsole.value}constructor(e,t,i,n,s,o,a){this._workspaceService=t,this._extensionService=i,this._configurationService=n,this._editorTabs=s,this._variableResolver=o,this._commands=a,this._debugSessions=new Map,this._debugVisualizationTreeItemIdsCounter=0,this._debugVisualizationProviders=new Map,this._debugVisualizationTrees=new Map,this._debugVisualizationTreeItemIds=new WeakMap,this._debugVisualizationElements=new Map,this._visualizers=new Map,this._visualizerIdCounter=0,this._configProviderHandleCounter=0,this._configProviders=[],this._adapterFactoryHandleCounter=0,this._adapterFactories=[],this._trackerFactoryHandleCounter=0,this._trackerFactories=[],this._debugAdapters=new Map,this._debugAdaptersTrackers=new Map,this._onDidStartDebugSession=new A,this._onDidTerminateDebugSession=new A,this._onDidChangeActiveDebugSession=new A,this._onDidReceiveDebugSessionCustomEvent=new A,this._debugServiceProxy=e.getProxy(G.MainThreadDebugService),this._onDidChangeBreakpoints=new A,this._onDidChangeActiveStackItem=new A,this._activeDebugConsole=new iI(this._debugServiceProxy),this._breakpoints=new Map,this._extensionService.getExtensionRegistry().then(c=>{c.onDidChange(l=>{this.registerAllDebugTypes(c)}),this.registerAllDebugTypes(c)})}async $getVisualizerTreeItem(e,t){var s,o;const i=this.hydrateVisualizationContext(t);if(!i)return;const n=await((o=(s=this._debugVisualizationTrees.get(e))==null?void 0:s.getTreeItem)==null?void 0:o.call(s,i));return n?this.convertVisualizerTreeItem(e,n):void 0}registerDebugVisualizationTree(e,t,i){const n=Xe.toKey(e.identifier),s=this.extensionVisKey(n,t);if(this._debugVisualizationProviders.has(s))throw new Error(`A debug visualization provider with id '${t}' is already registered`);return this._debugVisualizationTrees.set(s,i),this._debugServiceProxy.$registerDebugVisualizerTree(s,!!i.editItem),Ce(()=>{this._debugServiceProxy.$unregisterDebugVisualizerTree(s),this._debugVisualizationTrees.delete(t)})}async $getVisualizerTreeItemChildren(e,t){var s,o,a;const i=(s=this._debugVisualizationElements.get(t))==null?void 0:s.item;if(!i)return[];const n=await((a=(o=this._debugVisualizationTrees.get(e))==null?void 0:o.getChildren)==null?void 0:a.call(o,i));return(n==null?void 0:n.map(c=>this.convertVisualizerTreeItem(e,c)))||[]}async $editVisualizerTreeItem(e,t){var s,o;const i=this._debugVisualizationElements.get(e);if(!i)return;const n=await((o=(s=this._debugVisualizationTrees.get(i.provider))==null?void 0:s.editItem)==null?void 0:o.call(s,i.item,t));return this.convertVisualizerTreeItem(i.provider,n||i.item)}$disposeVisualizedTree(e){var n;const t=this._debugVisualizationElements.get(e);if(!t)return;const i=[t.children];for(const s of i)if(s)for(const o of s)i.push((n=this._debugVisualizationElements.get(o))==null?void 0:n.children),this._debugVisualizationElements.delete(o)}convertVisualizerTreeItem(e,t){let i=this._debugVisualizationTreeItemIds.get(t);return i||(i=this._debugVisualizationTreeItemIdsCounter++,this._debugVisualizationTreeItemIds.set(t,i),this._debugVisualizationElements.set(i,{provider:e,item:t})),F1.from(t,i)}asDebugSourceUri(e,t){const i=e;if(typeof i.sourceReference=="number"&&i.sourceReference>0){let n=`debug:${encodeURIComponent(i.path||"")}`,s="?";return t&&(n+=`${s}session=${encodeURIComponent(t.id)}`,s="&"),n+=`${s}ref=${i.sourceReference}`,y.parse(n)}else{if(i.path)return y.file(i.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}registerAllDebugTypes(e){const t=[];for(const i of e.getAllExtensionDescriptions())if(i.contributes){const n=i.contributes.debuggers;if(n&&n.length>0)for(const s of n)JD(s)&&t.push(s.type)}this._debugServiceProxy.$registerDebugTypes(t)}get activeStackItem(){return this._activeStackItem}get onDidChangeActiveStackItem(){return this._onDidChangeActiveStackItem.event}get onDidChangeBreakpoints(){return this._onDidChangeBreakpoints.event}get breakpoints(){const e=[];return this._breakpoints.forEach(t=>e.push(t)),e}async $resolveDebugVisualizer(e,t){var a;const i=this._visualizers.get(e);if(!i)throw new Error(`No debug visualizer found with id '${e}'`);let{v:n,provider:s,extensionId:o}=i;if(n.visualization||(n=await((a=s.resolveDebugVisualization)==null?void 0:a.call(s,n,t))||n,i.v=n),!n.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${s}'`);return this.serializeVisualization(o,n.visualization)}async $executeDebugVisualizerCommand(e){const t=this._visualizers.get(e);if(!t)throw new Error(`No debug visualizer found with id '${e}'`);const i=t.v.visualization;i&&"command"in i&&this._commands.executeCommand(i.command,...i.arguments||[])}hydrateVisualizationContext(e){const t=this._debugSessions.get(e.sessionId);return t&&{session:t.api,variable:e.variable,containerId:e.containerId,frameId:e.frameId,threadId:e.threadId}}async $provideDebugVisualizers(e,t,i,n){const s=this.hydrateVisualizationContext(i),o=this.extensionVisKey(e,t),a=this._debugVisualizationProviders.get(o);if(!s||!a)return[];const c=await a.provideDebugVisualization(s,n);return c?c.map(l=>{const u=++this._visualizerIdCounter;this._visualizers.set(u,{v:l,provider:a,extensionId:e});const d=l.iconPath?this.getIconPathOrClass(l.iconPath):void 0;return{id:u,name:l.name,iconClass:d==null?void 0:d.iconClass,iconPath:d==null?void 0:d.iconPath,visualization:this.serializeVisualization(e,l.visualization)}}):[]}$disposeDebugVisualizers(e){for(const t of e)this._visualizers.delete(t)}registerDebugVisualizationProvider(e,t,i){var o,a;if(!((a=(o=e.contributes)==null?void 0:o.debugVisualizers)!=null&&a.some(c=>c.id===t)))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${t})`);const n=Xe.toKey(e.identifier),s=this.extensionVisKey(n,t);if(this._debugVisualizationProviders.has(s))throw new Error(`A debug visualization provider with id '${t}' is already registered`);return this._debugVisualizationProviders.set(s,i),this._debugServiceProxy.$registerDebugVisualizer(n,t),Ce(()=>{this._debugServiceProxy.$unregisterDebugVisualizer(n,t),this._debugVisualizationProviders.delete(t)})}addBreakpoints(e){const t=e.filter(s=>{const o=s.id;return this._breakpoints.has(o)?!1:(this._breakpoints.set(o,s),!0)});this.fireBreakpointChanges(t,[],[]);const i=[],n=new Map;for(const s of t)if(s instanceof As){let o=n.get(s.location.uri.toString());o||(o={type:"sourceMulti",uri:s.location.uri,lines:[]},n.set(s.location.uri.toString(),o),i.push(o)),o.lines.push({id:s.id,enabled:s.enabled,condition:s.condition,hitCondition:s.hitCondition,logMessage:s.logMessage,line:s.location.range.start.line,character:s.location.range.start.character,mode:s.mode})}else s instanceof Rs&&i.push({type:"function",id:s.id,enabled:s.enabled,hitCondition:s.hitCondition,logMessage:s.logMessage,condition:s.condition,functionName:s.functionName,mode:s.mode});return this._debugServiceProxy.$registerBreakpoints(i)}removeBreakpoints(e){const t=e.filter(o=>this._breakpoints.delete(o.id));this.fireBreakpointChanges([],t,[]);const i=t.filter(o=>o instanceof As).map(o=>o.id),n=t.filter(o=>o instanceof Rs).map(o=>o.id),s=t.filter(o=>o instanceof gh).map(o=>o.id);return this._debugServiceProxy.$unregisterBreakpoints(i,n,s)}startDebugging(e,t,i){var n,s,o;return this._debugServiceProxy.$startDebugging(e?e.uri:void 0,t,{parentSessionID:i.parentSession?i.parentSession.id:void 0,lifecycleManagedByParent:i.lifecycleManagedByParent,repl:i.consoleMode===Sh.MergeWithParent?"mergeWithParent":"separate",noDebug:i.noDebug,compact:i.compact,suppressSaveBeforeStart:i.suppressSaveBeforeStart,suppressDebugStatusbar:i.suppressDebugStatusbar??((n=i.debugUI)==null?void 0:n.simple),suppressDebugToolbar:i.suppressDebugToolbar??((s=i.debugUI)==null?void 0:s.simple),suppressDebugView:i.suppressDebugView??((o=i.debugUI)==null?void 0:o.simple)})}stopDebugging(e){return this._debugServiceProxy.$stopDebugging(e?e.id:void 0)}registerDebugConfigurationProvider(e,t,i){if(!t)return new Re(()=>{});const n=this._configProviderHandleCounter++;return this._configProviders.push({type:e,handle:n,provider:t}),this._debugServiceProxy.$registerDebugConfigurationProvider(e,i,!!t.provideDebugConfigurations,!!t.resolveDebugConfiguration,!!t.resolveDebugConfigurationWithSubstitutedVariables,n),new Re(()=>{this._configProviders=this._configProviders.filter(s=>s.provider!==t),this._debugServiceProxy.$unregisterDebugConfigurationProvider(n)})}registerDebugAdapterDescriptorFactory(e,t,i){if(!i)return new Re(()=>{});if(!this.definesDebugType(e,t))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${t}' debugger.`);if(this.getAdapterDescriptorFactoryByType(t))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const n=this._adapterFactoryHandleCounter++;return this._adapterFactories.push({type:t,handle:n,factory:i}),this._debugServiceProxy.$registerDebugAdapterDescriptorFactory(t,n),new Re(()=>{this._adapterFactories=this._adapterFactories.filter(s=>s.factory!==i),this._debugServiceProxy.$unregisterDebugAdapterDescriptorFactory(n)})}registerDebugAdapterTrackerFactory(e,t){if(!t)return new Re(()=>{});const i=this._trackerFactoryHandleCounter++;return this._trackerFactories.push({type:e,handle:i,factory:t}),new Re(()=>{this._trackerFactories=this._trackerFactories.filter(n=>n.factory!==t)})}async $runInTerminal(e,t){return Promise.resolve(void 0)}async $substituteVariables(e,t){let i;const n=await this.getFolder(e);return n&&(i={uri:n.uri,name:n.name,index:n.index,toResource:()=>{throw new Error("Not implemented")}}),(await this._variableResolver.getResolver()).resolveAnyAsync(i,t)}createDebugAdapter(e,t){if(e.type==="implementation")return new rI(e.implementation)}createSignService(){}async $startDASession(e,t){const i=this,n=await this.getSession(t);return this.getAdapterDescriptor(this.getAdapterDescriptorFactoryByType(n.type),n).then(s=>{if(!s)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${n.type}' (extension might have failed to activate)`);const o=this.convertToDto(s),a=this.createDebugAdapter(o,n);if(!a)throw new Error(`Couldn't create a debug adapter for type '${n.type}'.`);const c=a;return this._debugAdapters.set(e,c),this.getDebugAdapterTrackers(n).then(l=>(l&&this._debugAdaptersTrackers.set(e,l),c.onMessage(async u=>{if(u.type==="request"&&u.command==="handshake"){const d=u,h={type:"response",seq:0,command:d.command,request_seq:d.seq,success:!0};this._signService||(this._signService=this.createSignService());try{if(this._signService){const g=await this._signService.sign(d.arguments.value);h.body={signature:g},c.sendResponse(h)}else throw new Error("no signer")}catch(g){h.success=!1,h.message=g.message,c.sendResponse(h)}}else l&&l.onDidSendMessage&&l.onDidSendMessage(u),u=ZD(u,!0),i._debugServiceProxy.$acceptDAMessage(e,u)}),c.onError(u=>{l&&l.onError&&l.onError(u),this._debugServiceProxy.$acceptDAError(e,u.name,u.message,u.stack)}),c.onExit(u=>{l&&l.onExit&&l.onExit(u??void 0,void 0),this._debugServiceProxy.$acceptDAExit(e,u??void 0,void 0)}),l&&l.onWillStartSession&&l.onWillStartSession(),c.startSession()))})}$sendDAMessage(e,t){t=YD(t,!1);const i=this._debugAdaptersTrackers.get(e);i&&i.onWillReceiveMessage&&i.onWillReceiveMessage(t);const n=this._debugAdapters.get(e);n==null||n.sendMessage(t)}$stopDASession(e){const t=this._debugAdaptersTrackers.get(e);this._debugAdaptersTrackers.delete(e),t&&t.onWillStopSession&&t.onWillStopSession();const i=this._debugAdapters.get(e);return this._debugAdapters.delete(e),i?i.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(e){const t=[],i=[],n=[];if(e.added)for(const s of e.added){const o=s.id;if(o&&!this._breakpoints.has(o)){let a;if(s.type==="function")a=new Rs(s.functionName,s.enabled,s.condition,s.hitCondition,s.logMessage,s.mode);else if(s.type==="data")a=new gh(s.label,s.dataId,s.canPersist,s.enabled,s.hitCondition,s.condition,s.logMessage,s.mode);else{const c=y.revive(s.uri);a=new As(new yi(c,new Ee(s.line,s.character)),s.enabled,s.condition,s.hitCondition,s.logMessage,s.mode)}L7(a,o),this._breakpoints.set(o,a),t.push(a)}}if(e.removed)for(const s of e.removed){const o=this._breakpoints.get(s);o&&(this._breakpoints.delete(s),i.push(o))}if(e.changed){for(const s of e.changed)if(s.id){const o=this._breakpoints.get(s.id);if(o){if(o instanceof Rs&&s.type==="function"){const a=o;a.enabled=s.enabled,a.condition=s.condition,a.hitCondition=s.hitCondition,a.logMessage=s.logMessage,a.functionName=s.functionName}else if(o instanceof As&&s.type==="source"){const a=o;a.enabled=s.enabled,a.condition=s.condition,a.hitCondition=s.hitCondition,a.logMessage=s.logMessage,a.location=new yi(y.revive(s.uri),new Ee(s.line,s.character))}n.push(o)}}}this.fireBreakpointChanges(t,i,n)}async $acceptStackFrameFocus(e){let t;if(e){const i=await this.getSession(e.sessionId);e.kind==="thread"?t=new gx(i.api,e.threadId):t=new px(i.api,e.threadId,e.frameId)}this._activeStackItem=t,this._onDidChangeActiveStackItem.fire(this._activeStackItem)}$provideDebugConfigurations(e,t,i){return Ht(async()=>{const n=this.getConfigProviderByHandle(e);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const s=await this.getFolder(t);return n.provideDebugConfigurations(s,i)}).then(n=>{if(!n)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return n})}$resolveDebugConfiguration(e,t,i,n){return Ht(async()=>{const s=this.getConfigProviderByHandle(e);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.getFolder(t);return s.resolveDebugConfiguration(o,i,n)})}$resolveDebugConfigurationWithSubstitutedVariables(e,t,i,n){return Ht(async()=>{const s=this.getConfigProviderByHandle(e);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.getFolder(t);return s.resolveDebugConfigurationWithSubstitutedVariables(o,i,n)})}async $provideDebugAdapter(e,t){const i=this.getAdapterDescriptorFactoryByHandle(e);if(!i)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const n=await this.getSession(t);return this.getAdapterDescriptor(i,n).then(s=>{if(!s)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${n.type}'`);return this.convertToDto(s)})}async $acceptDebugSessionStarted(e){const t=await this.getSession(e);this._onDidStartDebugSession.fire(t.api)}async $acceptDebugSessionTerminated(e){const t=await this.getSession(e);t&&(this._onDidTerminateDebugSession.fire(t.api),this._debugSessions.delete(t.id))}async $acceptDebugSessionActiveChanged(e){var t;this._activeDebugSession=e?await this.getSession(e):void 0,this._onDidChangeActiveDebugSession.fire((t=this._activeDebugSession)==null?void 0:t.api)}async $acceptDebugSessionNameChanged(e,t){const i=await this.getSession(e);i==null||i._acceptNameChanged(t)}async $acceptDebugSessionCustomEvent(e,t){const n={session:(await this.getSession(e)).api,event:t.event,body:t.body};this._onDidReceiveDebugSessionCustomEvent.fire(n)}convertToDto(e){if(e instanceof mh)return{type:"executable",command:e.command,args:e.args,options:e.options};if(e instanceof ml)return{type:"server",port:e.port,host:e.host};if(e instanceof vh)return{type:"pipeServer",path:e.path};if(e instanceof _h)return{type:"implementation",implementation:e.implementation};throw new Error("convertToDto unexpected type")}getAdapterDescriptorFactoryByType(e){const t=this._adapterFactories.filter(i=>i.type===e);if(t.length>0)return t[0].factory}getAdapterDescriptorFactoryByHandle(e){const t=this._adapterFactories.filter(i=>i.handle===e);if(t.length>0)return t[0].factory}getConfigProviderByHandle(e){const t=this._configProviders.filter(i=>i.handle===e);if(t.length>0)return t[0].provider}definesDebugType(e,t){if(e.contributes){const i=e.contributes.debuggers;if(i&&i.length>0){for(const n of i)if(n.label&&n.type&&n.type===t)return!0}}return!1}getDebugAdapterTrackers(e){const i=e.configuration.type,n=this._trackerFactories.filter(s=>s.type===i||s.type==="*").map(s=>Ht(()=>s.factory.createDebugAdapterTracker(e.api)).then(o=>o,o=>null));return Promise.race([Promise.all(n).then(s=>{const o=s.filter(a=>!!a);if(o.length>0)return new nI(o)}),new Promise(s=>setTimeout(()=>s(void 0),1e3))]).catch(s=>{})}async getAdapterDescriptor(e,t){const i=t.configuration.debugServer;if(typeof i=="number")return Promise.resolve(new ml(i));if(e){const s=await this._extensionService.getExtensionRegistry();return Ht(()=>e.createDebugAdapterDescriptor(t.api,this.daExecutableFromPackage(t,s))).then(o=>{if(o)return o})}const n=await this._extensionService.getExtensionRegistry();return Promise.resolve(this.daExecutableFromPackage(t,n))}daExecutableFromPackage(e,t){}fireBreakpointChanges(e,t,i){(e.length>0||t.length>0||i.length>0)&&this._onDidChangeBreakpoints.fire(Object.freeze({added:e,removed:t,changed:i}))}async getSession(e){if(e)if(typeof e=="string"){const t=this._debugSessions.get(e);if(t)return t}else{let t=this._debugSessions.get(e.id);if(!t){const i=await this.getFolder(e.folderUri),n=e.parent?this._debugSessions.get(e.parent):void 0;t=new tI(this._debugServiceProxy,e.id,e.type,e.name,i,e.configuration,n==null?void 0:n.api),this._debugSessions.set(t.id,t),this._debugServiceProxy.$sessionCached(t.id)}return t}throw new Error("cannot find session")}getFolder(e){if(e){const t=y.revive(e);return this._workspaceService.resolveWorkspaceFolder(t)}return Promise.resolve(void 0)}extensionVisKey(e,t){return`${e}\0${t}`}serializeVisualization(e,t){if(t){if("title"in t&&"command"in t)return{type:0};if("treeId"in t)return{type:1,id:`${e}\0${t.treeId}`};throw new Error("Unsupported debug visualization type")}}getIconPathOrClass(e){const t=this.getIconUris(e);let i,n;return"id"in t?n=ei.asClassName(t):i=t,{iconPath:i,iconClass:n}}getIconUris(e){if(e instanceof Kt)return{id:e.id};const t=typeof e=="object"&&"dark"in e?e.dark:e,i=typeof e=="object"&&"light"in e?e.light:e;return{dark:typeof t=="string"?y.file(t):t,light:typeof i=="string"?y.file(i):i}}};Zv=H([$(0,We),$(1,$n),$(2,Mr),$(3,Nn),$(4,Zl),$(5,Xv),$(6,Aa)],Zv);class tI{constructor(e,t,i,n,s,o,a){this._debugServiceProxy=e,this._id=t,this._type=i,this._name=n,this._workspaceFolder=s,this._configuration=o,this._parentSession=a}get api(){const e=this;return this.apiSession??(this.apiSession=Object.freeze({id:e._id,type:e._type,get name(){return e._name},set name(t){e._name=t,e._debugServiceProxy.$setDebugSessionName(e._id,t)},parentSession:e._parentSession,workspaceFolder:e._workspaceFolder,configuration:e._configuration,customRequest(t,i){return e._debugServiceProxy.$customDebugAdapterRequest(e._id,t,i)},getDebugProtocolBreakpoint(t){return e._debugServiceProxy.$getDebugProtocolBreakpoint(e._id,t.id)}}))}get id(){return this._id}get type(){return this._type}_acceptNameChanged(e){this._name=e}get configuration(){return this._configuration}}class iI{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}}class nI{constructor(e){this.trackers=e}onWillStartSession(){this.trackers.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.trackers.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.trackers.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.trackers.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.trackers.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.trackers.forEach(i=>i.onExit?i.onExit(e,t):void 0)}}class rI extends QD{constructor(e){super(),this.implementation=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.implementation.handleMessage(e)}stopSession(){return this.implementation.dispose(),Promise.resolve(void 0)}}let e_=class extends Zv{constructor(e,t,i,n,s,o,a){super(e,t,i,n,s,o,a)}};e_=H([$(0,We),$(1,$n),$(2,Mr),$(3,Nn),$(4,Zl),$(5,Xv),$(6,Aa)],e_);class sI{constructor(e,t,i){this.config=e,this.provider=t,this.sessionToken=i,this.isLimitHit=!1,this.resultCount=0,this.isCanceled=!1,this.filePattern=e.filePattern,this.includePattern=e.includePattern&&jo(e.includePattern),this.maxResults=e.maxResults||void 0,this.exists=e.exists,this.activeCancellationTokens=new Set,this.globalExcludePattern=e.excludePattern&&jo(e.excludePattern)}cancel(){this.isCanceled=!0,this.activeCancellationTokens.forEach(e=>e.cancel()),this.activeCancellationTokens=new Set}search(e){const t=this.config.folderQueries||[];return new Promise((i,n)=>{const s=o=>{this.resultCount++,e(o)};if(this.isCanceled)return i({limitHit:this.isLimitHit});this.config.extraFileResources&&this.config.extraFileResources.forEach(o=>{const a=o.toString(),c=hi(a);this.globalExcludePattern&&this.globalExcludePattern(a,c)||this.matchFile(s,{base:o,basename:c})}),Promise.all(t.map(o=>this.searchInFolder(o,s))).then(o=>{i({limitHit:this.isLimitHit,stats:o[0]||void 0})},o=>{n(new Error($o(o)))})})}async searchInFolder(e,t){const i=new kt,n=this.getSearchOptionsForFolder(e),s=this.initDirectoryTree(),o=new $x(this.config,e),a=!o.hasSiblingExcludeClauses();let c;try{this.activeCancellationTokens.add(i),c=xn.create();const l=await this.provider.provideFileSearchResults({pattern:this.config.filePattern||""},n,i.token),u=c.elapsed(),d=xn.create();return this.isCanceled&&!this.isLimitHit||(l&&l.forEach(h=>{const g=Fe.relative(e.folder.path,h.path);if(a){const b=hi(h.path);this.matchFile(t,{base:e.folder,relativePath:g,basename:b});return}this.addDirectoryEntries(s,e.folder,g,t)}),this.isCanceled&&!this.isLimitHit)?null:(this.matchDirectoryTree(s,o,t),{providerTime:u,postProcessTime:d.elapsed()})}finally{i.dispose(),this.activeCancellationTokens.delete(i)}}getSearchOptionsForFolder(e){const t=bf(this.config.includePattern,e.includePattern),i=bf(this.config.excludePattern,e.excludePattern);return{folder:e.folder,excludes:i,includes:t,useIgnoreFiles:!e.disregardIgnoreFiles,useGlobalIgnoreFiles:!e.disregardGlobalIgnoreFiles,useParentIgnoreFiles:!e.disregardParentIgnoreFiles,followSymlinks:!e.ignoreSymlinks,maxResults:this.config.maxResults,session:this.sessionToken}}initDirectoryTree(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}addDirectoryEntries({pathToEntries:e},t,i,n){if(i===this.filePattern){const o=hi(this.filePattern);this.matchFile(n,{base:t,relativePath:this.filePattern,basename:o})}function s(o){const a=hi(o),c=rs(o);let l=e[c];l||(l=e[c]=[],s(c)),l.push({base:t,relativePath:o,basename:a})}s(i)}matchDirectoryTree({rootEntries:e,pathToEntries:t},i,n){const s=this,o=this.filePattern;function a(c){const l=t9(()=>c.map(u=>u.basename));for(let u=0,d=c.length;u<d;u++){const h=c[u],{relativePath:g,basename:b}=h;if(i.matchesExcludesSync(g,b,o!==b?l:void 0))continue;const _=t[g];if(_)a(_);else{if(g===o)continue;s.matchFile(n,h)}if(s.isLimitHit)break}}a(e)}matchFile(e,t){(!this.includePattern||t.relativePath&&this.includePattern(t.relativePath,t.basename))&&((this.exists||this.maxResults&&this.resultCount>=this.maxResults)&&(this.isLimitHit=!0,this.cancel()),this.isLimitHit||e(t))}}const Dp=class Dp{constructor(){this.sessions=new Map}fileSearch(e,t,i,n){const s=this.getSessionTokenSource(e.cacheKey),o=new sI(e,t,s&&s.token);let a=0;const c=l=>{a+=l.length,i(l.map(u=>this.rawMatchToSearchItem(u)))};return this.doSearch(o,Dp.BATCH_SIZE,c,n).then(l=>({limitHit:l.limitHit,stats:{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}}))}clearCache(e){const t=this.getSessionTokenSource(e);t==null||t.cancel()}getSessionTokenSource(e){if(e)return this.sessions.has(e)||this.sessions.set(e,new kt),this.sessions.get(e)}rawMatchToSearchItem(e){return e.relativePath?{resource:Lo(e.base,e.relativePath)}:{resource:e.base}}doSearch(e,t,i,n){const s=n.onCancellationRequested(()=>{e.cancel()}),o=c=>{c&&(a.push(c),t>0&&a.length>=t&&(i(a),a=[]))};let a=[];return e.search(o).then(c=>(a.length&&i(a),s.dispose(),c),c=>(a.length&&i(a),s.dispose(),Promise.reject(c)))}};Dp.BATCH_SIZE=512;let t_=Dp;class eC{constructor(e,t,i){this.queryProviderPair=e,this.fileUtils=t,this.processType=i,this.collector=null,this.isLimitHit=!1,this.resultCount=0}get query(){return this.queryProviderPair.query}search(e,t){const i=this.query.folderQueries||[],n=new kt(t);return new Promise((s,o)=>{this.collector=new aI(e);let a=!1;const c=(l,u)=>{if(!a&&!this.isLimitHit){const d=this.resultSize(l);eu(l)&&typeof this.query.maxResults=="number"&&this.resultCount+d>this.query.maxResults&&(this.isLimitHit=!0,a=!0,n.cancel(),l=this.trimResultToSize(l,this.query.maxResults-this.resultCount));const h=this.resultSize(l);this.resultCount+=h,(h>0||!eu(l))&&this.collector.add(l,u)}};Promise.all(i.map((l,u)=>this.searchInFolder(l,d=>c(d,u),n.token))).then(l=>{n.dispose(),this.collector.flush();const u=l.some(d=>!!d&&!!d.limitHit);s({limitHit:this.isLimitHit||u,messages:Xu(l.map(d=>d!=null&&d.message?Array.isArray(d.message)?d.message:[d.message]:[])),stats:{type:this.processType}})},l=>{n.dispose();const u=$o(l);o(new Error(u))})})}resultSize(e){return eu(e)?Array.isArray(e.ranges)?e.ranges.length:1:0}trimResultToSize(e,t){const i=Array.isArray(e.ranges)?e.ranges:[e.ranges],n=Array.isArray(e.preview.matches)?e.preview.matches:[e.preview.matches];return{ranges:i.slice(0,t),preview:{matches:n.slice(0,t),text:e.preview.text},uri:e.uri}}async searchInFolder(e,t,i){const n=new $x(this.query,e),s=[],o={report:l=>{if(!this.validateProviderResult(l))return;const u=e.folder.scheme===Y.file?e9(()=>this.fileUtils.readdir(Pg(l.uri))):void 0,d=Yb(e.folder,l.uri);if(d){const h=n.includedInQuery(d,hi(d),u);gr(h)?s.push(h.then(g=>{g&&t(l)})):h&&t(l)}}},a=this.getSearchOptionsForFolder(e);let c;return this.queryProviderPair.query.type===3?c=await this.queryProviderPair.provider.provideAITextSearchResults(this.queryProviderPair.query.contentPattern,a,o,i):c=await this.queryProviderPair.provider.provideTextSearchResults(oI(this.queryProviderPair.query.contentPattern),a,o,i),s.length&&await Promise.all(s),c}validateProviderResult(e){if(eu(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}getSearchOptionsForFolder(e){const t=bf(this.query.includePattern,e.includePattern),i=bf(this.query.excludePattern,e.excludePattern),n={folder:y.from(e.folder),excludes:i,includes:t,useIgnoreFiles:!e.disregardIgnoreFiles,useGlobalIgnoreFiles:!e.disregardGlobalIgnoreFiles,useParentIgnoreFiles:!e.disregardParentIgnoreFiles,followSymlinks:!e.ignoreSymlinks,encoding:e.fileEncoding&&this.fileUtils.toCanonicalName(e.fileEncoding),maxFileSize:this.query.maxFileSize,maxResults:this.query.maxResults,previewOptions:this.query.previewOptions,afterContext:this.query.afterContext,beforeContext:this.query.beforeContext};return"usePCRE2"in this.query&&(n.usePCRE2=this.query.usePCRE2),n}}function oI(r){return{isCaseSensitive:r.isCaseSensitive||!1,isRegExp:r.isRegExp||!1,isWordMatch:r.isWordMatch||!1,isMultiline:r.isMultiline||!1,pattern:r.pattern}}class aI{constructor(e){this._onResult=e,this._currentFolderIdx=-1,this._currentFileMatch=null,this._batchedCollector=new i_(512,t=>this.sendItems(t))}add(e,t){this._currentFileMatch&&(this._currentFolderIdx!==t||!Xb(this._currentUri,e.uri))&&(this.pushToCollector(),this._currentFileMatch=null),this._currentFileMatch||(this._currentFolderIdx=t,this._currentFileMatch={resource:e.uri,results:[]}),this._currentFileMatch.results.push(cI(e))}pushToCollector(){const e=this._currentFileMatch&&this._currentFileMatch.results?this._currentFileMatch.results.length:0;this._batchedCollector.addItem(this._currentFileMatch,e)}flush(){this.pushToCollector(),this._batchedCollector.flush()}sendItems(e){this._onResult(e)}}function cI(r){return eu(r)?{preview:{matches:Cc(r.preview.matches,e=>({startLineNumber:e.start.line,startColumn:e.start.character,endLineNumber:e.end.line,endColumn:e.end.character})),text:r.preview.text},ranges:Cc(r.ranges,e=>({startLineNumber:e.start.line,startColumn:e.start.character,endLineNumber:e.end.line,endColumn:e.end.character}))}:{text:r.text,lineNumber:r.lineNumber}}function eu(r){return!!r.preview}const Ya=class Ya{constructor(e,t){this.maxBatchSize=e,this.cb=t,this.totalNumberCompleted=0,this.batch=[],this.batchSize=0}addItem(e,t){e&&this.addItemToBatch(e,t)}addItems(e,t){e&&this.addItemsToBatch(e,t)}addItemToBatch(e,t){this.batch.push(e),this.batchSize+=t,this.onUpdate()}addItemsToBatch(e,t){this.batch=this.batch.concat(e),this.batchSize+=t,this.onUpdate()}onUpdate(){this.totalNumberCompleted<Ya.START_BATCH_AFTER_COUNT?this.flush():this.batchSize>=this.maxBatchSize?this.flush():this.timeoutHandle||(this.timeoutHandle=setTimeout(()=>{this.flush()},Ya.TIMEOUT))}flush(){this.batchSize&&(this.totalNumberCompleted+=this.batchSize,this.cb(this.batch),this.batch=[],this.batchSize=0,this.timeoutHandle&&(clearTimeout(this.timeoutHandle),this.timeoutHandle=0))}};Ya.TIMEOUT=4e3,Ya.START_BATCH_AFTER_COUNT=50;let i_=Ya;const tC=ie("IExtHostSearch");let n_=class{constructor(e,t,i){this.extHostRpc=e,this._uriTransformer=t,this._logService=i,this._proxy=this.extHostRpc.getProxy(G.MainThreadSearch),this._handlePool=0,this._textSearchProvider=new Map,this._textSearchUsedSchemes=new Set,this._aiTextSearchProvider=new Map,this._aiTextSearchUsedSchemes=new Set,this._fileSearchProvider=new Map,this._fileSearchUsedSchemes=new Set,this._fileSearchManager=new t_}_transformScheme(e){return this._uriTransformer.transformOutgoingScheme(e)}registerTextSearchProvider(e,t){if(this._textSearchUsedSchemes.has(e))throw new Error(`a text search provider for the scheme '${e}' is already registered`);this._textSearchUsedSchemes.add(e);const i=this._handlePool++;return this._textSearchProvider.set(i,t),this._proxy.$registerTextSearchProvider(i,this._transformScheme(e)),Ce(()=>{this._textSearchUsedSchemes.delete(e),this._textSearchProvider.delete(i),this._proxy.$unregisterProvider(i)})}registerAITextSearchProvider(e,t){if(this._aiTextSearchUsedSchemes.has(e))throw new Error(`an AI text search provider for the scheme '${e}'is already registered`);this._aiTextSearchUsedSchemes.add(e);const i=this._handlePool++;return this._aiTextSearchProvider.set(i,t),this._proxy.$registerAITextSearchProvider(i,this._transformScheme(e)),Ce(()=>{this._aiTextSearchUsedSchemes.delete(e),this._aiTextSearchProvider.delete(i),this._proxy.$unregisterProvider(i)})}registerFileSearchProvider(e,t){if(this._fileSearchUsedSchemes.has(e))throw new Error(`a file search provider for the scheme '${e}' is already registered`);this._fileSearchUsedSchemes.add(e);const i=this._handlePool++;return this._fileSearchProvider.set(i,t),this._proxy.$registerFileSearchProvider(i,this._transformScheme(e)),Ce(()=>{this._fileSearchUsedSchemes.delete(e),this._fileSearchProvider.delete(i),this._proxy.$unregisterProvider(i)})}$provideFileSearchResults(e,t,i,n){const s=r_(i),o=this._fileSearchProvider.get(e);if(o)return this._fileSearchManager.fileSearch(s,o,a=>{this._proxy.$handleFileMatch(e,t,a.map(c=>c.resource))},n);throw new Error("3 unknown provider: "+e)}async doInternalFileSearchWithCustomCallback(e,t,i){return{messages:[]}}$clearCache(e){return this._fileSearchManager.clearCache(e),Promise.resolve(void 0)}$provideTextSearchResults(e,t,i,n){const s=this._textSearchProvider.get(e);if(!s||!s.provideTextSearchResults)throw new Error(`2 Unknown provider ${e}`);const o=r_(i);return this.createTextSearchManager(o,s).search(c=>this._proxy.$handleTextMatch(e,t,c),n)}$provideAITextSearchResults(e,t,i,n){const s=this._aiTextSearchProvider.get(e);if(!s||!s.provideAITextSearchResults)throw new Error(`1 Unknown provider ${e}`);const o=r_(i);return this.createAITextSearchManager(o,s).search(c=>this._proxy.$handleTextMatch(e,t,c),n)}$enableExtensionHostSearch(){}createTextSearchManager(e,t){return new eC({query:e,provider:t},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"textSearchProvider")}createAITextSearchManager(e,t){return new eC({query:e,provider:t},{readdir:i=>Promise.resolve([]),toCanonicalName:i=>i},"aiTextSearchProvider")}};n_=H([$(0,We),$(1,Cd),$(2,Je)],n_);function r_(r){return{...r,folderQueries:r.folderQueries&&r.folderQueries.map(lI),extraFileResources:r.extraFileResources&&r.extraFileResources.map(e=>y.revive(e))}}function lI(r){return{...r,folder:y.revive(r.folder)}}var s_;let o_=(Za=class{getState(e){const t=this._state;return{get focused(){return t.focused},get active(){return M(e,"windowActivity"),t.active}}}constructor(e){this._onDidChangeWindowState=new A,this.onDidChangeWindowState=this._onDidChangeWindowState.event,this._state=s_.InitialState,this._proxy=e.getProxy(G.MainThreadWindow),this._proxy.$getInitialState().then(({isFocused:t,isActive:i})=>{this.onDidChangeWindowProperty("focused",t),this.onDidChangeWindowProperty("active",i)})}$onDidChangeWindowFocus(e){this.onDidChangeWindowProperty("focused",e)}$onDidChangeWindowActive(e){this.onDidChangeWindowProperty("active",e)}onDidChangeWindowProperty(e,t){t!==this._state[e]&&(this._state={...this._state,[e]:t},this._onDidChangeWindowState.fire(this._state))}openUri(e,t){let i;if(typeof e=="string"){i=e;try{e=y.parse(e)}catch{return Promise.reject(`Invalid uri - '${e}'`)}}return hd(e.scheme)?Promise.reject("Invalid scheme - cannot be empty"):e.scheme===Y.command?Promise.reject(`Invalid scheme '${e.scheme}'`):this._proxy.$openUri(e,i,t)}async asExternalUri(e,t){if(hd(e.scheme))return Promise.reject("Invalid scheme - cannot be empty");const i=await this._proxy.$asExternalUri(e,t);return y.from(i)}},s_=Za,Za.InitialState={focused:!0,active:!0},Za);o_=s_=H([$(0,We)],o_);const iC=ie("IExtHostWindow"),nC=ie("IExtHostTerminalShellIntegration");let a_=class extends Ne{constructor(e,t){super(),this._extHostTerminalService=t,this._activeShellIntegrations=new Map,this._onDidChangeTerminalShellIntegration=new A,this.onDidChangeTerminalShellIntegration=this._onDidChangeTerminalShellIntegration.event,this._onDidStartTerminalShellExecution=new A,this.onDidStartTerminalShellExecution=this._onDidStartTerminalShellExecution.event,this._onDidEndTerminalShellExecution=new A,this.onDidEndTerminalShellExecution=this._onDidEndTerminalShellExecution.event,this._proxy=e.getProxy(G.MainThreadTerminalShellIntegration),this._register(Ce(()=>{for(const[i,n]of this._activeShellIntegrations)n.dispose();this._activeShellIntegrations.clear()}))}$shellIntegrationChange(e){const t=this._extHostTerminalService.getTerminalById(e);if(!t)return;const i=t.value;let n=this._activeShellIntegrations.get(e);n||(n=new uI(t.value,this._onDidStartTerminalShellExecution),this._activeShellIntegrations.set(e,n),n.store.add(t.onWillDispose(()=>{var s;return(s=this._activeShellIntegrations.get(e))==null?void 0:s.dispose()})),n.store.add(n.onDidRequestShellExecution(s=>this._proxy.$executeCommand(e,s))),n.store.add(n.onDidRequestEndExecution(s=>this._onDidEndTerminalShellExecution.fire(s.value))),n.store.add(n.onDidRequestChangeShellIntegration(s=>this._onDidChangeTerminalShellIntegration.fire(s))),t.shellIntegration=n.value),this._onDidChangeTerminalShellIntegration.fire({terminal:i,shellIntegration:n.value})}$shellExecutionStart(e,t,i){var n;this._activeShellIntegrations.has(e)||this.$shellIntegrationChange(e),(n=this._activeShellIntegrations.get(e))==null||n.startShellExecution(t,i)}$shellExecutionEnd(e,t,i){var n;(n=this._activeShellIntegrations.get(e))==null||n.endShellExecution(t,i)}$shellExecutionData(e,t){var i;(i=this._activeShellIntegrations.get(e))==null||i.emitData(t)}$cwdChange(e,t){var i;(i=this._activeShellIntegrations.get(e))==null||i.setCwd(t)}$closeTerminal(e){var t;(t=this._activeShellIntegrations.get(e))==null||t.dispose(),this._activeShellIntegrations.delete(e)}};a_=H([$(0,We),$(1,Ra)],a_);class uI extends Ne{get currentExecution(){return this._currentExecution}constructor(e,t){super(),this._terminal=e,this._onDidStartTerminalShellExecution=t,this._ignoreNextExecution=!1,this.store=this._register(new Pe),this._onDidRequestChangeShellIntegration=this._register(new A),this.onDidRequestChangeShellIntegration=this._onDidRequestChangeShellIntegration.event,this._onDidRequestShellExecution=this._register(new A),this.onDidRequestShellExecution=this._onDidRequestShellExecution.event,this._onDidRequestEndExecution=this._register(new A),this.onDidRequestEndExecution=this._onDidRequestEndExecution.event;const i=this;this.value={get cwd(){return i._cwd},executeCommand(n){i._onDidRequestShellExecution.fire(n);const s=i.startShellExecution(n,i._cwd).value;return i._ignoreNextExecution=!0,s}}}startShellExecution(e,t){return this._ignoreNextExecution&&this._currentExecution?this._ignoreNextExecution=!1:(this._currentExecution&&(this._currentExecution.endExecution(void 0,void 0),this._onDidRequestEndExecution.fire(this._currentExecution)),this._currentExecution=new dI(this._terminal,e,t),this._onDidStartTerminalShellExecution.fire(this._currentExecution.value)),this._currentExecution}emitData(e){var t;(t=this.currentExecution)==null||t.emitData(e)}endShellExecution(e,t){this._currentExecution&&(this._currentExecution.endExecution(e,t),this._onDidRequestEndExecution.fire(this._currentExecution),this._currentExecution=void 0)}setCwd(e){let t=!1;y.isUri(this._cwd)?this._cwd.toString()!==e.toString()&&(t=!0):this._cwd!==e&&(t=!0),t&&(this._cwd=e,this._onDidRequestChangeShellIntegration.fire({terminal:this._terminal,shellIntegration:this.value}))}}class dI{constructor(e,t,i){this.terminal=e,this._commandLine=t,this.cwd=i,this._exitCode=new Promise(s=>{this._exitCodeResolve=s});const n=this;this.value={get terminal(){return e},get commandLine(){return n._commandLine},get cwd(){return i},get exitCode(){return n._exitCode},createDataStream(){return n._createDataStream()}}}_createDataStream(){if(!this._dataStream){if(this._exitCodeResolve===void 0)return Rc.EMPTY;this._dataStream=new hI}return this._dataStream.createIterable()}emitData(e){var t;(t=this._dataStream)==null||t.emitData(e)}endExecution(e,t){var i,n;e&&(this._commandLine=e),(i=this._dataStream)==null||i.endExecution(),this._dataStream=void 0,(n=this._exitCodeResolve)==null||n.call(this,t),this._exitCodeResolve=void 0}}class hI extends Ne{constructor(){super(...arguments),this._emitters=[]}createIterable(){const e=this._barrier=new Bi;return new Rc(async i=>{this._emitters.push(i),await e.wait()})}emitData(e){for(const t of this._emitters)t.emitOne(e)}endExecution(){var e;(e=this._barrier)==null||e.open(),this._barrier=void 0}}tt(Sv,Cv,1),tt(No,Of,1),tt($f,Mv,1),tt(Aa,cv,0),tt(hv,fv,0),tt(gv,mv,0),tt(Nn,Q1,0),tt(Pf,Y1,0),tt(Z2,e_,0),tt(L2,Rv,0),tt(ql,Nv,0),tt(Ev,kv,0),tt(Fo,wk,0),tt(R2,Av,1),tt(tC,n_,0),tt(X1,Qx,0),tt(Q2,Qv,0),tt(Ra,dv,0),tt(nC,a_,0),tt(rv,sv,0),tt(iC,o_,0),tt($n,W1,0),tt(xv,E2,0),tt(Tf,av,0),tt(Zl,Jv,0),tt(Xv,Yv,0);const rC={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},fI=8;class pI{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}}class Ge{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return zf(e,t)}compute(e,t,i){return i}}class Vf{constructor(e,t){this.newValue=e,this.didChange=t}}function zf(r,e){if(typeof r!="object"||typeof e!="object"||!r||!e)return new Vf(e,r!==e);if(Array.isArray(r)||Array.isArray(e)){const i=Array.isArray(r)&&Array.isArray(e)&&ar(r,e);return new Vf(e,!i)}let t=!1;for(const i in e)if(e.hasOwnProperty(i)){const n=zf(r[i],e[i]);n.didChange&&(r[i]=n.newValue,t=!0)}return new Vf(r,t)}class tu{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return zf(e,t)}validate(e){return this.defaultValue}}class $a{constructor(e,t,i,n){this.id=e,this.name=t,this.defaultValue=i,this.schema=n}applyUpdate(e,t){return zf(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}}function Q(r,e){return typeof r>"u"?e:r==="false"?!1:!!r}class we extends $a{constructor(e,t,i,n=void 0){typeof n<"u"&&(n.type="boolean",n.default=i),super(e,t,i,n)}validate(e){return Q(e,this.defaultValue)}}function gI(r,e,t,i){if(typeof r>"u")return e;let n=parseInt(r,10);return isNaN(n)?e:(n=Math.max(t,n),n=Math.min(i,n),n|0)}class Me extends $a{static clampedInt(e,t,i,n){return gI(e,t,i,n)}constructor(e,t,i,n,s,o=void 0){typeof o<"u"&&(o.type="integer",o.default=i,o.minimum=n,o.maximum=s),super(e,t,i,o),this.minimum=n,this.maximum=s}validate(e){return Me.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}}class Ji extends $a{static clamp(e,t,i){return e<t?t:e>i?i:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;const i=parseFloat(e);return isNaN(i)?t:i}constructor(e,t,i,n,s){typeof s<"u"&&(s.type="number",s.default=i),super(e,t,i,s),this.validationFn=n}validate(e){return this.validationFn(Ji.float(e,this.defaultValue))}}class Bt extends $a{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,i,n=void 0){typeof n<"u"&&(n.type="string",n.default=i),super(e,t,i,n)}validate(e){return Bt.string(e,this.defaultValue)}}function ot(r,e,t,i){return typeof r!="string"?e:i&&r in i?i[r]:t.indexOf(r)===-1?e:r}class Ze extends $a{constructor(e,t,i,n,s=void 0){typeof s<"u"&&(s.type="string",s.enum=n,s.default=i),super(e,t,i,s),this._allowedValues=n}validate(e){return ot(e,this.defaultValue,this._allowedValues)}}class jf extends Ge{constructor(e,t,i,n,s,o,a=void 0){typeof a<"u"&&(a.type="string",a.enum=s,a.default=n),super(e,t,i,a),this._allowedValues=s,this._convert=o}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}}function mI(r){switch(r){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}class vI extends Ge{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[f("vs/editor/common/config/editorOptions","accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),f("vs/editor/common/config/editorOptions","accessibilitySupport.on","Optimize for usage with a Screen Reader."),f("vs/editor/common/config/editorOptions","accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:f("vs/editor/common/config/editorOptions","accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}}class _I extends Ge{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:f("vs/editor/common/config/editorOptions","comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:f("vs/editor/common/config/editorOptions","comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Q(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Q(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}}function wI(r){switch(r){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var gn;(function(r){r[r.Line=1]="Line",r[r.Block=2]="Block",r[r.Underline=3]="Underline",r[r.LineThin=4]="LineThin",r[r.BlockOutline=5]="BlockOutline",r[r.UnderlineThin=6]="UnderlineThin"})(gn||(gn={}));function bI(r){switch(r){case"line":return gn.Line;case"block":return gn.Block;case"underline":return gn.Underline;case"line-thin":return gn.LineThin;case"block-outline":return gn.BlockOutline;case"underline-thin":return gn.UnderlineThin}}class yI extends tu{constructor(){super(142)}compute(e,t,i){const n=["monaco-editor"];return t.get(39)&&n.push(t.get(39)),e.extraEditorClassName&&n.push(e.extraEditorClassName),t.get(74)==="default"?n.push("mouse-default"):t.get(74)==="copy"&&n.push("mouse-copy"),t.get(111)&&n.push("showUnused"),t.get(140)&&n.push("showDeprecated"),n.join(" ")}}class xI extends we{constructor(){super(37,"emptySelectionClipboard",!0,{description:f("vs/editor/common/config/editorOptions","emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,i){return i&&e.emptySelectionClipboard}}class CI extends Ge{constructor(){const e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(41,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:f("vs/editor/common/config/editorOptions","find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[f("vs/editor/common/config/editorOptions","editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),f("vs/editor/common/config/editorOptions","editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),f("vs/editor/common/config/editorOptions","editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:f("vs/editor/common/config/editorOptions","find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[f("vs/editor/common/config/editorOptions","editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),f("vs/editor/common/config/editorOptions","editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),f("vs/editor/common/config/editorOptions","editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:f("vs/editor/common/config/editorOptions","find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:f("vs/editor/common/config/editorOptions","find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Fi},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:f("vs/editor/common/config/editorOptions","find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:f("vs/editor/common/config/editorOptions","find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Q(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":ot(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":ot(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Q(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Q(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Q(t.loop,this.defaultValue.loop)}}}const Xn=class Xn extends Ge{constructor(){super(51,"fontLigatures",Xn.OFF,{anyOf:[{type:"boolean",description:f("vs/editor/common/config/editorOptions","fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:f("vs/editor/common/config/editorOptions","fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:f("vs/editor/common/config/editorOptions","fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?Xn.OFF:e==="true"?Xn.ON:e:e?Xn.ON:Xn.OFF}};Xn.OFF='"liga" off, "calt" off',Xn.ON='"liga" on, "calt" on';let c_=Xn;const Yn=class Yn extends Ge{constructor(){super(54,"fontVariations",Yn.OFF,{anyOf:[{type:"boolean",description:f("vs/editor/common/config/editorOptions","fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:f("vs/editor/common/config/editorOptions","fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:f("vs/editor/common/config/editorOptions","fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?Yn.OFF:e==="true"?Yn.TRANSLATE:e:e?Yn.TRANSLATE:Yn.OFF}compute(e,t,i){return e.fontInfo.fontVariationSettings}};Yn.OFF="normal",Yn.TRANSLATE="translate";let l_=Yn;class SI extends tu{constructor(){super(50)}compute(e,t,i){return e.fontInfo}}class EI extends $a{constructor(){super(52,"fontSize",Hn.fontSize,{type:"number",minimum:6,maximum:100,default:Hn.fontSize,description:f("vs/editor/common/config/editorOptions","fontSize","Controls the font size in pixels.")})}validate(e){const t=Ji.float(e,this.defaultValue);return t===0?Hn.fontSize:Ji.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}}const vn=class vn extends Ge{constructor(){super(53,"fontWeight",Hn.fontWeight,{anyOf:[{type:"number",minimum:vn.MINIMUM_VALUE,maximum:vn.MAXIMUM_VALUE,errorMessage:f("vs/editor/common/config/editorOptions","fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:vn.SUGGESTION_VALUES}],default:Hn.fontWeight,description:f("vs/editor/common/config/editorOptions","fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Me.clampedInt(e,Hn.fontWeight,vn.MINIMUM_VALUE,vn.MAXIMUM_VALUE))}};vn.SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"],vn.MINIMUM_VALUE=1,vn.MAXIMUM_VALUE=1e3;let u_=vn;class kI extends Ge{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[f("vs/editor/common/config/editorOptions","editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),f("vs/editor/common/config/editorOptions","editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),f("vs/editor/common/config/editorOptions","editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(58,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:f("vs/editor/common/config/editorOptions","editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:f("vs/editor/common/config/editorOptions","editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:f("vs/editor/common/config/editorOptions","editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:f("vs/editor/common/config/editorOptions","editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:f("vs/editor/common/config/editorOptions","editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:f("vs/editor/common/config/editorOptions","editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:f("vs/editor/common/config/editorOptions","alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:f("vs/editor/common/config/editorOptions","alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:f("vs/editor/common/config/editorOptions","alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:f("vs/editor/common/config/editorOptions","alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:f("vs/editor/common/config/editorOptions","alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:ot(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??ot(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??ot(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??ot(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??ot(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??ot(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Bt.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Bt.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Bt.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Bt.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Bt.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand)}}}class DI extends Ge{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(60,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:f("vs/editor/common/config/editorOptions","hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:f("vs/editor/common/config/editorOptions","hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:f("vs/editor/common/config/editorOptions","hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:f("vs/editor/common/config/editorOptions","hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:f("vs/editor/common/config/editorOptions","hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),delay:Me.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Q(t.sticky,this.defaultValue.sticky),hidingDelay:Me.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Q(t.above,this.defaultValue.above)}}}class iu extends tu{constructor(){super(145)}compute(e,t,i){return iu.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){const t=e.height/e.lineHeight,i=Math.floor(e.paddingTop/e.lineHeight);let n=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(n=Math.max(n,t-1));const s=(i+e.viewLineCount+n)/(e.pixelRatio*e.height),o=Math.floor(e.viewLineCount/s);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:i,extraLinesBeyondLastLine:n,desiredRatio:s,minimapLineCount:o}}static _computeMinimapLayout(e,t){const i=e.outerWidth,n=e.outerHeight,s=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(s*n),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:n};const o=t.stableMinimapLayoutInput,a=o&&e.outerHeight===o.outerHeight&&e.lineHeight===o.lineHeight&&e.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&e.pixelRatio===o.pixelRatio&&e.scrollBeyondLastLine===o.scrollBeyondLastLine&&e.paddingTop===o.paddingTop&&e.paddingBottom===o.paddingBottom&&e.minimap.enabled===o.minimap.enabled&&e.minimap.side===o.minimap.side&&e.minimap.size===o.minimap.size&&e.minimap.showSlider===o.minimap.showSlider&&e.minimap.renderCharacters===o.minimap.renderCharacters&&e.minimap.maxColumn===o.minimap.maxColumn&&e.minimap.scale===o.minimap.scale&&e.verticalScrollbarWidth===o.verticalScrollbarWidth&&e.isViewportWrapping===o.isViewportWrapping,c=e.lineHeight,l=e.typicalHalfwidthCharacterWidth,u=e.scrollBeyondLastLine,d=e.minimap.renderCharacters;let h=s>=2?Math.round(e.minimap.scale*2):e.minimap.scale;const g=e.minimap.maxColumn,b=e.minimap.size,_=e.minimap.side,v=e.verticalScrollbarWidth,E=e.viewLineCount,k=e.remainingWidth,S=e.isViewportWrapping,O=d?2:3;let T=Math.floor(s*n);const z=T/s;let ae=!1,ee=!1,j=O*h,Be=h/s,W=1;if(b==="fill"||b==="fit"){const{typicalViewportLineCount:it,extraLinesBeforeFirstLine:at,extraLinesBeyondLastLine:Ue,desiredRatio:zt,minimapLineCount:gt}=iu.computeContainedMinimapLineCount({viewLineCount:E,scrollBeyondLastLine:u,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:n,lineHeight:c,pixelRatio:s});if(E/gt>1)ae=!0,ee=!0,h=1,j=1,Be=h/s;else{let _t=!1,ki=h+1;if(b==="fit"){const ct=Math.ceil((at+E+Ue)*j);S&&a&&k<=t.stableFitRemainingWidth?(_t=!0,ki=t.stableFitMaxMinimapScale):_t=ct>T}if(b==="fill"||_t){ae=!0;const ct=h;j=Math.min(c*s,Math.max(1,Math.floor(1/zt))),S&&a&&k<=t.stableFitRemainingWidth&&(ki=t.stableFitMaxMinimapScale),h=Math.min(ki,Math.max(1,Math.floor(j/O))),h>ct&&(W=Math.min(2,h/ct)),Be=h/s/W,T=Math.ceil(Math.max(it,at+E+Ue)*j),S?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=k,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}const U=Math.floor(g*Be),q=Math.min(U,Math.max(0,Math.floor((k-v-2)*Be/(l+Be)))+fI);let K=Math.floor(s*q);const re=K/s;K=Math.floor(K*W);const ge=d?1:2,pe=_==="left"?0:i-q-v;return{renderMinimap:ge,minimapLeft:pe,minimapWidth:q,minimapHeightIsEditorHeight:ae,minimapIsSampling:ee,minimapScale:h,minimapLineHeight:j,minimapCanvasInnerWidth:K,minimapCanvasInnerHeight:T,minimapCanvasOuterWidth:re,minimapCanvasOuterHeight:z}}static computeLayout(e,t){const i=t.outerWidth|0,n=t.outerHeight|0,s=t.lineHeight|0,o=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,c=t.maxDigitWidth,l=t.pixelRatio,u=t.viewLineCount,d=e.get(137),h=d==="inherit"?e.get(136):d,g=h==="inherit"?e.get(132):h,b=e.get(135),_=t.isDominatedByLongLines,v=e.get(57),E=e.get(68).renderType!==0,k=e.get(69),S=e.get(105),O=e.get(84),T=e.get(73),z=e.get(103),ae=z.verticalScrollbarSize,ee=z.verticalHasArrows,j=z.arrowSize,Be=z.horizontalScrollbarSize,W=e.get(43),U=e.get(110)!=="never";let q=e.get(66);W&&U&&(q+=16);let K=0;if(E){const ir=Math.max(o,k);K=Math.round(ir*c)}let re=0;v&&(re=s*t.glyphMarginDecorationLaneCount);let ge=0,pe=ge+re,it=pe+K,at=it+q;const Ue=i-re-K-q;let zt=!1,gt=!1,ci=-1;h==="inherit"&&_?(zt=!0,gt=!0):g==="on"||g==="bounded"?gt=!0:g==="wordWrapColumn"&&(ci=b);const _t=iu._computeMinimapLayout({outerWidth:i,outerHeight:n,lineHeight:s,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:S,paddingTop:O.top,paddingBottom:O.bottom,minimap:T,verticalScrollbarWidth:ae,viewLineCount:u,remainingWidth:Ue,isViewportWrapping:gt},t.memory||new pI);_t.renderMinimap!==0&&_t.minimapLeft===0&&(ge+=_t.minimapWidth,pe+=_t.minimapWidth,it+=_t.minimapWidth,at+=_t.minimapWidth);const ki=Ue-_t.minimapWidth,ct=Math.max(1,Math.floor((ki-ae-2)/a)),tr=ee?j:0;return gt&&(ci=Math.max(1,ct),g==="bounded"&&(ci=Math.min(ci,b))),{width:i,height:n,glyphMarginLeft:ge,glyphMarginWidth:re,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:pe,lineNumbersWidth:K,decorationsLeft:it,decorationsWidth:q,contentLeft:at,contentWidth:ki,minimap:_t,viewportColumn:ct,isWordWrapMinified:zt,isViewportWrapping:gt,wrappingColumn:ci,verticalScrollbarWidth:ae,horizontalScrollbarHeight:Be,overviewRuler:{top:tr,width:ae,height:n-2*tr,right:0}}}}class II extends Ge{constructor(){super(139,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[f("vs/editor/common/config/editorOptions","wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),f("vs/editor/common/config/editorOptions","wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:f("vs/editor/common/config/editorOptions","wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return ot(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}}var Fn;(function(r){r.Off="off",r.OnCode="onCode",r.On="on"})(Fn||(Fn={}));class PI extends Ge{constructor(){const e={enabled:Fn.On};super(65,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:[Fn.Off,Fn.OnCode,Fn.On],default:e.enabled,enumDescriptions:[f("vs/editor/common/config/editorOptions","editor.lightbulb.enabled.off","Disable the code action menu."),f("vs/editor/common/config/editorOptions","editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),f("vs/editor/common/config/editorOptions","editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:f("vs/editor/common/config/editorOptions","enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:ot(e.enabled,this.defaultValue.enabled,[Fn.Off,Fn.OnCode,Fn.On])}}}class TI extends Ge{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(115,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:f("vs/editor/common/config/editorOptions","editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:f("vs/editor/common/config/editorOptions","editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:f("vs/editor/common/config/editorOptions","editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:f("vs/editor/common/config/editorOptions","editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),maxLineCount:Me.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:ot(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Q(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}}class AI extends Ge{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1};super(141,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:f("vs/editor/common/config/editorOptions","inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[f("vs/editor/common/config/editorOptions","editor.inlayHints.on","Inlay hints are enabled"),f("vs/editor/common/config/editorOptions","editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Fi?"Ctrl+Option":"Ctrl+Alt"),f("vs/editor/common/config/editorOptions","editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Fi?"Ctrl+Option":"Ctrl+Alt"),f("vs/editor/common/config/editorOptions","editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:f("vs/editor/common/config/editorOptions","inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:f("vs/editor/common/config/editorOptions","inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:f("vs/editor/common/config/editorOptions","inlayHints.padding","Enables the padding around the inlay hints in the editor.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:ot(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Me.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Bt.string(t.fontFamily,this.defaultValue.fontFamily),padding:Q(t.padding,this.defaultValue.padding)}}}class RI extends Ge{constructor(){super(66,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Me.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Me.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}}class LI extends Ji{constructor(){super(67,"lineHeight",Hn.lineHeight,e=>Ji.clamp(e,0,150),{markdownDescription:f("vs/editor/common/config/editorOptions","lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,i){return e.fontInfo.lineHeight}}class OI extends Ge{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9};super(73,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:f("vs/editor/common/config/editorOptions","minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:f("vs/editor/common/config/editorOptions","minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[f("vs/editor/common/config/editorOptions","minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),f("vs/editor/common/config/editorOptions","minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),f("vs/editor/common/config/editorOptions","minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:f("vs/editor/common/config/editorOptions","minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:f("vs/editor/common/config/editorOptions","minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:f("vs/editor/common/config/editorOptions","minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:f("vs/editor/common/config/editorOptions","minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:f("vs/editor/common/config/editorOptions","minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:f("vs/editor/common/config/editorOptions","minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:f("vs/editor/common/config/editorOptions","minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:f("vs/editor/common/config/editorOptions","minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:f("vs/editor/common/config/editorOptions","minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),autohide:Q(t.autohide,this.defaultValue.autohide),size:ot(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:ot(t.side,this.defaultValue.side,["right","left"]),showSlider:ot(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Q(t.renderCharacters,this.defaultValue.renderCharacters),scale:Me.clampedInt(t.scale,1,1,3),maxColumn:Me.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Q(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Q(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Ji.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32)}}}function $I(r){return r==="ctrlCmd"?Fi?"metaKey":"ctrlKey":"altKey"}class NI extends Ge{constructor(){super(84,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:f("vs/editor/common/config/editorOptions","padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:f("vs/editor/common/config/editorOptions","padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Me.clampedInt(t.top,0,0,1e3),bottom:Me.clampedInt(t.bottom,0,0,1e3)}}}class MI extends Ge{constructor(){const e={enabled:!0,cycle:!0};super(86,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:f("vs/editor/common/config/editorOptions","parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:f("vs/editor/common/config/editorOptions","parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),cycle:Q(t.cycle,this.defaultValue.cycle)}}}class FI extends tu{constructor(){super(143)}compute(e,t,i){return e.pixelRatio}}class HI extends Ge{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[f("vs/editor/common/config/editorOptions","on","Quick suggestions show inside the suggest widget"),f("vs/editor/common/config/editorOptions","inline","Quick suggestions show as ghost text"),f("vs/editor/common/config/editorOptions","off","Quick suggestions are disabled")]}];super(89,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:f("vs/editor/common/config/editorOptions","quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:f("vs/editor/common/config/editorOptions","quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:f("vs/editor/common/config/editorOptions","quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:f("vs/editor/common/config/editorOptions","quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the '{0}'-setting which controls if suggestions are triggered by special characters.","#editor.suggestOnTriggerCharacters#")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const l=e?"on":"off";return{comments:l,strings:l,other:l}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:n}=e,s=["on","inline","off"];let o,a,c;return typeof t=="boolean"?o=t?"on":"off":o=ot(t,this.defaultValue.other,s),typeof i=="boolean"?a=i?"on":"off":a=ot(i,this.defaultValue.comments,s),typeof n=="boolean"?c=n?"on":"off":c=ot(n,this.defaultValue.strings,s),{other:o,comments:a,strings:c}}}class UI extends Ge{constructor(){super(68,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[f("vs/editor/common/config/editorOptions","lineNumbers.off","Line numbers are not rendered."),f("vs/editor/common/config/editorOptions","lineNumbers.on","Line numbers are rendered as absolute number."),f("vs/editor/common/config/editorOptions","lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),f("vs/editor/common/config/editorOptions","lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:f("vs/editor/common/config/editorOptions","lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}}class WI extends Ge{constructor(){const e=[],t={type:"number",description:f("vs/editor/common/config/editorOptions","rulers.size","Number of monospace characters at which this editor ruler will render.")};super(102,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:f("vs/editor/common/config/editorOptions","rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:f("vs/editor/common/config/editorOptions","rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Me.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const n=i;t.push({column:Me.clampedInt(n.column,0,0,1e4),color:n.color})}return t.sort((i,n)=>i.column-n.column),t}return this.defaultValue}}class BI extends Ge{constructor(){super(92,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}}function sC(r,e){if(typeof r!="string")return e;switch(r){case"hidden":return 2;case"visible":return 3;default:return 1}}class VI extends Ge{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(103,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[f("vs/editor/common/config/editorOptions","scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),f("vs/editor/common/config/editorOptions","scrollbar.vertical.visible","The vertical scrollbar will always be visible."),f("vs/editor/common/config/editorOptions","scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:f("vs/editor/common/config/editorOptions","scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[f("vs/editor/common/config/editorOptions","scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),f("vs/editor/common/config/editorOptions","scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),f("vs/editor/common/config/editorOptions","scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:f("vs/editor/common/config/editorOptions","scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:f("vs/editor/common/config/editorOptions","scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:f("vs/editor/common/config/editorOptions","scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:f("vs/editor/common/config/editorOptions","scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:f("vs/editor/common/config/editorOptions","scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Me.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),n=Me.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Me.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:sC(t.vertical,this.defaultValue.vertical),horizontal:sC(t.horizontal,this.defaultValue.horizontal),useShadows:Q(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Q(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Q(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Q(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Q(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Me.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:n,verticalSliderSize:Me.clampedInt(t.verticalSliderSize,n,0,1e3),scrollByPage:Q(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Q(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}}const Ki="inUntrustedWorkspace",zs={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"};class zI extends Ge{constructor(){const e={nonBasicASCII:Ki,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Ki,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(125,"unicodeHighlight",e,{[zs.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ki],default:e.nonBasicASCII,description:f("vs/editor/common/config/editorOptions","unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[zs.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:f("vs/editor/common/config/editorOptions","unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[zs.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:f("vs/editor/common/config/editorOptions","unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[zs.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ki],default:e.includeComments,description:f("vs/editor/common/config/editorOptions","unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[zs.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ki],default:e.includeStrings,description:f("vs/editor/common/config/editorOptions","unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[zs.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:f("vs/editor/common/config/editorOptions","unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[zs.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:f("vs/editor/common/config/editorOptions","unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(zi(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(zi(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const n=super.applyUpdate(e,t);return i?new Vf(n.newValue,!0):n}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Na(t.nonBasicASCII,Ki,[!0,!1,Ki]),invisibleCharacters:Q(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Q(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Na(t.includeComments,Ki,[!0,!1,Ki]),includeStrings:Na(t.includeStrings,Ki,[!0,!1,Ki]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[n,s]of Object.entries(e))s===!0&&(i[n]=!0);return i}}class jI extends Ge{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default"};super(62,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:f("vs/editor/common/config/editorOptions","inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[f("vs/editor/common/config/editorOptions","inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),f("vs/editor/common/config/editorOptions","inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),f("vs/editor/common/config/editorOptions","inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:f("vs/editor/common/config/editorOptions","inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:f("vs/editor/common/config/editorOptions","inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:f("vs/editor/common/config/editorOptions","inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),mode:ot(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:ot(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Q(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Q(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:Bt.string(t.fontFamily,this.defaultValue.fontFamily)}}}class qI extends Ge{constructor(){const e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1,backgroundColoring:!1};super(63,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:f("vs/editor/common/config/editorOptions","inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[f("vs/editor/common/config/editorOptions","inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),f("vs/editor/common/config/editorOptions","inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),f("vs/editor/common/config/editorOptions","inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:f("vs/editor/common/config/editorOptions","inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:f("vs/editor/common/config/editorOptions","inlineEdit.fontFamily","Controls the font family of the inline edit.")},"editor.experimentalInlineEdit.backgroundColoring":{type:"boolean",default:e.backgroundColoring,description:f("vs/editor/common/config/editorOptions","inlineEdit.backgroundColoring","Controls whether to color the background of inline edits.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),showToolbar:ot(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:Bt.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:Q(t.keepOnBlur,this.defaultValue.keepOnBlur),backgroundColoring:Q(t.backgroundColoring,this.defaultValue.backgroundColoring)}}}class GI extends Ge{constructor(){const e={enabled:rC.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:rC.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:f("vs/editor/common/config/editorOptions","bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:f("vs/editor/common/config/editorOptions","bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Q(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}}class QI extends Ge{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[f("vs/editor/common/config/editorOptions","editor.guides.bracketPairs.true","Enables bracket pair guides."),f("vs/editor/common/config/editorOptions","editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),f("vs/editor/common/config/editorOptions","editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:f("vs/editor/common/config/editorOptions","editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[f("vs/editor/common/config/editorOptions","editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),f("vs/editor/common/config/editorOptions","editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),f("vs/editor/common/config/editorOptions","editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:f("vs/editor/common/config/editorOptions","editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:f("vs/editor/common/config/editorOptions","editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:f("vs/editor/common/config/editorOptions","editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[f("vs/editor/common/config/editorOptions","editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),f("vs/editor/common/config/editorOptions","editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),f("vs/editor/common/config/editorOptions","editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:f("vs/editor/common/config/editorOptions","editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Na(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Na(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Q(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Q(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Na(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}}function Na(r,e,t){const i=t.indexOf(r);return i===-1?e:t[i]}class JI extends Ge{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(118,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[f("vs/editor/common/config/editorOptions","suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),f("vs/editor/common/config/editorOptions","suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:f("vs/editor/common/config/editorOptions","suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:f("vs/editor/common/config/editorOptions","suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:f("vs/editor/common/config/editorOptions","suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:f("vs/editor/common/config/editorOptions","suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[f("vs/editor/common/config/editorOptions","suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),f("vs/editor/common/config/editorOptions","suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),f("vs/editor/common/config/editorOptions","suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),f("vs/editor/common/config/editorOptions","suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:f("vs/editor/common/config/editorOptions","suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions (`#editor.quickSuggestions#` and `#editor.suggestOnTriggerCharacters#`) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:f("vs/editor/common/config/editorOptions","suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:f("vs/editor/common/config/editorOptions","suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:f("vs/editor/common/config/editorOptions","suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:f("vs/editor/common/config/editorOptions","suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:f("vs/editor/common/config/editorOptions","suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:f("vs/editor/common/config/editorOptions","suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:f("vs/editor/common/config/editorOptions","deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:f("vs/editor/common/config/editorOptions","editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:ot(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Q(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Q(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Q(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Q(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:ot(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Q(t.showIcons,this.defaultValue.showIcons),showStatusBar:Q(t.showStatusBar,this.defaultValue.showStatusBar),preview:Q(t.preview,this.defaultValue.preview),previewMode:ot(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Q(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Q(t.showMethods,this.defaultValue.showMethods),showFunctions:Q(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Q(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Q(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Q(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Q(t.showFields,this.defaultValue.showFields),showVariables:Q(t.showVariables,this.defaultValue.showVariables),showClasses:Q(t.showClasses,this.defaultValue.showClasses),showStructs:Q(t.showStructs,this.defaultValue.showStructs),showInterfaces:Q(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Q(t.showModules,this.defaultValue.showModules),showProperties:Q(t.showProperties,this.defaultValue.showProperties),showEvents:Q(t.showEvents,this.defaultValue.showEvents),showOperators:Q(t.showOperators,this.defaultValue.showOperators),showUnits:Q(t.showUnits,this.defaultValue.showUnits),showValues:Q(t.showValues,this.defaultValue.showValues),showConstants:Q(t.showConstants,this.defaultValue.showConstants),showEnums:Q(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Q(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Q(t.showKeywords,this.defaultValue.showKeywords),showWords:Q(t.showWords,this.defaultValue.showWords),showColors:Q(t.showColors,this.defaultValue.showColors),showFiles:Q(t.showFiles,this.defaultValue.showFiles),showReferences:Q(t.showReferences,this.defaultValue.showReferences),showFolders:Q(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Q(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Q(t.showSnippets,this.defaultValue.showSnippets),showUsers:Q(t.showUsers,this.defaultValue.showUsers),showIssues:Q(t.showIssues,this.defaultValue.showIssues)}}}class KI extends Ge{constructor(){super(113,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:f("vs/editor/common/config/editorOptions","selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:f("vs/editor/common/config/editorOptions","selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Q(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Q(e.selectSubwords,this.defaultValue.selectSubwords)}}}class XI extends Ge{constructor(){const e=[];super(130,"wordSegmenterLocales",e,{anyOf:[{description:f("vs/editor/common/config/editorOptions","wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:f("vs/editor/common/config/editorOptions","wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}}class YI extends Ge{constructor(){super(138,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[f("vs/editor/common/config/editorOptions","wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),f("vs/editor/common/config/editorOptions","wrappingIndent.same","Wrapped lines get the same indentation as the parent."),f("vs/editor/common/config/editorOptions","wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),f("vs/editor/common/config/editorOptions","wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:f("vs/editor/common/config/editorOptions","wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}}class ZI extends tu{constructor(){super(146)}compute(e,t,i){const n=t.get(145);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:n.isWordWrapMinified,isViewportWrapping:n.isViewportWrapping,wrappingColumn:n.wrappingColumn}}}class e8 extends Ge{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:f("vs/editor/common/config/editorOptions","dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:f("vs/editor/common/config/editorOptions","dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[f("vs/editor/common/config/editorOptions","dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),f("vs/editor/common/config/editorOptions","dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),showDropSelector:ot(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}}class t8 extends Ge{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(85,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:f("vs/editor/common/config/editorOptions","pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:f("vs/editor/common/config/editorOptions","pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[f("vs/editor/common/config/editorOptions","pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),f("vs/editor/common/config/editorOptions","pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Q(t.enabled,this.defaultValue.enabled),showPasteSelector:ot(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}}const Hn={fontFamily:Fi?"Menlo, Monaco, 'Courier New', monospace":cr?"'Droid Sans Mono', 'monospace', monospace":"Consolas, 'Courier New', monospace",fontWeight:"normal",fontSize:Fi?12:14,lineHeight:0,letterSpacing:0},i8=[];function R(r){return i8[r.id]=r,r}R(new we(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:f("vs/editor/common/config/editorOptions","acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),R(new Ze(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",f("vs/editor/common/config/editorOptions","acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:f("vs/editor/common/config/editorOptions","acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),R(new vI),R(new Me(3,"accessibilityPageSize",10,1,1073741824,{description:f("vs/editor/common/config/editorOptions","accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),R(new Bt(4,"ariaLabel",f("vs/editor/common/config/editorOptions","editorViewAccessibleLabel","Editor content"))),R(new we(5,"ariaRequired",!1,void 0)),R(new we(8,"screenReaderAnnounceInlineSuggestion",!0,{description:f("vs/editor/common/config/editorOptions","screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),R(new Ze(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",f("vs/editor/common/config/editorOptions","editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),f("vs/editor/common/config/editorOptions","editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:f("vs/editor/common/config/editorOptions","autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),R(new Ze(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",f("vs/editor/common/config/editorOptions","editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),f("vs/editor/common/config/editorOptions","editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:f("vs/editor/common/config/editorOptions","autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),R(new Ze(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",f("vs/editor/common/config/editorOptions","editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:f("vs/editor/common/config/editorOptions","autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),R(new Ze(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",f("vs/editor/common/config/editorOptions","editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:f("vs/editor/common/config/editorOptions","autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),R(new Ze(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",f("vs/editor/common/config/editorOptions","editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),f("vs/editor/common/config/editorOptions","editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:f("vs/editor/common/config/editorOptions","autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),R(new jf(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],mI,{enumDescriptions:[f("vs/editor/common/config/editorOptions","editor.autoIndent.none","The editor will not insert indentation automatically."),f("vs/editor/common/config/editorOptions","editor.autoIndent.keep","The editor will keep the current line's indentation."),f("vs/editor/common/config/editorOptions","editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),f("vs/editor/common/config/editorOptions","editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),f("vs/editor/common/config/editorOptions","editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:f("vs/editor/common/config/editorOptions","autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),R(new we(13,"automaticLayout",!1)),R(new Ze(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[f("vs/editor/common/config/editorOptions","editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),f("vs/editor/common/config/editorOptions","editor.autoSurround.quotes","Surround with quotes but not brackets."),f("vs/editor/common/config/editorOptions","editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:f("vs/editor/common/config/editorOptions","autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),R(new GI),R(new QI),R(new we(116,"stickyTabStops",!1,{description:f("vs/editor/common/config/editorOptions","stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),R(new we(17,"codeLens",!0,{description:f("vs/editor/common/config/editorOptions","codeLens","Controls whether the editor shows CodeLens.")})),R(new Bt(18,"codeLensFontFamily","",{description:f("vs/editor/common/config/editorOptions","codeLensFontFamily","Controls the font family for CodeLens.")})),R(new Me(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:f("vs/editor/common/config/editorOptions","codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),R(new we(20,"colorDecorators",!0,{description:f("vs/editor/common/config/editorOptions","colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),R(new Ze(148,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[f("vs/editor/common/config/editorOptions","editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),f("vs/editor/common/config/editorOptions","editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),f("vs/editor/common/config/editorOptions","editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:f("vs/editor/common/config/editorOptions","colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),R(new Me(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:f("vs/editor/common/config/editorOptions","colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),R(new we(22,"columnSelection",!1,{description:f("vs/editor/common/config/editorOptions","columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),R(new _I),R(new we(24,"contextmenu",!0)),R(new we(25,"copyWithSyntaxHighlighting",!0,{description:f("vs/editor/common/config/editorOptions","copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),R(new jf(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],wI,{description:f("vs/editor/common/config/editorOptions","cursorBlinking","Control the cursor animation style.")})),R(new Ze(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[f("vs/editor/common/config/editorOptions","cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),f("vs/editor/common/config/editorOptions","cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),f("vs/editor/common/config/editorOptions","cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:f("vs/editor/common/config/editorOptions","cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),R(new jf(28,"cursorStyle",gn.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],bI,{description:f("vs/editor/common/config/editorOptions","cursorStyle","Controls the cursor style.")})),R(new Me(29,"cursorSurroundingLines",0,0,1073741824,{description:f("vs/editor/common/config/editorOptions","cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),R(new Ze(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[f("vs/editor/common/config/editorOptions","cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),f("vs/editor/common/config/editorOptions","cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:f("vs/editor/common/config/editorOptions","cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),R(new Me(31,"cursorWidth",0,0,1073741824,{markdownDescription:f("vs/editor/common/config/editorOptions","cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),R(new we(32,"disableLayerHinting",!1)),R(new we(33,"disableMonospaceOptimizations",!1)),R(new we(34,"domReadOnly",!1)),R(new we(35,"dragAndDrop",!0,{description:f("vs/editor/common/config/editorOptions","dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),R(new xI),R(new e8),R(new TI),R(new Ze(38,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[f("vs/editor/common/config/editorOptions","experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),f("vs/editor/common/config/editorOptions","experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),f("vs/editor/common/config/editorOptions","experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:f("vs/editor/common/config/editorOptions","experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),R(new Bt(39,"extraEditorClassName","")),R(new Ji(40,"fastScrollSensitivity",5,r=>r<=0?5:r,{markdownDescription:f("vs/editor/common/config/editorOptions","fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),R(new CI),R(new we(42,"fixedOverflowWidgets",!1)),R(new we(43,"folding",!0,{description:f("vs/editor/common/config/editorOptions","folding","Controls whether the editor has code folding enabled.")})),R(new Ze(44,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[f("vs/editor/common/config/editorOptions","foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),f("vs/editor/common/config/editorOptions","foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:f("vs/editor/common/config/editorOptions","foldingStrategy","Controls the strategy for computing folding ranges.")})),R(new we(45,"foldingHighlight",!0,{description:f("vs/editor/common/config/editorOptions","foldingHighlight","Controls whether the editor should highlight folded ranges.")})),R(new we(46,"foldingImportsByDefault",!1,{description:f("vs/editor/common/config/editorOptions","foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),R(new Me(47,"foldingMaximumRegions",5e3,10,65e3,{description:f("vs/editor/common/config/editorOptions","foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),R(new we(48,"unfoldOnClickAfterEndOfLine",!1,{description:f("vs/editor/common/config/editorOptions","unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),R(new Bt(49,"fontFamily",Hn.fontFamily,{description:f("vs/editor/common/config/editorOptions","fontFamily","Controls the font family.")})),R(new SI),R(new c_),R(new EI),R(new u_),R(new l_),R(new we(55,"formatOnPaste",!1,{description:f("vs/editor/common/config/editorOptions","formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),R(new we(56,"formatOnType",!1,{description:f("vs/editor/common/config/editorOptions","formatOnType","Controls whether the editor should automatically format the line after typing.")})),R(new we(57,"glyphMargin",!0,{description:f("vs/editor/common/config/editorOptions","glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),R(new kI),R(new we(59,"hideCursorInOverviewRuler",!1,{description:f("vs/editor/common/config/editorOptions","hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),R(new DI),R(new we(61,"inDiffEditor",!1)),R(new Ji(64,"letterSpacing",Hn.letterSpacing,r=>Ji.clamp(r,-5,20),{description:f("vs/editor/common/config/editorOptions","letterSpacing","Controls the letter spacing in pixels.")})),R(new PI),R(new RI),R(new LI),R(new UI),R(new Me(69,"lineNumbersMinChars",5,1,300)),R(new we(70,"linkedEditing",!1,{description:f("vs/editor/common/config/editorOptions","linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),R(new we(71,"links",!0,{description:f("vs/editor/common/config/editorOptions","links","Controls whether the editor should detect links and make them clickable.")})),R(new Ze(72,"matchBrackets","always",["always","near","never"],{description:f("vs/editor/common/config/editorOptions","matchBrackets","Highlight matching brackets.")})),R(new OI),R(new Ze(74,"mouseStyle","text",["text","default","copy"])),R(new Ji(75,"mouseWheelScrollSensitivity",1,r=>r===0?1:r,{markdownDescription:f("vs/editor/common/config/editorOptions","mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),R(new we(76,"mouseWheelZoom",!1,{markdownDescription:Fi?f("vs/editor/common/config/editorOptions","mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):f("vs/editor/common/config/editorOptions","mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),R(new we(77,"multiCursorMergeOverlapping",!0,{description:f("vs/editor/common/config/editorOptions","multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),R(new jf(78,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],$I,{markdownEnumDescriptions:[f("vs/editor/common/config/editorOptions","multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),f("vs/editor/common/config/editorOptions","multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:f("vs/editor/common/config/editorOptions",{key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),R(new Ze(79,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[f("vs/editor/common/config/editorOptions","multiCursorPaste.spread","Each cursor pastes a single line of the text."),f("vs/editor/common/config/editorOptions","multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:f("vs/editor/common/config/editorOptions","multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),R(new Me(80,"multiCursorLimit",1e4,1,1e5,{markdownDescription:f("vs/editor/common/config/editorOptions","multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),R(new Ze(81,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[f("vs/editor/common/config/editorOptions","occurrencesHighlight.off","Does not highlight occurrences."),f("vs/editor/common/config/editorOptions","occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),f("vs/editor/common/config/editorOptions","occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:f("vs/editor/common/config/editorOptions","occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),R(new we(82,"overviewRulerBorder",!0,{description:f("vs/editor/common/config/editorOptions","overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),R(new Me(83,"overviewRulerLanes",3,0,3)),R(new NI),R(new t8),R(new MI),R(new Ze(87,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[f("vs/editor/common/config/editorOptions","peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),f("vs/editor/common/config/editorOptions","peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:f("vs/editor/common/config/editorOptions","peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),R(new we(88,"definitionLinkOpensInPeek",!1,{description:f("vs/editor/common/config/editorOptions","definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),R(new HI),R(new Me(90,"quickSuggestionsDelay",10,0,1073741824,{description:f("vs/editor/common/config/editorOptions","quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),R(new we(91,"readOnly",!1)),R(new BI),R(new we(93,"renameOnType",!1,{description:f("vs/editor/common/config/editorOptions","renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:f("vs/editor/common/config/editorOptions","renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),R(new we(94,"renderControlCharacters",!0,{description:f("vs/editor/common/config/editorOptions","renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),R(new Ze(95,"renderFinalNewline",cr?"dimmed":"on",["off","on","dimmed"],{description:f("vs/editor/common/config/editorOptions","renderFinalNewline","Render last line number when the file ends with a newline.")})),R(new Ze(96,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",f("vs/editor/common/config/editorOptions","renderLineHighlight.all","Highlights both the gutter and the current line.")],description:f("vs/editor/common/config/editorOptions","renderLineHighlight","Controls how the editor should render the current line highlight.")})),R(new we(97,"renderLineHighlightOnlyWhenFocus",!1,{description:f("vs/editor/common/config/editorOptions","renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),R(new Ze(98,"renderValidationDecorations","editable",["editable","on","off"])),R(new Ze(99,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",f("vs/editor/common/config/editorOptions","renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),f("vs/editor/common/config/editorOptions","renderWhitespace.selection","Render whitespace characters only on selected text."),f("vs/editor/common/config/editorOptions","renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:f("vs/editor/common/config/editorOptions","renderWhitespace","Controls how the editor should render whitespace characters.")})),R(new Me(100,"revealHorizontalRightPadding",15,0,1e3)),R(new we(101,"roundedSelection",!0,{description:f("vs/editor/common/config/editorOptions","roundedSelection","Controls whether selections should have rounded corners.")})),R(new WI),R(new VI),R(new Me(104,"scrollBeyondLastColumn",4,0,1073741824,{description:f("vs/editor/common/config/editorOptions","scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),R(new we(105,"scrollBeyondLastLine",!0,{description:f("vs/editor/common/config/editorOptions","scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),R(new we(106,"scrollPredominantAxis",!0,{description:f("vs/editor/common/config/editorOptions","scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),R(new we(107,"selectionClipboard",!0,{description:f("vs/editor/common/config/editorOptions","selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:cr})),R(new we(108,"selectionHighlight",!0,{description:f("vs/editor/common/config/editorOptions","selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),R(new we(109,"selectOnLineNumbers",!0)),R(new Ze(110,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[f("vs/editor/common/config/editorOptions","showFoldingControls.always","Always show the folding controls."),f("vs/editor/common/config/editorOptions","showFoldingControls.never","Never show the folding controls and reduce the gutter size."),f("vs/editor/common/config/editorOptions","showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:f("vs/editor/common/config/editorOptions","showFoldingControls","Controls when the folding controls on the gutter are shown.")})),R(new we(111,"showUnused",!0,{description:f("vs/editor/common/config/editorOptions","showUnused","Controls fading out of unused code.")})),R(new we(140,"showDeprecated",!0,{description:f("vs/editor/common/config/editorOptions","showDeprecated","Controls strikethrough deprecated variables.")})),R(new AI),R(new Ze(112,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[f("vs/editor/common/config/editorOptions","snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),f("vs/editor/common/config/editorOptions","snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),f("vs/editor/common/config/editorOptions","snippetSuggestions.inline","Show snippets suggestions with other suggestions."),f("vs/editor/common/config/editorOptions","snippetSuggestions.none","Do not show snippet suggestions.")],description:f("vs/editor/common/config/editorOptions","snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),R(new KI),R(new we(114,"smoothScrolling",!1,{description:f("vs/editor/common/config/editorOptions","smoothScrolling","Controls whether the editor will scroll using an animation.")})),R(new Me(117,"stopRenderingLineAfter",1e4,-1,1073741824)),R(new JI),R(new jI),R(new qI),R(new we(149,"inlineCompletionsAccessibilityVerbose",!1,{description:f("vs/editor/common/config/editorOptions","inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),R(new Me(119,"suggestFontSize",0,0,1e3,{markdownDescription:f("vs/editor/common/config/editorOptions","suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),R(new Me(120,"suggestLineHeight",0,0,1e3,{markdownDescription:f("vs/editor/common/config/editorOptions","suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),R(new we(121,"suggestOnTriggerCharacters",!0,{description:f("vs/editor/common/config/editorOptions","suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),R(new Ze(122,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[f("vs/editor/common/config/editorOptions","suggestSelection.first","Always select the first suggestion."),f("vs/editor/common/config/editorOptions","suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),f("vs/editor/common/config/editorOptions","suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:f("vs/editor/common/config/editorOptions","suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),R(new Ze(123,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[f("vs/editor/common/config/editorOptions","tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),f("vs/editor/common/config/editorOptions","tabCompletion.off","Disable tab completions."),f("vs/editor/common/config/editorOptions","tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:f("vs/editor/common/config/editorOptions","tabCompletion","Enables tab completions.")})),R(new Me(124,"tabIndex",0,-1,1073741824)),R(new zI),R(new Ze(126,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[f("vs/editor/common/config/editorOptions","unusualLineTerminators.auto","Unusual line terminators are automatically removed."),f("vs/editor/common/config/editorOptions","unusualLineTerminators.off","Unusual line terminators are ignored."),f("vs/editor/common/config/editorOptions","unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:f("vs/editor/common/config/editorOptions","unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),R(new we(127,"useShadowDOM",!0)),R(new we(128,"useTabStops",!0,{description:f("vs/editor/common/config/editorOptions","useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),R(new Ze(129,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[f("vs/editor/common/config/editorOptions","wordBreak.normal","Use the default line break rule."),f("vs/editor/common/config/editorOptions","wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:f("vs/editor/common/config/editorOptions","wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),R(new XI),R(new Bt(131,"wordSeparators",O2,{description:f("vs/editor/common/config/editorOptions","wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),R(new Ze(132,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[f("vs/editor/common/config/editorOptions","wordWrap.off","Lines will never wrap."),f("vs/editor/common/config/editorOptions","wordWrap.on","Lines will wrap at the viewport width."),f("vs/editor/common/config/editorOptions",{key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),f("vs/editor/common/config/editorOptions",{key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:f("vs/editor/common/config/editorOptions",{key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),R(new Bt(133,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;¢°′″‰℃、。｡､￠，．：；？！％・･ゝゞヽヾーァィゥェォッャュョヮヵヶぁぃぅぇぉっゃゅょゎゕゖㇰㇱㇲㇳㇴㇵㇶㇷㇸㇹㇺㇻㇼㇽㇾㇿ々〻ｧｨｩｪｫｬｭｮｯｰ”〉》」』】〕）］｝｣")),R(new Bt(134,"wordWrapBreakBeforeCharacters","([{‘“〈《「『【〔（［｛｢£¥＄￡￥+＋")),R(new Me(135,"wordWrapColumn",80,1,1073741824,{markdownDescription:f("vs/editor/common/config/editorOptions",{key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),R(new Ze(136,"wordWrapOverride1","inherit",["off","on","inherit"])),R(new Ze(137,"wordWrapOverride2","inherit",["off","on","inherit"])),R(new yI),R(new we(147,"defaultColorDecorators",!1,{markdownDescription:f("vs/editor/common/config/editorOptions","defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),R(new FI),R(new we(144,"tabFocusMode",!1,{markdownDescription:f("vs/editor/common/config/editorOptions","tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),R(new iu),R(new ZI),R(new YI),R(new II);function oC(r,e,t,i,n,s){if(Array.isArray(r)){let o=0;for(const a of r){const c=oC(a,e,t,i,n,s);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof r=="string")return i?r==="*"?5:r===t?10:0:0;if(r){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=r;if(!i&&!l)return 0;u&&n&&(e=n);let d=0;if(c)if(c===e.scheme)d=10;else if(c==="*")d=5;else return 0;if(o)if(o===t)d=10;else if(o==="*")d=Math.max(d,5);else return 0;if(u)if(u===s)d=10;else if(u==="*"&&s!==void 0)d=Math.max(d,5);else return 0;if(a){let h;if(typeof a=="string"?h=a:h={...a,base:Po(a.base)},h===e.fsPath||el(h,e.fsPath))d=10;else return 0}return d}else return 0}}function aC(r){return typeof r=="string"?!1:Array.isArray(r)?r.some(aC):!!r.notebookType}var d_;(function(r){r[r.None=0]="None",r[r.Indent=1]="Indent",r[r.IndentOutdent=2]="IndentOutdent",r[r.Outdent=3]="Outdent"})(d_||(d_={})),ie("editSessionIdentityService");var h_;(function(r){r[r.Complete=100]="Complete",r[r.Partial=50]="Partial",r[r.None=0]="None"})(h_||(h_={}));class n8{constructor(e){this._relatedInformationProviders=new Map,this._nextHandle=0,this._proxy=e.getProxy(G.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,i){if(this._relatedInformationProviders.size===0)throw new Error("No related information providers registered");const n=this._relatedInformationProviders.get(e);if(!n)throw new Error("related information provider not found");return await n.provideRelatedInformation(t,i)??[]}getRelatedInformation(e,t,i){return this._proxy.$getAiRelatedInformation(t,i)}registerRelatedInformationProvider(e,t,i){const n=this._nextHandle;return this._nextHandle++,this._relatedInformationProviders.set(n,i),this._proxy.$registerAiRelatedInformationProvider(n,t),new Re(()=>{this._proxy.$unregisterAiRelatedInformationProvider(n),this._relatedInformationProviders.delete(n)})}}function cC(r){for(let e=0,t=r.length;e<t;e+=4){const i=r[e+0],n=r[e+1],s=r[e+2],o=r[e+3];r[e+0]=o,r[e+1]=s,r[e+2]=n,r[e+3]=i}}function r8(r){const e=new Uint8Array(r.buffer,r.byteOffset,r.length*4);return vb()||cC(e),ve.wrap(e)}function s8(r){const e=r.buffer;if(vb()||cC(e),e.byteOffset%4===0)return new Uint32Array(e.buffer,e.byteOffset,e.length/4);{const t=new Uint8Array(e.byteLength);return t.set(e),new Uint32Array(t.buffer,t.byteOffset,t.length/4)}}function f_(r){const e=new Uint32Array(o8(r));let t=0;if(e[t++]=r.id,r.type==="full")e[t++]=1,e[t++]=r.data.length,e.set(r.data,t),t+=r.data.length;else{e[t++]=2,e[t++]=r.deltas.length;for(const i of r.deltas)e[t++]=i.start,e[t++]=i.deleteCount,i.data?(e[t++]=i.data.length,e.set(i.data,t),t+=i.data.length):e[t++]=0}return r8(e)}function o8(r){let e=0;if(e+=1+1,r.type==="full")e+=1+r.data.length;else{e+=1,e+=(1+1+1)*r.deltas.length;for(const t of r.deltas)t.data&&(e+=t.data.length)}return e}function lC(r){const e=s8(r);let t=0;const i=e[t++];if(e[t++]===1){const a=e[t++],c=e.subarray(t,t+a);return t+=a,{id:i,type:"full",data:c}}const s=e[t++],o=[];for(let a=0;a<s;a++){const c=e[t++],l=e[t++],u=e[t++];let d;u>0&&(d=e.subarray(t,t+u),t+=u),o[a]={start:c,deleteCount:l,data:d}}return{id:i,type:"delta",deltas:o}}const a8=[new _e("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[B.Uri,B.Position],new me("A promise that resolves to an array of DocumentHighlight-instances.",Un(ma.to))),new _e("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[B.Uri],new me("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(r,e)=>{if(eg(r))return;class t extends ol{static to(n){const s=new t(n.name,Oi.to(n.kind),n.containerName||"",new yi(e[0],F.to(n.range)));return s.detail=n.detail,s.range=s.location.range,s.selectionRange=F.to(n.selectionRange),s.children=n.children?n.children.map(t.to):[],s}}return r.map(t.to)})),new _e("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[B.Uri,new B("options","Formatting options",r=>!0,r=>r)],new me("A promise that resolves to an array of TextEdits.",Un(It.to))),new _e("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[B.Uri,B.Range,new B("options","Formatting options",r=>!0,r=>r)],new me("A promise that resolves to an array of TextEdits.",Un(It.to))),new _e("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[B.Uri,B.Position,new B("ch","Trigger character",r=>typeof r=="string",r=>r),new B("options","Formatting options",r=>!0,r=>r)],new me("A promise that resolves to an array of TextEdits.",Un(It.to))),new _e("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[B.Uri,B.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",qf)),new _e("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[B.Uri,B.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",qf)),new _e("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[B.Uri,B.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",qf)),new _e("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[B.Uri,B.Position],new me("A promise that resolves to an array of Location or LocationLink instances.",qf)),new _e("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[B.Uri,B.Position],new me("A promise that resolves to an array of Location-instances.",Un(xi.to))),new _e("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[B.Uri,B.Position],new me("A promise that resolves to an array of Hover-instances.",Un(Jh.to))),new _e("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[B.Uri,new B("position","A position in a text document",r=>Array.isArray(r)&&r.every(e=>Ee.isPosition(e)),r=>r.map(qe.from))],new me("A promise that resolves to an array of ranges.",r=>r.map(e=>{let t;for(const i of e.reverse())t=new ll(F.to(i),t);return t}))),new _e("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[B.String.with("query","Search string")],new me("A promise that resolves to an array of SymbolInformation-instances.",r=>r.map(Dl.to))),new _e("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[B.Uri,B.Position],new me("A promise that resolves to an array of CallHierarchyItem-instances",r=>r.map(Ns.to))),new _e("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[B.CallHierarchyItem],new me("A promise that resolves to an array of CallHierarchyIncomingCall-instances",r=>r.map(h1.to))),new _e("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[B.CallHierarchyItem],new me("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",r=>r.map(f1.to))),new _e("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[B.Uri,B.Position],new me("A promise that resolves to a range and placeholder text.",r=>{if(r)return{range:F.to(r.range),placeholder:r.text}})),new _e("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[B.Uri,B.Position,B.String.with("newName","The new symbol name")],new me("A promise that resolves to a WorkspaceEdit.",r=>{if(r){if(r.rejectReason)throw new Error(r.rejectReason);return Xt.to(r)}})),new _e("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[B.Uri,B.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new me("A promise that resolves to an array of DocumentLink-instances.",r=>r.map(Ms.to))),new _e("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[B.Uri],new me("A promise that resolves to SemanticTokensLegend.",r=>{if(r)return new Bm(r.tokenTypes,r.tokenModifiers)})),new _e("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[B.Uri],new me("A promise that resolves to SemanticTokens.",r=>{if(!r)return;const e=lC(r);if(e.type==="full")return new aa(e.data,void 0)})),new _e("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[B.Uri,B.Range.optional()],new me("A promise that resolves to SemanticTokensLegend.",r=>{if(r)return new Bm(r.tokenTypes,r.tokenModifiers)})),new _e("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[B.Uri,B.Range],new me("A promise that resolves to SemanticTokens.",r=>{if(!r)return;const e=lC(r);if(e.type==="full")return new aa(e.data,void 0)})),new _e("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[B.Uri,B.Position,B.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),B.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new me("A promise that resolves to a CompletionList-instance.",(r,e,t)=>{if(!r)return new Ko([]);const i=r.suggestions.map(n=>_1.to(n,t));return new Ko(i,r.incomplete)})),new _e("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[B.Uri,B.Position,B.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new me("A promise that resolves to SignatureHelp.",r=>{if(r)return Pl.to(r)})),new _e("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[B.Uri,B.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new me("A promise that resolves to an array of CodeLens-instances.",(r,e,t)=>Un(i=>new nh(F.to(i.range),i.command&&t.fromInternal(i.command)))(r))),new _e("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[B.Uri,new B("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",r=>ye.isRange(r),r=>Pn.isSelection(r)?Li.from(r):F.from(r)),B.String.with("kind","Code action kind to return code actions for").optional(),B.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new me("A promise that resolves to an array of Command-instances.",(r,e,t)=>Un(i=>{if(i._isSynthetic){if(!i.command)throw new Error("Synthetic code actions must have a command");return t.fromInternal(i.command)}else{const n=new ih(i.title,i.kind?new st(i.kind):void 0);return i.edit&&(n.edit=Xt.to(i.edit)),i.command&&(n.command=t.fromInternal(i.command)),n.isPreferred=i.isPreferred,n}})(r))),new _e("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[B.Uri],new me("A promise that resolves to an array of ColorInformation objects.",r=>r?r.map(e=>new lh(F.to(e.range),va.to(e.color))):[])),new _e("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new B("color","The color to show and insert",r=>r instanceof ea,va.from),new B("context","Context object with uri and range",r=>!0,r=>({uri:r.uri,range:F.from(r.range)}))],new me("A promise that resolves to an array of ColorPresentation objects.",r=>r?r.map(rf.to):[])),new _e("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[B.Uri,B.Range],new me("A promise that resolves to an array of Inlay objects",(r,e,t)=>r.map(w1.to.bind(void 0,t)))),new _e("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[B.Uri],new me("A promise that resolves to an array of FoldingRange objects",(r,e)=>{if(r)return r.map(of.to)})),new _e("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new me("A promise that resolves to an array of NotebookContentProvider static info objects.",Un(r=>({viewType:r.viewType,displayName:r.displayName,options:{transientOutputs:r.options.transientOutputs,transientCellMetadata:r.options.transientCellMetadata,transientDocumentMetadata:r.options.transientDocumentMetadata},filenamePattern:r.filenamePattern.map(e=>lf.to(e))})))),new _e("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[B.Uri,B.Range,new B("context","An InlineValueContext",r=>r&&typeof r.frameId=="number"&&r.stoppedLocation instanceof ye,r=>Xh.from(r))],new me("A promise that resolves to an array of InlineValue objects",r=>r.map(Kh.to))),new _e("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new B("uriOrString","Uri-instance or string (only http/https)",r=>y.isUri(r)||typeof r=="string"&&lE(r,Y.http,Y.https),r=>r),new B("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",r=>r===void 0||typeof r=="number"||typeof r=="object",r=>r&&(typeof r=="number"?[yt.from(r),void 0]:[yt.from(r.viewColumn),Tl.from(r)])).optional(),B.String.with("label","").optional()],me.Void),new _e("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[B.Uri.with("resource","Resource to open"),B.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new B("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",r=>r===void 0||typeof r=="number"||typeof r=="object",r=>r&&(typeof r=="number"?[yt.from(r),void 0]:[yt.from(r.viewColumn),Tl.from(r)])).optional()],me.Void),new _e("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[B.Uri.with("left","Left-hand side resource of the diff editor"),B.Uri.with("right","Right-hand side resource of the diff editor"),B.String.with("title","Human readable title for the diff editor").optional(),new B("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",r=>r===void 0||typeof r=="object",r=>r&&[yt.from(r.viewColumn),Tl.from(r)]).optional()],me.Void),new _e("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[B.String.with("title","Human readable title for the changes editor"),new B("resourceList","List of resources to compare",r=>{for(const e of r){if(e.length!==3)return!1;const[t,i,n]=e;if(!y.isUri(t)||!y.isUri(i)&&i!==void 0&&i!==null||!y.isUri(n)&&n!==void 0&&n!==null)return!1}return!0},r=>r)],me.Void),new _e("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[B.Uri,B.Position],new me("A promise that resolves to an array of TypeHierarchyItem-instances",r=>r.map(Fs.to))),new _e("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[B.TypeHierarchyItem],new me("A promise that resolves to an array of TypeHierarchyItem-instances",r=>r.map(Fs.to))),new _e("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[B.TypeHierarchyItem],new me("A promise that resolves to an array of TypeHierarchyItem-instances",r=>r.map(Fs.to))),new _e("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[B.TestItem],me.Void),new _e("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[B.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],me.Void),new _e("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[B.String.with("name","The context key name"),new B("value","The context key value",()=>!0,r=>r)],me.Void),new _e("vscode.executeMappedEditsProvider","_executeMappedEditsProvider","Execute Mapped Edits Provider",[B.Uri,B.StringArray,new B("MappedEditsContext","Mapped Edits Context",r=>cf.is(r),r=>cf.from(r))],new me("A promise that resolves to a workspace edit or null",r=>r?Xt.to(r):null))];class c8{static register(e){a8.forEach(e.registerApiCommand,e),this._registerValidateWhenClausesCommand(e)}static _registerValidateWhenClausesCommand(e){e.registerCommand(!1,"_validateWhenClauses",XE)}}function Un(r){return e=>{if(Array.isArray(e))return e.map(r)}}function qf(r){if(!Array.isArray(r))return;const e=[];for(const t of r)x5(t)?e.push(Il.to(t)):e.push(xi.to(t));return e}let p_=class{constructor(e,t){this._proxy=e.getProxy(G.MainThreadBulkEdits),this._versionInformationProvider={getTextDocumentVersion:i=>{var n;return(n=t.getDocument(i))==null?void 0:n.version},getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(e,t,i){const n=Xt.from(e,this._versionInformationProvider);return this._proxy.$tryApplyWorkspaceEdit(n,void 0,(i==null?void 0:i.isRefactoring)??!1)}};p_=H([$(0,We)],p_);const Ip=class Ip{constructor(e,t){this.extension=e,this.provider=t,this.handle=Ip._pool++}};Ip._pool=0;let g_=Ip;const Pp=class Pp{constructor(e){this._chatProvider=new Map,this._chatSessions=new Map,this._proxy=e.getProxy(G.MainThreadChat)}registerChatProvider(e,t,i){const n=new g_(e,i);return this._chatProvider.set(n.handle,n),this._proxy.$registerChatProvider(n.handle,t),Ce(()=>{this._proxy.$unregisterChatProvider(n.handle),this._chatProvider.delete(n.handle)})}transferChatSession(e,t){const i=yn.find(this._chatSessions.keys(),n=>this._chatSessions.get(n)===e)??0;typeof i=="number"&&this._proxy.$transferChatSession(i,t)}async $prepareChat(e,t){const i=this._chatProvider.get(e);if(!i)return;const n=await i.provider.prepareSession(t);if(!n)return;const s=Pp._nextId++;return this._chatSessions.set(s,n),{id:s}}$releaseSession(e){this._chatSessions.delete(e)}};Pp._nextId=0;let m_=Pp;var Gf;(function(r){r[r.Down=0]="Down",r[r.Up=1]="Up"})(Gf||(Gf={}));var uC;(function(r){r[r.Action=1]="Action",r[r.Toolbar=2]="Toolbar"})(uC||(uC={})),ie("IChatService");class l8{constructor(e,t,i,n,s,o){this._extension=e,this._request=t,this._proxy=i,this._logService=n,this._commandsConverter=s,this._sessionDisposables=o,this._stopWatch=xn.create(!1),this._isClosed=!1}close(){this._isClosed=!0}get timings(){return{firstProgress:this._firstProgress,totalElapsed:this._stopWatch.elapsed()}}get apiObject(){if(!this._apiObject){let t=function(n){if(e._isClosed){const s=new Error("Response stream has been closed");throw Error.captureStackTrace(s,n),s}};const e=this;this._stopWatch.reset();const i=n=>{typeof this._firstProgress>"u"&&"content"in n&&(this._firstProgress=this._stopWatch.elapsed()),this._proxy.$handleProgressChunk(this._request.requestId,n)};this._apiObject={markdown(n){t(this.markdown);const s=new Mh(n),o=Ol.to(s);return i(o),this},filetree(n,s){t(this.filetree);const o=new Fh(n,s),a=$l.to(o);return i(a),this},anchor(n,s){t(this.anchor);const o=new Hh(n,s),a=Nl.to(o);return i(a),this},button(n){t(this.anchor);const s=new Uh(n),o=Ml.to(s,e._commandsConverter,e._sessionDisposables);return i(o),this},progress(n){t(this.progress);const s=new ha(n),o=Sa.to(s);return i(o),this},reference(n){var s;if(t(this.reference),"variableName"in n&&!n.value){const o=e._request.variables.variables.find(a=>a.name===n.variableName);if(o){let a;if((s=o.references)!=null&&s.length)a=o.references.map(c=>({kind:"reference",reference:{variableName:n.variableName,value:c.reference}}));else{const c=new Ir(n);a=[Or.to(c)]}return a.forEach(c=>i(c)),this}}else{const o=new Ir(n),a=Or.to(o);i(a)}return this},push(n){if(t(this.push),n instanceof Ir)this.reference(n.value);else{const s=mf.to(n,e._commandsConverter,e._sessionDisposables);i(s)}return this},report(n){if(t(this.report),"placeholder"in n&&"resolvedContent"in n)return;const s=vf.from(e._extension,n);if(!s){e._logService.error("Unknown progress type: "+JSON.stringify(n));return}return i(s),this}}}return this._apiObject}}const Iu=class Iu{constructor(e,t,i){this._logService=t,this.commands=i,this._agents=new Map,this._sessionDisposables=new nb,this._proxy=e.getProxy(G.MainThreadChatAgents2)}createChatAgent(e,t,i){const n=Iu._idPool++,s=new dC(e,t,this._proxy,n,i);return this._agents.set(n,s),this._proxy.$registerAgent(n,e.identifier,t,{},void 0),s.apiAgent}createDynamicChatAgent(e,t,i,n,s){const o=Iu._idPool++,a=new dC(e,t,this._proxy,o,s);return this._agents.set(o,a),this._proxy.$registerAgent(o,e.identifier,t,{},{name:i,description:n}),a.apiAgent}async $invokeAgent(e,t,i,n){const s=this._agents.get(e);if(!s)throw new Error(`[CHAT](${e}) CANNOT invoke agent because the agent is not registered`);let o=this._sessionDisposables.get(t.sessionId);o||(o=new Pe,this._sessionDisposables.set(t.sessionId,o));const a=new l8(s.extension,t,this._proxy,this._logService,this.commands.converter,o);try{const c=await this.prepareHistoryTurns(t.agentId,i),l=s.invoke(R1.to(t),{history:c},a.apiObject,n);return await Tg(Promise.resolve(l).then(u=>{if(u!=null&&u.metadata)try{JSON.stringify(u.metadata)}catch(d){const h=`result.metadata MUST be JSON.stringify-able. Got error: ${d.message}`;return this._logService.error(`[${s.extension.identifier.value}] [@${s.id}] ${h}`,s.extension),{errorDetails:{message:h},timings:a.timings}}return{errorDetails:u==null?void 0:u.errorDetails,timings:a.timings,metadata:u==null?void 0:u.metadata}}),n)}catch(c){return this._logService.error(c,s.extension),{errorDetails:{message:f("vs/workbench/api/common/extHostChatAgents2","errorResponse","Error from participant: {0}",$o(c)),responseIsIncomplete:!0}}}finally{a.close()}}async prepareHistoryTurns(e,t){const i=[];for(const n of t.history){const s=Ea.to(n.result),o=e===n.request.agentId?s:{...s,metadata:void 0};i.push(new Dx(n.request.message,n.request.command,n.request.variables.variables.map(_f.to),n.request.agentId));const a=Yt(n.response.map(c=>mf.fromContent(c,this.commands.converter)));i.push(new Ix(a,o,n.request.agentId,n.request.command))}return i}$releaseSession(e){this._sessionDisposables.deleteAndDispose(e)}async $provideFollowups(e,t,i,n,s){const o=this._agents.get(t);if(!o)return Promise.resolve([]);const a=await this.prepareHistoryTurns(o.id,n),c=Ea.to(i);return(await o.provideFollowups(c,{history:a},s)).filter(l=>{const u=!l.participant||yn.some(this._agents.values(),d=>d.id===l.participant&&Xe.equals(d.extension.identifier,o.extension.identifier));return u||this._logService.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${l.participant}`),u}).map(l=>Ll.from(l,e))}$acceptFeedback(e,t,i,n){const s=this._agents.get(e);if(!s)return;const o=Ea.to(t);let a;switch(i){case Gf.Down:a=El.Unhelpful;break;case Gf.Up:a=El.Helpful;break}s.acceptFeedback(Object.freeze(n?{result:o,kind:a,reportIssue:n}:{result:o,kind:a}))}$acceptAction(e,t,i){const n=this._agents.get(e);if(!n||i.action.kind==="vote")return;const s=$1.to(t,i,this.commands.converter);s&&n.acceptAction(Object.freeze(s))}async $invokeCompletionProvider(e,t,i){const n=this._agents.get(e);return n?(await n.invokeCompletionProvider(t,i)).map(O1.from):[]}async $provideWelcomeMessage(e,t){const i=this._agents.get(e);if(i)return await i.provideWelcomeMessage(t)}async $provideSampleQuestions(e,t){const i=this._agents.get(e);if(i)return(await i.provideSampleQuestions(t)).map(n=>Ll.from(n,void 0))}};Iu._idPool=0;let v_=Iu;class dC{constructor(e,t,i,n,s){this.extension=e,this.id=t,this._proxy=i,this._handle=n,this._requestHandler=s,this._onDidReceiveFeedback=new A,this._onDidPerformAction=new A}acceptFeedback(e){this._onDidReceiveFeedback.fire(e)}acceptAction(e){this._onDidPerformAction.fire(e)}async invokeCompletionProvider(e,t){return this._agentVariableProvider?await this._agentVariableProvider.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,i){if(!this._followupProvider)return[];const n=await this._followupProvider.provideFollowups(e,t,i);return n?n.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideWelcomeMessage(e){if(!this._welcomeMessageProvider)return[];const t=await this._welcomeMessageProvider.provideWelcomeMessage(e);return t?t.map(i=>typeof i=="string"?i:Le.from(i)):[]}async provideSampleQuestions(e){if(!this._welcomeMessageProvider||!this._welcomeMessageProvider.provideSampleQuestions)return[];const t=await this._welcomeMessageProvider.provideSampleQuestions(e);return t||[]}get apiAgent(){let e=!1,t=!1;const i=()=>{e||t||(t=!0,queueMicrotask(()=>{this._proxy.$updateAgent(this._handle,{fullName:this._fullName,icon:this._iconPath?this._iconPath instanceof y?this._iconPath:"light"in this._iconPath?this._iconPath.light:void 0:void 0,iconDark:this._iconPath&&"dark"in this._iconPath?this._iconPath.dark:void 0,themeIcon:this._iconPath instanceof Kt?this._iconPath:void 0,hasFollowups:this._followupProvider!==void 0,isSecondary:this._isSecondary,helpTextPrefix:!this._helpTextPrefix||typeof this._helpTextPrefix=="string"?this._helpTextPrefix:Le.from(this._helpTextPrefix),helpTextVariablesPrefix:!this._helpTextVariablesPrefix||typeof this._helpTextVariablesPrefix=="string"?this._helpTextVariablesPrefix:Le.from(this._helpTextVariablesPrefix),helpTextPostfix:!this._helpTextPostfix||typeof this._helpTextPostfix=="string"?this._helpTextPostfix:Le.from(this._helpTextPostfix),sampleRequest:this._sampleRequest,supportIssueReporting:this._supportIssueReporting,requester:this._requester}),t=!1}))},n=this;return{get id(){return n.id},get fullName(){return M(n.extension,"defaultChatParticipant"),n._fullName??n.extension.displayName??n.extension.name},set fullName(s){M(n.extension,"defaultChatParticipant"),n._fullName=s,i()},get iconPath(){return n._iconPath},set iconPath(s){n._iconPath=s,i()},get requestHandler(){return n._requestHandler},set requestHandler(s){qb(typeof s=="function","Invalid request handler"),n._requestHandler=s},get followupProvider(){return n._followupProvider},set followupProvider(s){n._followupProvider=s,i()},get isDefault(){return M(n.extension,"defaultChatParticipant"),n._isDefault},set isDefault(s){M(n.extension,"defaultChatParticipant"),n._isDefault=s,i()},get helpTextPrefix(){return M(n.extension,"defaultChatParticipant"),n._helpTextPrefix},set helpTextPrefix(s){M(n.extension,"defaultChatParticipant"),n._helpTextPrefix=s,i()},get helpTextVariablesPrefix(){return M(n.extension,"defaultChatParticipant"),n._helpTextVariablesPrefix},set helpTextVariablesPrefix(s){M(n.extension,"defaultChatParticipant"),n._helpTextVariablesPrefix=s,i()},get helpTextPostfix(){return M(n.extension,"defaultChatParticipant"),n._helpTextPostfix},set helpTextPostfix(s){M(n.extension,"defaultChatParticipant"),n._helpTextPostfix=s,i()},get isSecondary(){return M(n.extension,"defaultChatParticipant"),n._isSecondary},set isSecondary(s){M(n.extension,"defaultChatParticipant"),n._isSecondary=s,i()},get sampleRequest(){return n._sampleRequest},set sampleRequest(s){n._sampleRequest=s,i()},get supportIssueReporting(){return M(n.extension,"chatParticipantAdditions"),n._supportIssueReporting},set supportIssueReporting(s){M(n.extension,"chatParticipantAdditions"),n._supportIssueReporting=s,i()},get onDidReceiveFeedback(){return n._onDidReceiveFeedback.event},set participantVariableProvider(s){if(M(n.extension,"chatParticipantAdditions"),n._agentVariableProvider=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");n._proxy.$registerAgentCompletionsProvider(n._handle,s.triggerCharacters)}else n._proxy.$unregisterAgentCompletionsProvider(n._handle)},get participantVariableProvider(){return M(n.extension,"chatParticipantAdditions"),n._agentVariableProvider},set welcomeMessageProvider(s){M(n.extension,"defaultChatParticipant"),n._welcomeMessageProvider=s,i()},get welcomeMessageProvider(){return M(n.extension,"defaultChatParticipant"),n._welcomeMessageProvider},onDidPerformAction:At(this.extension,"chatParticipantAdditions")?this._onDidPerformAction.event:void 0,set requester(s){n._requester=s,i()},get requester(){return n._requester},dispose(){e=!0,n._followupProvider=void 0,n._onDidReceiveFeedback.dispose(),n._proxy.$unregisterAgent(n._handle)}}}invoke(e,t,i,n){return this._requestHandler(e,t,i,n)}}const Tp=class Tp{constructor(e){this._resolver=new Map,this._proxy=e.getProxy(G.MainThreadChatVariables)}async $resolveVariable(e,t,i,n){const s=this._resolver.get(e);if(s)try{if(s.resolver.resolve2){M(s.extension,"chatParticipantAdditions");const o=new u8(t,this._proxy),a=await s.resolver.resolve2(s.data.name,{prompt:i},o.apiObject,n);if(a)return a.map(Ca.from)}else{const o=await s.resolver.resolve(s.data.name,{prompt:i},n);if(o)return o.map(Ca.from)}}catch(o){Xp(o)}}registerVariableResolver(e,t,i,n){const s=Tp._idPool++;return this._resolver.set(s,{extension:e,data:{name:t,description:i},resolver:n}),this._proxy.$registerVariable(s,{name:t,description:i}),Ce(()=>{this._resolver.delete(s),this._proxy.$unregisterVariable(s)})}};Tp._idPool=0;let __=Tp;class u8{constructor(e,t){this._requestId=e,this._proxy=t,this._isClosed=!1}close(){this._isClosed=!0}get apiObject(){if(!this._apiObject){let t=function(n){if(e._isClosed){const s=new Error("Response stream has been closed");throw Error.captureStackTrace(s,n),s}};const e=this,i=n=>{this._proxy.$handleProgressChunk(this._requestId,n)};this._apiObject={progress(n){t(this.progress);const s=new ha(n),o=Sa.to(s);return i(o),this},reference(n){t(this.reference);const s=new Ir(n),o=Or.to(s);return i(o),this},push(n){return t(this.push),n instanceof Ir?i(Or.to(n)):n instanceof ha&&i(Sa.to(n)),this}}}return this._apiObject}}class d8{constructor(e){const t=e.getProxy(G.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(i){return t.$writeText(i)}})}}const hC="vscode-cdn.net",h8=`vscode-resource.${hC}`,w_=`'self' https://*.${hC}`;function nu(r,e){return r.scheme===Y.http||r.scheme===Y.https?r:(e&&e.authority&&e.isRemote&&r.scheme===Y.file&&(r=y.from({scheme:Y.vscodeRemote,authority:e.authority,path:r.path})),y.from({scheme:Y.https,authority:`${r.scheme}+${f8(r.authority)}.${h8}`,path:r.path,fragment:r.fragment,query:r.query}))}function f8(r){return r.replace(/./g,e=>{const t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57?e:"-"+t.toString(16).padStart(4,"0")})}class p8{constructor(e,t,i){this._proxy=e,this._editors=t,this._remoteInfo=i,this._handlePool=0,this._disposables=new Pe,this._insets=new Map,this._disposables.add(t.onDidChangeVisibleTextEditors(()=>{const n=t.getVisibleTextEditors();for(const s of this._insets.values())n.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this._insets.forEach(e=>e.inset.dispose()),this._disposables.dispose()}createWebviewEditorInset(e,t,i,n,s){let o;for(const g of this._editors.getVisibleTextEditors(!0))if(g.value===e){o=g;break}if(!o)throw new Error("not a visible editor");const a=this,c=this._handlePool++,l=new A,u=new A,d=new class{constructor(){this._html="",this._options=Object.create(null)}asWebviewUri(g){return nu(g,a._remoteInfo)}get cspSource(){return w_}set options(g){this._options=g,a._proxy.$setOptions(c,g)}get options(){return this._options}set html(g){this._html=g,a._proxy.$setHtml(c,g)}get html(){return this._html}get onDidReceiveMessage(){return l.event}postMessage(g){return a._proxy.$postMessage(c,g)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=i,this.webview=d,this.onDidDispose=u.event}dispose(){a._insets.has(c)&&(a._insets.delete(c),a._proxy.$disposeEditorInset(c),u.fire(),u.dispose(),l.dispose())}};return this._proxy.$createEditorInset(c,o.id,o.value.document.uri,t+1,i,n||{},s.identifier,s.extensionLocation),this._insets.set(c,{editor:e,inset:h,onDidReceiveMessage:l}),h}$onDidDispose(e){const t=this._insets.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){const i=this._insets.get(e);i==null||i.onDidReceiveMessage.fire(t)}}function g8(r,e,t){const i=r.getProxy(G.MainThreadComments),g=class g{constructor(){this._commentControllers=new Map,this._commentControllersByExtension=new br,e.registerArgumentProcessor({processArgument:v=>{if(v&&v.$mid===6){const E=this._commentControllers.get(v.handle);return E?E.value:v}else if(v&&v.$mid===7){const E=v,k=this._commentControllers.get(E.commentControlHandle);if(!k)return E;const S=k.getCommentThread(E.commentThreadHandle);return S?S.value:E}else if(v&&(v.$mid===9||v.$mid===8)){const E=this._commentControllers.get(v.thread.commentControlHandle);if(!E)return v;const k=E.getCommentThread(v.thread.commentThreadHandle);return k?v.$mid===8?k.value:{thread:k.value,text:v.text}:v}else if(v&&v.$mid===10){const E=this._commentControllers.get(v.thread.commentControlHandle);if(!E)return v;const k=E.getCommentThread(v.thread.commentThreadHandle);if(!k)return v;const S=v.commentUniqueId,O=k.getCommentByUniqueId(S);return O||v}else if(v&&v.$mid===11){const E=this._commentControllers.get(v.thread.commentControlHandle);if(!E)return v;const k=E.getCommentThread(v.thread.commentThreadHandle);if(!k)return v;const S=v.text,O=v.commentUniqueId,T=k.getCommentByUniqueId(O);return T?(typeof T.body=="string"?T.body=S:T.body=new Ri(S),T):v}return v}})}createCommentController(v,E,k){const S=g.handlePool++,O=new o(v,S,E,k);this._commentControllers.set(O.handle,O);const T=this._commentControllersByExtension.get(v.identifier)||[];return T.push(O),this._commentControllersByExtension.set(v.identifier,T),O.value}async $createCommentThreadTemplate(v,E,k){const S=this._commentControllers.get(v);S&&S.$createCommentThreadTemplate(E,k)}async $setActiveComment(v,E){const k=this._commentControllers.get(v);k&&k.$setActiveComment(E??void 0)}async $updateCommentThreadTemplate(v,E,k){const S=this._commentControllers.get(v);S&&S.$updateCommentThreadTemplate(E,k)}$deleteCommentThread(v,E){const k=this._commentControllers.get(v);k==null||k.$deleteCommentThread(E)}async $provideCommentingRanges(v,E,k){const S=this._commentControllers.get(v);if(!S||!S.commentingRangeProvider)return Promise.resolve(void 0);const O=await t.ensureDocumentData(y.revive(E));return Ht(async()=>{const T=await S.commentingRangeProvider.provideCommentingRanges(O.document,k);let z;return Array.isArray(T)?z={ranges:T,fileComments:!1}:T?z={ranges:T.ranges||[],fileComments:T.fileComments||!1}:z=T??void 0,z}).then(T=>{let z;return T&&(z={ranges:T.ranges.map(ae=>F.from(ae)),fileComments:T.fileComments}),z})}$toggleReaction(v,E,k,S,O){const T=this._commentControllers.get(v);return!T||!T.reactionHandler?Promise.resolve(void 0):Ht(()=>{const z=T.getCommentThread(E);if(z){const ae=z.getCommentByUniqueId(S.uniqueIdInThread);if(T!==void 0&&ae&&T.reactionHandler)return T.reactionHandler(ae,l(O))}return Promise.resolve(void 0)})}};g.handlePool=0;let n=g;const b=class b{set threadId(v){this._id=v}get threadId(){return this._id}get id(){return this._id}get resource(){return this._uri}get uri(){return this._uri}set range(v){(v===void 0!=(this._range===void 0)||!v||!this._range||!v.isEqual(this._range))&&(this._range=v,this.modifications.range=v,this._onDidUpdateCommentThread.fire())}get range(){return this._range}set canReply(v){this._canReply!==v&&(this._canReply=v,this.modifications.canReply=v,this._onDidUpdateCommentThread.fire())}get canReply(){return this._canReply}get label(){return this._label}set label(v){this._label=v,this.modifications.label=v,this._onDidUpdateCommentThread.fire()}get contextValue(){return this._contextValue}set contextValue(v){this._contextValue=v,this.modifications.contextValue=v,this._onDidUpdateCommentThread.fire()}get comments(){return this._comments}set comments(v){this._comments=v,this.modifications.comments=v,this._onDidUpdateCommentThread.fire()}get collapsibleState(){return this._collapseState}set collapsibleState(v){this._collapseState=v,this.modifications.collapsibleState=v,this._onDidUpdateCommentThread.fire()}get state(){return this._state}set state(v){this._state=v,typeof v=="object"?(M(this.extensionDescription,"commentThreadApplicability"),this.modifications.state=v.resolved,this.modifications.applicability=v.applicability):this.modifications.state=v,this._onDidUpdateCommentThread.fire()}get isDisposed(){return this._isDiposed}constructor(v,E,k,S,O,T,z,ae){this._commentControllerHandle=E,this._id=k,this._uri=S,this._range=O,this._comments=T,this.extensionDescription=z,this._isTemplate=ae,this.handle=b._handlePool++,this.commentHandle=0,this.modifications=Object.create(null),this._onDidUpdateCommentThread=new A,this.onDidUpdateCommentThread=this._onDidUpdateCommentThread.event,this._canReply=!0,this._commentsMap=new Map,this._acceptInputDisposables=new Do,this._acceptInputDisposables.value=new Pe,this._id===void 0&&(this._id=`${v}.${this.handle}`),i.$createCommentThread(E,this.handle,this._id,this._uri,F.from(this._range),z.identifier,this._isTemplate),this._localDisposables=[],this._isDiposed=!1,this._localDisposables.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.comments=T,this._localDisposables.push({dispose:()=>{i.$deleteCommentThread(E,this.handle)}});const ee=this;this.value={get uri(){return ee.uri},get range(){return ee.range},set range(j){ee.range=j},get comments(){return ee.comments},set comments(j){ee.comments=j},get collapsibleState(){return ee.collapsibleState},set collapsibleState(j){ee.collapsibleState=j},get canReply(){return ee.canReply},set canReply(j){ee.canReply=j},get contextValue(){return ee.contextValue},set contextValue(j){ee.contextValue=j},get label(){return ee.label},set label(j){ee.label=j},get state(){return ee.state},set state(j){ee.state=j},dispose:()=>{ee.dispose()}}}updateIsTemplate(){this._isTemplate&&(this._isTemplate=!1,this.modifications.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this._isDiposed)return;this.updateIsTemplate(),this._acceptInputDisposables.value||(this._acceptInputDisposables.value=new Pe);const v=k=>Object.prototype.hasOwnProperty.call(this.modifications,k),E={};v("range")&&(E.range=F.from(this._range)),v("label")&&(E.label=this.label),v("contextValue")&&(E.contextValue=this.contextValue??null),v("comments")&&(E.comments=this._comments.map(k=>a(this,k,this._commentsMap,this.extensionDescription))),v("collapsibleState")&&(E.collapseState=u(this._collapseState)),v("canReply")&&(E.canReply=this.canReply),v("state")&&(E.state=d(this._state)),v("applicability")&&(E.applicability=h(this._state)),v("isTemplate")&&(E.isTemplate=this._isTemplate),this.modifications={},i.$updateCommentThread(this._commentControllerHandle,this.handle,this._id,this._uri,E)}getCommentByUniqueId(v){for(const E of this._commentsMap){const k=E[0],S=E[1];if(v===S)return k}}dispose(){this._isDiposed=!0,this._acceptInputDisposables.dispose(),this._localDisposables.forEach(v=>v.dispose())}};b._handlePool=0;let s=b;class o{get id(){return this._id}get label(){return this._label}get handle(){return this._handle}get commentingRangeProvider(){return this._commentingRangeProvider}set commentingRangeProvider(v){this._commentingRangeProvider=v,v!=null&&v.resourceHints&&M(this._extension,"commentingRangeHint"),i.$updateCommentingRanges(this.handle,v==null?void 0:v.resourceHints)}get reactionHandler(){return this._reactionHandler}set reactionHandler(v){this._reactionHandler=v,i.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!v})}get options(){return this._options}set options(v){this._options=v,i.$updateCommentControllerFeatures(this.handle,{options:this._options})}get activeComment(){return M(this._extension,"activeComment"),this._activeComment}get activeCommentThread(){return M(this._extension,"activeComment"),this._activeThread}constructor(v,E,k,S){this._extension=v,this._handle=E,this._id=k,this._label=S,this._threads=new Map,i.$registerCommentController(this.handle,k,S,this._extension.identifier.value);const O=this;this.value=Object.freeze({id:O.id,label:O.label,get options(){return O.options},set options(T){O.options=T},get commentingRangeProvider(){return O.commentingRangeProvider},set commentingRangeProvider(T){O.commentingRangeProvider=T},get reactionHandler(){return O.reactionHandler},set reactionHandler(T){O.reactionHandler=T},get activeCommentThread(){return O.activeCommentThread},createCommentThread(T,z,ae){return O.createCommentThread(T,z,ae).value},dispose:()=>{O.dispose()}}),this._localDisposables=[],this._localDisposables.push({dispose:()=>{i.$unregisterCommentController(this.handle)}})}createCommentThread(v,E,k){E===void 0&&M(this._extension,"fileComments");const S=new s(this.id,this.handle,void 0,v,E,k,this._extension,!1);return this._threads.set(S.handle,S),S}$setActiveComment(v){if(!v){this._activeComment=void 0,this._activeThread=void 0;return}const E=this._threads.get(v.commentThreadHandle);E&&(this._activeComment=v.uniqueIdInThread?E.getCommentByUniqueId(v.uniqueIdInThread):void 0,this._activeThread=E)}$createCommentThreadTemplate(v,E){const k=new s(this.id,this.handle,void 0,y.revive(v),F.to(E),[],this._extension,!0);return k.collapsibleState=Bo.Expanded,this._threads.set(k.handle,k),k}$updateCommentThreadTemplate(v,E){const k=this._threads.get(v);k&&(k.range=F.to(E))}$deleteCommentThread(v){const E=this._threads.get(v);E==null||E.dispose(),this._threads.delete(v)}getCommentThread(v){return this._threads.get(v)}dispose(){this._threads.forEach(v=>{v.dispose()}),this._localDisposables.forEach(v=>v.dispose())}}function a(_,v,E,k){var O,T;let S=E.get(v);return S||(S=++_.commentHandle,E.set(v,S)),v.state!==void 0&&M(k,"commentsDraftState"),(O=v.reactions)!=null&&O.some(z=>z.reactors!==void 0)&&M(k,"commentReactor"),{mode:v.mode,contextValue:v.contextValue,uniqueIdInThread:S,body:typeof v.body=="string"?v.body:Le.from(v.body),userName:v.author.name,userIconPath:v.author.iconPath,label:v.label,commentReactions:v.reactions?v.reactions.map(z=>c(z)):void 0,state:v.state,timestamp:(T=v.timestamp)==null?void 0:T.toJSON()}}function c(_){return{label:_.label,iconPath:_.iconPath?Gh(_.iconPath):void 0,count:_.count,hasReacted:_.authorHasReacted,reactors:_.reactors&&_.reactors.length>0&&typeof _.reactors[0]!="string"?_.reactors.map(v=>v.name):_.reactors}}function l(_){var v;return{label:_.label||"",count:_.count||0,iconPath:_.iconPath?y.revive(_.iconPath):"",authorHasReacted:_.hasReacted||!1,reactors:(v=_.reactors)==null?void 0:v.map(E=>({name:E}))}}function u(_){if(_!==void 0)switch(_){case _l.Expanded:return Bo.Expanded;case _l.Collapsed:return Bo.Collapsed}return Bo.Collapsed}function d(_){let v;if(typeof _=="object"?v=_.resolved:v=_,v!==void 0)switch(v){case wl.Unresolved:return Qc.Unresolved;case wl.Resolved:return Qc.Resolved}return Qc.Unresolved}function h(_){let v;if(typeof _=="object"&&(v=_.applicability),v!==void 0)switch(v){case bl.Current:return Jc.Current;case bl.Outdated:return Jc.Outdated}return Jc.Current}return new n}var fC={exports:{}};(function(r,e){e=r.exports=Ve;var t;typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?t=function(){var x=Array.prototype.slice.call(arguments,0);x.unshift("SEMVER"),console.log.apply(console,x)}:t=function(){},e.SEMVER_SPEC_VERSION="2.0.0";var i=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,s=16,o=e.re=[],a=e.src=[],c=0,l=c++;a[l]="0|[1-9]\\d*";var u=c++;a[u]="[0-9]+";var d=c++;a[d]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var h=c++;a[h]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var g=c++;a[g]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var b=c++;a[b]="(?:"+a[l]+"|"+a[d]+")";var _=c++;a[_]="(?:"+a[u]+"|"+a[d]+")";var v=c++;a[v]="(?:-("+a[b]+"(?:\\."+a[b]+")*))";var E=c++;a[E]="(?:-?("+a[_]+"(?:\\."+a[_]+")*))";var k=c++;a[k]="[0-9A-Za-z-]+";var S=c++;a[S]="(?:\\+("+a[k]+"(?:\\."+a[k]+")*))";var O=c++,T="v?"+a[h]+a[v]+"?"+a[S]+"?";a[O]="^"+T+"$";var z="[v=\\s]*"+a[g]+a[E]+"?"+a[S]+"?",ae=c++;a[ae]="^"+z+"$";var ee=c++;a[ee]="((?:<|>)?=?)";var j=c++;a[j]=a[u]+"|x|X|\\*";var Be=c++;a[Be]=a[l]+"|x|X|\\*";var W=c++;a[W]="[v=\\s]*("+a[Be]+")(?:\\.("+a[Be]+")(?:\\.("+a[Be]+")(?:"+a[v]+")?"+a[S]+"?)?)?";var U=c++;a[U]="[v=\\s]*("+a[j]+")(?:\\.("+a[j]+")(?:\\.("+a[j]+")(?:"+a[E]+")?"+a[S]+"?)?)?";var q=c++;a[q]="^"+a[ee]+"\\s*"+a[W]+"$";var K=c++;a[K]="^"+a[ee]+"\\s*"+a[U]+"$";var re=c++;a[re]="(?:^|[^\\d])(\\d{1,"+s+"})(?:\\.(\\d{1,"+s+"}))?(?:\\.(\\d{1,"+s+"}))?(?:$|[^\\d])";var ge=c++;a[ge]="(?:~>?)";var pe=c++;a[pe]="(\\s*)"+a[ge]+"\\s+",o[pe]=new RegExp(a[pe],"g");var it="$1~",at=c++;a[at]="^"+a[ge]+a[W]+"$";var Ue=c++;a[Ue]="^"+a[ge]+a[U]+"$";var zt=c++;a[zt]="(?:\\^)";var gt=c++;a[gt]="(\\s*)"+a[zt]+"\\s+",o[gt]=new RegExp(a[gt],"g");var ci="$1^",_t=c++;a[_t]="^"+a[zt]+a[W]+"$";var ki=c++;a[ki]="^"+a[zt]+a[U]+"$";var ct=c++;a[ct]="^"+a[ee]+"\\s*("+z+")$|^$";var tr=c++;a[tr]="^"+a[ee]+"\\s*("+T+")$|^$";var ir=c++;a[ir]="(\\s*)"+a[ee]+"\\s*("+z+"|"+a[W]+")",o[ir]=new RegExp(a[ir],"g");var _c="$1$2$3",_o=c++;a[_o]="^\\s*("+a[W]+")\\s+-\\s+("+a[W]+")\\s*$";var De=c++;a[De]="^\\s*("+a[U]+")\\s+-\\s+("+a[U]+")\\s*$";var jp=c++;a[jp]="(<|>)?=?\\s*\\*";for(var li=0;li<c;li++)t(li,a[li]),o[li]||(o[li]=new RegExp(a[li]));e.parse=Di;function Di(x,P){if(x instanceof Ve)return x;if(typeof x!="string"||x.length>i)return null;var L=P?o[ae]:o[O];if(!L.test(x))return null;try{return new Ve(x,P)}catch{return null}}e.valid=qp;function qp(x,P){var L=Di(x,P);return L?L.version:null}e.clean=ww;function ww(x,P){var L=Di(x.trim().replace(/^[=v]+/,""),P);return L?L.version:null}e.SemVer=Ve;function Ve(x,P){if(x instanceof Ve){if(x.loose===P)return x;x=x.version}else if(typeof x!="string")throw new TypeError("Invalid Version: "+x);if(x.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof Ve))return new Ve(x,P);t("SemVer",x,P),this.loose=P;var L=x.trim().match(P?o[ae]:o[O]);if(!L)throw new TypeError("Invalid Version: "+x);if(this.raw=x,this.major=+L[1],this.minor=+L[2],this.patch=+L[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");L[4]?this.prerelease=L[4].split(".").map(function(X){if(/^[0-9]+$/.test(X)){var V=+X;if(V>=0&&V<n)return V}return X}):this.prerelease=[],this.build=L[5]?L[5].split("."):[],this.format()}Ve.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Ve.prototype.toString=function(){return this.version},Ve.prototype.compare=function(x){return t("SemVer.compare",this.version,this.loose,x),x instanceof Ve||(x=new Ve(x,this.loose)),this.compareMain(x)||this.comparePre(x)},Ve.prototype.compareMain=function(x){return x instanceof Ve||(x=new Ve(x,this.loose)),nr(this.major,x.major)||nr(this.minor,x.minor)||nr(this.patch,x.patch)},Ve.prototype.comparePre=function(x){if(x instanceof Ve||(x=new Ve(x,this.loose)),this.prerelease.length&&!x.prerelease.length)return-1;if(!this.prerelease.length&&x.prerelease.length)return 1;if(!this.prerelease.length&&!x.prerelease.length)return 0;var P=0;do{var L=this.prerelease[P],X=x.prerelease[P];if(t("prerelease compare",P,L,X),L===void 0&&X===void 0)return 0;if(X===void 0)return 1;if(L===void 0)return-1;if(L===X)continue;return nr(L,X)}while(++P)},Ve.prototype.inc=function(x,P){switch(x){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",P);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",P);break;case"prepatch":this.prerelease.length=0,this.inc("patch",P),this.inc("pre",P);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",P),this.inc("pre",P);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var L=this.prerelease.length;--L>=0;)typeof this.prerelease[L]=="number"&&(this.prerelease[L]++,L=-2);L===-1&&this.prerelease.push(0)}P&&(this.prerelease[0]===P?isNaN(this.prerelease[1])&&(this.prerelease=[P,0]):this.prerelease=[P,0]);break;default:throw new Error("invalid increment argument: "+x)}return this.format(),this.raw=this.version,this},e.inc=bw;function bw(x,P,L,X){typeof L=="string"&&(X=L,L=void 0);try{return new Ve(x,L).inc(P,X).version}catch{return null}}e.diff=Gp;function Gp(x,P){if(bc(x,P))return null;var L=Di(x),X=Di(P);if(L.prerelease.length||X.prerelease.length){for(var V in L)if((V==="major"||V==="minor"||V==="patch")&&L[V]!==X[V])return"pre"+V;return"prerelease"}for(var V in L)if((V==="major"||V==="minor"||V==="patch")&&L[V]!==X[V])return V}e.compareIdentifiers=nr;var Qp=/^[0-9]+$/;function nr(x,P){var L=Qp.test(x),X=Qp.test(P);return L&&X&&(x=+x,P=+P),L&&!X?-1:X&&!L?1:x<P?-1:x>P?1:0}e.rcompareIdentifiers=yw;function yw(x,P){return nr(P,x)}e.major=Wu;function Wu(x,P){return new Ve(x,P).major}e.minor=Bu;function Bu(x,P){return new Ve(x,P).minor}e.patch=xw;function xw(x,P){return new Ve(x,P).patch}e.compare=en;function en(x,P,L){return new Ve(x,L).compare(new Ve(P,L))}e.compareLoose=wo;function wo(x,P){return en(x,P,!0)}e.rcompare=Cw;function Cw(x,P,L){return en(P,x,L)}e.sort=Sw;function Sw(x,P){return x.sort(function(L,X){return e.compare(L,X,P)})}e.rsort=Ew;function Ew(x,P){return x.sort(function(L,X){return e.rcompare(L,X,P)})}e.gt=bo;function bo(x,P,L){return en(x,P,L)>0}e.lt=wc;function wc(x,P,L){return en(x,P,L)<0}e.eq=bc;function bc(x,P,L){return en(x,P,L)===0}e.neq=Vu;function Vu(x,P,L){return en(x,P,L)!==0}e.gte=zu;function zu(x,P,L){return en(x,P,L)>=0}e.lte=yc;function yc(x,P,L){return en(x,P,L)<=0}e.cmp=yo;function yo(x,P,L,X){var V;switch(P){case"===":typeof x=="object"&&(x=x.version),typeof L=="object"&&(L=L.version),V=x===L;break;case"!==":typeof x=="object"&&(x=x.version),typeof L=="object"&&(L=L.version),V=x!==L;break;case"":case"=":case"==":V=bc(x,L,X);break;case"!=":V=Vu(x,L,X);break;case">":V=bo(x,L,X);break;case">=":V=zu(x,L,X);break;case"<":V=wc(x,L,X);break;case"<=":V=yc(x,L,X);break;default:throw new TypeError("Invalid operator: "+P)}return V}e.Comparator=_i;function _i(x,P){if(x instanceof _i){if(x.loose===P)return x;x=x.value}if(!(this instanceof _i))return new _i(x,P);t("comparator",x,P),this.loose=P,this.parse(x),this.semver===xo?this.value="":this.value=this.operator+this.semver.version,t("comp",this)}var xo={};_i.prototype.parse=function(x){var P=this.loose?o[ct]:o[tr],L=x.match(P);if(!L)throw new TypeError("Invalid comparator: "+x);this.operator=L[1],this.operator==="="&&(this.operator=""),L[2]?this.semver=new Ve(L[2],this.loose):this.semver=xo},_i.prototype.toString=function(){return this.value},_i.prototype.test=function(x){return t("Comparator.test",x,this.loose),this.semver===xo?!0:(typeof x=="string"&&(x=new Ve(x,this.loose)),yo(x,this.operator,this.semver,this.loose))},_i.prototype.intersects=function(x,P){if(!(x instanceof _i))throw new TypeError("a Comparator is required");var L;if(this.operator==="")return L=new ht(x.value,P),rr(this.value,L,P);if(x.operator==="")return L=new ht(this.value,P),rr(x.semver,L,P);var X=(this.operator===">="||this.operator===">")&&(x.operator===">="||x.operator===">"),V=(this.operator==="<="||this.operator==="<")&&(x.operator==="<="||x.operator==="<"),fe=this.semver.version===x.semver.version,m=(this.operator===">="||this.operator==="<=")&&(x.operator===">="||x.operator==="<="),w=yo(this.semver,"<",x.semver,P)&&(this.operator===">="||this.operator===">")&&(x.operator==="<="||x.operator==="<"),C=yo(this.semver,">",x.semver,P)&&(this.operator==="<="||this.operator==="<")&&(x.operator===">="||x.operator===">");return X||V||fe&&m||w||C},e.Range=ht;function ht(x,P){if(x instanceof ht)return x.loose===P?x:new ht(x.raw,P);if(x instanceof _i)return new ht(x.value,P);if(!(this instanceof ht))return new ht(x,P);if(this.loose=P,this.raw=x,this.set=x.split(/\s*\|\|\s*/).map(function(L){return this.parseRange(L.trim())},this).filter(function(L){return L.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+x);this.format()}ht.prototype.format=function(){return this.range=this.set.map(function(x){return x.join(" ").trim()}).join("||").trim(),this.range},ht.prototype.toString=function(){return this.range},ht.prototype.parseRange=function(x){var P=this.loose;x=x.trim(),t("range",x,P);var L=P?o[De]:o[_o];x=x.replace(L,Pw),t("hyphen replace",x),x=x.replace(o[ir],_c),t("comparator trim",x,o[ir]),x=x.replace(o[pe],it),x=x.replace(o[gt],ci),x=x.split(/\s+/).join(" ");var X=P?o[ct]:o[tr],V=x.split(" ").map(function(fe){return ju(fe,P)}).join(" ").split(/\s+/);return this.loose&&(V=V.filter(function(fe){return!!fe.match(X)})),V=V.map(function(fe){return new _i(fe,P)}),V},ht.prototype.intersects=function(x,P){if(!(x instanceof ht))throw new TypeError("a Range is required");return this.set.some(function(L){return L.every(function(X){return x.set.some(function(V){return V.every(function(fe){return X.intersects(fe,P)})})})})},e.toComparators=kw;function kw(x,P){return new ht(x,P).set.map(function(L){return L.map(function(X){return X.value}).join(" ").trim().split(" ")})}function ju(x,P){return t("comp",x),x=Jp(x,P),t("caret",x),x=D(x,P),t("tildes",x),x=ze(x,P),t("xrange",x),x=Iw(x,P),t("stars",x),x}function Mt(x){return!x||x.toLowerCase()==="x"||x==="*"}function D(x,P){return x.trim().split(/\s+/).map(function(L){return bn(L,P)}).join(" ")}function bn(x,P){var L=P?o[Ue]:o[at];return x.replace(L,function(X,V,fe,m,w){t("tilde",x,X,V,fe,m,w);var C;return Mt(V)?C="":Mt(fe)?C=">="+V+".0.0 <"+(+V+1)+".0.0":Mt(m)?C=">="+V+"."+fe+".0 <"+V+"."+(+fe+1)+".0":w?(t("replaceTilde pr",w),w.charAt(0)!=="-"&&(w="-"+w),C=">="+V+"."+fe+"."+m+w+" <"+V+"."+(+fe+1)+".0"):C=">="+V+"."+fe+"."+m+" <"+V+"."+(+fe+1)+".0",t("tilde return",C),C})}function Jp(x,P){return x.trim().split(/\s+/).map(function(L){return ce(L,P)}).join(" ")}function ce(x,P){t("caret",x,P);var L=P?o[ki]:o[_t];return x.replace(L,function(X,V,fe,m,w){t("caret",x,X,V,fe,m,w);var C;return Mt(V)?C="":Mt(fe)?C=">="+V+".0.0 <"+(+V+1)+".0.0":Mt(m)?V==="0"?C=">="+V+"."+fe+".0 <"+V+"."+(+fe+1)+".0":C=">="+V+"."+fe+".0 <"+(+V+1)+".0.0":w?(t("replaceCaret pr",w),w.charAt(0)!=="-"&&(w="-"+w),V==="0"?fe==="0"?C=">="+V+"."+fe+"."+m+w+" <"+V+"."+fe+"."+(+m+1):C=">="+V+"."+fe+"."+m+w+" <"+V+"."+(+fe+1)+".0":C=">="+V+"."+fe+"."+m+w+" <"+(+V+1)+".0.0"):(t("no pr"),V==="0"?fe==="0"?C=">="+V+"."+fe+"."+m+" <"+V+"."+fe+"."+(+m+1):C=">="+V+"."+fe+"."+m+" <"+V+"."+(+fe+1)+".0":C=">="+V+"."+fe+"."+m+" <"+(+V+1)+".0.0"),t("caret return",C),C})}function ze(x,P){return t("replaceXRanges",x,P),x.split(/\s+/).map(function(L){return Dw(L,P)}).join(" ")}function Dw(x,P){x=x.trim();var L=P?o[K]:o[q];return x.replace(L,function(X,V,fe,m,w,C){t("xRange",x,X,V,fe,m,w,C);var te=Mt(fe),Ie=te||Mt(m),je=Ie||Mt(w),Ot=je;return V==="="&&Ot&&(V=""),te?V===">"||V==="<"?X="<0.0.0":X="*":V&&Ot?(Ie&&(m=0),je&&(w=0),V===">"?(V=">=",Ie?(fe=+fe+1,m=0,w=0):je&&(m=+m+1,w=0)):V==="<="&&(V="<",Ie?fe=+fe+1:m=+m+1),X=V+fe+"."+m+"."+w):Ie?X=">="+fe+".0.0 <"+(+fe+1)+".0.0":je&&(X=">="+fe+"."+m+".0 <"+fe+"."+(+m+1)+".0"),t("xRange return",X),X})}function Iw(x,P){return t("replaceStars",x,P),x.trim().replace(o[jp],"")}function Pw(x,P,L,X,V,fe,m,w,C,te,Ie,je,Ot){return Mt(L)?P="":Mt(X)?P=">="+L+".0.0":Mt(V)?P=">="+L+"."+X+".0":P=">="+P,Mt(C)?w="":Mt(te)?w="<"+(+C+1)+".0.0":Mt(Ie)?w="<"+C+"."+(+te+1)+".0":je?w="<="+C+"."+te+"."+Ie+"-"+je:w="<="+w,(P+" "+w).trim()}ht.prototype.test=function(x){if(!x)return!1;typeof x=="string"&&(x=new Ve(x,this.loose));for(var P=0;P<this.set.length;P++)if(Tw(this.set[P],x))return!0;return!1};function Tw(x,P){for(var L=0;L<x.length;L++)if(!x[L].test(P))return!1;if(P.prerelease.length){for(var L=0;L<x.length;L++)if(t(x[L].semver),x[L].semver!==xo&&x[L].semver.prerelease.length>0){var X=x[L].semver;if(X.major===P.major&&X.minor===P.minor&&X.patch===P.patch)return!0}return!1}return!0}e.satisfies=rr;function rr(x,P,L){try{P=new ht(P,L)}catch{return!1}return P.test(x)}e.maxSatisfying=Aw;function Aw(x,P,L){var X=null,V=null;try{var fe=new ht(P,L)}catch{return null}return x.forEach(function(m){fe.test(m)&&(!X||V.compare(m)===-1)&&(X=m,V=new Ve(X,L))}),X}e.minSatisfying=Rw;function Rw(x,P,L){var X=null,V=null;try{var fe=new ht(P,L)}catch{return null}return x.forEach(function(m){fe.test(m)&&(!X||V.compare(m)===1)&&(X=m,V=new Ve(X,L))}),X}e.validRange=Lw;function Lw(x,P){try{return new ht(x,P).range||"*"}catch{return null}}e.ltr=Kp;function Kp(x,P,L){return qu(x,P,"<",L)}e.gtr=Ow;function Ow(x,P,L){return qu(x,P,">",L)}e.outside=qu;function qu(x,P,L,X){x=new Ve(x,X),P=new ht(P,X);var V,fe,m,w,C;switch(L){case">":V=bo,fe=yc,m=wc,w=">",C=">=";break;case"<":V=wc,fe=zu,m=bo,w="<",C="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(rr(x,P,X))return!1;for(var te=0;te<P.set.length;++te){var Ie=P.set[te],je=null,Ot=null;if(Ie.forEach(function(Xr){Xr.semver===xo&&(Xr=new _i(">=0.0.0")),je=je||Xr,Ot=Ot||Xr,V(Xr.semver,je.semver,X)?je=Xr:m(Xr.semver,Ot.semver,X)&&(Ot=Xr)}),je.operator===w||je.operator===C||(!Ot.operator||Ot.operator===w)&&fe(x,Ot.semver))return!1;if(Ot.operator===C&&m(x,Ot.semver))return!1}return!0}e.prerelease=$w;function $w(x,P){var L=Di(x,P);return L&&L.prerelease.length?L.prerelease:null}e.intersects=Nw;function Nw(x,P,L){return x=new ht(x,L),P=new ht(P,L),x.intersects(P)}e.coerce=Mw;function Mw(x){if(x instanceof Ve)return x;if(typeof x!="string")return null;var P=x.match(o[re]);return P==null?null:Di((P[1]||"0")+"."+(P[2]||"0")+"."+(P[3]||"0"))}})(fC,fC.exports);const pC=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,m8=/^-(\d{4})(\d{2})(\d{2})$/;function v8(r){return r=r.trim(),r==="*"||pC.test(r)}function gC(r){if(!v8(r))return null;if(r=r.trim(),r==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const e=r.match(pC);return e?{hasCaret:e[1]==="^",hasGreaterEquals:e[1]===">=",majorBase:e[2]==="x"?0:parseInt(e[2],10),majorMustEqual:e[2]!=="x",minorBase:e[4]==="x"?0:parseInt(e[4],10),minorMustEqual:e[4]!=="x",patchBase:e[6]==="x"?0:parseInt(e[6],10),patchMustEqual:e[6]!=="x",preRelease:e[8]||null}:null}function mC(r){if(!r)return null;const e=r.majorBase,t=r.majorMustEqual,i=r.minorBase;let n=r.minorMustEqual;const s=r.patchBase;let o=r.patchMustEqual;r.hasCaret&&(e===0||(n=!1),o=!1);let a=0;if(r.preRelease){const c=m8.exec(r.preRelease);if(c){const[,l,u,d]=c;a=Date.UTC(Number(l),Number(u)-1,Number(d))}}return{majorBase:e,majorMustEqual:t,minorBase:i,minorMustEqual:n,patchBase:s,patchMustEqual:o,isMinimum:r.hasGreaterEquals,notBefore:a}}class _8{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}}function w8(r,e){if(e.serializeBuffersForPostMessage){const t=new _8,n=JSON.stringify(r,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:t.add(a)};if(ArrayBuffer.isView(a)){const c=b8(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:t.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),s=t.buffers.map(o=>{const a=new Uint8Array(o);return ve.wrap(a)});return{message:n,buffers:s}}else return{message:JSON.stringify(r),buffers:[]}}function b8(r){switch(r.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function y8(r,e){const t=e.map(s=>{const o=new ArrayBuffer(s.byteLength);return new Uint8Array(o).set(s.buffer),o}),i=e.length?(s,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=t[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(r,i),arrayBuffers:t}}class x8{constructor(e,t,i,n,s,o,a){le(this,no,void 0);le(this,ro,void 0);le(this,Pu,void 0);le(this,Tu,void 0);le(this,Au,void 0);le(this,_n,void 0);le(this,so,void 0);le(this,oo,void 0);le(this,ao,void 0);le(this,co,void 0);le(this,Ru,void 0);le(this,ec,void 0);le(this,lo,void 0);J(this,so,""),J(this,ao,!1),J(this,co,!1),this._onMessageEmitter=new A,this.onDidReceiveMessage=this._onMessageEmitter.event,J(this,lo,new A),this._onDidDispose=I(this,lo).event,J(this,no,e),J(this,ro,t),J(this,oo,i),J(this,Tu,n),J(this,Au,s),J(this,_n,o),J(this,Ru,Ma(o)),J(this,ec,C8(o)),J(this,Pu,a)}dispose(){J(this,ao,!0),I(this,lo).fire(),I(this,lo).dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return J(this,co,!0),nu(e,I(this,Tu))}get cspSource(){const e=I(this,_n).extensionLocation;if(e.scheme===Y.https||e.scheme===Y.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+w_}return w_}get html(){return this.assertNotDisposed(),I(this,so)}set html(e){this.assertNotDisposed(),I(this,so)!==e&&(J(this,so,e),I(this,ec)&&!I(this,co)&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(J(this,co,!0),I(this,Pu).report("Webview vscode-resource: uris",I(this,_n),"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),I(this,ro).$setHtml(I(this,no),this.rewriteOldResourceUrlsIfNeeded(e)))}get options(){return this.assertNotDisposed(),I(this,oo)}set options(e){this.assertNotDisposed(),zi(I(this,oo),e)||I(this,ro).$setOptions(I(this,no),vC(I(this,_n),I(this,Au),e)),J(this,oo,e)}async postMessage(e){if(I(this,ao))return!1;const t=w8(e,{serializeBuffersForPostMessage:I(this,Ru)});return I(this,ro).$postMessage(I(this,no),t.message,...t.buffers)}assertNotDisposed(){if(I(this,ao))throw new Error("Webview is disposed")}rewriteOldResourceUrlsIfNeeded(e){var n;if(!I(this,ec))return e;const t=((n=I(this,_n).extensionLocation)==null?void 0:n.scheme)===Y.vscodeRemote,i=I(this,_n).extensionLocation.scheme===Y.vscodeRemote?I(this,_n).extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(s,o,a,c,l,u)=>{const d=y.from({scheme:c||"file",path:decodeURIComponent(l)}),h=nu(d,{isRemote:t,authority:i}).toString();return`${o}${h}${u}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(s,o,a,c,l,u)=>{const d=y.from({scheme:c||"file",path:decodeURIComponent(l)}),h=nu(d,{isRemote:t,authority:i}).toString();return`${o}${h}${u}`})}}no=new WeakMap,ro=new WeakMap,Pu=new WeakMap,Tu=new WeakMap,Au=new WeakMap,_n=new WeakMap,so=new WeakMap,oo=new WeakMap,ao=new WeakMap,co=new WeakMap,Ru=new WeakMap,ec=new WeakMap,lo=new WeakMap;function Ma(r){try{const e=mC(gC(r.engines.vscode));return!!e&&e.majorBase>=1&&e.minorBase>=57}catch{return!1}}function C8(r){try{const e=mC(gC(r.engines.vscode));return e?e.majorBase<1||e.majorBase===1&&e.minorBase<60:!1}catch{return!1}}class S8 extends Ne{constructor(e,t,i,n,s){super(),this.remoteInfo=t,this.workspace=i,this._logService=n,this._deprecationService=s,this._webviews=new Map,this._webviewProxy=e.getProxy(G.MainThreadWebviews)}dispose(){super.dispose();for(const e of this._webviews.values())e.dispose();this._webviews.clear()}$onMessage(e,t,i){const n=this.getWebview(e);if(n){const{message:s}=y8(t,i.value);n._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this._logService.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,i){const n=new x8(e,this._webviewProxy,E8(t),this.remoteInfo,this.workspace,i,this._deprecationService);this._webviews.set(e,n);const s=n._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return n}deleteWebview(e){this._webviews.delete(e)}getWebview(e){return this._webviews.get(e)}}function Qf(r){return{id:r.identifier,location:r.extensionLocation}}function vC(r,e,t){return{enableCommandUris:t.enableCommandUris,enableScripts:t.enableScripts,enableForms:t.enableForms,portMapping:t.portMapping,localResourceRoots:t.localResourceRoots||k8(r,e)}}function E8(r){var e;return{enableCommandUris:r.enableCommandUris,enableScripts:r.enableScripts,enableForms:r.enableForms,portMapping:r.portMapping,localResourceRoots:(e=r.localResourceRoots)==null?void 0:e.map(t=>y.from(t))}}function k8(r,e){return[...((e==null?void 0:e.getWorkspaceFolders())||[]).map(t=>t.uri),r.extensionLocation]}const Ap=class Ap{constructor(e){this.id=e,this._data=new Map,this._idPool=1}add(e){const t=this._idPool++;return this._data.set(t,e),this.logDebugInfo(),t}get(e,t){return this._data.has(e)?this._data.get(e)[t]:void 0}delete(e){this._data.delete(e),this.logDebugInfo()}logDebugInfo(){Ap.enableDebugLogging&&console.log(`${this.id} cache size - ${this._data.size}`)}};Ap.enableDebugLogging=!1;let $i=Ap;class D8{constructor(e,t){this.document=e,this._storagePath=t,this._backupCounter=1,this._edits=new $i("custom documents")}addEdit(e){return this._edits.add([e])}async undo(e,t){await this.getEdit(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.getEdit(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this._edits.delete(t)}getNewBackupUri(){if(!this._storagePath)throw new Error("Backup requires a valid storage path");const e=L8(this.document.uri)+this._backupCounter++;return Lo(this._storagePath,e)}updateBackup(e){var t;(t=this._backup)==null||t.delete(),this._backup=e}disposeBackup(){var e;(e=this._backup)==null||e.delete(),this._backup=void 0}getEdit(e){const t=this._edits.get(e,0);if(!t)throw new Error("No edit found");return t}}class I8{constructor(){this._documents=new Map}get(e,t){return this._documents.get(this.key(e,t))}add(e,t,i){const n=this.key(e,t.uri);if(this._documents.has(n))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new D8(t,i);return this._documents.set(n,s),s}delete(e,t){const i=this.key(e,t.uri);this._documents.delete(i)}key(e,t){return`${e}@@@${t}`}}class P8{constructor(){this._providers=new Map}addTextProvider(e,t,i){return this.add(0,e,t,i)}addCustomProvider(e,t,i){return this.add(1,e,t,i)}get(e){return this._providers.get(e)}add(e,t,i,n){if(this._providers.has(t))throw new Error(`Provider for viewType:${t} already registered`);return this._providers.set(t,{type:e,extension:i,provider:n}),new Re(()=>this._providers.delete(t))}}class T8{constructor(e,t,i,n,s){this._extHostDocuments=t,this._extensionStoragePaths=i,this._extHostWebview=n,this._extHostWebviewPanels=s,this._editorProviders=new P8,this._documents=new I8,this._proxy=e.getProxy(G.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,i,n){const s=new Pe;return A8(i)?(s.add(this._editorProviders.addTextProvider(t,e,i)),this._proxy.$registerTextEditorProvider(Qf(e),t,n.webviewOptions||{},{supportsMove:!!i.moveCustomTextEditor},Ma(e))):(s.add(this._editorProviders.addCustomProvider(t,e,i)),Jf(i)&&s.add(i.onDidChangeCustomDocument(o=>{const a=this.getCustomDocumentEntry(t,o.document.uri);if(R8(o)){const c=a.addEdit(o);this._proxy.$onDidEdit(o.document.uri,t,c,o.label)}else this._proxy.$onContentChange(o.document.uri,t)})),this._proxy.$registerCustomEditorProvider(Qf(e),t,n.webviewOptions||{},!!n.supportsMultipleEditorsPerDocument,Ma(e))),Re.from(s,new Re(()=>{this._proxy.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,i,n,s){const o=this._editorProviders.get(t);if(!o)throw new Error(`No provider found for '${t}'`);if(o.type!==1)throw new Error(`Invalid provide type for '${t}'`);const a=y.revive(e),c=await o.provider.openCustomDocument(a,{backupId:i,untitledDocumentData:n==null?void 0:n.buffer},s);let l;return Jf(o.provider)&&this._extensionStoragePaths&&(l=this._extensionStoragePaths.workspaceValue(o.extension)??this._extensionStoragePaths.globalValue(o.extension)),this._documents.add(t,c,l),{editable:Jf(o.provider)}}async $disposeCustomDocument(e,t){const i=this._editorProviders.get(t);if(!i)throw new Error(`No provider found for '${t}'`);if(i.type!==1)throw new Error(`Invalid provider type for '${t}'`);const n=y.revive(e),{document:s}=this.getCustomDocumentEntry(t,n);this._documents.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,i,n,s,o){const a=this._editorProviders.get(i);if(!a)throw new Error(`No provider found for '${i}'`);const c=yt.to(s),l=this._extHostWebview.createNewWebview(t,n.contentOptions,a.extension),u=this._extHostWebviewPanels.createNewWebviewPanel(t,i,n.title,c,n.options,l,n.active),d=y.revive(e);switch(a.type){case 1:{const{document:h}=this.getCustomDocumentEntry(i,d);return a.provider.resolveCustomEditor(h,u,o)}case 0:{const h=this._extHostDocuments.getDocument(d);return a.provider.resolveCustomTextEditor(h,u,o)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,i){this.getCustomDocumentEntry(t,e).disposeEdits(i)}async $onMoveCustomEditor(e,t,i){const n=this._editorProviders.get(i);if(!n)throw new Error(`No provider found for '${i}'`);if(!n.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${i}'`);const s=this._extHostWebviewPanels.getWebviewPanel(e);if(!s)throw new Error("No webview found");const o=y.revive(t),a=this._extHostDocuments.getDocument(o);await n.provider.moveCustomTextEditor(a,s,wt.None)}async $undo(e,t,i,n){return this.getCustomDocumentEntry(t,e).undo(i,n)}async $redo(e,t,i,n){return this.getCustomDocumentEntry(t,e).redo(i,n)}async $revert(e,t,i){const n=this.getCustomDocumentEntry(t,e);await this.getCustomEditorProvider(t).revertCustomDocument(n.document,i),n.disposeBackup()}async $onSave(e,t,i){const n=this.getCustomDocumentEntry(t,e);await this.getCustomEditorProvider(t).saveCustomDocument(n.document,i),n.disposeBackup()}async $onSaveAs(e,t,i,n){const s=this.getCustomDocumentEntry(t,e);return this.getCustomEditorProvider(t).saveCustomDocumentAs(s.document,y.revive(i),n)}async $backup(e,t,i){const n=this.getCustomDocumentEntry(t,e),o=await this.getCustomEditorProvider(t).backupCustomDocument(n.document,{destination:n.getNewBackupUri()},i);return n.updateBackup(o),o.id}getCustomDocumentEntry(e,t){const i=this._documents.get(e,y.revive(t));if(!i)throw new Error("No custom document found");return i}getCustomEditorProvider(e){const t=this._editorProviders.get(e),i=t==null?void 0:t.provider;if(!i||!Jf(i))throw new Error("Custom document is not editable");return i}}function Jf(r){return!!r.onDidChangeCustomDocument}function A8(r){return typeof r.resolveCustomTextEditor=="function"}function R8(r){return typeof r.undo=="function"&&typeof r.redo=="function"}function L8(r){const e=r.scheme===Y.file||r.scheme===Y.untitled?r.fsPath:r.toString();return Fg(e)+""}var Hr;const _w=class _w{constructor(e,t,i,n,s,o,a,c){le(this,Zn,void 0);le(this,Vr,void 0);le(this,Rt,void 0);this._name=e,this._owner=t,this._maxDiagnosticsTotal=i,this._maxDiagnosticsPerFile=n,this._modelVersionIdProvider=s,this._isDisposed=!1,this._maxDiagnosticsTotal=Math.max(n,i),J(this,Rt,new mt(l=>o.getComparisonKey(l))),J(this,Zn,a),J(this,Vr,c)}dispose(){var e;this._isDisposed||(I(this,Vr).fire([...I(this,Rt).keys()]),(e=I(this,Zn))==null||e.$clear(this._owner),I(this,Rt).clear(),this._isDisposed=!0)}get name(){return this._checkDisposed(),this._name}set(e,t){if(!e){this.clear();return}this._checkDisposed();let i=[];if(y.isUri(e)){if(!t){this.delete(e);return}I(this,Rt).set(e,t.slice()),i=[e]}else if(Array.isArray(e)){i=[];let o;e=[...e].sort(_w._compareIndexedTuplesByUri);for(const a of e){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&I(this,Rt).get(o).length===0&&I(this,Rt).delete(o),o=c,i.push(c),I(this,Rt).set(c,[])),l){const u=I(this,Rt).get(c);u==null||u.push(...l)}else{const u=I(this,Rt).get(c);u&&(u.length=0)}}}if(I(this,Vr).fire(i),!I(this,Zn))return;const n=[];let s=0;for(const o of i){let a=[];const c=I(this,Rt).get(o);if(c)if(c.length>this._maxDiagnosticsPerFile){a=[];const l=[Nt.Error,Nt.Warning,Nt.Information,Nt.Hint];e:for(let u=0;u<4;u++)for(const d of c)if(d.severity===l[u]&&a.push({...pa.from(d),modelVersionId:this._modelVersionIdProvider(o)})===this._maxDiagnosticsPerFile)break e;a.push({severity:ii.Info,message:f("vs/workbench/api/common/extHostDiagnostics",{key:"limitHit",comment:["amount of errors/warning skipped due to limits"]},"Not showing {0} further errors and warnings.",c.length-this._maxDiagnosticsPerFile),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...pa.from(l),modelVersionId:this._modelVersionIdProvider(o)}));if(n.push([o,a]),s+=a.length,s>this._maxDiagnosticsTotal)break}I(this,Zn).$changeMany(this._owner,n)}delete(e){var t;this._checkDisposed(),I(this,Vr).fire([e]),I(this,Rt).delete(e),(t=I(this,Zn))==null||t.$changeMany(this._owner,[[e,void 0]])}clear(){var e;this._checkDisposed(),I(this,Vr).fire([...I(this,Rt).keys()]),I(this,Rt).clear(),(e=I(this,Zn))==null||e.$clear(this._owner)}forEach(e,t){this._checkDisposed();for(const[i,n]of this)e.call(t,i,n,this)}*[Symbol.iterator](){this._checkDisposed();for(const e of I(this,Rt).keys())yield[e,this.get(e)]}get(e){this._checkDisposed();const t=I(this,Rt).get(e);return Array.isArray(t)?Object.freeze(t.slice(0)):[]}has(e){return this._checkDisposed(),Array.isArray(I(this,Rt).get(e))}_checkDisposed(){if(this._isDisposed)throw new Error("illegal state - object is disposed")}static _compareIndexedTuplesByUri(e,t){return e[0].toString()<t[0].toString()?-1:e[0].toString()>t[0].toString()?1:0}};Zn=new WeakMap,Vr=new WeakMap,Rt=new WeakMap;let Kf=_w,b_=(zr=class{static _mapper(e){const t=new mt;for(const i of e)t.set(i,i);return{uris:Object.freeze(Array.from(t.values()))}}constructor(e,t,i,n){this._logService=t,this._fileSystemInfoService=i,this._extHostDocumentsAndEditors=n,this._collections=new Map,this._onDidChangeDiagnostics=new e4({merge:s=>s.flat(),delay:50}),this.onDidChangeDiagnostics=St.map(this._onDidChangeDiagnostics.event,Hr._mapper),this._proxy=e.getProxy(G.MainThreadDiagnostics)}createDiagnosticCollection(e,t){const{_collections:i,_proxy:n,_onDidChangeDiagnostics:s,_logService:o,_fileSystemInfoService:a,_extHostDocumentsAndEditors:c}=this,l=new class{$changeMany(h,g){n.$changeMany(h,g),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",e.value,h,g.length===0?"CLEARING":g)}$clear(h){n.$clear(h),o.trace("[DiagnosticCollection] remove all (extension, owner)",e.value,h)}dispose(){n.dispose()}};let u;if(!t)t="_generated_diagnostic_collection_name_#"+Hr._idPool++,u=t;else if(!i.has(t))u=t;else{this._logService.warn(`DiagnosticCollection with name '${t}' does already exist.`);do u=t+Hr._idPool++;while(i.has(u))}return new class extends Kf{constructor(){super(t,u,Hr._maxDiagnosticsTotal,Hr._maxDiagnosticsPerFile,h=>{var g;return(g=c.getDocument(h))==null?void 0:g.version},a.extUri,l,s),i.set(u,this)}dispose(){super.dispose(),i.delete(u)}}}getDiagnostics(e){if(e)return this._getDiagnostics(e);{const t=new Map,i=[];for(const n of this._collections.values())n.forEach((s,o)=>{let a=t.get(s.toString());typeof a>"u"&&(a=i.length,t.set(s.toString(),a),i.push([s,[]])),i[a][1]=i[a][1].concat(...o)});return i}}_getDiagnostics(e){let t=[];for(const i of this._collections.values())i.has(e)&&(t=t.concat(i.get(e)));return t}$acceptMarkersChange(e){if(!this._mirrorCollection){const t="_generated_mirror",i=new Kf(t,t,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,n=>{},this._fileSystemInfoService.extUri,void 0,this._onDidChangeDiagnostics);this._collections.set(t,i),this._mirrorCollection=i}for(const[t,i]of e)this._mirrorCollection.set(y.revive(t),i.map(pa.to))}},Hr=zr,zr._idPool=0,zr._maxDiagnosticsPerFile=1e3,zr._maxDiagnosticsTotal=1.1*Hr._maxDiagnosticsPerFile,zr);b_=Hr=H([$(1,Je),$(2,Fo)],b_);class O8{constructor(e){this._proxy=e.getProxy(G.MainThreadDialogs)}showOpenDialog(e,t){return t!=null&&t.allowUIResources&&M(e,"showLocal"),this._proxy.$showOpenDialog(t).then(i=>i?i.map(n=>y.revive(n)):void 0)}showSaveDialog(e){return this._proxy.$showSaveDialog(e).then(t=>t?y.revive(t):void 0)}}const Rp=class Rp{constructor(e,t,i){this._documentsAndEditors=t,this._logService=i,this._documentContentProviders=new Map,this._proxy=e.getProxy(G.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(e,t){if(Object.keys(Y).indexOf(e)>=0)throw new Error(`scheme '${e}' already registered`);const i=Rp._handlePool++;this._documentContentProviders.set(i,t),this._proxy.$registerTextContentProvider(i,e);let n;if(typeof t.onDidChange=="function"){let s;n=t.onDidChange(async o=>{if(o.scheme!==e){this._logService.warn(`Provider for scheme '${e}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this._documentsAndEditors.getDocument(o))return;s&&await s;const a=this.$provideTextDocumentContent(i,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this._documentsAndEditors.getDocument(o);if(!l)return;const u=$b(c);if(!l.equalLines(u))return this._proxy.$onVirtualDocumentChange(o,c)}).catch(Ni).finally(()=>{s===a&&(s=void 0)});s=a})}return new Re(()=>{this._documentContentProviders.delete(i)&&this._proxy.$unregisterTextContentProvider(i),n&&(n.dispose(),n=void 0)})}$provideTextDocumentContent(e,t){const i=this._documentContentProviders.get(e);return i?Promise.resolve(i.provideTextDocumentContent(y.revive(t),wt.None)):Promise.reject(new Error(`unsupported uri-scheme: ${t.scheme}`))}};Rp._handlePool=0;let y_=Rp;class $8{constructor(e,t,i,n={timeout:1500,errors:3}){this._logService=e,this._documents=t,this._mainThreadBulkEdits=i,this._thresholds=n,this._callbacks=new Sc,this._badListeners=new WeakMap}dispose(){this._callbacks.clear()}getOnWillSaveTextDocumentEvent(e){return(t,i,n)=>{const o={dispose:this._callbacks.push([t,i,e])};return Array.isArray(n)&&n.push(o),o}}async $participateInSave(e,t){const i=y.revive(e);let n=!1;const s=setTimeout(()=>n=!0,this._thresholds.timeout),o=[];try{for(const a of[...this._callbacks]){if(n)break;const c=this._documents.getDocument(i),l=await this._deliverEventAsyncAndBlameBadListeners(a,{document:c,reason:sf.to(t)});o.push(l)}}finally{clearTimeout(s)}return o}_deliverEventAsyncAndBlameBadListeners([e,t,i],n){const s=this._badListeners.get(e);return typeof s=="number"&&s>this._thresholds.errors?Promise.resolve(!1):this._deliverEventAsync(i,e,t,n).then(()=>!0,o=>{if(this._logService.error(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' threw ERROR`),this._logService.error(o),!(o instanceof Error)||o.message!=="concurrent_edits"){const a=this._badListeners.get(e);this._badListeners.set(e,a?a+1:1),typeof a=="number"&&a>this._thresholds.errors&&this._logService.info(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}_deliverEventAsync(e,t,i,n){const s=[],o=Date.now(),{document:a,reason:c}=n,{version:l}=a,u=Object.freeze({document:a,reason:c,waitUntil(d){if(Object.isFrozen(s))throw Yp("waitUntil can not be called async");s.push(Promise.resolve(d))}});try{t.apply(i,[u])}catch(d){return Promise.reject(d)}return new Promise((d,h)=>{const g=setTimeout(()=>h(new Error("timeout")),this._thresholds.timeout);return Promise.all(s).then(b=>{this._logService.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-o}ms`),clearTimeout(g),d(b)}).catch(b=>{clearTimeout(g),h(b)})}).then(d=>{const h={edits:[]};for(const g of d)if(Array.isArray(g)&&g.every(b=>b instanceof xr))for(const{newText:b,newEol:_,range:v}of g)h.edits.push({resource:a.uri,versionId:void 0,textEdit:{range:v&&F.from(v),text:b,eol:_&&wa.from(_)}});if(h.edits.length!==0)return l===a.version?this._mainThreadBulkEdits.$tryApplyWorkspaceEdit(h):Promise.reject(new Error("concurrent_edits"))})}}class N8{constructor(e,t){this._onDidAddDocument=new A,this._onDidRemoveDocument=new A,this._onDidChangeDocument=new A,this._onDidSaveDocument=new A,this.onDidAddDocument=this._onDidAddDocument.event,this.onDidRemoveDocument=this._onDidRemoveDocument.event,this.onDidChangeDocument=this._onDidChangeDocument.event,this.onDidSaveDocument=this._onDidSaveDocument.event,this._toDispose=new Pe,this._documentLoader=new Map,this._proxy=e.getProxy(G.MainThreadDocuments),this._documentsAndEditors=t,this._documentsAndEditors.onDidRemoveDocuments(i=>{for(const n of i)this._onDidRemoveDocument.fire(n.document)},void 0,this._toDispose),this._documentsAndEditors.onDidAddDocuments(i=>{for(const n of i)this._onDidAddDocument.fire(n.document)},void 0,this._toDispose)}dispose(){this._toDispose.dispose()}getAllDocumentData(){return[...this._documentsAndEditors.allDocuments()]}getDocumentData(e){if(!e)return;const t=this._documentsAndEditors.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!(t!=null&&t.document))throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e){const t=this._documentsAndEditors.getDocument(e);if(t)return Promise.resolve(t);let i=this._documentLoader.get(e.toString());return i||(i=this._proxy.$tryOpenDocument(e).then(n=>{this._documentLoader.delete(e.toString());const s=y.revive(n);return Ro(this._documentsAndEditors.getDocument(s))},n=>(this._documentLoader.delete(e.toString()),Promise.reject(n))),this._documentLoader.set(e.toString(),i)),i}createDocumentData(e){return this._proxy.$tryCreateDocument(e).then(t=>y.revive(t))}$acceptModelLanguageChanged(e,t){const i=y.revive(e),n=this._documentsAndEditors.getDocument(i);if(!n)throw new Error("unknown document");this._onDidRemoveDocument.fire(n.document),n._acceptLanguageId(t),this._onDidAddDocument.fire(n.document)}$acceptModelSaved(e){const t=y.revive(e),i=this._documentsAndEditors.getDocument(t);if(!i)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this._onDidSaveDocument.fire(i.document)}$acceptDirtyStateChanged(e,t){const i=y.revive(e),n=this._documentsAndEditors.getDocument(i);if(!n)throw new Error("unknown document");n._acceptIsDirty(t),this._onDidChangeDocument.fire({document:n.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,i){const n=y.revive(e),s=this._documentsAndEditors.getDocument(n);if(!s)throw new Error("unknown document");s._acceptIsDirty(i),s.onEvents(t);let o;t.isUndoing?o=hl.Undo:t.isRedoing&&(o=hl.Redo),this._onDidChangeDocument.fire(S0({document:s.document,contentChanges:t.changes.map(a=>({range:F.to(a.range),rangeOffset:a.rangeOffset,rangeLength:a.rangeLength,text:a.text})),reason:o}))}setWordDefinitionFor(e,t){PD(e,t)}}class M8{constructor(e){this._AiEmbeddingVectorProviders=new Map,this._nextHandle=0,this._proxy=e.getProxy(G.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,i){if(this._AiEmbeddingVectorProviders.size===0)throw new Error("No embedding vector providers registered");const n=this._AiEmbeddingVectorProviders.get(e);if(!n)throw new Error("Embedding vector provider not found");const s=await n.provideEmbeddingVector(t,i);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,i){const n=this._nextHandle;return this._nextHandle++,this._AiEmbeddingVectorProviders.set(n,i),this._proxy.$registerAiEmbeddingVectorProvider(t,n),new Re(()=>{this._proxy.$unregisterAiEmbeddingVectorProvider(n),this._AiEmbeddingVectorProviders.delete(n)})}}class F8{constructor(e,t,i){const n=new Uint8Array(e*t);for(let s=0,o=e*t;s<o;s++)n[s]=i;this._data=n,this.rows=e,this.cols=t}get(e,t){return this._data[e*this.cols+t]}set(e,t,i){this._data[e*this.cols+t]=i}}class _C{constructor(e){let t=0,i=0;for(let s=0,o=e.length;s<o;s++){const[a,c,l]=e[s];c>t&&(t=c),a>i&&(i=a),l>i&&(i=l)}t++,i++;const n=new F8(i,t,0);for(let s=0,o=e.length;s<o;s++){const[a,c,l]=e[s];n.set(a,c,l)}this._states=n,this._maxCharCode=t}nextState(e,t){return t<0||t>=this._maxCharCode?0:this._states.get(e,t)}}let x_=null;function H8(){return x_===null&&(x_=new _C([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),x_}let ru=null;function U8(){if(ru===null){ru=new Rf(0);const r=` 	<>'"、。｡､，．：；‘〈「『〔（［｛｢｣｝］）〕』」〉’｀～…`;for(let t=0;t<r.length;t++)ru.set(r.charCodeAt(t),1);const e=".,;:";for(let t=0;t<e.length;t++)ru.set(e.charCodeAt(t),2)}return ru}class Xf{static _createLink(e,t,i,n,s){let o=s-1;do{const a=t.charCodeAt(o);if(e.get(a)!==2)break;o--}while(o>n);if(n>0){const a=t.charCodeAt(n-1),c=t.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:i,startColumn:n+1,endLineNumber:i,endColumn:o+2},url:t.substring(n,o+1)}}static computeLinks(e,t=H8()){const i=U8(),n=[];for(let s=1,o=e.getLineCount();s<=o;s++){const a=e.getLineContent(s),c=a.length;let l=0,u=0,d=0,h=1,g=!1,b=!1,_=!1,v=!1;for(;l<c;){let E=!1;const k=a.charCodeAt(l);if(h===13){let S;switch(k){case 40:g=!0,S=0;break;case 41:S=g?0:1;break;case 91:_=!0,b=!0,S=0;break;case 93:_=!1,S=b?0:1;break;case 123:v=!0,S=0;break;case 125:S=v?0:1;break;case 39:case 34:case 96:d===k?S=1:d===39||d===34||d===96?S=0:S=1;break;case 42:S=d===42?1:0;break;case 124:S=d===124?1:0;break;case 32:S=_?0:1;break;default:S=i.get(k)}S===1&&(n.push(Xf._createLink(i,a,s,u,l)),E=!0)}else if(h===12){let S;k===91?(b=!0,S=0):S=i.get(k),S===1?E=!0:h=13}else h=t.nextState(h,k),h===0&&(E=!0);E&&(h=1,g=!1,b=!1,v=!1,u=l+1,d=k),l++}h===13&&n.push(Xf._createLink(i,a,s,u,c))}return n}}class W8{constructor(){this._schemes=[]}add(e){this._stateMachine=void 0,this._schemes.push(e)}delete(e){const t=this._schemes.indexOf(e);t>=0&&(this._schemes.splice(t,1),this._stateMachine=void 0)}_initStateMachine(){if(!this._stateMachine){const e=this._schemes.sort(),t=[];let i,n,s=14,o=14;for(const a of e){let c=i?H4(i,a):0;for(c===0?n=1:n=o;c<a.length;c++)c+1===a.length?(s=o,o=9):o+=1,t.push([n,a.toUpperCase().charCodeAt(c),o]),t.push([n,a.toLowerCase().charCodeAt(c),o]),n=o;i=a,o=s}t.push([9,58,10]),t.push([10,47,12]),this._stateMachine=new _C(t)}}provideDocumentLinks(e){this._initStateMachine();const t=[],i=Xf.computeLinks({getLineContent(n){return e.lineAt(n-1).text},getLineCount(){return e.lineCount}},this._stateMachine);for(const n of i){const s=Ms.to(n);s.target&&t.push(s)}return t}}class Yf{constructor(e,t){this._extHostLanguageFeatures=t,this._linkProvider=new W8,this._fsProvider=new Map,this._registeredSchemes=new Set,this._watches=new Map,this._handlePool=0,this._proxy=e.getProxy(G.MainThreadFileSystem)}dispose(){var e;(e=this._linkProviderRegistration)==null||e.dispose()}registerFileSystemProvider(e,t,i,n={}){if(Yf._validateFileSystemProvider(i),this._registeredSchemes.has(t))throw new Error(`a provider for the scheme '${t}' is already registered`);this._linkProviderRegistration||(this._linkProviderRegistration=this._extHostLanguageFeatures.registerDocumentLinkProvider(e,"*",this._linkProvider));const s=this._handlePool++;this._linkProvider.add(t),this._registeredSchemes.add(t),this._fsProvider.set(s,i);let o=2;n.isCaseSensitive&&(o+=1024),n.isReadonly&&(o+=2048),typeof i.copy=="function"&&(o+=8),typeof i.open=="function"&&typeof i.close=="function"&&typeof i.read=="function"&&typeof i.write=="function"&&(M(e,"fsChunks"),o+=4);let a;n.isReadonly&&ps(n.isReadonly)&&n.isReadonly.value!==""&&(a={value:n.isReadonly.value,isTrusted:n.isReadonly.isTrusted,supportThemeIcons:n.isReadonly.supportThemeIcons,supportHtml:n.isReadonly.supportHtml,baseUri:n.isReadonly.baseUri,uris:n.isReadonly.uris}),this._proxy.$registerFileSystemProvider(s,t,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${e.identifier.value}-extension for the scheme ${t}`),console.error(l)});const c=i.onDidChangeFile(l=>{const u=[];for(const d of l){const{uri:h,type:g}=d;if(h.scheme!==t)continue;let b;switch(g){case oa.Changed:b=0;break;case oa.Created:b=1;break;case oa.Deleted:b=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:h,type:b})}this._proxy.$onFileSystemChange(s,u)});return Ce(()=>{c.dispose(),this._linkProvider.delete(t),this._registeredSchemes.delete(t),this._fsProvider.delete(s),this._proxy.$unregisterProvider(s)})}static _validateFileSystemProvider(e){if(!e)throw new Error("MISSING provider");if(typeof e.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof e.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof e.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof e.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof e.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof e.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof e.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof e.rename!="function")throw new Error("Provider does NOT implement rename")}static _asIStat(e){const{type:t,ctime:i,mtime:n,size:s,permissions:o}=e;return{type:t,ctime:i,mtime:n,size:s,permissions:o}}$stat(e,t){return Promise.resolve(this._getFsProvider(e).stat(y.revive(t))).then(i=>Yf._asIStat(i))}$readdir(e,t){return Promise.resolve(this._getFsProvider(e).readDirectory(y.revive(t)))}$readFile(e,t){return Promise.resolve(this._getFsProvider(e).readFile(y.revive(t))).then(i=>ve.wrap(i))}$writeFile(e,t,i,n){return Promise.resolve(this._getFsProvider(e).writeFile(y.revive(t),i.buffer,n))}$delete(e,t,i){return Promise.resolve(this._getFsProvider(e).delete(y.revive(t),i))}$rename(e,t,i,n){return Promise.resolve(this._getFsProvider(e).rename(y.revive(t),y.revive(i),n))}$copy(e,t,i,n){const s=this._getFsProvider(e);if(!s.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(s.copy(y.revive(t),y.revive(i),n))}$mkdir(e,t){return Promise.resolve(this._getFsProvider(e).createDirectory(y.revive(t)))}$watch(e,t,i,n){const s=this._getFsProvider(e).watch(y.revive(i),n);this._watches.set(t,s)}$unwatch(e,t){const i=this._watches.get(t);i&&(i.dispose(),this._watches.delete(t))}$open(e,t,i){const n=this._getFsProvider(e);if(!n.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(n.open(y.revive(t),i))}$close(e,t){const i=this._getFsProvider(e);if(!i.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(i.close(t))}$read(e,t,i,n){const s=this._getFsProvider(e);if(!s.read)throw new Error('FileSystemProvider does not implement "read"');const o=ve.alloc(n);return Promise.resolve(s.read(t,i,o.buffer,0,n)).then(a=>o.slice(0,a))}$write(e,t,i,n){const s=this._getFsProvider(e);if(!s.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(s.write(t,i,n.buffer,0,n.byteLength))}_getFsProvider(e){const t=this._fsProvider.get(e);if(!t){const i=new Error;throw i.name="ENOPRO",i.message="no provider",i}return t}}class B8{get ignoreCreateEvents(){return!!(this._config&1)}get ignoreChangeEvents(){return!!(this._config&2)}get ignoreDeleteEvents(){return!!(this._config&4)}constructor(e,t,i,n,s,o){this.session=Math.random(),this._onDidCreate=new A,this._onDidChange=new A,this._onDidDelete=new A,this._config=0,o!=null&&o.ignoreCreateEvents&&(this._config+=1),o!=null&&o.ignoreChangeEvents&&(this._config+=2),o!=null&&o.ignoreDeleteEvents&&(this._config+=4);const a=jo(s),c=typeof s=="string",l=o==null?void 0:o.correlate,u=n(d=>{if(!(typeof d.session=="number"&&d.session!==this.session)&&!(l&&typeof d.session>"u")){if(!(o!=null&&o.ignoreCreateEvents))for(const h of d.created){const g=y.revive(h);a(g.fsPath)&&(!c||t.getWorkspaceFolder(g))&&this._onDidCreate.fire(g)}if(!(o!=null&&o.ignoreChangeEvents))for(const h of d.changed){const g=y.revive(h);a(g.fsPath)&&(!c||t.getWorkspaceFolder(g))&&this._onDidChange.fire(g)}if(!(o!=null&&o.ignoreDeleteEvents))for(const h of d.deleted){const g=y.revive(h);a(g.fsPath)&&(!c||t.getWorkspaceFolder(g))&&this._onDidDelete.fire(g)}}});this._disposable=Re.from(this.ensureWatching(e,i,s,o,o==null?void 0:o.correlate),this._onDidCreate,this._onDidChange,this._onDidDelete,u)}ensureWatching(e,t,i,n,s){const o=Re.from();if(typeof i=="string")return o;const a=e.getProxy(G.MainThreadFileSystemEventService);let c=!1;return(i.pattern.includes(Zc)||i.pattern.includes(im))&&(c=!0),a.$watch(t.identifier.value,this.session,i.baseUri,{recursive:c,excludes:(n==null?void 0:n.excludes)??[]},!!s),Re.from({dispose:()=>a.$unwatch(this.session)})}dispose(){this._disposable.dispose()}get onDidCreate(){return this._onDidCreate.event}get onDidChange(){return this._onDidChange.event}get onDidDelete(){return this._onDidDelete.event}}class V8{constructor(e){this._events=e,this.session=this._events.session,this._created=new et(()=>this._events.created.map(y.revive)),this._changed=new et(()=>this._events.changed.map(y.revive)),this._deleted=new et(()=>this._events.deleted.map(y.revive))}get created(){return this._created.value}get changed(){return this._changed.value}get deleted(){return this._deleted.value}}class z8{constructor(e,t,i){this._mainContext=e,this._logService=t,this._extHostDocumentsAndEditors=i,this._onFileSystemEvent=new A,this._onDidRenameFile=new A,this._onDidCreateFile=new A,this._onDidDeleteFile=new A,this._onWillRenameFile=new Ec,this._onWillCreateFile=new Ec,this._onWillDeleteFile=new Ec,this.onDidRenameFile=this._onDidRenameFile.event,this.onDidCreateFile=this._onDidCreateFile.event,this.onDidDeleteFile=this._onDidDeleteFile.event}createFileSystemWatcher(e,t,i,n){return new B8(this._mainContext,e,t,this._onFileSystemEvent.event,pi.from(i),n)}$onFileEvent(e){this._onFileSystemEvent.fire(new V8(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this._onDidRenameFile.fire(Object.freeze({files:t.map(i=>({oldUri:y.revive(i.source),newUri:y.revive(i.target)}))}));break;case 1:this._onDidDeleteFile.fire(Object.freeze({files:t.map(i=>y.revive(i.target))}));break;case 0:case 3:this._onDidCreateFile.fire(Object.freeze({files:t.map(i=>y.revive(i.target))}));break}}getOnWillRenameFileEvent(e){return this._createWillExecuteEvent(e,this._onWillRenameFile)}getOnWillCreateFileEvent(e){return this._createWillExecuteEvent(e,this._onWillCreateFile)}getOnWillDeleteFileEvent(e){return this._createWillExecuteEvent(e,this._onWillDeleteFile)}_createWillExecuteEvent(e,t){return(i,n,s)=>{const o=function(c){i.call(n,c)};return o.extension=e,t.event(o,void 0,s)}}async $onWillRunFileOperation(e,t,i,n){switch(e){case 2:return await this._fireWillEvent(this._onWillRenameFile,{files:t.map(s=>({oldUri:y.revive(s.source),newUri:y.revive(s.target)}))},i,n);case 1:return await this._fireWillEvent(this._onWillDeleteFile,{files:t.map(s=>y.revive(s.target))},i,n);case 0:case 3:return await this._fireWillEvent(this._onWillCreateFile,{files:t.map(s=>y.revive(s.target))},i,n)}}async _fireWillEvent(e,t,i,n){const s=new Set,o=[];if(await e.fireAsync(t,n,async(c,l)=>{const u=Date.now(),d=await Promise.resolve(c);d instanceof Cr&&(o.push([l.extension,d]),s.add(l.extension.displayName??l.extension.identifier.value)),Date.now()-u>i&&this._logService.warn("SLOW file-participant",l.extension.identifier)}),n.isCancellationRequested||o.length===0)return;const a={edits:[]};for(const[,c]of o){const{edits:l}=Xt.from(c,{getTextDocumentVersion:u=>{var d;return(d=this._extHostDocumentsAndEditors.getDocument(u))==null?void 0:d.version},getNotebookDocumentVersion:()=>{}});a.edits=a.edits.concat(l)}return{edit:a,extensionNames:Array.from(s)}}}const Lp=class Lp{constructor(e,t){this.extension=e,this.provider=t,this.handle=Lp._pool++}};Lp._pool=0;let C_=Lp;class j8{constructor(e){this.session=e,this.responses=[]}}const Lu=class Lu{constructor(e,t,i,n){this._documents=i,this._logService=n,this._inputProvider=new Map,this._inputSessions=new Map,this._proxy=e.getProxy(G.MainThreadInlineChat),t.registerApiCommand(new _e("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new B("Run arguments","",s=>!0,s=>{if(s)return{initialRange:s.initialRange?F.from(s.initialRange):void 0,initialSelection:Pn.isSelection(s.initialSelection)?Li.from(s.initialSelection):void 0,message:s.message,autoSend:s.autoSend,position:s.position?qe.from(s.position):void 0}})],me.Void))}registerProvider(e,t,i){const n=new C_(e,t);return this._inputProvider.set(n.handle,n),this._proxy.$registerInteractiveEditorProvider(n.handle,(i==null?void 0:i.label)??e.displayName??e.name,e.identifier,typeof t.handleInteractiveEditorResponseFeedback=="function",typeof t.provideFollowups=="function",(i==null?void 0:i.supportReportIssue)??!1),Ce(()=>{this._proxy.$unregisterInteractiveEditorProvider(n.handle),this._inputProvider.delete(n.handle)})}async $prepareSession(e,t,i,n){var u;const s=this._inputProvider.get(e);if(!s){this._logService.warn("CANNOT prepare session because the PROVIDER IS GONE");return}const o=this._documents.getDocument(y.revive(t)),a=Li.to(i),c=await s.provider.prepareInteractiveEditorSession({document:o,selection:a},n);if(!c)return;if(c.wholeRange&&!c.wholeRange.contains(a))throw new Error("InteractiveEditorSessionProvider returned a wholeRange that does not contain the selection.");const l=Lu._nextId++;return this._inputSessions.set(l,new j8(c)),{id:l,placeholder:c.placeholder,input:c.input,slashCommands:(u=c.slashCommands)==null?void 0:u.map(d=>({command:d.command,detail:d.detail,refer:d.refer,executeImmediately:d.executeImmediately})),wholeRange:F.from(c.wholeRange),message:c.message}}async $provideResponse(e,t,i,n){const s=this._inputProvider.get(e);if(!s)return;const o=this._inputSessions.get(t.id);if(!o)return;const a={prompt:i.prompt,selection:Li.to(i.selection),wholeRange:F.to(i.wholeRange),attempt:i.attempt,live:i.live,previewDocument:this._documents.getDocument(y.revive(i.previewDocument)),withIntentDetection:i.withIntentDetection};let c=!1;const l={report:async E=>{var k,S,O;if(!i.live&&((k=E.edits)!=null&&k.length))throw new Error("Progress reporting is only supported for live sessions");c||n.isCancellationRequested||await this._proxy.$handleProgressChunk(i.requestId,{message:E.message,edits:(S=E.edits)==null?void 0:S.map(It.from),editsShouldBeInstant:E.editsShouldBeInstant,slashCommand:(O=E.slashCommand)==null?void 0:O.command,markdownFragment:Ri.isMarkdownString(E.content)?E.content.value:E.content})}},u=Promise.resolve(s.provider.provideInteractiveEditorResponse(o.session,a,l,n));let d;try{d=await Tg(u,n)}finally{c=!0}if(!d)return;const h=o.responses.push(d)-1,g={wholeRange:F.from(d.wholeRange),placeholder:d.placeholder};if(!Lu._isEditResponse(d))return{...g,id:h,type:"editorEdit",message:Le.from(d.contents),edits:[]};const{edits:b,contents:_}=d,v=_!==void 0?Le.from(_):void 0;return b instanceof Cr?{...g,id:h,type:"bulkEdit",edits:Xt.from(b),message:v}:{...g,id:h,type:"editorEdit",edits:b.map(It.from),message:v}}async $provideFollowups(e,t,i,n){const s=this._inputProvider.get(e),o=this._inputSessions.get(t),a=o==null?void 0:o.responses[i];if(s&&a&&s.provider.provideFollowups){const c=Promise.resolve(s.provider.provideFollowups(o.session,a,n)),l=await Tg(c,n);return l==null?void 0:l.map(T1.from)}}$handleFeedback(e,t,i,n){var c,l;const s=this._inputProvider.get(e),o=this._inputSessions.get(t),a=o==null?void 0:o.responses[i];if(s&&a){const u=A1.to(n);(l=(c=s.provider).handleInteractiveEditorResponseFeedback)==null||l.call(c,o.session,a,u)}}$releaseSession(e,t){}static _isEditResponse(e){return typeof e=="object"&&typeof e.edits=="object"}};Lu._nextId=0;let S_=Lu;class q8{constructor(e,t,i,n,s){this._extHostNotebooks=t,this._textDocumentsAndEditors=i,this._commands=n;const o=new _e("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new B("showOptions","Show Options",a=>!0,a=>a),new B("resource","Interactive resource Uri",a=>!0,a=>a),new B("controllerId","Notebook controller Id",a=>!0,a=>a),new B("title","Interactive editor title",a=>!0,a=>a)],new me("Notebook and input URI",a=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",a.notebookEditorId),a.notebookEditorId!==void 0){const c=this._extHostNotebooks.getEditorById(a.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",c.id),{notebookUri:y.revive(a.notebookUri),inputUri:y.revive(a.inputUri),notebookEditor:c.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",a.notebookUri,a.inputUri),{notebookUri:y.revive(a.notebookUri),inputUri:y.revive(a.inputUri)}}));this._commands.registerApiCommand(o)}$willAddInteractiveDocument(e,t,i,n){this._textDocumentsAndEditors.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:i,uri:e,isDirty:!1,versionId:1}]})}$willRemoveInteractiveDocument(e,t){this._textDocumentsAndEditors.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}}class G8{constructor(e){this._IssueUriRequestHandlers=new Map,this._IssueDataProviders=new Map,this._proxy=e.getProxy(G.MainThreadIssueReporter)}async $getIssueReporterUri(e,t){if(this._IssueUriRequestHandlers.size===0)throw new Error("No issue request handlers registered");const i=this._IssueUriRequestHandlers.get(e);if(!i)throw new Error("Issue request handler not found");const n=await i.handleIssueUrlRequest();if(!n)throw new Error("Issue request handler returned no result");return n}async $getIssueReporterData(e,t){if(this._IssueDataProviders.size===0)throw new Error("No issue request handlers registered");const i=this._IssueDataProviders.get(e);if(!i)throw new Error("Issue data provider not found");const n=await i.provideIssueData(t);if(!n)throw new Error("Issue data provider returned no result");return n}async $getIssueReporterTemplate(e,t){if(this._IssueDataProviders.size===0)throw new Error("No issue request handlers registered");const i=this._IssueDataProviders.get(e);if(!i)throw new Error("Issue data provider not found");const n=await i.provideIssueTemplate(t);if(!n)throw new Error("Issue template provider returned no result");return n}registerIssueUriRequestHandler(e,t){const i=e.identifier.value;return this._IssueUriRequestHandlers.set(i,t),this._proxy.$registerIssueUriRequestHandler(i),new Re(()=>{this._proxy.$unregisterIssueUriRequestHandler(i),this._IssueUriRequestHandlers.delete(i)})}registerIssueDataProvider(e,t){const i=e.identifier.value;return this._IssueDataProviders.set(i,t),this._proxy.$registerIssueDataProvider(i),new Re(()=>{this._proxy.$unregisterIssueDataProvider(i),this._IssueDataProviders.delete(i)})}}class Q8{constructor(e){this._handlePool=0,this._proxy=e.getProxy(G.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this._handlePool++;return this._proxy.$registerResourceLabelFormatter(t,e),Ce(()=>{this._proxy.$unregisterResourceLabelFormatter(t)})}}class Ci extends Qe{constructor(e,t,i,n){super(e,t,i,n),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=i,this.positionColumn=n}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return Ci.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new Ci(this.startLineNumber,this.startColumn,e,t):new Ci(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Ai(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Ai(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new Ci(e,t,this.endLineNumber,this.endColumn):new Ci(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new Ci(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new Ci(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new Ci(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new Ci(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(!this.selectionsEqual(e[i],t[i]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,i,n,s){return s===0?new Ci(e,t,i,n):new Ci(i,n,e,t)}}class Zf{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentSymbols(e,t){const i=this._documents.getDocument(e),n=await this._provider.provideDocumentSymbols(i,t);if(!eg(n))return n[0]instanceof al?n.map(d1.from):Zf._asDocumentSymbolTree(n)}static _asDocumentSymbolTree(e){var n,s;e=e.slice(0).sort((o,a)=>{let c=o.location.range.start.compareTo(a.location.range.start);return c===0&&(c=a.location.range.end.compareTo(o.location.range.end)),c});const t=[],i=[];for(const o of e){const a={name:o.name||"!!MISSING: name!!",kind:Oi.from(o.kind),tags:((n=o.tags)==null?void 0:n.map(On.from))||[],detail:"",containerName:o.containerName,range:F.from(o.location.range),selectionRange:F.from(o.location.range),children:[]};for(;;){if(i.length===0){i.push(a),t.push(a);break}const c=i[i.length-1];if(Qe.containsRange(c.range,a.range)&&!Qe.equalsRange(c.range,a.range)){(s=c.children)==null||s.push(a),i.push(a);break}i.pop()}}return t}}class ep{constructor(e,t,i,n,s,o){this._documents=e,this._commands=t,this._provider=i,this._extension=n,this._extTelemetry=s,this._logService=o,this._cache=new $i("CodeLens"),this._disposables=new Map}async provideCodeLenses(e,t){const i=this._documents.getDocument(e),n=await this._provider.provideCodeLenses(i,t);if(!n||t.isCancellationRequested)return;const s=this._cache.add(n),o=new Pe;this._disposables.set(s,o);const a={cacheId:s,lenses:[]};for(let c=0;c<n.length;c++)a.lenses.push({cacheId:[s,c],range:F.from(n[c].range),command:this._commands.toInternal(n[c].command,o)});return a}async resolveCodeLens(e,t){const i=e.cacheId&&this._cache.get(...e.cacheId);if(!i)return;let n;if(typeof this._provider.resolveCodeLens!="function"||i.isResolved?n=i:n=await this._provider.resolveCodeLens(i,t),n||(n=i),t.isCancellationRequested)return;const s=e.cacheId&&this._disposables.get(e.cacheId[0]);if(s){if(!n.command){const o=new Error("INVALID code lens resolved, lacks command: "+this._extension.identifier.value);this._extTelemetry.onExtensionError(this._extension.identifier,o),this._logService.error(o);return}return e.command=this._commands.toInternal(n.command,s),e}}releaseCodeLenses(e){var t;(t=this._disposables.get(e))==null||t.dispose(),this._disposables.delete(e),this._cache.delete(e)}}function tp(r){return Array.isArray(r)?r.map(Il.from):r?[Il.from(r)]:[]}class wC{constructor(e,t){this._documents=e,this._provider=t}async provideDefinition(e,t,i){const n=this._documents.getDocument(e),s=qe.to(t),o=await this._provider.provideDefinition(n,s,i);return tp(o)}}class bC{constructor(e,t){this._documents=e,this._provider=t}async provideDeclaration(e,t,i){const n=this._documents.getDocument(e),s=qe.to(t),o=await this._provider.provideDeclaration(n,s,i);return tp(o)}}class yC{constructor(e,t){this._documents=e,this._provider=t}async provideImplementation(e,t,i){const n=this._documents.getDocument(e),s=qe.to(t),o=await this._provider.provideImplementation(n,s,i);return tp(o)}}class xC{constructor(e,t){this._documents=e,this._provider=t}async provideTypeDefinition(e,t,i){const n=this._documents.getDocument(e),s=qe.to(t),o=await this._provider.provideTypeDefinition(n,s,i);return tp(o)}}class CC{constructor(e,t){this._documents=e,this._provider=t}async provideHover(e,t,i){const n=this._documents.getDocument(e),s=qe.to(t),o=await this._provider.provideHover(n,s,i);if(!(!o||eg(o.contents)))return o.range||(o.range=n.getWordRangeAtPosition(s)),o.range||(o.range=new ye(s,s)),Jh.from(o)}}class SC{constructor(e,t){this._documents=e,this._provider=t}async provideEvaluatableExpression(e,t,i){const n=this._documents.getDocument(e),s=qe.to(t),o=await this._provider.provideEvaluatableExpression(n,s,i);if(o)return p1.from(o)}}class EC{constructor(e,t){this._documents=e,this._provider=t}async provideInlineValues(e,t,i,n){const s=this._documents.getDocument(e),o=await this._provider.provideInlineValues(s,F.to(t),Xh.to(i),n);if(Array.isArray(o))return o.map(a=>Kh.from(a))}}class kC{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentHighlights(e,t,i){const n=this._documents.getDocument(e),s=qe.to(t),o=await this._provider.provideDocumentHighlights(n,s,i);if(Array.isArray(o))return o.map(ma.from)}}class DC{constructor(e,t){this._documents=e,this._provider=t}async provideMultiDocumentHighlights(e,t,i,n){const s=this._documents.getDocument(e),o=i.map(l=>this._documents.getDocument(l)),a=qe.to(t),c=await this._provider.provideMultiDocumentHighlights(s,a,o,n);if(Array.isArray(c))return c.map(g1.from)}}class IC{constructor(e,t){this._documents=e,this._provider=t}async provideLinkedEditingRanges(e,t,i){const n=this._documents.getDocument(e),s=qe.to(t),o=await this._provider.provideLinkedEditingRanges(n,s,i);if(o&&Array.isArray(o.ranges))return{ranges:Yt(o.ranges.map(F.from)),wordPattern:o.wordPattern}}}class PC{constructor(e,t){this._documents=e,this._provider=t}async provideReferences(e,t,i,n){const s=this._documents.getDocument(e),o=qe.to(t),a=await this._provider.provideReferences(s,o,i,n);if(Array.isArray(a))return a.map(xi.from)}}const tc=class tc{constructor(e,t,i,n,s,o,a){this._documents=e,this._commands=t,this._diagnostics=i,this._provider=n,this._logService=s,this._extension=o,this._apiDeprecation=a,this._cache=new $i("CodeAction"),this._disposables=new Map}async provideCodeActions(e,t,i,n){var g;const s=this._documents.getDocument(e),o=Ci.isISelection(t)?Li.to(t):F.to(t),a=[];for(const b of this._diagnostics.getDiagnostics(e))if(o.intersection(b.range)&&a.push(b)>tc._maxCodeActionsPerFile)break;const c={diagnostics:a,only:i.only?new st(i.only):void 0,triggerKind:P1.to(i.trigger)},l=await this._provider.provideCodeActions(s,o,c,n);if(!xc(l)||n.isCancellationRequested)return;const u=this._cache.add(l),d=new Pe;this._disposables.set(u,d);const h=[];for(let b=0;b<l.length;b++){const _=l[b];if(_)if(tc._isCommand(_))this._apiDeprecation.report("CodeActionProvider.provideCodeActions - return commands",this._extension,"Return 'CodeAction' instances instead."),h.push({_isSynthetic:!0,title:_.title,command:this._commands.toInternal(_,d)});else{c.only&&(_.kind?c.only.contains(_.kind)||this._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${c.only.value} 'requested but returned code action is of kind '${_.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this._logService.warn(`${this._extension.identifier.value} - Code actions of kind '${c.only.value} 'requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const v=_.ranges??[];h.push({cacheId:[u,b],title:_.title,command:_.command&&this._commands.toInternal(_.command,d),diagnostics:_.diagnostics&&_.diagnostics.map(pa.from),edit:_.edit&&Xt.from(_.edit,void 0),kind:_.kind&&_.kind.value,isPreferred:_.isPreferred,isAI:At(this._extension,"codeActionAI")?_.isAI:!1,ranges:At(this._extension,"codeActionRanges")?Yt(v.map(F.from)):void 0,disabled:(g=_.disabled)==null?void 0:g.reason})}}return{cacheId:u,actions:h}}async resolveCodeAction(e,t){const[i,n]=e,s=this._cache.get(i,n);if(!s||tc._isCommand(s))return{};if(!this._provider.resolveCodeAction)return{};const o=await this._provider.resolveCodeAction(s,t)??s;let a;o.edit&&(a=Xt.from(o.edit,void 0));let c;if(o.command){const l=this._disposables.get(i);l&&(c=this._commands.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(e){var t;(t=this._disposables.get(e))==null||t.dispose(),this._disposables.delete(e),this._cache.delete(e)}static _isCommand(e){return typeof e.command=="string"&&typeof e.title=="string"}};tc._maxCodeActionsPerFile=1e3;let Fa=tc;class su{constructor(e,t,i,n,s){this._proxy=e,this._documents=t,this._provider=i,this._handle=n,this._extension=s,this._cache=new $i("DocumentPasteEdit")}async prepareDocumentPaste(e,t,i,n){if(!this._provider.prepareDocumentPaste)return;const s=this._documents.getDocument(e),o=t.map(l=>F.to(l)),a=Lr.toDataTransfer(i,()=>{throw new CS});if(await this._provider.prepareDocumentPaste(s,o,a,n),n.isCancellationRequested)return;const c=Array.from(a).filter(([,l])=>!(l instanceof ph));return Lr.from(c)}async providePasteEdits(e,t,i,n,s,o){if(!this._provider.provideDocumentPasteEdits)return[];const a=this._documents.getDocument(t),c=i.map(h=>F.to(h)),l=Lr.toDataTransfer(n,async h=>(await this._proxy.$resolvePasteFileData(this._handle,e,h)).buffer),u=await this._provider.provideDocumentPasteEdits(a,c,l,{only:s.only?new ia(s.only):void 0,triggerKind:s.triggerKind},o);if(!u||o.isCancellationRequested)return[];const d=this._cache.add(u);return u.map((h,g)=>{var b;return{_cacheId:[d,g],title:h.title??f("vs/workbench/api/common/extHostLanguageFeatures","defaultPasteLabel","Paste using '{0}' extension",this._extension.displayName||this._extension.name),kind:h.kind,yieldTo:(b=h.yieldTo)==null?void 0:b.map(_=>_.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?Xt.from(h.additionalEdit,void 0):void 0}})}async resolvePasteEdit(e,t){const[i,n]=e,s=this._cache.get(i,n);if(!s||!this._provider.resolveDocumentPasteEdit)return{};const o=await this._provider.resolveDocumentPasteEdit(s,t)??s;return{additionalEdit:o.additionalEdit?Xt.from(o.additionalEdit,void 0):void 0}}releasePasteEdits(e){this._cache.delete(e)}}class TC{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentFormattingEdits(e,t,i){const n=this._documents.getDocument(e),s=await this._provider.provideDocumentFormattingEdits(n,t,i);if(Array.isArray(s))return s.map(It.from)}}class E_{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentRangeFormattingEdits(e,t,i,n){const s=this._documents.getDocument(e),o=F.to(t),a=await this._provider.provideDocumentRangeFormattingEdits(s,o,i,n);if(Array.isArray(a))return a.map(It.from)}async provideDocumentRangesFormattingEdits(e,t,i,n){qb(typeof this._provider.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this._documents.getDocument(e),o=t.map(F.to),a=await this._provider.provideDocumentRangesFormattingEdits(s,o,i,n);if(Array.isArray(a))return a.map(It.from)}}class AC{constructor(e,t){this._documents=e,this._provider=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,i,n,s){const o=this._documents.getDocument(e),a=qe.to(t),c=await this._provider.provideOnTypeFormattingEdits(o,a,i,n,s);if(Array.isArray(c))return c.map(It.from)}}class ip{constructor(e,t){this._provider=e,this._logService=t,this._cache=new $i("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const i=await this._provider.provideWorkspaceSymbols(e,t);if(!xc(i))return{symbols:[]};const n=this._cache.add(i),s={cacheId:n,symbols:[]};for(let o=0;o<i.length;o++){const a=i[o];if(!a||!a.name){this._logService.warn("INVALID SymbolInformation",a);continue}s.symbols.push({...Dl.from(a),cacheId:[n,o]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this._provider.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const i=this._cache.get(...e.cacheId);if(i){const n=await this._provider.resolveWorkspaceSymbol(i,t);return n&&fs(e,Dl.from(n),!0)}}releaseWorkspaceSymbols(e){this._cache.delete(e)}}class js{static supportsResolving(e){return typeof e.prepareRename=="function"}constructor(e,t,i){this._documents=e,this._provider=t,this._logService=i}async provideRenameEdits(e,t,i,n){const s=this._documents.getDocument(e),o=qe.to(t);try{const a=await this._provider.provideRenameEdits(s,o,i,n);return a?Xt.from(a):void 0}catch(a){const c=js._asMessage(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(e,t,i){if(typeof this._provider.prepareRename!="function")return Promise.resolve(void 0);const n=this._documents.getDocument(e),s=qe.to(t);try{const o=await this._provider.prepareRename(n,s,i);let a,c;if(ye.isRange(o)?(a=o,c=n.getText(o)):Ft(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>s.line||a.end.line<s.line){this._logService.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:F.from(a),text:c}}catch(o){const a=js._asMessage(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static _asMessage(e){return typeof e=="string"?e:e instanceof Error&&typeof e.message=="string"?e.message:void 0}}class np{constructor(e,t,i){this._documents=e,this._provider=t,this._logService=i}async provideNewSymbolNames(e,t,i){const n=this._documents.getDocument(e),s=F.to(t);try{const o=await this._provider.provideNewSymbolNames(n,s,i);return o?o.map(a=>typeof a=="string"?{newSymbolName:a}:{newSymbolName:a.newSymbolName,tags:a.tags}):void 0}catch(o){this._logService.error(np._asMessage(o)??JSON.stringify(o,null,"	"));return}}static _asMessage(e){return typeof e=="string"?e:e instanceof Error&&typeof e.message=="string"?e.message:void 0}}class k_{constructor(e,t){this.resultId=e,this.tokens=t}}class gi{constructor(e,t){this._documents=e,this._provider=t,this._nextResultId=1,this._previousResults=new Map}async provideDocumentSemanticTokens(e,t,i){const n=this._documents.getDocument(e),s=t!==0?this._previousResults.get(t):null;let o=typeof(s==null?void 0:s.resultId)=="string"&&typeof this._provider.provideDocumentSemanticTokensEdits=="function"?await this._provider.provideDocumentSemanticTokensEdits(n,s.resultId,i):await this._provider.provideDocumentSemanticTokens(n,i);return s&&this._previousResults.delete(t),o?(o=gi._fixProvidedSemanticTokens(o),this._send(gi._convertToEdits(s,o),o)):null}async releaseDocumentSemanticColoring(e){this._previousResults.delete(e)}static _fixProvidedSemanticTokens(e){return gi._isSemanticTokens(e)?gi._isCorrectSemanticTokens(e)?e:new aa(new Uint32Array(e.data),e.resultId):gi._isSemanticTokensEdits(e)?gi._isCorrectSemanticTokensEdits(e)?e:new Ch(e.edits.map(t=>new mx(t.start,t.deleteCount,t.data?new Uint32Array(t.data):t.data)),e.resultId):e}static _isSemanticTokens(e){return e&&!!e.data}static _isCorrectSemanticTokens(e){return e.data instanceof Uint32Array}static _isSemanticTokensEdits(e){return e&&Array.isArray(e.edits)}static _isCorrectSemanticTokensEdits(e){for(const t of e.edits)if(!(t.data instanceof Uint32Array))return!1;return!0}static _convertToEdits(e,t){if(!gi._isSemanticTokens(t)||!e||!e.tokens)return t;const i=e.tokens,n=i.length,s=t.data,o=s.length;let a=0;const c=Math.min(n,o);for(;a<c&&i[a]===s[a];)a++;if(a===n&&a===o)return new Ch([],t.resultId);let l=0;const u=c-a;for(;l<u&&i[n-l-1]===s[o-l-1];)l++;return new Ch([{start:a,deleteCount:n-a-l,data:s.subarray(a,o-l)}],t.resultId)}_send(e,t){if(gi._isSemanticTokens(e)){const i=this._nextResultId++;return this._previousResults.set(i,new k_(e.resultId,e.data)),f_({id:i,type:"full",data:e.data})}if(gi._isSemanticTokensEdits(e)){const i=this._nextResultId++;return gi._isSemanticTokens(t)?this._previousResults.set(i,new k_(t.resultId,t.data)):this._previousResults.set(i,new k_(e.resultId)),f_({id:i,type:"delta",deltas:(e.edits||[]).map(n=>({start:n.start,deleteCount:n.deleteCount,data:n.data}))})}return null}}class RC{constructor(e,t){this._documents=e,this._provider=t}async provideDocumentRangeSemanticTokens(e,t,i){const n=this._documents.getDocument(e),s=await this._provider.provideDocumentRangeSemanticTokens(n,F.to(t),i);return s?this._send(s):null}_send(e){return f_({id:0,type:"full",data:e.data})}}class qs{static supportsResolving(e){return typeof e.resolveCompletionItem=="function"}constructor(e,t,i,n,s){this._documents=e,this._commands=t,this._provider=i,this._apiDeprecation=n,this._extension=s,this._cache=new $i("CompletionItem"),this._disposables=new Map}async provideCompletionItems(e,t,i,n){const s=this._documents.getDocument(e),o=qe.to(t),a=s.getWordRangeAtPosition(o)||new ye(o,o),c=a.with({end:o}),l=new xn,u=await this._provider.provideCompletionItems(s,o,n,v1.to(i));if(!u||n.isCancellationRequested)return;const d=Array.isArray(u)?new Ko(u):u,h=qs.supportsResolving(this._provider)?this._cache.add(d.items):this._cache.add([]),g=new Pe;this._disposables.set(h,g);const b=[],_={x:h,b,a:{replace:F.from(a),insert:F.from(c)},c:d.isIncomplete||void 0,d:l.elapsed()};for(let v=0;v<d.items.length;v++){const E=d.items[v],k=this._convertCompletionItem(E,[h,v],c,a);b.push(k)}return _}async resolveCompletionItem(e,t){if(typeof this._provider.resolveCompletionItem!="function")return;const i=this._cache.get(...e);if(!i)return;const n=this._convertCompletionItem(i,e),s=await this._provider.resolveCompletionItem(i,t);if(!s)return;const o=this._convertCompletionItem(s,e);return(n.h!==o.h||n.i!==o.i)&&this._apiDeprecation.report("CompletionItem.insertText",this._extension,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(n.n!==o.n||n.o!==o.o||!zi(n.p,o.p))&&this._apiDeprecation.report("CompletionItem.command",this._extension,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...n,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(e){var t;(t=this._disposables.get(e))==null||t.dispose(),this._disposables.delete(e),this._cache.delete(e)}_convertCompletionItem(e,t,i,n){var l;const s=this._disposables.get(t[0]);if(!s)throw Error("DisposableStore is missing...");const o=this._commands.toInternal(e.command,s),a={x:t,a:e.label,b:e.kind!==void 0?Zh.from(e.kind):void 0,m:e.tags&&e.tags.map(Yh.from),c:e.detail,d:typeof e.documentation>"u"?void 0:Le.fromStrict(e.documentation),e:e.sortText!==e.label?e.sortText:void 0,f:e.filterText!==e.label?e.filterText:void 0,g:e.preselect||void 0,i:e.keepWhitespace?1:0,k:(l=e.commitCharacters)==null?void 0:l.join(""),l:e.additionalTextEdits&&e.additionalTextEdits.map(It.from),n:o==null?void 0:o.$ident,o:o==null?void 0:o.id,p:o!=null&&o.$ident||o==null?void 0:o.arguments};e.textEdit?(this._apiDeprecation.report("CompletionItem.textEdit",this._extension,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=e.textEdit.newText):typeof e.insertText=="string"?a.h=e.insertText:e.insertText instanceof Cs&&(a.h=e.insertText.value,a.i|=4);let c;return e.textEdit?c=e.textEdit.range:e.range&&(c=e.range),ye.isRange(c)?a.j=F.from(c):c&&(!(i!=null&&i.isEqual(c.inserting))||!(n!=null&&n.isEqual(c.replacing)))&&(a.j={insert:F.from(c.inserting),replace:F.from(c.replacing)}),a}}class ou{async provideInlineCompletions(e,t,i,n){}disposeCompletions(e){}handleDidShowCompletionItem(e,t,i){}handlePartialAccept(e,t,i,n){}}class J8 extends ou{constructor(e,t,i,n){super(),this._extension=e,this._documents=t,this._provider=i,this._commands=n,this._references=new LC,this._isAdditionsProposedApiEnabled=At(this._extension,"inlineCompletionsAdditions"),this.languageTriggerKindToVSCodeTriggerKind={[Ad.Automatic]:vl.Automatic,[Ad.Explicit]:vl.Invoke}}get supportsHandleEvents(){return At(this._extension,"inlineCompletionsAdditions")&&(typeof this._provider.handleDidShowCompletionItem=="function"||typeof this._provider.handleDidPartiallyAcceptCompletionItem=="function")}async provideInlineCompletions(e,t,i,n){const s=this._documents.getDocument(e),o=qe.to(t),a=await this._provider.provideInlineCompletionItems(s,o,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:F.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.languageTriggerKindToVSCodeTriggerKind[i.triggerKind]},n);if(!a||n.isCancellationRequested)return;const c=Array.isArray(a)?a:a.items,l=this._isAdditionsProposedApiEnabled?Array.isArray(a)?[]:a.commands||[]:[],u=this._isAdditionsProposedApiEnabled&&!Array.isArray(a)?a.enableForwardStability:void 0;let d;return{pid:this._references.createReferenceId({dispose(){d==null||d.dispose()},items:c}),items:c.map((g,b)=>{let _;g.command&&(d||(d=new Pe),_=this._commands.toInternal(g.command,d));const v=g.insertText;return{insertText:typeof v=="string"?v:{snippet:v.value},filterText:g.filterText,range:g.range?F.from(g.range):void 0,command:_,idx:b,completeBracketPairs:this._isAdditionsProposedApiEnabled?g.completeBracketPairs:!1}}),commands:l.map(g=>(d||(d=new Pe),this._commands.toInternal(g,d))),suppressSuggestions:!1,enableForwardStability:u}}disposeCompletions(e){const t=this._references.disposeReferenceId(e);t==null||t.dispose()}handleDidShowCompletionItem(e,t,i){var s;const n=(s=this._references.get(e))==null?void 0:s.items[t];n&&this._provider.handleDidShowCompletionItem&&this._isAdditionsProposedApiEnabled&&this._provider.handleDidShowCompletionItem(n,i)}handlePartialAccept(e,t,i,n){var o;const s=(o=this._references.get(e))==null?void 0:o.items[t];s&&this._provider.handleDidPartiallyAcceptCompletionItem&&this._isAdditionsProposedApiEnabled&&(this._provider.handleDidPartiallyAcceptCompletionItem(s,i),this._provider.handleDidPartiallyAcceptCompletionItem(s,N1.to(n)))}}class D_{async provideInlineEdits(e,t,i){const n=this._documents.getDocument(e),s=await this._provider.provideInlineEdit(n,{triggerKind:this.languageTriggerKindToVSCodeTriggerKind[t.triggerKind]},i);if(!s||i.isCancellationRequested)return;let o;const a=this._references.createReferenceId({dispose(){o==null||o.dispose()},item:s});let c;s.accepted&&(o||(o=new Pe),c=this._commands.toInternal(s.accepted,o));let l;return s.rejected&&(o||(o=new Pe),l=this._commands.toInternal(s.rejected,o)),{pid:a,text:s.text,range:F.from(s.range),accepted:c,rejected:l}}disposeEdit(e){const t=this._references.disposeReferenceId(e);t==null||t.dispose()}constructor(e,t,i,n){this._documents=t,this._provider=i,this._commands=n,this._references=new LC,this.languageTriggerKindToVSCodeTriggerKind={[Rd.Automatic]:kl.Automatic,[Rd.Invoke]:kl.Invoke}}}class LC{constructor(){this._references=new Map,this._idPool=1}createReferenceId(e){const t=this._idPool++;return this._references.set(t,e),t}disposeReferenceId(e){const t=this._references.get(e);return this._references.delete(e),t}get(e){return this._references.get(e)}}class I_{constructor(e,t){this._documents=e,this._provider=t,this._cache=new $i("SignatureHelp")}async provideSignatureHelp(e,t,i,n){const s=this._documents.getDocument(e),o=qe.to(t),a=this.reviveContext(i),c=await this._provider.provideSignatureHelp(s,o,n,a);if(c){const l=this._cache.add([c]);return{...Pl.from(c),id:l}}}reviveContext(e){let t;if(e.activeSignatureHelp){const i=Pl.to(e.activeSignatureHelp),n=this._cache.get(e.activeSignatureHelp.id,0);n?(t=n,t.activeSignature=i.activeSignature,t.activeParameter=i.activeParameter):t=i}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this._cache.delete(e)}}class rp{constructor(e,t,i,n,s){this._documents=e,this._commands=t,this._provider=i,this._logService=n,this._extension=s,this._cache=new $i("InlayHints"),this._disposables=new Map}async provideInlayHints(e,t,i){const n=this._documents.getDocument(e),s=F.to(t),o=await this._provider.provideInlayHints(n,s,i);if(!Array.isArray(o)||o.length===0){this._logService.trace(`[InlayHints] NO inlay hints from '${this._extension.identifier.value}' for range ${JSON.stringify(t)}`);return}if(i.isCancellationRequested)return;const a=this._cache.add(o);this._disposables.set(a,new Pe);const c={hints:[],cacheId:a};for(let l=0;l<o.length;l++)this._isValidInlayHint(o[l],s)&&c.hints.push(this._convertInlayHint(o[l],[a,l]));return this._logService.trace(`[InlayHints] ${c.hints.length} inlay hints from '${this._extension.identifier.value}' for range ${JSON.stringify(t)}`),c}async resolveInlayHint(e,t){if(typeof this._provider.resolveInlayHint!="function")return;const i=this._cache.get(...e);if(!i)return;const n=await this._provider.resolveInlayHint(i,t);if(n&&this._isValidInlayHint(n))return this._convertInlayHint(n,e)}releaseHints(e){var t;(t=this._disposables.get(e))==null||t.dispose(),this._disposables.delete(e),this._cache.delete(e)}_isValidInlayHint(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(i=>i.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}_convertInlayHint(e,t){const i=this._disposables.get(t[0]);if(!i)throw Error("DisposableStore is missing...");const n={label:"",cacheId:t,tooltip:Le.fromStrict(e.tooltip),position:qe.from(e.position),textEdits:e.textEdits&&e.textEdits.map(It.from),kind:e.kind&&nf.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")n.label=e.label;else{const s=[];n.label=s;for(const o of e.label){if(!o.value){console.warn("INVALID inlay hint, empty label part",this._extension.identifier.value);continue}const a={label:o.value,tooltip:Le.fromStrict(o.tooltip)};yi.isLocation(o.location)&&(a.location=xi.from(o.location)),o.command&&(a.command=this._commands.toInternal(o.command,i)),s.push(a)}}return n}}class Ur{constructor(e,t){this._documents=e,this._provider=t,this._cache=new $i("DocumentLink")}async provideLinks(e,t){const i=this._documents.getDocument(e),n=await this._provider.provideDocumentLinks(i,t);if(!(!Array.isArray(n)||n.length===0)&&!t.isCancellationRequested){if(typeof this._provider.resolveDocumentLink!="function")return{links:n.filter(Ur._validateLink).map(Ms.from)};{const s=this._cache.add(n),o={links:[],cacheId:s};for(let a=0;a<n.length;a++){if(!Ur._validateLink(n[a]))continue;const c=Ms.from(n[a]);c.cacheId=[s,a],o.links.push(c)}return o}}}static _validateLink(e){return e.target&&e.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(e,t){if(typeof this._provider.resolveDocumentLink!="function")return;const i=this._cache.get(...e);if(!i)return;const n=await this._provider.resolveDocumentLink(i,t);if(!(!n||!Ur._validateLink(n)))return Ms.from(n)}releaseLinks(e){this._cache.delete(e)}}class P_{constructor(e,t){this._documents=e,this._provider=t}async provideColors(e,t){const i=this._documents.getDocument(e),n=await this._provider.provideDocumentColors(i,t);return Array.isArray(n)?n.map(o=>({color:va.from(o.color),range:F.from(o.range)})):[]}async provideColorPresentations(e,t,i){const n=this._documents.getDocument(e),s=F.to(t.range),o=va.to(t.color),a=await this._provider.provideColorPresentations(o,{document:n,range:s},i);if(Array.isArray(a))return a.map(rf.from)}}class OC{constructor(e,t){this._documents=e,this._provider=t}async provideFoldingRanges(e,t,i){const n=this._documents.getDocument(e),s=await this._provider.provideFoldingRanges(n,t,i);if(Array.isArray(s))return s.map(of.from)}}class $C{constructor(e,t,i){this._documents=e,this._provider=t,this._logService=i}async provideSelectionRanges(e,t,i){const n=this._documents.getDocument(e),s=t.map(qe.to),o=await this._provider.provideSelectionRanges(n,s,i);if(!xc(o))return[];if(o.length!==s.length)return this._logService.warn("BAD selection ranges, provider must return ranges for each position"),[];const a=[];for(let c=0;c<s.length;c++){const l=[];a.push(l);let u=s[c],d=o[c];for(;;){if(!d.range.contains(u))throw new Error("INVALID selection range, must contain the previous range");if(l.push(y1.from(d)),!d.parent)break;u=d.range,d=d.parent}}return a}}class au{constructor(e,t){this._documents=e,this._provider=t,this._idPool=new Ov(""),this._cache=new Map}async prepareSession(e,t,i){const n=this._documents.getDocument(e),s=qe.to(t),o=await this._provider.prepareCallHierarchy(n,s,i);if(!o)return;const a=this._idPool.nextId();return this._cache.set(a,new Map),Array.isArray(o)?o.map(c=>this._cacheAndConvertItem(a,c)):[this._cacheAndConvertItem(a,o)]}async provideCallsTo(e,t,i){const n=this._itemFromCache(e,t);if(!n)throw new Error("missing call hierarchy item");const s=await this._provider.provideCallHierarchyIncomingCalls(n,i);if(s)return s.map(o=>({from:this._cacheAndConvertItem(e,o.from),fromRanges:o.fromRanges.map(a=>F.from(a))}))}async provideCallsFrom(e,t,i){const n=this._itemFromCache(e,t);if(!n)throw new Error("missing call hierarchy item");const s=await this._provider.provideCallHierarchyOutgoingCalls(n,i);if(s)return s.map(o=>({to:this._cacheAndConvertItem(e,o.to),fromRanges:o.fromRanges.map(a=>F.from(a))}))}releaseSession(e){this._cache.delete(e)}_cacheAndConvertItem(e,t){const i=this._cache.get(e),n=Ns.from(t,e,i.size.toString(36));return i.set(n._itemId,t),n}_itemFromCache(e,t){const i=this._cache.get(e);return i==null?void 0:i.get(t)}}class cu{constructor(e,t){this._documents=e,this._provider=t,this._idPool=new Ov(""),this._cache=new Map}async prepareSession(e,t,i){const n=this._documents.getDocument(e),s=qe.to(t),o=await this._provider.prepareTypeHierarchy(n,s,i);if(!o)return;const a=this._idPool.nextId();return this._cache.set(a,new Map),Array.isArray(o)?o.map(c=>this._cacheAndConvertItem(a,c)):[this._cacheAndConvertItem(a,o)]}async provideSupertypes(e,t,i){const n=this._itemFromCache(e,t);if(!n)throw new Error("missing type hierarchy item");const s=await this._provider.provideTypeHierarchySupertypes(n,i);if(s)return s.map(o=>this._cacheAndConvertItem(e,o))}async provideSubtypes(e,t,i){const n=this._itemFromCache(e,t);if(!n)throw new Error("missing type hierarchy item");const s=await this._provider.provideTypeHierarchySubtypes(n,i);if(s)return s.map(o=>this._cacheAndConvertItem(e,o))}releaseSession(e){this._cache.delete(e)}_cacheAndConvertItem(e,t){const i=this._cache.get(e),n=Fs.from(t,e,i.size.toString(36));return i.set(n._itemId,t),n}_itemFromCache(e,t){const i=this._cache.get(e);return i==null?void 0:i.get(t)}}class NC{constructor(e,t,i,n,s){this._proxy=e,this._documents=t,this._provider=i,this._handle=n,this._extension=s}async provideDocumentOnDropEdits(e,t,i,n,s){const o=this._documents.getDocument(t),a=qe.to(i),c=Lr.toDataTransfer(n,async u=>(await this._proxy.$resolveDocumentOnDropFileData(this._handle,e,u)).buffer),l=await this._provider.provideDocumentDropEdits(o,a,c,s);if(l)return ko(l).map(u=>{var d,h;return{title:u.title??f("vs/workbench/api/common/extHostLanguageFeatures","defaultDropLabel","Drop using '{0}' extension",this._extension.displayName||this._extension.name),kind:(d=u.kind)==null?void 0:d.value,yieldTo:(h=u.yieldTo)==null?void 0:h.map(g=>g.value),insertText:typeof u.insertText=="string"?u.insertText:{snippet:u.insertText.value},additionalEdit:u.additionalEdit?Xt.from(u.additionalEdit,void 0):void 0}})}}class MC{constructor(e,t){this._documents=e,this._provider=t}async provideMappedEdits(e,t,i,n){var u,d;const s=y.revive(e),o=this._documents.getDocument(s),a=i.documents.map(h=>h.map(g=>({uri:y.revive(g.uri),version:g.version,ranges:g.ranges.map(b=>F.to(b))}))),c={documents:a,selections:((d=(u=a[0])==null?void 0:u[0])==null?void 0:d.ranges)??[]},l=await this._provider.provideMappedEdits(o,t,c,n);return l?Xt.from(l):null}}class lu{constructor(e,t){this.adapter=e,this.extension=t}}const xt=class xt{constructor(e,t,i,n,s,o,a,c){this._uriTransformer=t,this._documents=i,this._commands=n,this._diagnostics=s,this._logService=o,this._apiDeprecation=a,this._extensionTelemetry=c,this._adapter=new Map,this._proxy=e.getProxy(G.MainThreadLanguageFeatures)}_transformDocumentSelector(e,t){return fa.from(e,this._uriTransformer,t)}_createDisposable(e){return new Re(()=>{this._adapter.delete(e),this._proxy.$unregister(e)})}_nextHandle(){return xt._handlePool++}async _withAdapter(e,t,i,n,s,o=!1){const a=this._adapter.get(e);if(!a||!(a.adapter instanceof t))return n;const c=Date.now();o||this._logService.trace(`[${a.extension.identifier.value}] INVOKE provider '${i.toString().replace(/[\r\n]/g,"")}'`);const l=i(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{Yr(u)||(this._logService.error(`[${a.extension.identifier.value}] provider FAILED`),this._logService.error(u),this._extensionTelemetry.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this._logService.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),wt.isCancellationToken(s)?wE(l,s):l}_addNewAdapter(e,t){const i=this._nextHandle();return this._adapter.set(i,new lu(e,t)),i}static _extLabel(e){return e.displayName||e.name}registerDocumentSymbolProvider(e,t,i,n){const s=this._addNewAdapter(new Zf(this._documents,i),e),o=n&&n.label||xt._extLabel(e);return this._proxy.$registerDocumentSymbolProvider(s,this._transformDocumentSelector(t,e),o),this._createDisposable(s)}$provideDocumentSymbols(e,t,i){return this._withAdapter(e,Zf,n=>n.provideDocumentSymbols(y.revive(t),i),void 0,i)}registerCodeLensProvider(e,t,i){const n=this._nextHandle(),s=typeof i.onDidChangeCodeLenses=="function"?this._nextHandle():void 0;this._adapter.set(n,new lu(new ep(this._documents,this._commands.converter,i,e,this._extensionTelemetry,this._logService),e)),this._proxy.$registerCodeLensSupport(n,this._transformDocumentSelector(t,e),s);let o=this._createDisposable(n);if(s!==void 0){const a=i.onDidChangeCodeLenses(c=>this._proxy.$emitCodeLensEvent(s));o=Re.from(o,a)}return o}$provideCodeLenses(e,t,i){return this._withAdapter(e,ep,n=>n.provideCodeLenses(y.revive(t),i),void 0,i)}$resolveCodeLens(e,t,i){return this._withAdapter(e,ep,n=>n.resolveCodeLens(t,i),void 0,void 0)}$releaseCodeLenses(e,t){this._withAdapter(e,ep,i=>Promise.resolve(i.releaseCodeLenses(t)),void 0,void 0)}registerDefinitionProvider(e,t,i){const n=this._addNewAdapter(new wC(this._documents,i),e);return this._proxy.$registerDefinitionSupport(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideDefinition(e,t,i,n){return this._withAdapter(e,wC,s=>s.provideDefinition(y.revive(t),i,n),[],n)}registerDeclarationProvider(e,t,i){const n=this._addNewAdapter(new bC(this._documents,i),e);return this._proxy.$registerDeclarationSupport(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideDeclaration(e,t,i,n){return this._withAdapter(e,bC,s=>s.provideDeclaration(y.revive(t),i,n),[],n)}registerImplementationProvider(e,t,i){const n=this._addNewAdapter(new yC(this._documents,i),e);return this._proxy.$registerImplementationSupport(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideImplementation(e,t,i,n){return this._withAdapter(e,yC,s=>s.provideImplementation(y.revive(t),i,n),[],n)}registerTypeDefinitionProvider(e,t,i){const n=this._addNewAdapter(new xC(this._documents,i),e);return this._proxy.$registerTypeDefinitionSupport(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideTypeDefinition(e,t,i,n){return this._withAdapter(e,xC,s=>s.provideTypeDefinition(y.revive(t),i,n),[],n)}registerHoverProvider(e,t,i,n){const s=this._addNewAdapter(new CC(this._documents,i),e);return this._proxy.$registerHoverProvider(s,this._transformDocumentSelector(t,e)),this._createDisposable(s)}$provideHover(e,t,i,n){return this._withAdapter(e,CC,s=>s.provideHover(y.revive(t),i,n),void 0,n)}registerEvaluatableExpressionProvider(e,t,i,n){const s=this._addNewAdapter(new SC(this._documents,i),e);return this._proxy.$registerEvaluatableExpressionProvider(s,this._transformDocumentSelector(t,e)),this._createDisposable(s)}$provideEvaluatableExpression(e,t,i,n){return this._withAdapter(e,SC,s=>s.provideEvaluatableExpression(y.revive(t),i,n),void 0,n)}registerInlineValuesProvider(e,t,i,n){const s=typeof i.onDidChangeInlineValues=="function"?this._nextHandle():void 0,o=this._addNewAdapter(new EC(this._documents,i),e);this._proxy.$registerInlineValuesProvider(o,this._transformDocumentSelector(t,e),s);let a=this._createDisposable(o);if(s!==void 0){const c=i.onDidChangeInlineValues(l=>this._proxy.$emitInlineValuesEvent(s));a=Re.from(a,c)}return a}$provideInlineValues(e,t,i,n,s){return this._withAdapter(e,EC,o=>o.provideInlineValues(y.revive(t),i,n,s),void 0,s)}registerDocumentHighlightProvider(e,t,i){const n=this._addNewAdapter(new kC(this._documents,i),e);return this._proxy.$registerDocumentHighlightProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}registerMultiDocumentHighlightProvider(e,t,i){const n=this._addNewAdapter(new DC(this._documents,i),e);return this._proxy.$registerMultiDocumentHighlightProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideDocumentHighlights(e,t,i,n){return this._withAdapter(e,kC,s=>s.provideDocumentHighlights(y.revive(t),i,n),void 0,n)}$provideMultiDocumentHighlights(e,t,i,n,s){return this._withAdapter(e,DC,o=>o.provideMultiDocumentHighlights(y.revive(t),i,n.map(a=>y.revive(a)),s),void 0,s)}registerLinkedEditingRangeProvider(e,t,i){const n=this._addNewAdapter(new IC(this._documents,i),e);return this._proxy.$registerLinkedEditingRangeProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideLinkedEditingRanges(e,t,i,n){return this._withAdapter(e,IC,async s=>{const o=await s.provideLinkedEditingRanges(y.revive(t),i,n);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?xt._serializeRegExp(o.wordPattern):void 0}},void 0,n)}registerReferenceProvider(e,t,i){const n=this._addNewAdapter(new PC(this._documents,i),e);return this._proxy.$registerReferenceSupport(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideReferences(e,t,i,n,s){return this._withAdapter(e,PC,o=>o.provideReferences(y.revive(t),i,n,s),void 0,s)}registerCodeActionProvider(e,t,i,n){var a,c;const s=new Pe,o=this._addNewAdapter(new Fa(this._documents,this._commands.converter,this._diagnostics,i,this._logService,e,this._apiDeprecation),e);return this._proxy.$registerQuickFixSupport(o,this._transformDocumentSelector(t,e),{providedKinds:(a=n==null?void 0:n.providedCodeActionKinds)==null?void 0:a.map(l=>l.value),documentation:(c=n==null?void 0:n.documentation)==null?void 0:c.map(l=>({kind:l.kind.value,command:this._commands.converter.toInternal(l.command,s)}))},xt._extLabel(e),!!i.resolveCodeAction),s.add(this._createDisposable(o)),s}$provideCodeActions(e,t,i,n,s){return this._withAdapter(e,Fa,o=>o.provideCodeActions(y.revive(t),i,n,s),void 0,s)}$resolveCodeAction(e,t,i){return this._withAdapter(e,Fa,n=>n.resolveCodeAction(t,i),{},void 0)}$releaseCodeActions(e,t){this._withAdapter(e,Fa,i=>Promise.resolve(i.releaseCodeActions(t)),void 0,void 0)}registerDocumentFormattingEditProvider(e,t,i){const n=this._addNewAdapter(new TC(this._documents,i),e);return this._proxy.$registerDocumentFormattingSupport(n,this._transformDocumentSelector(t,e),e.identifier,e.displayName||e.name),this._createDisposable(n)}$provideDocumentFormattingEdits(e,t,i,n){return this._withAdapter(e,TC,s=>s.provideDocumentFormattingEdits(y.revive(t),i,n),void 0,n)}registerDocumentRangeFormattingEditProvider(e,t,i){const n=typeof i.provideDocumentRangesFormattingEdits=="function",s=this._addNewAdapter(new E_(this._documents,i),e);return this._proxy.$registerRangeFormattingSupport(s,this._transformDocumentSelector(t,e),e.identifier,e.displayName||e.name,n),this._createDisposable(s)}$provideDocumentRangeFormattingEdits(e,t,i,n,s){return this._withAdapter(e,E_,o=>o.provideDocumentRangeFormattingEdits(y.revive(t),i,n,s),void 0,s)}$provideDocumentRangesFormattingEdits(e,t,i,n,s){return this._withAdapter(e,E_,o=>o.provideDocumentRangesFormattingEdits(y.revive(t),i,n,s),void 0,s)}registerOnTypeFormattingEditProvider(e,t,i,n){const s=this._addNewAdapter(new AC(this._documents,i),e);return this._proxy.$registerOnTypeFormattingSupport(s,this._transformDocumentSelector(t,e),n,e.identifier),this._createDisposable(s)}$provideOnTypeFormattingEdits(e,t,i,n,s,o){return this._withAdapter(e,AC,a=>a.provideOnTypeFormattingEdits(y.revive(t),i,n,s,o),void 0,o)}registerWorkspaceSymbolProvider(e,t){const i=this._addNewAdapter(new ip(t,this._logService),e);return this._proxy.$registerNavigateTypeSupport(i,typeof t.resolveWorkspaceSymbol=="function"),this._createDisposable(i)}$provideWorkspaceSymbols(e,t,i){return this._withAdapter(e,ip,n=>n.provideWorkspaceSymbols(t,i),{symbols:[]},i)}$resolveWorkspaceSymbol(e,t,i){return this._withAdapter(e,ip,n=>n.resolveWorkspaceSymbol(t,i),void 0,void 0)}$releaseWorkspaceSymbols(e,t){this._withAdapter(e,ip,i=>i.releaseWorkspaceSymbols(t),void 0,void 0)}registerRenameProvider(e,t,i){const n=this._addNewAdapter(new js(this._documents,i,this._logService),e);return this._proxy.$registerRenameSupport(n,this._transformDocumentSelector(t,e),js.supportsResolving(i)),this._createDisposable(n)}$provideRenameEdits(e,t,i,n,s){return this._withAdapter(e,js,o=>o.provideRenameEdits(y.revive(t),i,n,s),void 0,s)}$resolveRenameLocation(e,t,i,n){return this._withAdapter(e,js,s=>s.resolveRenameLocation(y.revive(t),i,n),void 0,n)}registerNewSymbolNamesProvider(e,t,i){const n=this._addNewAdapter(new np(this._documents,i,this._logService),e);return this._proxy.$registerNewSymbolNamesProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideNewSymbolNames(e,t,i,n){return this._withAdapter(e,np,s=>s.provideNewSymbolNames(y.revive(t),i,n),void 0,n)}registerDocumentSemanticTokensProvider(e,t,i,n){const s=this._addNewAdapter(new gi(this._documents,i),e),o=typeof i.onDidChangeSemanticTokens=="function"?this._nextHandle():void 0;this._proxy.$registerDocumentSemanticTokensProvider(s,this._transformDocumentSelector(t,e),n,o);let a=this._createDisposable(s);if(o){const c=i.onDidChangeSemanticTokens(l=>this._proxy.$emitDocumentSemanticTokensEvent(o));a=Re.from(a,c)}return a}$provideDocumentSemanticTokens(e,t,i,n){return this._withAdapter(e,gi,s=>s.provideDocumentSemanticTokens(y.revive(t),i,n),null,n)}$releaseDocumentSemanticTokens(e,t){this._withAdapter(e,gi,i=>i.releaseDocumentSemanticColoring(t),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(e,t,i,n){const s=this._addNewAdapter(new RC(this._documents,i),e);return this._proxy.$registerDocumentRangeSemanticTokensProvider(s,this._transformDocumentSelector(t,e),n),this._createDisposable(s)}$provideDocumentRangeSemanticTokens(e,t,i,n){return this._withAdapter(e,RC,s=>s.provideDocumentRangeSemanticTokens(y.revive(t),i,n),null,n)}registerCompletionItemProvider(e,t,i,n){const s=this._addNewAdapter(new qs(this._documents,this._commands.converter,i,this._apiDeprecation,e),e);return this._proxy.$registerCompletionsProvider(s,this._transformDocumentSelector(t,e),n,qs.supportsResolving(i),e.identifier),this._createDisposable(s)}$provideCompletionItems(e,t,i,n,s){return this._withAdapter(e,qs,o=>o.provideCompletionItems(y.revive(t),i,n,s),void 0,s)}$resolveCompletionItem(e,t,i){return this._withAdapter(e,qs,n=>n.resolveCompletionItem(t,i),void 0,i)}$releaseCompletionItems(e,t){this._withAdapter(e,qs,i=>i.releaseCompletionItems(t),void 0,void 0)}registerInlineCompletionsProvider(e,t,i,n){var a;const s=new J8(e,this._documents,i,this._commands.converter),o=this._addNewAdapter(s,e);return this._proxy.$registerInlineCompletionsSupport(o,this._transformDocumentSelector(t,e),s.supportsHandleEvents,Xe.toKey(e.identifier.value),((a=n==null?void 0:n.yieldTo)==null?void 0:a.map(c=>Xe.toKey(c)))||[]),this._createDisposable(o)}$provideInlineCompletions(e,t,i,n,s){return this._withAdapter(e,ou,o=>o.provideInlineCompletions(y.revive(t),i,n,s),void 0,s)}$handleInlineCompletionDidShow(e,t,i,n){this._withAdapter(e,ou,async s=>{s.handleDidShowCompletionItem(t,i,n)},void 0,void 0)}$handleInlineCompletionPartialAccept(e,t,i,n,s){this._withAdapter(e,ou,async o=>{o.handlePartialAccept(t,i,n,s)},void 0,void 0)}$freeInlineCompletionsList(e,t){this._withAdapter(e,ou,async i=>{i.disposeCompletions(t)},void 0,void 0)}registerInlineEditProvider(e,t,i){const n=new D_(e,this._documents,i,this._commands.converter),s=this._addNewAdapter(n,e);return this._proxy.$registerInlineEditProvider(s,this._transformDocumentSelector(t,e),e.identifier),this._createDisposable(s)}$provideInlineEdit(e,t,i,n){return this._withAdapter(e,D_,s=>s.provideInlineEdits(y.revive(t),i,n),void 0,n)}$freeInlineEdit(e,t){this._withAdapter(e,D_,async i=>{i.disposeEdit(t)},void 0,void 0)}registerSignatureHelpProvider(e,t,i,n){const s=Array.isArray(n)?{triggerCharacters:n,retriggerCharacters:[]}:n,o=this._addNewAdapter(new I_(this._documents,i),e);return this._proxy.$registerSignatureHelpProvider(o,this._transformDocumentSelector(t,e),s),this._createDisposable(o)}$provideSignatureHelp(e,t,i,n,s){return this._withAdapter(e,I_,o=>o.provideSignatureHelp(y.revive(t),i,n,s),void 0,s)}$releaseSignatureHelp(e,t){this._withAdapter(e,I_,i=>i.releaseSignatureHelp(t),void 0,void 0)}registerInlayHintsProvider(e,t,i){const n=typeof i.onDidChangeInlayHints=="function"?this._nextHandle():void 0,s=this._addNewAdapter(new rp(this._documents,this._commands.converter,i,this._logService,e),e);this._proxy.$registerInlayHintsProvider(s,this._transformDocumentSelector(t,e),typeof i.resolveInlayHint=="function",n,xt._extLabel(e));let o=this._createDisposable(s);if(n!==void 0){const a=i.onDidChangeInlayHints(c=>this._proxy.$emitInlayHintsEvent(n));o=Re.from(o,a)}return o}$provideInlayHints(e,t,i,n){return this._withAdapter(e,rp,s=>s.provideInlayHints(y.revive(t),i,n),void 0,n)}$resolveInlayHint(e,t,i){return this._withAdapter(e,rp,n=>n.resolveInlayHint(t,i),void 0,i)}$releaseInlayHints(e,t){this._withAdapter(e,rp,i=>i.releaseHints(t),void 0,void 0)}registerDocumentLinkProvider(e,t,i){const n=this._addNewAdapter(new Ur(this._documents,i),e);return this._proxy.$registerDocumentLinkProvider(n,this._transformDocumentSelector(t,e),typeof i.resolveDocumentLink=="function"),this._createDisposable(n)}$provideDocumentLinks(e,t,i){return this._withAdapter(e,Ur,n=>n.provideLinks(y.revive(t),i),void 0,i,t.scheme==="output")}$resolveDocumentLink(e,t,i){return this._withAdapter(e,Ur,n=>n.resolveLink(t,i),void 0,void 0,!0)}$releaseDocumentLinks(e,t){this._withAdapter(e,Ur,i=>i.releaseLinks(t),void 0,void 0,!0)}registerColorProvider(e,t,i){const n=this._addNewAdapter(new P_(this._documents,i),e);return this._proxy.$registerDocumentColorProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideDocumentColors(e,t,i){return this._withAdapter(e,P_,n=>n.provideColors(y.revive(t),i),[],i)}$provideColorPresentations(e,t,i,n){return this._withAdapter(e,P_,s=>s.provideColorPresentations(y.revive(t),i,n),void 0,n)}registerFoldingRangeProvider(e,t,i){const n=this._nextHandle(),s=typeof i.onDidChangeFoldingRanges=="function"?this._nextHandle():void 0;this._adapter.set(n,new lu(new OC(this._documents,i),e)),this._proxy.$registerFoldingRangeProvider(n,this._transformDocumentSelector(t,e),e.identifier,s);let o=this._createDisposable(n);if(s!==void 0){const a=i.onDidChangeFoldingRanges(()=>this._proxy.$emitFoldingRangeEvent(s));o=Re.from(o,a)}return o}$provideFoldingRanges(e,t,i,n){return this._withAdapter(e,OC,s=>s.provideFoldingRanges(y.revive(t),i,n),void 0,n)}registerSelectionRangeProvider(e,t,i){const n=this._addNewAdapter(new $C(this._documents,i,this._logService),e);return this._proxy.$registerSelectionRangeProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideSelectionRanges(e,t,i,n){return this._withAdapter(e,$C,s=>s.provideSelectionRanges(y.revive(t),i,n),[],n)}registerCallHierarchyProvider(e,t,i){const n=this._addNewAdapter(new au(this._documents,i),e);return this._proxy.$registerCallHierarchyProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$prepareCallHierarchy(e,t,i,n){return this._withAdapter(e,au,s=>Promise.resolve(s.prepareSession(y.revive(t),i,n)),void 0,n)}$provideCallHierarchyIncomingCalls(e,t,i,n){return this._withAdapter(e,au,s=>s.provideCallsTo(t,i,n),void 0,n)}$provideCallHierarchyOutgoingCalls(e,t,i,n){return this._withAdapter(e,au,s=>s.provideCallsFrom(t,i,n),void 0,n)}$releaseCallHierarchy(e,t){this._withAdapter(e,au,i=>Promise.resolve(i.releaseSession(t)),void 0,void 0)}registerTypeHierarchyProvider(e,t,i){const n=this._addNewAdapter(new cu(this._documents,i),e);return this._proxy.$registerTypeHierarchyProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$prepareTypeHierarchy(e,t,i,n){return this._withAdapter(e,cu,s=>Promise.resolve(s.prepareSession(y.revive(t),i,n)),void 0,n)}$provideTypeHierarchySupertypes(e,t,i,n){return this._withAdapter(e,cu,s=>s.provideSupertypes(t,i,n),void 0,n)}$provideTypeHierarchySubtypes(e,t,i,n){return this._withAdapter(e,cu,s=>s.provideSubtypes(t,i,n),void 0,n)}$releaseTypeHierarchy(e,t){this._withAdapter(e,cu,i=>Promise.resolve(i.releaseSession(t)),void 0,void 0)}registerDocumentOnDropEditProvider(e,t,i,n){const s=this._nextHandle();return this._adapter.set(s,new lu(new NC(this._proxy,this._documents,i,s,e),e)),this._proxy.$registerDocumentOnDropEditProvider(s,this._transformDocumentSelector(t,e),At(e,"dropMetadata")?n:void 0),this._createDisposable(s)}$provideDocumentOnDropEdits(e,t,i,n,s,o){return this._withAdapter(e,NC,a=>Promise.resolve(a.provideDocumentOnDropEdits(t,y.revive(i),n,s,o)),void 0,void 0)}registerMappedEditsProvider(e,t,i){const n=this._addNewAdapter(new MC(this._documents,i),e);return this._proxy.$registerMappedEditsProvider(n,this._transformDocumentSelector(t,e)),this._createDisposable(n)}$provideMappedEdits(e,t,i,n,s){return this._withAdapter(e,MC,o=>Promise.resolve(o.provideMappedEdits(t,i,n,s)),null,s)}registerDocumentPasteEditProvider(e,t,i,n){var o;const s=this._nextHandle();return this._adapter.set(s,new lu(new su(this._proxy,this._documents,i,s,e),e)),this._proxy.$registerPasteEditProvider(s,this._transformDocumentSelector(t,e),{supportsCopy:!!i.prepareDocumentPaste,supportsPaste:!!i.provideDocumentPasteEdits,supportsResolve:!!i.resolveDocumentPasteEdit,providedPasteEditKinds:(o=n.providedPasteEditKinds)==null?void 0:o.map(a=>a.value),copyMimeTypes:n.copyMimeTypes,pasteMimeTypes:n.pasteMimeTypes}),this._createDisposable(s)}$prepareDocumentPaste(e,t,i,n,s){return this._withAdapter(e,su,o=>o.prepareDocumentPaste(y.revive(t),i,n,s),void 0,s)}$providePasteEdits(e,t,i,n,s,o,a){return this._withAdapter(e,su,c=>c.providePasteEdits(t,y.revive(i),n,s,o,a),void 0,a)}$resolvePasteEdit(e,t,i){return this._withAdapter(e,su,n=>n.resolvePasteEdit(t,i),{},void 0)}$releasePasteEdits(e,t){this._withAdapter(e,su,i=>Promise.resolve(i.releasePasteEdits(t)),void 0,void 0)}static _serializeRegExp(e){return{pattern:e.source,flags:e.flags}}static _serializeIndentationRule(e){return{decreaseIndentPattern:xt._serializeRegExp(e.decreaseIndentPattern),increaseIndentPattern:xt._serializeRegExp(e.increaseIndentPattern),indentNextLinePattern:e.indentNextLinePattern?xt._serializeRegExp(e.indentNextLinePattern):void 0,unIndentedLinePattern:e.unIndentedLinePattern?xt._serializeRegExp(e.unIndentedLinePattern):void 0}}static _serializeOnEnterRule(e){return{beforeText:xt._serializeRegExp(e.beforeText),afterText:e.afterText?xt._serializeRegExp(e.afterText):void 0,previousLineText:e.previousLineText?xt._serializeRegExp(e.previousLineText):void 0,action:e.action}}static _serializeOnEnterRules(e){return e.map(xt._serializeOnEnterRule)}static _serializeAutoClosingPair(e){return{open:e.open,close:e.close,notIn:e.notIn?e.notIn.map(t=>Zo.toString(t)):void 0}}static _serializeAutoClosingPairs(e){return e.map(xt._serializeAutoClosingPair)}setLanguageConfiguration(e,t,i){const{wordPattern:n}=i;if(n&&Ob(n))throw new Error(`Invalid language configuration: wordPattern '${n}' is not allowed to match the empty string.`);n?this._documents.setWordDefinitionFor(t,n):this._documents.setWordDefinitionFor(t,void 0),i.__electricCharacterSupport&&this._apiDeprecation.report("LanguageConfiguration.__electricCharacterSupport",e,"Do not use."),i.__characterPairSupport&&this._apiDeprecation.report("LanguageConfiguration.__characterPairSupport",e,"Do not use.");const s=this._nextHandle(),o={comments:i.comments,brackets:i.brackets,wordPattern:i.wordPattern?xt._serializeRegExp(i.wordPattern):void 0,indentationRules:i.indentationRules?xt._serializeIndentationRule(i.indentationRules):void 0,onEnterRules:i.onEnterRules?xt._serializeOnEnterRules(i.onEnterRules):void 0,__electricCharacterSupport:i.__electricCharacterSupport,__characterPairSupport:i.__characterPairSupport,autoClosingPairs:i.autoClosingPairs?xt._serializeAutoClosingPairs(i.autoClosingPairs):void 0};return this._proxy.$setLanguageConfiguration(s,t,o),this._createDisposable(s)}$setWordDefinitions(e){for(const t of e)this._documents.setWordDefinitionFor(t.languageId,new RegExp(t.regexSource,t.regexFlags))}};xt._handlePool=0;let T_=xt;class K8{constructor(e,t,i,n){this._documents=t,this._commands=i,this._uriTransformer=n,this._languageIds=[],this._handlePool=0,this._ids=new Set,this._proxy=e.getProxy(G.MainThreadLanguages)}$acceptLanguageIds(e){this._languageIds=e}async getLanguages(){return this._languageIds.slice(0)}async changeLanguage(e,t){await this._proxy.$changeLanguage(e,t);const i=this._documents.getDocumentData(e);if(!i)throw new Error(`document '${e.toString()}' NOT found`);return i.document}async tokenAtPosition(e,t){const i=e.version,n=qe.from(t),s=await this._proxy.$tokensAtPosition(e.uri,n),o={type:kr.Other,range:e.getWordRangeAtPosition(t)??new ye(t.line,t.character,t.line,t.character)};if(!s)return o;const a={range:F.to(s.range),type:c1.to(s.type)};return!a.range.contains(t)||i!==e.version?o:a}createLanguageStatusItem(e,t,i){const n=this._handlePool++,s=this._proxy,o=this._ids,a=`${e.identifier.value}/${t}`;if(o.has(a))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);o.add(a);const c={selector:i,id:t,name:e.displayName??e.name,severity:Qo.Information,command:void 0,text:"",detail:"",busy:!1};let l;const u=new Pe,d=()=>{if(l==null||l.dispose(),!o.has(a)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}l=yE(()=>{u.clear(),this._proxy.$setLanguageStatus(n,{id:a,name:c.name??e.displayName??e.name,source:e.displayName??e.name,selector:fa.from(c.selector,this._uriTransformer),label:c.text,detail:c.detail??"",severity:c.severity===Qo.Error?pt.Error:c.severity===Qo.Warning?pt.Warning:pt.Info,command:c.command&&this._commands.toInternal(c.command,u),accessibilityInfo:c.accessibilityInformation,busy:c.busy})},0)},h={dispose(){u.dispose(),l==null||l.dispose(),s.$removeLanguageStatus(n),o.delete(a)},get id(){return c.id},get name(){return c.name},set name(g){c.name=g,d()},get selector(){return c.selector},set selector(g){c.selector=g,d()},get text(){return c.text},set text(g){c.text=g,d()},set text2(g){M(e,"languageStatusText"),c.text=g,d()},get text2(){return M(e,"languageStatusText"),c.text},get detail(){return c.detail},set detail(g){c.detail=g,d()},get severity(){return c.severity},set severity(g){c.severity=g,d()},get accessibilityInformation(){return c.accessibilityInformation},set accessibilityInformation(g){c.accessibilityInformation=g,d()},get command(){return c.command},set command(g){c.command=g,d()},get busy(){return c.busy},set busy(g){c.busy=g,d()}};return d(),h}}function X8(r){return r&&r.title}let A_=class{constructor(e,t){this._logService=t,this._proxy=e.getProxy(G.MainThreadMessageService)}showMessage(e,t,i,n,s){const o={source:{identifier:e.identifier,label:e.displayName||e.name}};let a;typeof n=="string"||X8(n)?a=[n,...s]:(o.modal=n==null?void 0:n.modal,o.useCustom=n==null?void 0:n.useCustom,o.detail=n==null?void 0:n.detail,a=s),o.useCustom&&M(e,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const d=a[u];if(typeof d=="string")c.push({title:d,handle:u,isCloseAffordance:!1});else if(typeof d=="object"){const{title:h,isCloseAffordance:g}=d;c.push({title:h,isCloseAffordance:!!g,handle:u}),g&&(l?this._logService.warn(`[${e.identifier}] Only one message item can have 'isCloseAffordance':`,d):l=!0)}else this._logService.warn(`[${e.identifier}] Invalid message item:`,d)}return this._proxy.$showMessage(t,i,o,c).then(u=>{if(typeof u=="number")return a[u]})}};A_=H([$(1,Je)],A_);class R_{constructor(e,t,i,n){this.start=e,this.deletedCount=t,this.deletedItems=i,this.items=n}asApiEvent(){return{range:new An(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}}class L_{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1}}constructor(e,t,i){this.notebook=e,this._extHostDocument=t,this._cellData=i,this.handle=i.handle,this.uri=y.revive(i.uri),this.cellKind=i.cellKind,this._outputs=i.outputs.map(Ar.to),this._internalMetadata=i.internalMetadata??{},this._metadata=Object.freeze(i.metadata??{}),this._previousResult=Object.freeze(ba.to(i.internalMetadata??{}))}get internalMetadata(){return this._internalMetadata}get apiCell(){if(!this._apiCell){const e=this,t=this._extHostDocument.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const i={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:Al.to(this._cellData.cellKind),document:t.document,get mime(){return e._mime},set mime(n){e._mime=n},get outputs(){return e._outputs.slice(0)},get metadata(){return e._metadata},get executionSummary(){return e._previousResult}};this._apiCell=Object.freeze(i)}return this._apiCell}setOutputs(e){this._outputs=e.map(Ar.to)}setOutputItems(e,t,i){const n=i.map(ya.to),s=this._outputs.find(o=>o.id===e);if(s&&(t||(s.items.length=0),s.items.push(...n),s.items.length>1&&s.items.every(o=>Ky(o.mime)))){const o=new Map,a=[];s.items.forEach(c=>{let l;o.has(c.mime)?l=o.get(c.mime):(l=[],o.set(c.mime,l),a.push(c.mime)),l.push(c.data)}),s.items.length=0,a.forEach(c=>{const l=n7(o.get(c));s.items.push({mime:c,data:l.data.buffer})})}}setMetadata(e){this._metadata=Object.freeze(e)}setInternalMetadata(e){this._internalMetadata=e,this._previousResult=Object.freeze(ba.to(e))}setMime(e){}}const Op=class Op{constructor(e,t,i,n,s){this._proxy=e,this._textDocumentsAndEditors=t,this._textDocuments=i,this.uri=n,this.handle=Op._handlePool++,this._cells=[],this._versionId=0,this._isDirty=!1,this._disposed=!1,this._notebookType=s.viewType,this._metadata=Object.freeze(s.metadata??Object.create(null)),this._spliceNotebookCells([[0,0,s.cells]],!0,void 0),this._versionId=s.versionId}dispose(){this._disposed=!0}get versionId(){return this._versionId}get apiNotebook(){if(!this._notebook){const e=this,t={get uri(){return e.uri},get version(){return e._versionId},get notebookType(){return e._notebookType},get isDirty(){return e._isDirty},get isUntitled(){return e.uri.scheme===Y.untitled},get isClosed(){return e._disposed},get metadata(){return e._metadata},get cellCount(){return e._cells.length},cellAt(i){return i=e._validateIndex(i),e._cells[i].apiCell},getCells(i){return(i?e._getCells(i):e._cells).map(s=>s.apiCell)},save(){return e._save()}};this._notebook=Object.freeze(t)}return this._notebook}acceptDocumentPropertiesChanged(e){e.metadata&&(this._metadata=Object.freeze({...this._metadata,...e.metadata}))}acceptDirty(e){this._isDirty=e}acceptModelChanged(e,t,i){this._versionId=e.versionId,this._isDirty=t,this.acceptDocumentPropertiesChanged({metadata:i});const n={notebook:this.apiNotebook,metadata:i,cellChanges:[],contentChanges:[]},s=[];for(const a of e.rawEvents)a.kind===ji.ModelChange?this._spliceNotebookCells(a.changes,!1,n.contentChanges):a.kind===ji.Move?this._moveCells(a.index,a.length,a.newIdx,n.contentChanges):a.kind===ji.Output?(this._setCellOutputs(a.index,a.outputs),s.push({cell:this._cells[a.index].apiCell,outputs:this._cells[a.index].apiCell.outputs})):a.kind===ji.OutputItem?(this._setCellOutputItems(a.index,a.outputId,a.append,a.outputItems),s.push({cell:this._cells[a.index].apiCell,outputs:this._cells[a.index].apiCell.outputs})):a.kind===ji.ChangeCellLanguage?(this._changeCellLanguage(a.index,a.language),s.push({cell:this._cells[a.index].apiCell,document:this._cells[a.index].apiCell.document})):a.kind===ji.ChangeCellContent?s.push({cell:this._cells[a.index].apiCell,document:this._cells[a.index].apiCell.document}):a.kind===ji.ChangeCellMime?this._changeCellMime(a.index,a.mime):a.kind===ji.ChangeCellMetadata?(this._changeCellMetadata(a.index,a.metadata),s.push({cell:this._cells[a.index].apiCell,metadata:this._cells[a.index].apiCell.metadata})):a.kind===ji.ChangeCellInternalMetadata&&(this._changeCellInternalMetadata(a.index,a.internalMetadata),s.push({cell:this._cells[a.index].apiCell,executionSummary:this._cells[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<s.length;a++){const c=s[a],l=o.get(c.cell);if(l===void 0){const u=n.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else n.cellChanges[l]={...n.cellChanges[l],...c}}return n}_validateIndex(e){return e=e|0,e<0?0:e>=this._cells.length?this._cells.length-1:e}_validateRange(e){let t=e.start|0,i=e.end|0;return t<0&&(t=0),i>this._cells.length&&(i=this._cells.length),e.with({start:t,end:i})}_getCells(e){e=this._validateRange(e);const t=[];for(let i=e.start;i<e.end;i++)t.push(this._cells[i]);return t}async _save(){return this._disposed?Promise.reject(new Error("Notebook has been closed")):this._proxy.$trySaveNotebook(this.uri)}_spliceNotebookCells(e,t,i){if(this._disposed)return;const n=[],s=[],o=[];if(e.reverse().forEach(a=>{const l=a[2].map(h=>{const g=new L_(this,this._textDocumentsAndEditors,h);return t||s.push(L_.asModelAddData(h)),g}),u=new R_(a[0],a[1],[],l),d=this._cells.splice(a[0],a[1],...l);for(const h of d)o.push(h.uri),u.deletedItems.push(h.apiCell);n.push(u)}),this._textDocumentsAndEditors.acceptDocumentsAndEditorsDelta({addedDocuments:s,removedDocuments:o}),i)for(const a of n)i.push(a.asApiEvent())}_moveCells(e,t,i,n){const s=this._cells.splice(e,t);this._cells.splice(i,0,...s);const o=[new R_(e,t,s.map(a=>a.apiCell),[]),new R_(i,0,[],s)];for(const a of o)n.push(a.asApiEvent())}_setCellOutputs(e,t){this._cells[e].setOutputs(t)}_setCellOutputItems(e,t,i,n){this._cells[e].setOutputItems(t,i,n)}_changeCellLanguage(e,t){const i=this._cells[e];i.apiCell.document.languageId!==t&&this._textDocuments.$acceptModelLanguageChanged(i.uri,t)}_changeCellMime(e,t){const i=this._cells[e];i.apiCell.mime=t}_changeCellMetadata(e,t){this._cells[e].setMetadata(t)}_changeCellInternalMetadata(e,t){this._cells[e].setInternalMetadata(t)}getCellFromApiCell(e){return this._cells.find(t=>t.apiCell===e)}getCellFromIndex(e){return this._cells[e]}getCell(e){return this._cells.find(t=>t.handle===e)}getCellIndex(e){return this._cells.indexOf(e)}};Op._handlePool=0;let O_=Op;const $p=class $p{constructor(e,t,i,n,s,o){this.id=e,this._proxy=t,this.notebookData=i,this._selections=[],this._visibleRanges=[],this._visible=!1,this._selections=s,this._visibleRanges=n,this._viewColumn=o}get apiEditor(){if(!this._editor){const e=this;this._editor={get notebook(){return e.notebookData.apiNotebook},get selection(){return e._selections[0]},set selection(t){this.selections=[t]},get selections(){return e._selections},set selections(t){if(!Array.isArray(t)||!t.every(An.isNotebookRange))throw xe("selections");e._selections=t,e._trySetSelections(t)},get visibleRanges(){return e._visibleRanges},revealRange(t,i){e._proxy.$tryRevealRange(e.id,hn.from(t),i??Ph.Default)},get viewColumn(){return e._viewColumn}},$p.apiEditorsToExtHost.set(this._editor,this)}return this._editor}get visible(){return this._visible}_acceptVisibility(e){this._visible=e}_acceptVisibleRanges(e){this._visibleRanges=e}_acceptSelections(e){this._selections=e}_trySetSelections(e){this._proxy.$trySetSelections(this.id,e.map(hn.from))}_acceptViewColumn(e){this._viewColumn=e}};$p.apiEditorsToExtHost=new WeakMap;let uu=$p;class $_{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==oe)return N_(this.right);let e=this;for(;e.parent!==oe&&e.parent.left!==e;)e=e.parent;return e.parent===oe?oe:e.parent}prev(){if(this.left!==oe)return FC(this.left);let e=this;for(;e.parent!==oe&&e.parent.right!==e;)e=e.parent;return e.parent===oe?oe:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const oe=new $_(null,0);oe.parent=oe,oe.left=oe,oe.right=oe,oe.color=0;function N_(r){for(;r.left!==oe;)r=r.left;return r}function FC(r){for(;r.right!==oe;)r=r.right;return r}function M_(r){return r===oe?0:r.size_left+r.piece.length+M_(r.right)}function F_(r){return r===oe?0:r.lf_left+r.piece.lineFeedCnt+F_(r.right)}function H_(){oe.parent=oe}function du(r,e){const t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==oe&&(t.left.parent=e),t.parent=e.parent,e.parent===oe?r.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function hu(r,e){const t=e.left;e.left=t.right,t.right!==oe&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===oe?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function sp(r,e){let t,i;if(e.left===oe?(i=e,t=i.right):e.right===oe?(i=e,t=i.left):(i=N_(e.right),t=i.right),i===r.root){r.root=t,t.color=0,e.detach(),H_(),r.root.parent=oe;return}const n=i.color===1;if(i===i.parent.left?i.parent.left=t:i.parent.right=t,i===e?(t.parent=i.parent,fu(r,t)):(i.parent===e?t.parent=i:t.parent=i.parent,fu(r,t),i.left=e.left,i.right=e.right,i.parent=e.parent,i.color=e.color,e===r.root?r.root=i:e===e.parent.left?e.parent.left=i:e.parent.right=i,i.left!==oe&&(i.left.parent=i),i.right!==oe&&(i.right.parent=i),i.size_left=e.size_left,i.lf_left=e.lf_left,fu(r,i)),e.detach(),t.parent.left===t){const o=M_(t),a=F_(t);if(o!==t.parent.size_left||a!==t.parent.lf_left){const c=o-t.parent.size_left,l=a-t.parent.lf_left;t.parent.size_left=o,t.parent.lf_left=a,Wn(r,t.parent,c,l)}}if(fu(r,t.parent),n){H_();return}let s;for(;t!==r.root&&t.color===0;)t===t.parent.left?(s=t.parent.right,s.color===1&&(s.color=0,t.parent.color=1,du(r,t.parent),s=t.parent.right),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.right.color===0&&(s.left.color=0,s.color=1,hu(r,s),s=t.parent.right),s.color=t.parent.color,t.parent.color=0,s.right.color=0,du(r,t.parent),t=r.root)):(s=t.parent.left,s.color===1&&(s.color=0,t.parent.color=1,hu(r,t.parent),s=t.parent.left),s.left.color===0&&s.right.color===0?(s.color=1,t=t.parent):(s.left.color===0&&(s.right.color=0,s.color=1,du(r,s),s=t.parent.left),s.color=t.parent.color,t.parent.color=0,s.left.color=0,hu(r,t.parent),t=r.root));t.color=0,H_()}function HC(r,e){for(fu(r,e);e!==r.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){const t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,du(r,e)),e.parent.color=0,e.parent.parent.color=1,hu(r,e.parent.parent))}else{const t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,hu(r,e)),e.parent.color=0,e.parent.parent.color=1,du(r,e.parent.parent))}r.root.color=0}function Wn(r,e,t,i){for(;e!==r.root&&e!==oe;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}function fu(r,e){let t=0,i=0;if(e!==r.root){for(;e!==r.root&&e===e.parent.right;)e=e.parent;if(e!==r.root)for(e=e.parent,t=M_(e.left)-e.size_left,i=F_(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=i;e!==r.root&&(t!==0||i!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=i),e=e.parent}}const Bn=65535;function UC(r){let e;return r[r.length-1]<65536?e=new Uint16Array(r.length):e=new Uint32Array(r.length),e.set(r,0),e}class Y8{constructor(e,t,i,n,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=n,this.isBasicASCII=s}}function Vn(r,e=!0){const t=[0];let i=1;for(let n=0,s=r.length;n<s;n++){const o=r.charCodeAt(n);o===13?n+1<s&&r.charCodeAt(n+1)===10?(t[i++]=n+2,n++):t[i++]=n+1:o===10&&(t[i++]=n+1)}return e?UC(t):t}function Z8(r,e){r.length=0,r[0]=0;let t=1,i=0,n=0,s=0,o=!0;for(let c=0,l=e.length;c<l;c++){const u=e.charCodeAt(c);u===13?c+1<l&&e.charCodeAt(c+1)===10?(s++,r[t++]=c+2,c++):(i++,r[t++]=c+1):u===10?(n++,r[t++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new Y8(UC(r),i,n,s,o);return r.length=0,a}class oi{constructor(e,t,i,n,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=n,this.length=s}}class Gs{constructor(e,t){this.buffer=e,this.lineStarts=t}}class eP{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==oe&&e.iterate(e.root,i=>(i!==oe&&this._pieces.push(i.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class tP{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const i=this._cache[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const i=this._cache;for(let n=0;n<i.length;n++){const s=i[n];if(s.node.parent===null||s.nodeStartOffset>=e){i[n]=null,t=!0;continue}}if(t){const n=[];for(const s of i)s!==null&&n.push(s);this._cache=n}}}class iP{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this._buffers=[new Gs("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=oe,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=i;let n=null;for(let s=0,o=e.length;s<o;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=Vn(e[s].buffer));const a=new oi(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this._buffers.push(e[s]),n=this.rbInsertRight(n,a)}this._searchCache=new tP(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=Bn,i=t-Math.floor(t/3),n=i*2;let s="",o=0;const a=[];if(this.iterate(this.root,c=>{const l=this.getNodeContent(c),u=l.length;if(o<=i||o+u<n)return s+=l,o+=u,!0;const d=s.replace(/\r\n|\r|\n/g,e);return a.push(new Gs(d,Vn(d))),s=l,o=u,!0}),o>0){const c=s.replace(/\r\n|\r|\n/g,e);a.push(new Gs(c,Vn(c)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new eP(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,n=>{if(n===oe)return!0;const s=this.getNodeContent(n),o=s.length,a=e.nodeAt(t),c=e.nodeAt(t+o),l=e.getValueInRange2(a,c);return t+=o,s===l})}getOffsetAt(e,t){let i=0,n=this.root;for(;n!==oe;)if(n.left!==oe&&n.lf_left+1>=e)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt+1>=e){i+=n.size_left;const s=this.getAccumulatedValue(n,e-n.lf_left-2);return i+=s+t-1}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const n=e;for(;t!==oe;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(i+=t.lf_left+s.index,s.index===0){const o=this.getOffsetAt(i+1,1),a=n-o;return new Ai(i+1,a+1)}return new Ai(i+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===oe){const s=this.getOffsetAt(i+1,1),o=n-e-s;return new Ai(i+1,o+1)}else t=t.right;return new Ai(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.nodeAt2(e.startLineNumber,e.startColumn),n=this.nodeAt2(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,n);return t?t!==this._EOL||!this._EOLNormalized?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const a=e.node,c=this._buffers[a.piece.bufferIndex].buffer,l=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return c.substring(l+e.remainder,l+t.remainder)}let i=e.node;const n=this._buffers[i.piece.bufferIndex].buffer,s=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);let o=n.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==oe;){const a=this._buffers[i.piece.bufferIndex].buffer,c=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(i===t.node){o+=a.substring(c,c+t.remainder);break}else o+=a.substr(c,i.piece.length);i=i.next()}return o}getLinesContent(){const e=[];let t=0,i="",n=!1;return this.iterate(this.root,s=>{if(s===oe)return!0;const o=s.piece;let a=o.length;if(a===0)return!0;const c=this._buffers[o.bufferIndex].buffer,l=this._buffers[o.bufferIndex].lineStarts,u=o.start.line,d=o.end.line;let h=l[u]+o.start.column;if(n&&(c.charCodeAt(h)===10&&(h++,a--),e[t++]=i,i="",n=!1,a===0))return!0;if(u===d)return!this._EOLNormalized&&c.charCodeAt(h+a-1)===13?(n=!0,i+=c.substr(h,a-1)):i+=c.substr(h,a),!0;i+=this._EOLNormalized?c.substring(h,Math.max(h,l[u+1]-this._EOLLength)):c.substring(h,l[u+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let g=u+1;g<d;g++)i=this._EOLNormalized?c.substring(l[g],l[g+1]-this._EOLLength):c.substring(l[g],l[g+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this._EOLNormalized&&c.charCodeAt(l[d]+o.end.column-1)===13?(n=!0,o.end.column===0?t--:i=c.substr(l[d],o.end.column-1)):i=c.substr(l[d],o.end.column),!0}),n&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this._buffers[t.piece.bufferIndex],n=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(n)}else{const t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){const i=this.nodeAt2(e,t+1);return this._getCharCode(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){const t=this.nodeAt(e);return this._getCharCode(t)}findMatchesInNode(e,t,i,n,s,o,a,c,l,u,d){const h=this._buffers[e.piece.bufferIndex],g=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),b=this.offsetInBuffer(e.piece.bufferIndex,s),_=this.offsetInBuffer(e.piece.bufferIndex,o);let v;const E={line:0,column:0};let k,S;t._wordSeparators?(k=h.buffer.substring(b,_),S=O=>O+b,t.reset(0)):(k=h.buffer,S=O=>O,t.reset(b));do if(v=t.next(k),v){if(S(v.index)>=_)return u;this.positionInBuffer(e,S(v.index)-g,E);const O=this.getLineFeedCnt(e.piece.bufferIndex,s,E),T=E.line===s.line?E.column-s.column+n:E.column+1,z=T+v[0].length;if(d[u++]=w2(new Qe(i+O,T,i+O,z),v,c),S(v.index)+v[0].length>=_||u>=l)return u}while(v);return u}findMatchesLineByLine(e,t,i,n){const s=[];let o=0;const a=new X9(t.wordSeparators,t.regex);let c=this.nodeAt2(e.startLineNumber,e.startColumn);if(c===null)return[];const l=this.nodeAt2(e.endLineNumber,e.endColumn);if(l===null)return[];let u=this.positionInBuffer(c.node,c.remainder);const d=this.positionInBuffer(l.node,l.remainder);if(c.node===l.node)return this.findMatchesInNode(c.node,a,e.startLineNumber,e.startColumn,u,d,t,i,n,o,s),s;let h=e.startLineNumber,g=c.node;for(;g!==l.node;){const _=this.getLineFeedCnt(g.piece.bufferIndex,u,g.piece.end);if(_>=1){const E=this._buffers[g.piece.bufferIndex].lineStarts,k=this.offsetInBuffer(g.piece.bufferIndex,g.piece.start),S=E[u.line+_],O=h===e.startLineNumber?e.startColumn:1;if(o=this.findMatchesInNode(g,a,h,O,u,this.positionInBuffer(g,S-k),t,i,n,o,s),o>=n)return s;h+=_}const v=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const E=this.getLineContent(h).substring(v,e.endColumn-1);return o=this._findMatchesInLine(t,a,E,e.endLineNumber,v,o,s,i,n),s}if(o=this._findMatchesInLine(t,a,this.getLineContent(h).substr(v),h,v,o,s,i,n),o>=n)return s;h++,c=this.nodeAt2(h,1),g=c.node,u=this.positionInBuffer(c.node,c.remainder)}if(h===e.endLineNumber){const _=h===e.startLineNumber?e.startColumn-1:0,v=this.getLineContent(h).substring(_,e.endColumn-1);return o=this._findMatchesInLine(t,a,v,e.endLineNumber,_,o,s,i,n),s}const b=h===e.startLineNumber?e.startColumn:1;return o=this.findMatchesInNode(l.node,a,h,b,u,d,t,i,n,o,s),s}_findMatchesInLine(e,t,i,n,s,o,a,c,l){const u=e.wordSeparators;if(!c&&e.simpleSearch){const h=e.simpleSearch,g=h.length,b=i.length;let _=-g;for(;(_=i.indexOf(h,_+g))!==-1;)if((!u||b2(u,i,b,_,g))&&(a[o++]=new _v(new Qe(n,_+1+s,n,_+1+g+s),null),o>=l))return o;return o}let d;t.reset(0);do if(d=t.next(i),d&&(a[o++]=w2(new Qe(n,d.index+1+s,n,d.index+1+d[0].length+s),d,c),o>=l))return o;while(d);return o}insert(e,t,i=!1){if(this._EOLNormalized=this._EOLNormalized&&i,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==oe){const{node:n,remainder:s,nodeStartOffset:o}=this.nodeAt(e),a=n.piece,c=a.bufferIndex,l=this.positionInBuffer(n,s);if(n.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&o+a.length===e&&t.length<Bn){this.appendToNode(n,t),this.computeBufferMetadata();return}if(o===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(o+n.piece.length>e){const u=[];let d=new oi(a.bufferIndex,l,a.end,this.getLineFeedCnt(a.bufferIndex,l,a.end),this.offsetInBuffer(c,a.end)-this.offsetInBuffer(c,l));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(n,s)===10){const _={line:d.start.line+1,column:0};d=new oi(d.bufferIndex,_,d.end,this.getLineFeedCnt(d.bufferIndex,_,d.end),d.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(n,s-1)===13){const _=this.positionInBuffer(n,s-1);this.deleteNodeTail(n,_),t="\r"+t,n.piece.length===0&&u.push(n)}else this.deleteNodeTail(n,l);else this.deleteNodeTail(n,l);const h=this.createNewPieces(t);d.length>0&&this.rbInsertRight(n,d);let g=n;for(let b=0;b<h.length;b++)g=this.rbInsertRight(g,h[b]);this.deleteNodes(u)}else this.insertContentToNodeRight(t,n)}else{const n=this.createNewPieces(t);let s=this.rbInsertLeft(null,n[0]);for(let o=1;o<n.length;o++)s=this.rbInsertRight(s,n[o])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===oe)return;const i=this.nodeAt(e),n=this.nodeAt(e+t),s=i.node,o=n.node;if(s===o){const h=this.positionInBuffer(s,i.remainder),g=this.positionInBuffer(s,n.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const b=s.next();sp(this,s),this.validateCRLFWithPrevNode(b),this.computeBufferMetadata();return}this.deleteNodeHead(s,g),this._searchCache.validate(e),this.validateCRLFWithPrevNode(s),this.computeBufferMetadata();return}if(i.nodeStartOffset+s.piece.length===e+t){this.deleteNodeTail(s,h),this.validateCRLFWithNextNode(s),this.computeBufferMetadata();return}this.shrinkNode(s,h,g),this.computeBufferMetadata();return}const a=[],c=this.positionInBuffer(s,i.remainder);this.deleteNodeTail(s,c),this._searchCache.validate(e),s.piece.length===0&&a.push(s);const l=this.positionInBuffer(o,n.remainder);this.deleteNodeHead(o,l),o.piece.length===0&&a.push(o);const u=s.next();for(let h=u;h!==oe&&h!==o;h=h.next())a.push(h);const d=s.piece.length===0?s.prev():s;this.deleteNodes(a),this.validateCRLFWithNextNode(d),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const i=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const o=t.piece,a={line:o.start.line+1,column:0},c=new oi(o.bufferIndex,a,o.end,this.getLineFeedCnt(o.bufferIndex,a,o.end),o.length-1);t.piece=c,e+=`
`,Wn(this,t,-1,-1),t.piece.length===0&&i.push(t)}const n=this.createNewPieces(e);let s=this.rbInsertLeft(t,n[n.length-1]);for(let o=n.length-2;o>=0;o--)s=this.rbInsertLeft(s,n[o]);this.validateCRLFWithPrevNode(s),this.deleteNodes(i)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);const i=this.createNewPieces(e),n=this.rbInsertRight(t,i[0]);let s=n;for(let o=1;o<i.length;o++)s=this.rbInsertRight(s,i[o]);this.validateCRLFWithPrevNode(n)}positionInBuffer(e,t,i){const n=e.piece,s=e.piece.bufferIndex,o=this._buffers[s].lineStarts,c=o[n.start.line]+n.start.column+t;let l=n.start.line,u=n.end.line,d=0,h=0,g=0;for(;l<=u&&(d=l+(u-l)/2|0,g=o[d],d!==u);)if(h=o[d+1],c<g)u=d-1;else if(c>=h)l=d+1;else break;return i?(i.line=d,i.column=c-g,null):{line:d,column:c-g}}getLineFeedCnt(e,t,i){if(i.column===0)return i.line-t.line;const n=this._buffers[e].lineStarts;if(i.line===n.length-1)return i.line-t.line;const s=n[i.line+1],o=n[i.line]+i.column;if(s>o+1)return i.line-t.line;const a=o-1;return this._buffers[e].buffer.charCodeAt(a)===13?i.line-t.line+1:i.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)sp(this,e[t])}createNewPieces(e){if(e.length>Bn){const u=[];for(;e.length>Bn;){const h=e.charCodeAt(Bn-1);let g;h===13||h>=55296&&h<=56319?(g=e.substring(0,Bn-1),e=e.substring(Bn-1)):(g=e.substring(0,Bn),e=e.substring(Bn));const b=Vn(g);u.push(new oi(this._buffers.length,{line:0,column:0},{line:b.length-1,column:g.length-b[b.length-1]},b.length-1,g.length)),this._buffers.push(new Gs(g,b))}const d=Vn(e);return u.push(new oi(this._buffers.length,{line:0,column:0},{line:d.length-1,column:e.length-d[d.length-1]},d.length-1,e.length)),this._buffers.push(new Gs(e,d)),u}let t=this._buffers[0].buffer.length;const i=Vn(e,!1);let n=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},n=this._lastChangeBufferPos;for(let u=0;u<i.length;u++)i[u]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let u=0;u<i.length;u++)i[u]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(i.slice(1)),this._buffers[0].buffer+=e}const s=this._buffers[0].buffer.length,o=this._buffers[0].lineStarts.length-1,a=s-this._buffers[0].lineStarts[o],c={line:o,column:a},l=new oi(0,n,c,this.getLineFeedCnt(0,n,c),s-t);return this._lastChangeBufferPos=c,[l]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,t=0){let i=this.root,n="";const s=this._searchCache.get2(e);if(s){i=s.node;const o=this.getAccumulatedValue(i,e-s.nodeStartLineNumber-1),a=this._buffers[i.piece.bufferIndex].buffer,c=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt===e)n=a.substring(c+o,c+i.piece.length);else{const l=this.getAccumulatedValue(i,e-s.nodeStartLineNumber);return a.substring(c+o,c+l-t)}}else{let o=0;const a=e;for(;i!==oe;)if(i.left!==oe&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const c=this.getAccumulatedValue(i,e-i.lf_left-2),l=this.getAccumulatedValue(i,e-i.lf_left-1),u=this._buffers[i.piece.bufferIndex].buffer,d=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return o+=i.size_left,this._searchCache.set({node:i,nodeStartOffset:o,nodeStartLineNumber:a-(e-1-i.lf_left)}),u.substring(d+c,d+l-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const c=this.getAccumulatedValue(i,e-i.lf_left-2),l=this._buffers[i.piece.bufferIndex].buffer,u=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n=l.substring(u+c,u+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==oe;){const o=this._buffers[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const a=this.getAccumulatedValue(i,0),c=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);return n+=o.substring(c,c+a-t),n}else{const a=this.offsetInBuffer(i.piece.bufferIndex,i.piece.start);n+=o.substr(a,i.piece.length)}i=i.next()}return n}computeBufferMetadata(){let e=this.root,t=1,i=0;for(;e!==oe;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=i,this._searchCache.validate(this._length)}getIndexOf(e,t){const i=e.piece,n=this.positionInBuffer(e,t),s=n.line-i.start.line;if(this.offsetInBuffer(i.bufferIndex,i.end)-this.offsetInBuffer(i.bufferIndex,i.start)===t){const o=this.getLineFeedCnt(e.piece.bufferIndex,i.start,n);if(o!==s)return{index:o,remainder:0}}return{index:s,remainder:n.column}}getAccumulatedValue(e,t){if(t<0)return 0;const i=e.piece,n=this._buffers[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?n[i.end.line]+i.end.column-n[i.start.line]-i.start.column:n[s]-n[i.start.line]-i.start.column}deleteNodeTail(e,t){const i=e.piece,n=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.end),o=t,a=this.offsetInBuffer(i.bufferIndex,o),c=this.getLineFeedCnt(i.bufferIndex,i.start,o),l=c-n,u=a-s,d=i.length+u;e.piece=new oi(i.bufferIndex,i.start,o,c,d),Wn(this,e,u,l)}deleteNodeHead(e,t){const i=e.piece,n=i.lineFeedCnt,s=this.offsetInBuffer(i.bufferIndex,i.start),o=t,a=this.getLineFeedCnt(i.bufferIndex,o,i.end),c=this.offsetInBuffer(i.bufferIndex,o),l=a-n,u=s-c,d=i.length+u;e.piece=new oi(i.bufferIndex,o,i.end,a,d),Wn(this,e,u,l)}shrinkNode(e,t,i){const n=e.piece,s=n.start,o=n.end,a=n.length,c=n.lineFeedCnt,l=t,u=this.getLineFeedCnt(n.bufferIndex,n.start,l),d=this.offsetInBuffer(n.bufferIndex,t)-this.offsetInBuffer(n.bufferIndex,s);e.piece=new oi(n.bufferIndex,n.start,l,u,d),Wn(this,e,d-a,u-c);const h=new oi(n.bufferIndex,i,o,this.getLineFeedCnt(n.bufferIndex,i,o),this.offsetInBuffer(n.bufferIndex,o)-this.offsetInBuffer(n.bufferIndex,i)),g=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(g)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);const i=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),n=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const s=Vn(t,!1);for(let g=0;g<s.length;g++)s[g]+=n;if(i){const g=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:n-g}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(s.slice(1));const o=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[o],c={line:o,column:a},l=e.piece.length+t.length,u=e.piece.lineFeedCnt,d=this.getLineFeedCnt(0,e.piece.start,c),h=d-u;e.piece=new oi(e.piece.bufferIndex,e.piece.start,c,d,l),this._lastChangeBufferPos=c,Wn(this,e,t.length,h)}nodeAt(e){let t=this.root;const i=this._searchCache.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let n=0;for(;t!==oe;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){n+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:n};return this._searchCache.set(s),s}else e-=t.size_left+t.piece.length,n+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let i=this.root,n=0;for(;i!==oe;)if(i.left!==oe&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2),o=this.getAccumulatedValue(i,e-i.lf_left-1);return n+=i.size_left,{node:i,remainder:Math.min(s+t-1,o),nodeStartOffset:n}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.getAccumulatedValue(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:n};t-=i.piece.length-s;break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==oe;){if(i.piece.lineFeedCnt>0){const s=this.getAccumulatedValue(i,0),o=this.offsetOfNode(i);return{node:i,remainder:Math.min(t-1,s),nodeStartOffset:o}}else if(i.piece.length>=t-1){const s=this.offsetOfNode(i);return{node:i,remainder:t-1,nodeStartOffset:s}}else t-=i.piece.length;i=i.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this._buffers[e.piece.bufferIndex],n=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(n)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===oe||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this._buffers[t.bufferIndex].lineStarts,n=t.start.line,s=i[n]+t.start.column;return n===i.length-1||i[n+1]>s+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(s)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===oe||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const i=[],n=this._buffers[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:n[e.piece.end.line]-n[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const o=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new oi(e.piece.bufferIndex,e.piece.start,s,a,o),Wn(this,e,-1,-1),e.piece.length===0&&i.push(e);const c={line:t.piece.start.line+1,column:0},l=t.piece.length-1,u=this.getLineFeedCnt(t.piece.bufferIndex,c,t.piece.end);t.piece=new oi(t.piece.bufferIndex,c,t.piece.end,u,l),Wn(this,t,-1,-1),t.piece.length===0&&i.push(t);const d=this.createNewPieces(`\r
`);this.rbInsertRight(e,d[0]);for(let h=0;h<i.length;h++)sp(this,i[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const i=t.next();if(this.startWithLF(i)){if(e+=`
`,i.piece.length===1)sp(this,i);else{const n=i.piece,s={line:n.start.line+1,column:0},o=n.length-1,a=this.getLineFeedCnt(n.bufferIndex,s,n.end);i.piece=new oi(n.bufferIndex,s,n.end,a,o),Wn(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===oe)return t(oe);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===oe)return"";const t=this._buffers[e.piece.bufferIndex],i=e.piece,n=this.offsetInBuffer(i.bufferIndex,i.start),s=this.offsetInBuffer(i.bufferIndex,i.end);return t.buffer.substring(n,s)}getPieceContent(e){const t=this._buffers[e.bufferIndex],i=this.offsetInBuffer(e.bufferIndex,e.start),n=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(i,n)}rbInsertRight(e,t){const i=new $_(t,1);if(i.left=oe,i.right=oe,i.parent=oe,i.size_left=0,i.lf_left=0,this.root===oe)this.root=i,i.color=0;else if(e.right===oe)e.right=i,i.parent=e;else{const s=N_(e.right);s.left=i,i.parent=s}return HC(this,i),i}rbInsertLeft(e,t){const i=new $_(t,1);if(i.left=oe,i.right=oe,i.parent=oe,i.size_left=0,i.lf_left=0,this.root===oe)this.root=i,i.color=0;else if(e.left===oe)e.left=i,i.parent=e;else{const n=FC(e.left);n.right=i,i.parent=n}return HC(this,i),i}getContentOfSubTree(e){let t="";return this.iterate(e,i=>(t+=this.getNodeContent(i),!0)),t}}function U_(r){let e=0,t=0,i=0,n=0;for(let s=0,o=r.length;s<o;s++){const a=r.charCodeAt(s);a===13?(e===0&&(t=s),e++,s+1<o&&r.charCodeAt(s+1)===10?(n|=2,s++):n|=3,i=s+1):a===10&&(n|=1,e===0&&(t=s),e++,i=s+1)}return e===0&&(t=r.length),[e,t,r.length-i,n]}let W_;function nP(){return W_||(W_=new TextDecoder("UTF-16LE")),W_}function rP(r,e,t){const i=new Uint16Array(r.buffer,e,t);return t>0&&(i[0]===65279||i[0]===65534)?sP(r,e,t):nP().decode(i)}function sP(r,e,t){const i=[];let n=0;for(let s=0;s<t;s++){const o=MS(r,e);e+=2,i[n++]=String.fromCharCode(o)}return i.join("")}function op(r){return r.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class Xi{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(e,t,i,n){this.oldPosition=e,this.oldText=t,this.newPosition=i,this.newText=n}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${op(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${op(this.oldText)}")`:`(replace@${this.oldPosition} "${op(this.oldText)}" with "${op(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,i){const n=t.length;ed(e,n,i),i+=4;for(let s=0;s<n;s++)FS(e,t.charCodeAt(s),i),i+=2;return i}static _readString(e,t){const i=Zu(e,t);return t+=4,rP(e,t,i)}writeSize(){return 4+4+Xi._writeStringSize(this.oldText)+Xi._writeStringSize(this.newText)}write(e,t){return ed(e,this.oldPosition,t),t+=4,ed(e,this.newPosition,t),t+=4,t=Xi._writeString(e,this.oldText,t),t=Xi._writeString(e,this.newText,t),t}static read(e,t,i){const n=Zu(e,t);t+=4;const s=Zu(e,t);t+=4;const o=Xi._readString(e,t);t+=Xi._writeStringSize(o);const a=Xi._readString(e,t);return t+=Xi._writeStringSize(a),i.push(new Xi(n,o,s,a)),t}}class Ha extends Ne{constructor(e,t,i,n,s,o,a){super(),this._onDidChangeContent=this._register(new A),this.onDidChangeContent=this._onDidChangeContent.event,this._BOM=t,this._mightContainNonBasicASCII=!o,this._mightContainRTL=n,this._mightContainUnusualLineTerminators=s,this._pieceTree=new iP(e,i,a)}equals(e){return!(e instanceof Ha)||this._BOM!==e._BOM||this.getEOL()!==e.getEOL()?!1:this._pieceTree.equal(e._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const i=e+t,n=this.getPositionAt(e),s=this.getPositionAt(i);return new Qe(n.lineNumber,n.column,s.lineNumber,s.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const i=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,i)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const i=this.getOffsetAt(e.startLineNumber,e.startColumn),n=this.getOffsetAt(e.endLineNumber,e.endColumn);let s=0;const o=this._getEndOfLine(t),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=e.endLineNumber-e.startLineNumber;s=c*l}return n-i+s}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let i=0;const n=e.startLineNumber,s=e.endLineNumber;for(let o=n;o<=s;o++){const a=this.getLineContent(o),c=o===n?e.startColumn-1:0,l=o===s?e.endColumn-1:a.length;for(let u=c;u<l;u++)fd(a.charCodeAt(u))?(i=i+1,u=u+1):i=i+1}return i+=this._getEndOfLine(t).length*(s-n),i}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getCharCode(e){return this._pieceTree.getCharCode(e)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineMinColumn(e){return 1}getLineMaxColumn(e){return this.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){const t=bg(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){const t=M4(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,i){let n=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,o=this._mightContainNonBasicASCII,a=!0,c=[];for(let _=0;_<e.length;_++){const v=e[_];a&&v._isTracked&&(a=!1);const E=v.range;if(v.text){let z=!0;o||(z=!j4(v.text),o=z),!n&&z&&(n=Ub(v.text)),!s&&z&&(s=Wb(v.text))}let k="",S=0,O=0,T=0;if(v.text){let z;[S,O,T,z]=U_(v.text);const ae=this.getEOL();z===0||z===(ae===`\r
`?2:1)?k=v.text:k=v.text.replace(/\r\n|\r|\n/g,ae)}c[_]={sortIndex:_,identifier:v.identifier||null,range:E,rangeOffset:this.getOffsetAt(E.startLineNumber,E.startColumn),rangeLength:this.getValueLengthInRange(E),text:k,eolCount:S,firstLineLength:O,lastLineLength:T,forceMoveMarkers:!!v.forceMoveMarkers,isAutoWhitespaceEdit:v.isAutoWhitespaceEdit||!1}}c.sort(Ha._sortOpsAscending);let l=!1;for(let _=0,v=c.length-1;_<v;_++){const E=c[_].range.getEndPosition(),k=c[_+1].range.getStartPosition();if(k.isBeforeOrEqual(E)){if(k.isBefore(E))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this._reduceOperations(c));const u=i||t?Ha._getInverseEditRanges(c):[],d=[];if(t)for(let _=0;_<c.length;_++){const v=c[_],E=u[_];if(v.isAutoWhitespaceEdit&&v.range.isEmpty())for(let k=E.startLineNumber;k<=E.endLineNumber;k++){let S="";k===E.startLineNumber&&(S=this.getLineContent(v.range.startLineNumber),bg(S)!==-1)||d.push({lineNumber:k,oldContent:S})}}let h=null;if(i){let _=0;h=[];for(let v=0;v<c.length;v++){const E=c[v],k=u[v],S=this.getValueInRange(E.range),O=E.rangeOffset+_;_+=E.text.length-S.length,h[v]={sortIndex:E.sortIndex,identifier:E.identifier,range:k,text:S,textChange:new Xi(E.rangeOffset,S,O,E.text)}}l||h.sort((v,E)=>v.sortIndex-E.sortIndex)}this._mightContainRTL=n,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=o;const g=this._doApplyEdits(c);let b=null;if(t&&d.length>0){d.sort((_,v)=>v.lineNumber-_.lineNumber),b=[];for(let _=0,v=d.length;_<v;_++){const E=d[_].lineNumber;if(_>0&&d[_-1].lineNumber===E)continue;const k=d[_].oldContent,S=this.getLineContent(E);S.length===0||S===k||bg(S)!==-1||b.push(E)}}return this._onDidChangeContent.fire(),new Q9(h,g,b)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const i=e[0].range,n=e[e.length-1].range,s=new Qe(i.startLineNumber,i.startColumn,n.endLineNumber,n.endColumn);let o=i.startLineNumber,a=i.startColumn;const c=[];for(let g=0,b=e.length;g<b;g++){const _=e[g],v=_.range;t=t||_.forceMoveMarkers,c.push(this.getValueInRange(new Qe(o,a,v.startLineNumber,v.startColumn))),_.text.length>0&&c.push(_.text),o=v.endLineNumber,a=v.endColumn}const l=c.join(""),[u,d,h]=U_(l);return{sortIndex:0,identifier:e[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:l,eolCount:u,firstLineLength:d,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(Ha._sortOpsDescending);const t=[];for(let i=0;i<e.length;i++){const n=e[i],s=n.range.startLineNumber,o=n.range.startColumn,a=n.range.endLineNumber,c=n.range.endColumn;if(s===a&&o===c&&n.text.length===0)continue;n.text?(this._pieceTree.delete(n.rangeOffset,n.rangeLength),this._pieceTree.insert(n.rangeOffset,n.text,!0)):this._pieceTree.delete(n.rangeOffset,n.rangeLength);const l=new Qe(s,o,a,c);t.push({range:l,rangeLength:n.rangeLength,text:n.text,rangeOffset:n.rangeOffset,forceMoveMarkers:n.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,i,n){return this._pieceTree.findMatchesLineByLine(e,t,i,n)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(e,t){const i=e.startLineNumber,n=e.startColumn,[s,o,a]=U_(t);let c;if(t.length>0){const l=s+1;l===1?c=new Qe(i,n,i,n+o):c=new Qe(i,n,i+l-1,a+1)}else c=new Qe(i,n,i,n);return c}static _getInverseEditRanges(e){const t=[];let i=0,n=0,s=null;for(let o=0,a=e.length;o<a;o++){const c=e[o];let l,u;s?s.range.endLineNumber===c.range.startLineNumber?(l=i,u=n+(c.range.startColumn-s.range.endColumn)):(l=i+(c.range.startLineNumber-s.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let d;if(c.text.length>0){const h=c.eolCount+1;h===1?d=new Qe(l,u,l,u+c.firstLineLength):d=new Qe(l,u,l+h-1,c.lastLineLength+1)}else d=new Qe(l,u,l,u);i=d.endLineNumber,n=d.endColumn,t.push(d),s=c}return t}static _sortOpsAscending(e,t){const i=Qe.compareRangesUsingEnds(e.range,t.range);return i===0?e.sortIndex-t.sortIndex:i}static _sortOpsDescending(e,t){const i=Qe.compareRangesUsingEnds(e.range,t.range);return i===0?t.sortIndex-e.sortIndex:-i}}class oP{constructor(e,t,i,n,s,o,a,c,l){this._chunks=e,this._bom=t,this._cr=i,this._lf=n,this._crlf=s,this._containsRTL=o,this._containsUnusualLineTerminators=a,this._isBasicASCII=c,this._normalizeEOL=l}_getEOL(e){const t=this._cr+this._lf+this._crlf,i=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this._getEOL(e),i=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let s=0,o=i.length;s<o;s++){const a=i[s].buffer.replace(/\r\n|\r|\n/g,t),c=Vn(a);i[s]=new Gs(a,c)}const n=new Ha(i,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:n,disposable:n}}getFirstLineText(e){return this._chunks[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}}class WC{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&Q4(e)&&(this.BOM=G4,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=Z8(this._tmpLineStarts,e);this.chunks.push(new Gs(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=Ub(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Wb(e)))}finish(e=!0){return this._finish(),new oP(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=Vn(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}}class aP extends Ne{constructor(e,t,i){super(),this._source=e,this._inputTextBuffer=t,this._outputs=i,this._outputTextBuffers=void 0}_getFullModelRange(e){const t=e.getLineCount();return new Qe(1,1,t,this._getLineMaxColumn(e,t))}_getLineMaxColumn(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this._inputTextBuffer){const e=new WC;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:i,disposable:n}=t.create(1);this._inputTextBuffer=i,this._register(n)}return this._inputTextBuffer}get outputTextBuffers(){return this._outputTextBuffers||(this._outputTextBuffers=this._outputs.map(e=>{const t=new WC;t.acceptChunk(e);const i=t.finish(!0),{textBuffer:n,disposable:s}=i.create(1);return this._register(s),n})),this._outputTextBuffers}findInInputs(e){const i=new v2(e,!1,!1,null).parseSearchRequest();if(!i)return[];const n=this._getFullModelRange(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(n,i,!0,5e3)}findInOutputs(e){const i=new v2(e,!1,!1,null).parseSearchRequest();return i?this.outputTextBuffers.map(n=>{const s=n.findMatchesLineByLine(this._getFullModelRange(n),i,!0,5e3);if(s.length!==0)return{textBuffer:n,matches:s}}).filter(n=>!!n):[]}}function BC(r,e){let t=-1;const i=[];let n=[];return r.forEach(o=>{o.range.startLineNumber!==t&&n.length>0&&(i.push([...n]),n=[]),n.push(o),t=o.range.endLineNumber}),n.length>0&&i.push([...n]),i.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(e.getLineContent(u));return new J7(a.join(`
`)+`
`,o.map(u=>new Qe(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}Object.freeze({id:"application",order:100,title:f("vs/workbench/common/configuration","applicationConfigurationTitle","Application"),type:"object"});const cP=Object.freeze({id:"workbench",order:7,title:f("vs/workbench/common/configuration","workbenchConfigurationTitle","Workbench"),type:"object"}),lP=Object.freeze({id:"security",scope:1,title:f("vs/workbench/common/configuration","securityConfigurationTitle","Security"),type:"object",order:7});Object.freeze({id:"problems",title:f("vs/workbench/common/configuration","problemsConfigurationTitle","Problems"),type:"object",order:101});const uP={ConfigurationMigration:"base.contributions.configuration.migration"};class dP{constructor(){this.migrations=[],this._onDidRegisterConfigurationMigrations=new A,this.onDidRegisterConfigurationMigration=this._onDidRegisterConfigurationMigrations.event}registerConfigurationMigrations(e){this.migrations.push(...e)}}const ap=new dP;Jt.add(uP.ConfigurationMigration,ap);let VC=(Ou=class extends Ne{constructor(e,t){super(),this.configurationService=e,this.workspaceService=t,this._register(this.workspaceService.onDidChangeWorkspaceFolders(async i=>{for(const n of i.added)await this.migrateConfigurationsForFolder(n,ap.migrations)})),this.migrateConfigurations(ap.migrations),this._register(ap.onDidRegisterConfigurationMigration(i=>this.migrateConfigurations(i)))}async migrateConfigurations(e){await this.migrateConfigurationsForFolder(void 0,e);for(const t of this.workspaceService.getWorkspace().folders)await this.migrateConfigurationsForFolder(t,e)}async migrateConfigurationsForFolder(e,t){await Promise.all([t.map(i=>this.migrateConfigurationsForFolderAndOverride(i,e==null?void 0:e.uri))])}async migrateConfigurationsForFolderAndOverride(e,t){const i=this.configurationService.inspect(e.key,{resource:t}),n=this.workspaceService.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[s,o]of n){const a=i[s];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.runMigration(e,s,a.value,t,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const d=await this.runMigration(e,s,u,t,l);for(const h of d??[])c.push([h,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],d])=>this.configurationService.updateValue(l,u.value,{resource:t,overrideIdentifiers:d},o)))}}async runMigration(e,t,i,n,s){const o=c=>{var d,h;const u=this.configurationService.inspect(c,{resource:n})[t];if(u)return s?(h=(d=u.overrides)==null?void 0:d.find(({identifiers:g})=>zi(g,s)))==null?void 0:h.value:u.value},a=await e.migrateFn(i,o);return Array.isArray(a)?a:[[e.key,a]]}},Ou.ID="workbench.contrib.configurationMigration",Ou);VC=H([$(0,j1),$(1,zg)],VC);let zC=($u=class extends Ne{constructor(e){super(),this.remoteAgentService=e,this._ready=new Oo,this.ready=this._ready.p,this.create()}async create(){try{await this.doCreate()}finally{this._ready.complete()}}async doCreate(){if(!ui){const t=await this.remoteAgentService.getEnvironment();if((t==null?void 0:t.os)!==1)return}Jt.as(Sf.Configuration).registerConfiguration({...lP,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:f("vs/workbench/common/configuration","security.allowedUNCHosts.patternErrorMessage","UNC host names must not contain backslashes.")},default:[],markdownDescription:f("vs/workbench/common/configuration","security.allowedUNCHosts","A set of UNC host names (without leading or trailing backslash, for example `192.168.0.1` or `my-server`) to allow without user confirmation. If a UNC host is being accessed that is not allowed via this setting or has not been acknowledged via user confirmation, an error will occur and the operation stopped. A restart is required when changing this setting. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:2},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:f("vs/workbench/common/configuration","security.restrictUNCAccess","If enabled, only allows access to UNC host names that are allowed by the `#security.allowedUNCHosts#` setting or after user confirmation. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:2}}})}},$u.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration",$u);zC=H([$(0,x2)],zC),ie("editorResolverService");const hP=Jt.as(Sf.Configuration),fP={...cP,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:f("vs/workbench/services/editor/common/editorResolverService","editor.editorAssociations",'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) to editors (for example `"*.hex": "hexEditor.hexedit"`). These have precedence over the default behavior.'),additionalProperties:{type:"string"}}}};hP.registerConfiguration(fP);var jC;(function(r){r.builtin="builtin",r.option="option",r.exclusive="exclusive",r.default="default"})(jC||(jC={}));function pP(r,e){if(new Set([Y.extension,Y.webviewPanel,Y.vscodeWorkspaceTrust,Y.vscodeSettings]).has(e.scheme))return!1;const n=typeof r=="string"&&r.indexOf(Fe.sep)>=0?`${e.scheme}:${e.path}`:cs(e);return el(typeof r=="string"?r.toLowerCase():r,n.toLowerCase())}const uo=class uo{get activeNotebookEditor(){var e;return(e=this._activeNotebookEditor)==null?void 0:e.apiEditor}get visibleNotebookEditors(){return this._visibleNotebookEditors.map(e=>e.apiEditor)}constructor(e,t,i,n,s,o){this._textDocumentsAndEditors=i,this._textDocuments=n,this._extHostFileSystem=s,this._extHostSearch=o,this._notebookStatusBarItemProviders=new Map,this._documents=new mt,this._editors=new Map,this._onDidChangeActiveNotebookEditor=new A,this.onDidChangeActiveNotebookEditor=this._onDidChangeActiveNotebookEditor.event,this._visibleNotebookEditors=[],this._onDidOpenNotebookDocument=new A,this.onDidOpenNotebookDocument=this._onDidOpenNotebookDocument.event,this._onDidCloseNotebookDocument=new A,this.onDidCloseNotebookDocument=this._onDidCloseNotebookDocument.event,this._onDidChangeVisibleNotebookEditors=new A,this.onDidChangeVisibleNotebookEditors=this._onDidChangeVisibleNotebookEditors.event,this._statusBarCache=new $i("NotebookCellStatusBarCache"),this._handlePool=0,this._notebookSerializer=new Map,this._notebookProxy=e.getProxy(G.MainThreadNotebook),this._notebookDocumentsProxy=e.getProxy(G.MainThreadNotebookDocuments),this._notebookEditorsProxy=e.getProxy(G.MainThreadNotebookEditors),this._commandsConverter=t.converter,t.registerArgumentProcessor({processArgument:a=>{var c;if(a&&a.$mid===13){const l=(c=a.notebookEditor)==null?void 0:c.notebookUri,u=a.cell.handle,d=this._documents.get(l),h=d==null?void 0:d.getCell(u);if(h)return h.apiCell}if(a&&a.$mid===14){const l=a.uri,u=this._documents.get(l);if(u)return u.apiNotebook}return a}}),uo._registerApiCommands(t)}getEditorById(e){const t=this._editors.get(e);if(!t)throw new Error(`unknown text editor: ${e}. known editors: ${[...this._editors.keys()]} `);return t}getIdByEditor(e){for(const[t,i]of this._editors)if(i.apiEditor===e)return t}get notebookDocuments(){return[...this._documents.values()]}getNotebookDocument(e,t){const i=this._documents.get(e);if(!i&&!t)throw new Error(`NO notebook document for '${e}'`);return i}static _convertNotebookRegistrationData(e,t){if(!t)return;const i=t.filenamePattern.map(n=>lf.from(n)).filter(n=>n!==void 0);if(t.filenamePattern&&!i){console.warn(`Notebook content provider view options file name pattern is invalid ${t.filenamePattern}`);return}return{extension:e.identifier,providerDisplayName:e.displayName||e.name,displayName:t.displayName,filenamePattern:i,exclusive:t.exclusive||!1}}registerNotebookCellStatusBarItemProvider(e,t,i){const n=uo._notebookStatusBarItemProviderHandlePool++,s=typeof i.onDidChangeCellStatusBarItems=="function"?uo._notebookStatusBarItemProviderHandlePool++:void 0;this._notebookStatusBarItemProviders.set(n,i),this._notebookProxy.$registerNotebookCellStatusBarItemProvider(n,s,t);let o;return s!==void 0&&(o=i.onDidChangeCellStatusBarItems(a=>this._notebookProxy.$emitCellStatusBarEvent(s))),new Re(()=>{this._notebookStatusBarItemProviders.delete(n),this._notebookProxy.$unregisterNotebookCellStatusBarItemProvider(n,s),o==null||o.dispose()})}async createNotebookDocument(e){const t=await this._notebookDocumentsProxy.$tryCreateNotebook({viewType:e.viewType,content:e.content&&Tr.from(e.content)});return y.revive(t)}async openNotebookDocument(e){const t=this._documents.get(e);if(t)return t.apiNotebook;const i=await this._notebookDocumentsProxy.$tryOpenNotebook(e),n=this._documents.get(y.revive(i));return Ro(n==null?void 0:n.apiNotebook)}async showNotebookDocument(e,t){var o;y.isUri(e)&&(e=await this.openNotebookDocument(e));let i;typeof t=="object"?i={position:yt.from(t.viewColumn),preserveFocus:t.preserveFocus,selections:t.selections&&t.selections.map(hn.from),pinned:typeof t.preview=="boolean"?!t.preview:void 0}:i={preserveFocus:!1};const n=await this._notebookEditorsProxy.$tryShowNotebookDocument(e.uri,e.notebookType,i),s=n&&((o=this._editors.get(n))==null?void 0:o.apiEditor);if(s)return s;throw n?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(e,t,i,n){const s=this._notebookStatusBarItemProviders.get(e),o=y.revive(t),a=this._documents.get(o);if(!a||!s)return;const c=a.getCellFromIndex(i);if(!c)return;const l=await s.provideCellStatusBarItems(c.apiCell,n);if(!l)return;const u=new Pe,d=this._statusBarCache.add([u]),g=(Array.isArray(l)?l:[l]).map(b=>E1.from(b,this._commandsConverter,u));return{cacheId:d,items:g}}$releaseNotebookCellStatusBarItems(e){this._statusBarCache.delete(e)}registerNotebookSerializer(e,t,i,n,s){if(hd(t))throw new Error("viewType cannot be empty or just whitespace");const o=this._handlePool++;return this._notebookSerializer.set(o,{viewType:t,serializer:i,options:n}),this._notebookProxy.$registerNotebookSerializer(o,{id:e.identifier,location:e.extensionLocation},t,D1.from(n),uo._convertNotebookRegistrationData(e,s)),Ce(()=>{this._notebookProxy.$unregisterNotebookSerializer(o)})}async $dataToNotebook(e,t,i){const n=this._notebookSerializer.get(e);if(!n)throw new Error("NO serializer found");const s=await n.serializer.deserializeNotebook(t.buffer,i);return new nn(Tr.from(s))}async $notebookToData(e,t,i){const n=this._notebookSerializer.get(e);if(!n)throw new Error("NO serializer found");const s=await n.serializer.serializeNotebook(Tr.to(t.value),i);return ve.wrap(s)}async $saveNotebook(e,t,i,n,s){var b;const o=y.revive(t),a=this._notebookSerializer.get(e);if(!a)throw new Error("NO serializer found");const c=this._documents.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==i)throw new Error("Document version mismatch");if(!this._extHostFileSystem.value.isWritableFileSystem(o.scheme))throw new Sy(f("vs/workbench/api/common/extHostNotebook","err.readonly","Unable to modify read-only file '{0}'",this._resourceForError(o)),6);await this._validateWriteFile(o,n);const l={metadata:k0(c.apiNotebook.metadata,_=>{var v;return!(((v=a.options)==null?void 0:v.transientDocumentMetadata)??{})[_]}),cells:[]};for(const _ of c.apiNotebook.getCells()){const v=new kh(_.kind,_.document.getText(),_.document.languageId,_.mime,(b=a.options)!=null&&b.transientOutputs?[]:[..._.outputs],_.metadata,_.executionSummary);v.metadata=k0(_.metadata,E=>{var k;return!(((k=a.options)==null?void 0:k.transientCellMetadata)??{})[E]}),l.cells.push(v)}const u=await a.serializer.serializeNotebook(l,s);await this._extHostFileSystem.value.writeFile(o,u);const d=this._extHostFileSystem.getFileSystemProviderExtUri(o.scheme),h=await this._extHostFileSystem.value.stat(o);return{name:d.basename(o),isFile:(h.type&vs.File)!==0,isDirectory:(h.type&vs.Directory)!==0,isSymbolicLink:(h.type&vs.SymbolicLink)!==0,mtime:h.mtime,ctime:h.ctime,size:h.size,readonly:!!((h.permissions??0)&zo.Readonly)||!this._extHostFileSystem.value.isWritableFileSystem(o.scheme),locked:!!((h.permissions??0)&zo.Locked),etag:ky({mtime:h.mtime,size:h.size}),children:void 0}}async $searchInNotebooks(e,t,i,n,s){var h;const o=(h=this._notebookSerializer.get(e))==null?void 0:h.serializer;if(!o)return{limitHit:!1,results:[]};const a=new Zw;await(async(g,b,_)=>{await Promise.all(g.map(async v=>await Promise.all(v.filenamePatterns.map(E=>{const k={_reason:_._reason,folderQueries:_.folderQueries,includePattern:_.includePattern,excludePattern:_.excludePattern,maxResults:_.maxResults,type:1,filePattern:E};return this._extHostSearch.doInternalFileSearchWithCustomCallback(k,b,S=>{S.forEach(O=>{a.has(O)||n.some(z=>v.isFromSettings&&!z.isFromSettings?!1:z.filenamePatterns.some(ae=>pP(ae,O)))||a.add(O)})}).catch(S=>{if(S.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw S})}))))})(i,s,t);const l=new mt;let u=!1;const d=Array.from(a).map(async g=>{const b=[];try{if(s.isCancellationRequested)return;if(t.maxResults&&[...l.values()].reduce((k,S)=>k+S.cellResults.length,0)>t.maxResults){u=!0;return}const _=[],v=this._documents.get(g);if(v)v.apiNotebook.getCells().forEach(S=>_.push({input:S.document.getText(),outputs:S.outputs.flatMap(O=>O.items.map(T=>T.data.toString()))}));else{const k=await this._extHostFileSystem.value.readFile(g),S=ve.fromString(k.toString()),O=await o.deserializeNotebook(S.buffer,s);if(s.isCancellationRequested)return;Tr.from(O).cells.forEach(z=>_.push({input:z.source,outputs:z.outputs.flatMap(ae=>ae.items.map(ee=>ee.valueBytes.toString()))}))}if(s.isCancellationRequested)return;_.forEach((k,S)=>{const O=t.contentPattern.pattern,T=new aP(k.input,void 0,k.outputs),z=T.findInInputs(O),ae=T.findInOutputs(O),ee=ae.flatMap(j=>BC(j.matches,j.textBuffer)).map((j,Be)=>(j.webviewIndex=Be,j));if(z.length>0||ae.length>0){const j={index:S,contentResults:BC(z,T.inputTextBuffer),webviewResults:ee};b.push(j)}});const E={resource:g,cellResults:b};l.set(g,E);return}catch{return}});return await Promise.all(d),{limitHit:u,results:[...l.values()]}}async _validateWriteFile(e,t){const i=await this._extHostFileSystem.value.stat(e);if(typeof(t==null?void 0:t.mtime)=="number"&&typeof t.etag=="string"&&t.etag!==O5&&typeof i.mtime=="number"&&typeof i.size=="number"&&t.mtime<i.mtime&&t.etag!==ky({mtime:t.mtime,size:i.size}))throw new Sy(f("vs/workbench/api/common/extHostNotebook","fileModifiedError","File Modified Since"),3,t)}_resourceForError(e){return e.scheme===Y.file?e.fsPath:e.toString()}_createExtHostEditor(e,t,i){if(this._editors.has(t))throw new Error(`editor with id ALREADY EXSIST: ${t}`);const n=new uu(t,this._notebookEditorsProxy,e,i.visibleRanges.map(hn.to),i.selections.map(hn.to),typeof i.viewColumn=="number"?yt.to(i.viewColumn):void 0);this._editors.set(t,n)}$acceptDocumentAndEditorsDelta(e){var t,i,n;if(e.value.removedDocuments)for(const s of e.value.removedDocuments){const o=y.revive(s),a=this._documents.get(o);a&&(a.dispose(),this._documents.delete(o),this._textDocumentsAndEditors.$acceptDocumentsAndEditorsDelta({removedDocuments:a.apiNotebook.getCells().map(c=>c.document.uri)}),this._onDidCloseNotebookDocument.fire(a.apiNotebook));for(const c of this._editors.values())c.notebookData.uri.toString()===o.toString()&&this._editors.delete(c.id)}if(e.value.addedDocuments){const s=[];for(const o of e.value.addedDocuments){const a=y.revive(o.uri);if(this._documents.has(a))throw new Error(`adding EXISTING notebook ${a} `);const c=new O_(this._notebookDocumentsProxy,this._textDocumentsAndEditors,this._textDocuments,a,o);s.push(...o.cells.map(l=>L_.asModelAddData(l))),(t=this._documents.get(a))==null||t.dispose(),this._documents.set(a,c),this._textDocumentsAndEditors.$acceptDocumentsAndEditorsDelta({addedDocuments:s}),this._onDidOpenNotebookDocument.fire(c.apiNotebook)}}if(e.value.addedEditors)for(const s of e.value.addedEditors){if(this._editors.has(s.id))return;const o=y.revive(s.documentUri),a=this._documents.get(o);a&&this._createExtHostEditor(a,s.id,s)}if(e.value.removedEditors)for(const s of e.value.removedEditors){const o=this._editors.get(s);o&&(this._editors.delete(s),((i=this._activeNotebookEditor)==null?void 0:i.id)===o.id&&(this._activeNotebookEditor=void 0))}if(e.value.visibleEditors){this._visibleNotebookEditors=e.value.visibleEditors.map(o=>this._editors.get(o)).filter(o=>!!o);const s=new Set;this._visibleNotebookEditors.forEach(o=>s.add(o.id));for(const o of this._editors.values()){const a=s.has(o.id);o._acceptVisibility(a)}this._visibleNotebookEditors=[...this._editors.values()].map(o=>o).filter(o=>o.visible),this._onDidChangeVisibleNotebookEditors.fire(this.visibleNotebookEditors)}e.value.newActiveEditor===null?this._activeNotebookEditor=void 0:e.value.newActiveEditor&&(this._editors.get(e.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${e.value.newActiveEditor}`),this._activeNotebookEditor=this._editors.get(e.value.newActiveEditor)),e.value.newActiveEditor!==void 0&&this._onDidChangeActiveNotebookEditor.fire((n=this._activeNotebookEditor)==null?void 0:n.apiEditor)}static _registerApiCommands(e){const t=B.String.with("notebookType","A notebook type"),i=new _e("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[t,new B("data","Bytes to convert to data",s=>s instanceof Uint8Array,s=>ve.wrap(s))],new me("Notebook Data",s=>Tr.to(s.value))),n=new _e("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[t,new B("NotebookData","Notebook data to convert to bytes",s=>!0,s=>new nn(Tr.from(s)))],new me("Bytes",s=>s.buffer));e.registerApiCommand(i),e.registerApiCommand(n)}};uo._notebookStatusBarItemProviderHandlePool=0;let B_=uo;class gP{constructor(e,t,i,n={timeout:1500,errors:3}){this._logService=e,this._notebooksAndEditors=t,this._mainThreadBulkEdits=i,this._thresholds=n,this._onWillSaveNotebookDocumentEvent=new Ec}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,i,n)=>{const s=function(a){t.call(i,a)};return s.extension=e,this._onWillSaveNotebookDocumentEvent.event(s,void 0,n)}}async $participateInSave(e,t,i){const n=y.revive(e),s=this._notebooksAndEditors.getNotebookDocument(n);if(!s)throw new Error("Unable to resolve notebook document");const o=[];if(await this._onWillSaveNotebookDocumentEvent.fireAsync({notebook:s.apiNotebook,reason:sf.to(t)},i,async(c,l)=>{const u=Date.now(),d=await await Promise.resolve(c);Date.now()-u>this._thresholds.timeout&&this._logService.warn("onWillSaveNotebookDocument-listener from extension",l.extension.identifier),!i.isCancellationRequested&&d&&(d instanceof Cr?o.push(d):this._logService.warn("onWillSaveNotebookDocument-listener from extension",l.extension.identifier,"ignored due to invalid data"))}),i.isCancellationRequested)return!1;if(o.length===0)return!0;const a={edits:[]};for(const c of o){const{edits:l}=Xt.from(c);a.edits=a.edits.concat(l)}return this._mainThreadBulkEdits.$tryApplyWorkspaceEdit(a)}}class mP{constructor(e){this._notebooksAndEditors=e,this._onDidSaveNotebookDocument=new A,this.onDidSaveNotebookDocument=this._onDidSaveNotebookDocument.event,this._onDidChangeNotebookDocument=new A,this.onDidChangeNotebookDocument=this._onDidChangeNotebookDocument.event}$acceptModelChanged(e,t,i,n){const o=this._notebooksAndEditors.getNotebookDocument(y.revive(e)).acceptModelChanged(t.value,i,n);this._onDidChangeNotebookDocument.fire(o)}$acceptDirtyStateChanged(e,t){this._notebooksAndEditors.getNotebookDocument(y.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this._notebooksAndEditors.getNotebookDocument(y.revive(e));this._onDidSaveNotebookDocument.fire(t.apiNotebook)}}let V_=class{constructor(e,t){this._logService=e,this._notebooksAndEditors=t,this._onDidChangeNotebookEditorSelection=new A,this._onDidChangeNotebookEditorVisibleRanges=new A,this.onDidChangeNotebookEditorSelection=this._onDidChangeNotebookEditorSelection.event,this.onDidChangeNotebookEditorVisibleRanges=this._onDidChangeNotebookEditorVisibleRanges.event}$acceptEditorPropertiesChanged(e,t){this._logService.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",e,t);const i=this._notebooksAndEditors.getEditorById(e);t.visibleRanges&&i._acceptVisibleRanges(t.visibleRanges.ranges.map(hn.to)),t.selections&&i._acceptSelections(t.selections.selections.map(hn.to)),t.visibleRanges&&this._onDidChangeNotebookEditorVisibleRanges.fire({notebookEditor:i.apiEditor,visibleRanges:i.apiEditor.visibleRanges}),t.selections&&this._onDidChangeNotebookEditorSelection.fire(Object.freeze({notebookEditor:i.apiEditor,selections:i.apiEditor.selections}))}$acceptEditorViewColumns(e){for(const t in e)this._notebooksAndEditors.getEditorById(t)._acceptViewColumn(yt.to(e[t]))}};V_=H([$(0,Je)],V_);var Ua;(function(r){r[r.Output=1]="Output",r[r.OutputItems=2]="OutputItems",r[r.ExecutionState=3]="ExecutionState"})(Ua||(Ua={})),ie("INotebookExecutionService");const vP=100;ie("INotebookKernelService"),ie("INotebookKernelHistoryService");let z_=class{constructor(e,t,i,n,s){this._initData=t,this._extHostNotebook=i,this._commands=n,this._logService=s,this._activeExecutions=new mt,this._activeNotebookExecutions=new mt,this._kernelDetectionTask=new Map,this._kernelDetectionTaskHandlePool=0,this._kernelSourceActionProviders=new Map,this._kernelSourceActionProviderHandlePool=0,this._kernelData=new Map,this._handlePool=0,this._onDidChangeCellExecutionState=new A,this.onDidChangeNotebookCellExecutionState=this._onDidChangeCellExecutionState.event,this.id=0,this.variableStore={},this._proxy=e.getProxy(G.MainThreadNotebookKernels);const o=new _e("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new B("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this._extHostNotebook.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this._extHostNotebook.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return{notebookEditorId:l}}return c})],me.Void),a=new _e("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[B.Uri],new me("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this._commands.registerApiCommand(o),this._commands.registerApiCommand(a)}createNotebookController(e,t,i,n,s,o){for(const T of this._kernelData.values())if(T.controller.id===t&&Xe.equals(e.identifier,T.extensionId))throw new Error(`notebook controller with id '${t}' ALREADY exist`);const a=this._handlePool++,c=this;this._logService.trace(`NotebookController[${a}], CREATED by ${e.identifier.value}, ${t}`);const l=()=>console.warn(`NO execute handler from notebook controller '${g.id}' of extension: '${e.identifier}'`);let u=!1;const d=new A,h=new A,g={id:cp(e.identifier,t),notebookType:i,extensionId:e.identifier,extensionLocation:e.extensionLocation,label:n||e.identifier.value,preloads:o?o.map(uf.from):[]};let b=s??l,_,v;this._proxy.$addKernel(a,g).catch(T=>{console.log(T),u=!0});let E=0;const k=()=>{if(u)return;const T=++E;Promise.resolve().then(()=>{T===E&&this._proxy.$updateKernel(a,g)})},S=new mt,O={get id(){return t},get notebookType(){return g.notebookType},onDidChangeSelectedNotebooks:d.event,get label(){return g.label},set label(T){g.label=T??e.displayName??e.name,k()},get detail(){return g.detail??""},set detail(T){g.detail=T,k()},get description(){return g.description??""},set description(T){g.description=T,k()},get supportedLanguages(){return g.supportedLanguages},set supportedLanguages(T){g.supportedLanguages=T,k()},get supportsExecutionOrder(){return g.supportsExecutionOrder??!1},set supportsExecutionOrder(T){g.supportsExecutionOrder=T,k()},get rendererScripts(){return g.preloads?g.preloads.map(uf.to):[]},get executeHandler(){return b},set executeHandler(T){b=T??l},get interruptHandler(){return _},set interruptHandler(T){_=T,g.supportsInterrupt=!!T,k()},set variableProvider(T){M(e,"notebookVariableProvider"),v=T,g.hasVariableProvider=!!T,T==null||T.onDidChangeVariables(z=>c._proxy.$variablesUpdated(z.uri)),k()},get variableProvider(){return v},createNotebookCellExecution(T){if(u)throw new Error("notebook controller is DISPOSED");if(!S.has(T.notebook.uri))throw c._logService.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(S.keys()).map(z=>z.toString())),new Error(`notebook controller is NOT associated to notebook: ${T.notebook.uri.toString()}`);return c._createNotebookCellExecution(T,cp(e.identifier,this.id))},createNotebookExecution(T){if(M(e,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!S.has(T.uri))throw c._logService.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(S.keys()).map(z=>z.toString())),new Error(`notebook controller is NOT associated to notebook: ${T.uri.toString()}`);return c._createNotebookExecution(T,cp(e.identifier,this.id))},dispose:()=>{u||(this._logService.trace(`NotebookController[${a}], DISPOSED`),u=!0,this._kernelData.delete(a),d.dispose(),h.dispose(),this._proxy.$removeKernel(a))},updateNotebookAffinity(T,z){z===Th.Hidden&&M(e,"notebookControllerAffinityHidden"),c._proxy.$updateNotebookPriority(a,T.uri,z)},onDidReceiveMessage:h.event,postMessage(T,z){return M(e,"notebookMessaging"),c._proxy.$postMessage(a,z&&c._extHostNotebook.getIdByEditor(z),T)},asWebviewUri(T){return M(e,"notebookMessaging"),nu(T,c._initData.remote)}};return this._kernelData.set(a,{extensionId:e.identifier,controller:O,onDidReceiveMessage:h,onDidChangeSelection:d,associatedNotebooks:S}),O}getIdByController(e){for(const[t,i]of this._kernelData)if(i.controller===e)return cp(i.extensionId,e.id);return null}createNotebookControllerDetectionTask(e,t){const i=this._kernelDetectionTaskHandlePool++,n=this;this._logService.trace(`NotebookControllerDetectionTask[${i}], CREATED by ${e.identifier.value}`),this._proxy.$addKernelDetectionTask(i,t);const s={dispose:()=>{this._kernelDetectionTask.delete(i),n._proxy.$removeKernelDetectionTask(i)}};return this._kernelDetectionTask.set(i,s),s}registerKernelSourceActionProvider(e,t,i){const n=this._kernelSourceActionProviderHandlePool++,s=typeof i.onDidChangeNotebookKernelSourceActions=="function"?n:void 0,o=this;this._kernelSourceActionProviders.set(n,i),this._logService.trace(`NotebookKernelSourceActionProvider[${n}], CREATED by ${e.identifier.value}`),this._proxy.$addKernelSourceActionProvider(n,n,t);let a;return s!==void 0&&(a=i.onDidChangeNotebookKernelSourceActions(c=>this._proxy.$emitNotebookKernelSourceActionsChangeEvent(s))),{dispose:()=>{this._kernelSourceActionProviders.delete(n),o._proxy.$removeKernelSourceActionProvider(n,n),a==null||a.dispose()}}}async $provideKernelSourceActions(e,t){const i=this._kernelSourceActionProviders.get(e);if(i){const n=new Pe;return(await i.provideNotebookKernelSourceActions(t)??[]).map(o=>k1.from(o,this._commands.converter,n))}return[]}$acceptNotebookAssociation(e,t,i){const n=this._kernelData.get(e);if(n){const s=this._extHostNotebook.getNotebookDocument(y.revive(t));i?n.associatedNotebooks.set(s.uri,!0):n.associatedNotebooks.delete(s.uri),this._logService.trace(`NotebookController[${e}] ASSOCIATE notebook`,s.uri.toString(),i),n.onDidChangeSelection.fire({selected:i,notebook:s.apiNotebook})}}async $executeCells(e,t,i){const n=this._kernelData.get(e);if(!n)return;const s=this._extHostNotebook.getNotebookDocument(y.revive(t)),o=[];for(const a of i){const c=s.getCell(a);c&&o.push(c.apiCell)}try{this._logService.trace(`NotebookController[${e}] EXECUTE cells`,s.uri.toString(),o.length),await n.controller.executeHandler.call(n.controller,o,s.apiNotebook,n.controller)}catch(a){this._logService.error(`NotebookController[${e}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(e,t,i){var o;const n=this._kernelData.get(e);if(!n)return;const s=this._extHostNotebook.getNotebookDocument(y.revive(t));if(n.controller.interruptHandler)await n.controller.interruptHandler.call(n.controller,s.apiNotebook);else for(const a of i){const c=s.getCell(a);c&&((o=this._activeExecutions.get(c.uri))==null||o.cancel())}if(n.controller.interruptHandler){const a=this._activeNotebookExecutions.get(s.uri);i.length&&Array.isArray(a)&&a.length&&a.forEach(c=>c.dispose())}}async $provideVariables(e,t,i,n,s,o,a){const c=this._kernelData.get(e);if(!c)return;const l=this._extHostNotebook.getNotebookDocument(y.revive(i)),u=c.controller.variableProvider;if(!u)return;let d;if(n!==void 0){if(d=this.variableStore[n],!d)return}else this.variableStore={};const h=s==="named"?Cl.Named:Cl.Indexed,g=u.provideVariables(l.apiNotebook,d,h,o,a);let b=0;for await(const _ of g){if(a.isCancellationRequested)return;const v={id:this.id++,name:_.variable.name,value:_.variable.value,type:_.variable.type,interfaces:_.variable.interfaces,language:_.variable.language,expression:_.variable.expression,hasNamedChildren:_.hasNamedChildren,indexedChildrenCount:_.indexedChildrenCount,extensionId:c.extensionId.value};if(this.variableStore[v.id]=_.variable,this._proxy.$receiveVariable(t,v),b++>=vP)return}}$acceptKernelMessageFromRenderer(e,t,i){const n=this._kernelData.get(e);if(!n)return;const s=this._extHostNotebook.getEditorById(t);n.onDidReceiveMessage.fire(Object.freeze({editor:s.apiEditor,message:i}))}$cellExecutionChanged(e,t,i){const s=this._extHostNotebook.getNotebookDocument(y.revive(e)).getCell(t);if(s){const o=i?S1.to(i):la.Idle;o!==void 0&&this._onDidChangeCellExecutionState.fire({cell:s.apiCell,state:o})}}_createNotebookCellExecution(e,t){if(e.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const n=this._extHostNotebook.getNotebookDocument(e.notebook.uri).getCellFromApiCell(e);if(!n)throw new Error("invalid cell");if(this._activeExecutions.has(n.uri))throw new Error(`duplicate execution for ${n.uri}`);const s=new j_(t,n,this._proxy);this._activeExecutions.set(n.uri,s);const o=s.onDidChangeState(()=>{s.state===Yi.Resolved&&(s.dispose(),o.dispose(),this._activeExecutions.delete(n.uri))});return s.asApiObject()}_createNotebookExecution(e,t){const i=this._extHostNotebook.getNotebookDocument(e.uri),n=e.getCells().find(a=>{const c=i.getCellFromApiCell(a);return c&&this._activeExecutions.has(c.uri)});if(n)throw new Error(`duplicate cell execution for ${n.document.uri}`);if(this._activeNotebookExecutions.has(i.uri))throw new Error(`duplicate notebook execution for ${i.uri}`);const s=new q_(t,i,this._proxy),o=s.onDidChangeState(()=>{s.state===zn.Resolved&&(s.dispose(),o.dispose(),this._activeNotebookExecutions.delete(i.uri))});return this._activeNotebookExecutions.set(i.uri,[s,o]),s.asApiObject()}};z_=H([$(4,Je)],z_);var Yi;(function(r){r[r.Init=0]="Init",r[r.Started=1]="Started",r[r.Resolved=2]="Resolved"})(Yi||(Yi={}));const Np=class Np extends Ne{get state(){return this._state}constructor(e,t,i){super(),this._cell=t,this._proxy=i,this._handle=Np.HANDLE++,this._onDidChangeState=new A,this.onDidChangeState=this._onDidChangeState.event,this._state=Yi.Init,this._tokenSource=this._register(new kt),this._collector=new _P(10,n=>this.update(n)),this._executionOrder=t.internalMetadata.executionOrder,this._proxy.$createExecution(this._handle,e,this._cell.notebook.uri,this._cell.handle)}cancel(){this._tokenSource.cancel()}async updateSoon(e){await this._collector.addItem(e)}async update(e){const t=Array.isArray(e)?e:[e];return this._proxy.$updateExecution(this._handle,new nn(t))}verifyStateForOutput(){if(this._state===Yi.Init)throw new Error("Must call start before modifying cell output");if(this._state===Yi.Resolved)throw new Error("Cannot modify cell output after calling resolve")}cellIndexToHandle(e){let t=this._cell;if(e&&(t=this._cell.notebook.getCellFromApiCell(e)),!t)throw new Error("INVALID cell");return t.handle}validateAndConvertOutputs(e){return e.map(t=>{const i=Dh.ensureUniqueMimeTypes(t.items,!0);return i===t.items?Ar.from(t):Ar.from({items:i,id:t.id,metadata:t.metadata})})}async updateOutputs(e,t,i){const n=this.cellIndexToHandle(t),s=this.validateAndConvertOutputs(ko(e));return this.updateSoon({editType:Ua.Output,cellHandle:n,append:i,outputs:s})}async updateOutputItems(e,t,i){return e=Dh.ensureUniqueMimeTypes(ko(e),!0),this.updateSoon({editType:Ua.OutputItems,items:e.map(ya.from),outputId:t.id,append:i})}asApiObject(){const e=this;return Object.freeze({get token(){return e._tokenSource.token},get cell(){return e._cell.apiCell},get executionOrder(){return e._executionOrder},set executionOrder(i){e._executionOrder=i,e.update([{editType:Ua.ExecutionState,executionOrder:e._executionOrder}])},start(i){if(e._state===Yi.Resolved||e._state===Yi.Started)throw new Error("Cannot call start again");e._state=Yi.Started,e._onDidChangeState.fire(),e.update({editType:Ua.ExecutionState,runStartTime:i})},end(i,n,s){if(e._state===Yi.Resolved)throw new Error("Cannot call resolve twice");e._state=Yi.Resolved,e._onDidChangeState.fire(),e._collector.flush();const o=s?{message:s.message,stack:s.stack,location:s!=null&&s.location?{startLineNumber:s.location.start.line,startColumn:s.location.start.character,endLineNumber:s.location.end.line,endColumn:s.location.end.character}:void 0,uri:s.uri}:void 0;e._proxy.$completeExecution(e._handle,new nn({runEndTime:n,lastRunSuccess:i,error:o}))},clearOutput(i){return e.verifyStateForOutput(),e.updateOutputs([],i,!1)},appendOutput(i,n){return e.verifyStateForOutput(),e.updateOutputs(i,n,!0)},replaceOutput(i,n){return e.verifyStateForOutput(),e.updateOutputs(i,n,!1)},appendOutputItems(i,n){return e.verifyStateForOutput(),e.updateOutputItems(i,n,!0)},replaceOutputItems(i,n){return e.verifyStateForOutput(),e.updateOutputItems(i,n,!1)}})}};Np.HANDLE=0;let j_=Np;var zn;(function(r){r[r.Init=0]="Init",r[r.Started=1]="Started",r[r.Resolved=2]="Resolved"})(zn||(zn={}));const Mp=class Mp extends Ne{get state(){return this._state}constructor(e,t,i){super(),this._notebook=t,this._proxy=i,this._handle=Mp.HANDLE++,this._onDidChangeState=new A,this.onDidChangeState=this._onDidChangeState.event,this._state=zn.Init,this._tokenSource=this._register(new kt),this._proxy.$createNotebookExecution(this._handle,e,this._notebook.uri)}cancel(){this._tokenSource.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this._state===zn.Resolved||this._state===zn.Started)throw new Error("Cannot call start again");this._state=zn.Started,this._onDidChangeState.fire(),this._proxy.$beginNotebookExecution(this._handle)},end:()=>{if(this._state===zn.Resolved)throw new Error("Cannot call resolve twice");this._state=zn.Resolved,this._onDidChangeState.fire(),this._proxy.$completeNotebookExecution(this._handle)}})}};Mp.HANDLE=0;let q_=Mp;class _P{constructor(e,t){this.delay=e,this.callback=t,this.batch=[],this.startedTimer=Date.now()}addItem(e){return this.batch.push(e),this.currentDeferred||(this.currentDeferred=new Oo,this.startedTimer=Date.now(),mr(this.delay).then(()=>this.flush())),Date.now()-this.startedTimer>this.delay?this.flush():this.currentDeferred.p}flush(){if(this.batch.length===0||!this.currentDeferred)return Promise.resolve();const e=this.currentDeferred;this.currentDeferred=void 0;const t=this.batch;return this.batch=[],this.callback(t).finally(()=>e.complete())}}function cp(r,e){return`${r.value}/${e}`}class wP{constructor(e,t){this._extHostNotebook=t,this._rendererMessageEmitters=new Map,this.proxy=e.getProxy(G.MainThreadNotebookRenderers)}$postRendererMessage(e,t,i){var s;const n=this._extHostNotebook.getEditorById(e);(s=this._rendererMessageEmitters.get(t))==null||s.fire({editor:n.apiEditor,message:i})}createRendererMessaging(e,t){var n,s;if(!((s=(n=e.contributes)==null?void 0:n.notebookRenderer)!=null&&s.some(o=>o.id===t)))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(o,a,c)=>this.getOrCreateEmitterFor(t).event(o,a,c),postMessage:(o,a)=>{uu.apiEditorsToExtHost.has(o)&&([o,a]=[a,o]);const c=a&&uu.apiEditorsToExtHost.get(a);return this.proxy.$postMessage(c==null?void 0:c.id,t,o)}}}getOrCreateEmitterFor(e){let t=this._rendererMessageEmitters.get(e);return t||(t=new A({onDidRemoveLastListener:()=>{t==null||t.dispose(),this._rendererMessageEmitters.delete(e)}}),this._rendererMessageEmitters.set(e,t),t)}}class bP{constructor(e){this.handlers=new Map,this.proxy=e.getProxy(G.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,i){if(M(e,"profileContentHandlers"),this.handlers.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.handlers.set(t,i),this.proxy.$registerProfileContentHandler(t,i.name,i.description,e.identifier.value),Ce(()=>{this.handlers.delete(t),this.proxy.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,i,n){const s=this.handlers.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,i,n)}async $readProfile(e,t,i){const n=this.handlers.get(e);if(!n)throw new Error(`Unknown handler with id: ${e}`);return n.readProfile(Oe(t)?t:y.revive(t),i)}}function qC(r){return(e,t,i)=>{let n=null,s=null;if(typeof i.value=="function"?(n="value",s=i.value):typeof i.get=="function"&&(n="get",s=i.get),!s)throw new Error("not supported");i[n]=r(s,t)}}function GC(r,e,t){return qC((i,n)=>{const s=`$debounce$${n}`,o=`$debounce$result$${n}`;return function(...a){this[o]||(this[o]=t?t():void 0),clearTimeout(this[s]),e&&(this[o]=e(this[o],...a),a=[this[o]]),this[s]=setTimeout(()=>{i.apply(this,a),this[o]=t?t():void 0},r)}})}function yP(r,e,t){return qC((i,n)=>{const s=`$throttle$timer$${n}`,o=`$throttle$result$${n}`,a=`$throttle$lastRun$${n}`,c=`$throttle$pending$${n}`;return function(...l){if(this[o]||(this[o]=t?t():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),e&&(this[o]=e(this[o],...l)),this[c])return;const u=this[a]+r;u<=Date.now()?(this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=t?t():void 0):(this[c]=!0,this[s]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),i.apply(this,[this[o]]),this[o]=t?t():void 0},u-Date.now()))}})}class xP{constructor(e){this._handles=0,this._mapHandleToCancellationSource=new Map,this._proxy=e}async withProgress(e,t,i){const n=this._handles++,{title:s,location:o,cancellable:a}=t,c={label:e.displayName||e.name,id:e.identifier.value};return this._proxy.$startProgress(n,{location:x1.from(o),title:s,source:c,cancellable:a},e.isUnderDevelopment?void 0:e.identifier.value).catch(Xp),this._withProgress(n,i,!!a)}_withProgress(e,t,i){let n;i&&(n=new kt,this._mapHandleToCancellationSource.set(e,n));const s=a=>{this._proxy.$progressEnd(a),this._mapHandleToCancellationSource.delete(a),n==null||n.dispose()};let o;try{o=t(new G_(this._proxy,e),i&&n?n.token:wt.None)}catch(a){throw s(e),a}return o.then(a=>s(e),a=>s(e)),o}$acceptProgressCanceled(e){const t=this._mapHandleToCancellationSource.get(e);t&&(t.cancel(),this._mapHandleToCancellationSource.delete(e))}}function CP(r,e){return r.message=e.message,typeof e.increment=="number"&&(typeof r.increment=="number"?r.increment+=e.increment:r.increment=e.increment),r}class G_ extends Af{constructor(e,t){super(i=>this.throttledReport(i)),this._proxy=e,this._handle=t}throttledReport(e){this._proxy.$progressReport(this._handle,e)}}G_.__decorator=H([yP(100,(r,e)=>CP(r,e),()=>Object.create(null))],G_.prototype,"throttledReport",null);const Fp=class Fp{constructor(e,t){this.uriTransformer=t,this.providers=new Map,this.proxy=e.getProxy(G.MainThreadQuickDiff)}$provideOriginalResource(e,t,i){const n=y.revive(t),s=this.providers.get(e);return s?Ht(()=>s.provideOriginalResource(n,i)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(e,t,i,n){const s=Fp.handlePool++;return this.providers.set(s,t),this.proxy.$registerQuickDiffProvider(s,fa.from(e,this.uriTransformer),i,n),{dispose:()=>{this.proxy.$unregisterQuickDiffProvider(s),this.providers.delete(s)}}}};Fp.handlePool=0;let Q_=Fp;function SP(r,e,t){const i=r.getProxy(G.MainThreadQuickOpen);class n{constructor(b,_){this._sessions=new Map,this._instances=0,this._workspace=b,this._commands=_}showQuickPick(b,_,v,E=wt.None){this._onDidSelectItem=void 0;const k=Promise.resolve(_),S=++this._instances,O=i.$show(S,{title:v==null?void 0:v.title,placeHolder:v==null?void 0:v.placeHolder,matchOnDescription:v==null?void 0:v.matchOnDescription,matchOnDetail:v==null?void 0:v.matchOnDetail,ignoreFocusLost:v==null?void 0:v.ignoreFocusOut,canPickMany:v==null?void 0:v.canPickMany},E),T={},z=O.then(()=>T);return Promise.race([z,k]).then(ae=>{if(ae===T)return;const ee=At(b,"quickPickItemTooltip");return k.then(j=>{const Be=[];for(let W=0;W<j.length;W++){const U=j[W];if(typeof U=="string")Be.push({label:U,handle:W});else if(U.kind===xl.Separator)Be.push({type:"separator",label:U.label});else{U.tooltip&&!ee&&console.warn(`Extension '${b.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${b.identifier.value}`);const q=U.iconPath?l(U.iconPath):void 0;Be.push({label:U.label,iconPath:q==null?void 0:q.iconPath,iconClass:q==null?void 0:q.iconClass,description:U.description,detail:U.detail,picked:U.picked,alwaysShow:U.alwaysShow,tooltip:ee?Le.fromStrict(U.tooltip):void 0,handle:W})}}return v&&typeof v.onDidSelectItem=="function"&&(this._onDidSelectItem=W=>{v.onDidSelectItem(j[W])}),i.$setItems(S,Be),O.then(W=>{if(typeof W=="number")return j[W];if(Array.isArray(W))return W.map(U=>j[U])})})}).then(void 0,ae=>{if(!Yr(ae))return i.$setError(S,ae),Promise.reject(ae)})}$onItemSelected(b){var _;(_=this._onDidSelectItem)==null||_.call(this,b)}showInput(b,_=wt.None){return this._validateInput=b==null?void 0:b.validateInput,i.$input(b,typeof this._validateInput=="function",_).then(void 0,v=>{if(!Yr(v))return Promise.reject(v)})}async $validateInput(b){if(!this._validateInput)return;const _=await this._validateInput(b);if(!_||typeof _=="string")return _;let v;switch(_.severity){case ca.Info:v=pt.Info;break;case ca.Warning:v=pt.Warning;break;case ca.Error:v=pt.Error;break;default:v=_.message?pt.Error:pt.Ignore;break}return{content:_.message,severity:v}}async showWorkspaceFolderPick(b,_=wt.None){const v=await this._commands.executeCommand("_workbench.pickWorkspaceFolder",[b]);if(!v)return;const E=await this._workspace.getWorkspaceFolders2();if(E)return E.find(k=>k.uri.toString()===v.uri.toString())}createQuickPick(b){const _=new u(b,()=>this._sessions.delete(_._id));return this._sessions.set(_._id,_),_}createInputBox(b){const _=new d(b,()=>this._sessions.delete(_._id));return this._sessions.set(_._id,_),_}$onDidChangeValue(b,_){const v=this._sessions.get(b);v==null||v._fireDidChangeValue(_)}$onDidAccept(b){const _=this._sessions.get(b);_==null||_._fireDidAccept()}$onDidChangeActive(b,_){const v=this._sessions.get(b);v instanceof u&&v._fireDidChangeActive(_)}$onDidChangeSelection(b,_){const v=this._sessions.get(b);v instanceof u&&v._fireDidChangeSelection(_)}$onDidTriggerButton(b,_){const v=this._sessions.get(b);v==null||v._fireDidTriggerButton(_)}$onDidTriggerItemButton(b,_,v){const E=this._sessions.get(b);E instanceof u&&E._fireDidTriggerItemButton(_,v)}$onDidHide(b){const _=this._sessions.get(b);_==null||_._fireDidHide()}}const h=class h{constructor(b,_){this._extensionId=b,this._onDidDispose=_,this._id=u._nextId++,this._visible=!1,this._expectingHide=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!0,this._value="",this._buttons=[],this._handlesToButtons=new Map,this._onDidAcceptEmitter=new A,this._onDidChangeValueEmitter=new A,this._onDidTriggerButtonEmitter=new A,this._onDidHideEmitter=new A,this._pendingUpdate={id:this._id},this._disposed=!1,this._disposables=[this._onDidTriggerButtonEmitter,this._onDidHideEmitter,this._onDidAcceptEmitter,this._onDidChangeValueEmitter],this.onDidChangeValue=this._onDidChangeValueEmitter.event,this.onDidAccept=this._onDidAcceptEmitter.event,this.onDidTriggerButton=this._onDidTriggerButtonEmitter.event,this.onDidHide=this._onDidHideEmitter.event}get title(){return this._title}set title(b){this._title=b,this.update({title:b})}get step(){return this._steps}set step(b){this._steps=b,this.update({step:b})}get totalSteps(){return this._totalSteps}set totalSteps(b){this._totalSteps=b,this.update({totalSteps:b})}get enabled(){return this._enabled}set enabled(b){this._enabled=b,this.update({enabled:b})}get busy(){return this._busy}set busy(b){this._busy=b,this.update({busy:b})}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(b){this._ignoreFocusOut=b,this.update({ignoreFocusOut:b})}get value(){return this._value}set value(b){this._value=b,this.update({value:b})}get placeholder(){return this._placeholder}set placeholder(b){this._placeholder=b,this.update({placeholder:b})}get buttons(){return this._buttons}set buttons(b){this._buttons=b.slice(),this._handlesToButtons.clear(),b.forEach((_,v)=>{const E=_===yl.Back?-1:v;this._handlesToButtons.set(E,_)}),this.update({buttons:b.map((_,v)=>({...l(_.iconPath),tooltip:_.tooltip,handle:_===yl.Back?-1:v}))})}show(){this._visible=!0,this._expectingHide=!0,this.update({visible:!0})}hide(){this._visible=!1,this.update({visible:!1})}_fireDidAccept(){this._onDidAcceptEmitter.fire()}_fireDidChangeValue(b){this._value=b,this._onDidChangeValueEmitter.fire(b)}_fireDidTriggerButton(b){const _=this._handlesToButtons.get(b);_&&this._onDidTriggerButtonEmitter.fire(_)}_fireDidHide(){this._expectingHide&&(this._expectingHide=this._visible,this._onDidHideEmitter.fire())}dispose(){this._disposed||(this._disposed=!0,this._fireDidHide(),this._disposables=es(this._disposables),this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=void 0),this._onDidDispose(),i.$dispose(this._id))}update(b){if(!this._disposed){for(const _ of Object.keys(b)){const v=b[_];this._pendingUpdate[_]=v===void 0?null:v}"visible"in this._pendingUpdate?(this._updateTimeout&&(clearTimeout(this._updateTimeout),this._updateTimeout=void 0),this.dispatchUpdate()):this._visible&&!this._updateTimeout&&(this._updateTimeout=setTimeout(()=>{this._updateTimeout=void 0,this.dispatchUpdate()},0))}}dispatchUpdate(){i.$createOrUpdate(this._pendingUpdate),this._pendingUpdate={id:this._id}}};h._nextId=1;let s=h;function o(g){if(g instanceof Kt)return{id:g.id};const b=c(g),_=a(g);return{dark:typeof b=="string"?y.file(b):b,light:typeof _=="string"?y.file(_):_}}function a(g){return typeof g=="object"&&"light"in g?g.light:g}function c(g){return typeof g=="object"&&"dark"in g?g.dark:g}function l(g){const b=o(g);let _,v;return"id"in b?v=ei.asClassName(b):_=b,{iconPath:_,iconClass:v}}class u extends s{constructor(b,_){super(b.identifier,_),this.extension=b,this._items=[],this._handlesToItems=new Map,this._itemsToHandles=new Map,this._canSelectMany=!1,this._matchOnDescription=!0,this._matchOnDetail=!0,this._sortByLabel=!0,this._keepScrollPosition=!1,this._activeItems=[],this._onDidChangeActiveEmitter=new A,this._selectedItems=[],this._onDidChangeSelectionEmitter=new A,this._onDidTriggerItemButtonEmitter=new A,this.onDidChangeActive=this._onDidChangeActiveEmitter.event,this.onDidChangeSelection=this._onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this._onDidTriggerItemButtonEmitter.event,this._disposables.push(this._onDidChangeActiveEmitter,this._onDidChangeSelectionEmitter,this._onDidTriggerItemButtonEmitter),this.update({type:"quickPick"})}get items(){return this._items}set items(b){var E;this._items=b.slice(),this._handlesToItems.clear(),this._itemsToHandles.clear(),b.forEach((k,S)=>{this._handlesToItems.set(S,k),this._itemsToHandles.set(k,S)});const _=At(this.extension,"quickPickItemTooltip"),v=[];for(let k=0;k<b.length;k++){const S=b[k];if(S.kind===xl.Separator)v.push({type:"separator",label:S.label});else{S.tooltip&&!_&&console.warn(`Extension '${this.extension.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.extension.identifier.value}`);const O=S.iconPath?l(S.iconPath):void 0;v.push({handle:k,label:S.label,iconPath:O==null?void 0:O.iconPath,iconClass:O==null?void 0:O.iconClass,description:S.description,detail:S.detail,picked:S.picked,alwaysShow:S.alwaysShow,tooltip:_?Le.fromStrict(S.tooltip):void 0,buttons:(E=S.buttons)==null?void 0:E.map((T,z)=>({...l(T.iconPath),tooltip:T.tooltip,handle:z}))})}}this.update({items:v})}get canSelectMany(){return this._canSelectMany}set canSelectMany(b){this._canSelectMany=b,this.update({canSelectMany:b})}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(b){this._matchOnDescription=b,this.update({matchOnDescription:b})}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(b){this._matchOnDetail=b,this.update({matchOnDetail:b})}get sortByLabel(){return this._sortByLabel}set sortByLabel(b){this._sortByLabel=b,this.update({sortByLabel:b})}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(b){this._keepScrollPosition=b,this.update({keepScrollPosition:b})}get activeItems(){return this._activeItems}set activeItems(b){this._activeItems=b.filter(_=>this._itemsToHandles.has(_)),this.update({activeItems:this._activeItems.map(_=>this._itemsToHandles.get(_))})}get selectedItems(){return this._selectedItems}set selectedItems(b){this._selectedItems=b.filter(_=>this._itemsToHandles.has(_)),this.update({selectedItems:this._selectedItems.map(_=>this._itemsToHandles.get(_))})}_fireDidChangeActive(b){const _=Yt(b.map(v=>this._handlesToItems.get(v)));this._activeItems=_,this._onDidChangeActiveEmitter.fire(_)}_fireDidChangeSelection(b){const _=Yt(b.map(v=>this._handlesToItems.get(v)));this._selectedItems=_,this._onDidChangeSelectionEmitter.fire(_)}_fireDidTriggerItemButton(b,_){const v=this._handlesToItems.get(b);if(!v||!v.buttons||!v.buttons.length)return;const E=v.buttons[_];E&&this._onDidTriggerItemButtonEmitter.fire({button:E,item:v})}}class d extends s{constructor(b,_){super(b.identifier,_),this._password=!1,this.update({type:"inputBox"})}get password(){return this._password}set password(b){this._password=b,this.update({password:b})}get prompt(){return this._prompt}set prompt(b){this._prompt=b,this.update({prompt:b})}get valueSelection(){return this._valueSelection}set valueSelection(b){this._valueSelection=b,this.update({valueSelection:b})}get validationMessage(){return this._validationMessage}set validationMessage(b){this._validationMessage=b,b?typeof b=="string"?this.update({validationMessage:b,severity:pt.Error}):this.update({validationMessage:b.message,severity:b.severity??pt.Error}):this.update({validationMessage:void 0,severity:pt.Ignore})}}return new n(e,t)}const QC=new et(()=>{const r=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:r,collatorIsNumeric:r.resolvedOptions().numeric}});function EP(r,e,t=!1){const i=r||"",n=e||"",s=QC.value.collator.compare(i,n);return QC.value.collatorIsNumeric&&s===0&&i!==n?i<n?-1:1:s}function kP(r,e,t=!1){return t||(r=r&&r.toLowerCase(),e=e&&e.toLowerCase()),r===e?0:r<e?-1:1}function lp(r,e,t=!1){const i=r.split(Hi),n=e.split(Hi),s=i.length-1,o=n.length-1;let a,c;for(let l=0;;l++){if(a=s===l,c=o===l,a&&c)return EP(i[l],n[l],t);if(a)return-1;if(c)return 1;const u=kP(i[l],n[l],t);if(u!==0)return u}}var J_;function JC(r){return r instanceof y}function DP(r,e){return r.scheme===Y.file&&e.scheme===Y.file&&cr?r.toString()===e.toString():r.toString().toLowerCase()===e.toString().toLowerCase()}function K_(r){if(r)return typeof r.iconPath=="string"?y.file(r.iconPath):y.isUri(r.iconPath)||ei.isThemeIcon(r.iconPath)?r.iconPath:void 0}function KC(r){if(r.icon){if(y.isUri(r.icon))return r.icon;if(ei.isThemeIcon(r.icon))return r.icon;{const e=r.icon;return{light:e.light,dark:e.dark}}}else return}function X_(r,e){if(!r.iconPath&&!e.iconPath)return 0;if(r.iconPath){if(!e.iconPath)return 1}else return-1;const t=typeof r.iconPath=="string"?r.iconPath:y.isUri(r.iconPath)?r.iconPath.fsPath:r.iconPath.id,i=typeof e.iconPath=="string"?e.iconPath:y.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id;return lp(t,i)}function IP(r,e){let t=0;if(r.strikeThrough!==e.strikeThrough)return r.strikeThrough?1:-1;if(r.faded!==e.faded)return r.faded?1:-1;if(r.tooltip!==e.tooltip)return(r.tooltip||"").localeCompare(e.tooltip||"");if(t=X_(r,e),t!==0)return t;if(r.light&&e.light)t=X_(r.light,e.light);else{if(r.light)return 1;if(e.light)return-1}if(t!==0)return t;if(r.dark&&e.dark)t=X_(r.dark,e.dark);else{if(r.dark)return 1;if(e.dark)return-1}return t}function PP(r,e){if(r.command!==e.command)return r.command<e.command?-1:1;if(r.title!==e.title)return r.title<e.title?-1:1;if(r.tooltip!==e.tooltip){if(r.tooltip!==void 0&&e.tooltip!==void 0)return r.tooltip<e.tooltip?-1:1;if(r.tooltip!==void 0)return 1;if(e.tooltip!==void 0)return-1}if(r.arguments===e.arguments)return 0;if(r.arguments)if(e.arguments){if(r.arguments.length!==e.arguments.length)return r.arguments.length-e.arguments.length}else return 1;else return-1;for(let t=0;t<r.arguments.length;t++){const i=r.arguments[t],n=e.arguments[t];if(i!==n&&!(JC(i)&&JC(n)&&DP(i,n)))return i<n?-1:1}return 0}function XC(r,e){let t=lp(r.resourceUri.fsPath,e.resourceUri.fsPath,!0);if(t!==0)return t;if(r.command&&e.command)t=PP(r.command,e.command);else{if(r.command)return 1;if(e.command)return-1}if(t!==0)return t;if(r.decorations&&e.decorations)t=IP(r.decorations,e.decorations);else{if(r.decorations)return 1;if(e.decorations)return-1}if(r.multiFileDiffEditorModifiedUri&&e.multiFileDiffEditorModifiedUri)t=lp(r.multiFileDiffEditorModifiedUri.fsPath,e.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(r.multiFileDiffEditorModifiedUri)return 1;if(e.multiFileDiffEditorModifiedUri)return-1}if(r.multiDiffEditorOriginalUri&&e.multiDiffEditorOriginalUri)t=lp(r.multiDiffEditorOriginalUri.fsPath,e.multiDiffEditorOriginalUri.fsPath,!0);else{if(r.multiDiffEditorOriginalUri)return 1;if(e.multiDiffEditorOriginalUri)return-1}return t}function TP(r,e){for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function AP(r,e){return r.command===e.command&&r.title===e.title&&r.tooltip===e.tooltip&&(r.arguments&&e.arguments?TP(r.arguments,e.arguments):r.arguments===e.arguments)}function RP(r,e){return ar(r,e,AP)}class LP{constructor(e,t,i,n,s){le(this,wn,void 0);le(this,Nu,void 0);this._extension=e,this._sourceControlHandle=n,this._documentUri=s,this._value="",this._onDidChange=new A,this._placeholder="",this._enabled=!0,this._visible=!0,J(this,Nu,t),J(this,wn,i)}get value(){return this._value}set value(e){e=e??"",I(this,wn).$setInputBoxValue(this._sourceControlHandle,e),this.updateValue(e)}get onDidChange(){return this._onDidChange.event}get placeholder(){return this._placeholder}set placeholder(e){I(this,wn).$setInputBoxPlaceholder(this._sourceControlHandle,e),this._placeholder=e}get validateInput(){return M(this._extension,"scmValidation"),this._validateInput}set validateInput(e){if(M(this._extension,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this._extension.identifier.value}]: Invalid SCM input box validation function`);this._validateInput=e,I(this,wn).$setValidationProviderIsEnabled(this._sourceControlHandle,!!e)}get enabled(){return this._enabled}set enabled(e){e=!!e,this._enabled!==e&&(this._enabled=e,I(this,wn).$setInputBoxEnablement(this._sourceControlHandle,e))}get visible(){return this._visible}set visible(e){e=!!e,this._visible!==e&&(this._visible=e,I(this,wn).$setInputBoxVisibility(this._sourceControlHandle,e))}get document(){return M(this._extension,"scmTextDocument"),I(this,Nu).getDocument(this._documentUri)}showValidationMessage(e,t){M(this._extension,"scmValidation"),I(this,wn).$showValidationMessage(this._sourceControlHandle,e,t)}$onInputBoxValueChange(e){this.updateValue(e)}updateValue(e){this._value=e,this._onDidChange.fire(e)}}wn=new WeakMap,Nu=new WeakMap;const Hp=class Hp{get disposed(){return this._disposed}get id(){return this._id}get label(){return this._label}set label(e){this._label=e,this._proxy.$updateGroupLabel(this._sourceControlHandle,this.handle,e)}get hideWhenEmpty(){return this._hideWhenEmpty}set hideWhenEmpty(e){this._hideWhenEmpty=e,this._proxy.$updateGroup(this._sourceControlHandle,this.handle,this.features)}get features(){return{hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this._resourceStates]}set resourceStates(e){this._resourceStates=[...e],this._onDidUpdateResourceStates.fire()}constructor(e,t,i,n,s,o,a){this._proxy=e,this._commands=t,this._sourceControlHandle=i,this._id=n,this._label=s,this.multiDiffEditorEnableViewChanges=o,this._extension=a,this._resourceHandlePool=0,this._resourceStates=[],this._resourceStatesMap=new Map,this._resourceStatesCommandsMap=new Map,this._resourceStatesDisposablesMap=new Map,this._onDidUpdateResourceStates=new A,this.onDidUpdateResourceStates=this._onDidUpdateResourceStates.event,this._disposed=!1,this._onDidDispose=new A,this.onDidDispose=this._onDidDispose.event,this._handlesSnapshot=[],this._resourceSnapshot=[],this._hideWhenEmpty=void 0,this.handle=Hp._handlePool++}getResourceState(e){return this._resourceStatesMap.get(e)}$executeResourceCommand(e,t){const i=this._resourceStatesCommandsMap.get(e);return i?Ht(()=>this._commands.executeCommand(i.command,...i.arguments||[],t)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){var o;const e=[...this._resourceStates].sort(XC),i=qw(this._resourceSnapshot,e,XC).map(a=>{const c=a.toInsert.map(l=>{const u=this._resourceHandlePool++;this._resourceStatesMap.set(u,l);const d=l.resourceUri;let h;if(l.command)if(l.command.command==="vscode.open"||l.command.command==="vscode.diff"||l.command.command==="vscode.changes"){const j=new Pe;h=this._commands.converter.toInternal(l.command,j),this._resourceStatesDisposablesMap.set(u,j)}else this._resourceStatesCommandsMap.set(u,l.command);const g=At(this._extension,"scmMultiDiffEditor"),b=g?l.multiDiffEditorOriginalUri:void 0,_=g?l.multiFileDiffEditorModifiedUri:void 0,v=K_(l.decorations),E=l.decorations&&K_(l.decorations.light)||v,k=l.decorations&&K_(l.decorations.dark)||v,S=[E,k],O=l.decorations&&l.decorations.tooltip||"",T=l.decorations&&!!l.decorations.strikeThrough,z=l.decorations&&!!l.decorations.faded,ae=l.contextValue||"";return{rawResource:[u,d,S,O,T,z,ae,h,b,_],handle:u}});return{start:a.start,deleteCount:a.deleteCount,toInsert:c}}),n=i.map(({start:a,deleteCount:c,toInsert:l})=>[a,c,l.map(u=>u.rawResource)]),s=i.reverse();for(const{start:a,deleteCount:c,toInsert:l}of s){const u=l.map(h=>h.handle),d=this._handlesSnapshot.splice(a,c,...u);for(const h of d)this._resourceStatesMap.delete(h),this._resourceStatesCommandsMap.delete(h),(o=this._resourceStatesDisposablesMap.get(h))==null||o.dispose(),this._resourceStatesDisposablesMap.delete(h)}return this._resourceSnapshot=e,n}dispose(){this._disposed=!0,this._onDidDispose.fire()}};Hp._handlePool=0;let Y_=Hp;const Up=class Up{constructor(e,t,i,n,s,o,a){le(this,Lt,void 0);this._extension=e,this._commands=n,this._id=s,this._label=o,this._rootUri=a,this._groups=new Map,this._count=void 0,this._quickDiffProvider=void 0,this._historyProviderDisposable=new Do,this._commitTemplate=void 0,this._acceptInputDisposables=new Do,this._acceptInputCommand=void 0,this._actionButtonDisposables=new Do,this._statusBarDisposables=new Do,this._statusBarCommands=void 0,this._selected=!1,this._onDidChangeSelection=new A,this.onDidChangeSelection=this._onDidChangeSelection.event,this.handle=Up._handlePool++,this.createdResourceGroups=new Map,this.updatedResourceGroups=new Set,J(this,Lt,i);const c=y.from({scheme:Y.vscodeSourceControl,path:`${s}/scm${this.handle}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this._inputBox=new LP(e,t,I(this,Lt),this.handle,c),I(this,Lt).$registerSourceControl(this.handle,s,o,a,c)}get id(){return this._id}get label(){return this._label}get rootUri(){return this._rootUri}get inputBox(){return this._inputBox}get count(){return this._count}set count(e){this._count!==e&&(this._count=e,I(this,Lt).$updateSourceControl(this.handle,{count:e}))}get quickDiffProvider(){return this._quickDiffProvider}set quickDiffProvider(e){this._quickDiffProvider=e;let t;At(this._extension,"quickDiffProvider")&&(t=e==null?void 0:e.label),I(this,Lt).$updateSourceControl(this.handle,{hasQuickDiffProvider:!!e,quickDiffLabel:t})}get historyProvider(){return M(this._extension,"scmHistoryProvider"),this._historyProvider}set historyProvider(e){M(this._extension,"scmHistoryProvider"),this._historyProvider=e,this._historyProviderDisposable.value=new Pe,I(this,Lt).$updateSourceControl(this.handle,{hasHistoryProvider:!!e}),e&&this._historyProviderDisposable.value.add(e.onDidChangeCurrentHistoryItemGroup(()=>{this._historyProviderCurrentHistoryItemGroup=e==null?void 0:e.currentHistoryItemGroup,I(this,Lt).$onDidChangeHistoryProviderCurrentHistoryItemGroup(this.handle,this._historyProviderCurrentHistoryItemGroup)}))}get commitTemplate(){return this._commitTemplate}set commitTemplate(e){e!==this._commitTemplate&&(this._commitTemplate=e,I(this,Lt).$updateSourceControl(this.handle,{commitTemplate:e}))}get acceptInputCommand(){return this._acceptInputCommand}set acceptInputCommand(e){this._acceptInputDisposables.value=new Pe,this._acceptInputCommand=e;const t=this._commands.converter.toInternal(e,this._acceptInputDisposables.value);I(this,Lt).$updateSourceControl(this.handle,{acceptInputCommand:t})}get actionButton(){return M(this._extension,"scmActionButton"),this._actionButton}set actionButton(e){var i;M(this._extension,"scmActionButton"),this._actionButtonDisposables.value=new Pe,this._actionButton=e;const t=e!==void 0?{command:this._commands.converter.toInternal(e.command,this._actionButtonDisposables.value),secondaryCommands:(i=e.secondaryCommands)==null?void 0:i.map(n=>n.map(s=>this._commands.converter.toInternal(s,this._actionButtonDisposables.value))),description:e.description,enabled:e.enabled}:void 0;I(this,Lt).$updateSourceControl(this.handle,{actionButton:t??null})}get statusBarCommands(){return this._statusBarCommands}set statusBarCommands(e){if(this._statusBarCommands&&e&&RP(this._statusBarCommands,e))return;this._statusBarDisposables.value=new Pe,this._statusBarCommands=e;const t=(e||[]).map(i=>this._commands.converter.toInternal(i,this._statusBarDisposables.value));I(this,Lt).$updateSourceControl(this.handle,{statusBarCommands:t})}get selected(){return this._selected}createResourceGroup(e,t,i){const n=At(this._extension,"scmMultiDiffEditor")&&(i==null?void 0:i.multiDiffEditorEnableViewChanges)===!0,s=new Y_(I(this,Lt),this._commands,this.handle,e,t,n,this._extension),o=St.once(s.onDidDispose)(()=>this.createdResourceGroups.delete(s));return this.createdResourceGroups.set(s,o),this.eventuallyAddResourceGroups(),s}eventuallyAddResourceGroups(){const e=[],t=[];for(const[i,n]of this.createdResourceGroups){n.dispose();const s=i.onDidUpdateResourceStates(()=>{this.updatedResourceGroups.add(i),this.eventuallyUpdateResourceStates()});St.once(i.onDidDispose)(()=>{this.updatedResourceGroups.delete(i),s.dispose(),this._groups.delete(i.handle),I(this,Lt).$unregisterGroup(this.handle,i.handle)}),e.push([i.handle,i.id,i.label,i.features,i.multiDiffEditorEnableViewChanges]);const o=i._takeResourceStateSnapshot();o.length>0&&t.push([i.handle,o]),this._groups.set(i.handle,i)}I(this,Lt).$registerGroups(this.handle,e,t),this.createdResourceGroups.clear()}eventuallyUpdateResourceStates(){const e=[];this.updatedResourceGroups.forEach(t=>{const i=t._takeResourceStateSnapshot();i.length!==0&&e.push([t.handle,i])}),e.length>0&&I(this,Lt).$spliceResourceStates(this.handle,e),this.updatedResourceGroups.clear()}getResourceGroup(e){return this._groups.get(e)}setSelectionState(e){this._selected=e,this._onDidChangeSelection.fire(e)}dispose(){this._acceptInputDisposables.dispose(),this._actionButtonDisposables.dispose(),this._statusBarDisposables.dispose(),this._groups.forEach(e=>e.dispose()),I(this,Lt).$unregisterSourceControl(this.handle)}};Lt=new WeakMap,Up._handlePool=0;let Qs=Up;Qs.__decorator=H([GC(100)],Qs.prototype,"eventuallyAddResourceGroups",null),Qs.__decorator=H([GC(100)],Qs.prototype,"eventuallyUpdateResourceStates",null);let Z_=(ic=class{get onDidChangeActiveProvider(){return this._onDidChangeActiveProvider.event}constructor(e,t,i,n){this._commands=t,this._extHostDocuments=i,this.logService=n,this._sourceControls=new Map,this._sourceControlsByExtension=new br,this._onDidChangeActiveProvider=new A,this._proxy=e.getProxy(G.MainThreadSCM),this._telemetry=e.getProxy(G.MainThreadTelemetry),t.registerArgumentProcessor({processArgument:s=>{if(s&&s.$mid===3){const o=this._sourceControls.get(s.sourceControlHandle);if(!o)return s;const a=o.getResourceGroup(s.groupHandle);return a?a.getResourceState(s.handle):s}else if(s&&s.$mid===4){const o=this._sourceControls.get(s.sourceControlHandle);return o?o.getResourceGroup(s.groupHandle):s}else if(s&&s.$mid===5){const o=this._sourceControls.get(s.handle);return o||s}return s}})}createSourceControl(e,t,i,n){this.logService.trace("ExtHostSCM#createSourceControl",e.identifier.value,t,i,n),this._telemetry.$publicLog2("api/scm/createSourceControl",{extensionId:e.identifier.value});const s=J_._handlePool++,o=new Qs(e,this._extHostDocuments,this._proxy,this._commands,t,i,n);this._sourceControls.set(s,o);const a=this._sourceControlsByExtension.get(e.identifier)||[];return a.push(o),this._sourceControlsByExtension.set(e.identifier,a),o}getLastInputBox(e){this.logService.trace("ExtHostSCM#getLastInputBox",e.identifier.value);const t=this._sourceControlsByExtension.get(e.identifier),i=t&&t[t.length-1];return i&&i.inputBox}$provideOriginalResource(e,t,i){const n=y.revive(t);this.logService.trace("ExtHostSCM#$provideOriginalResource",e,n.toString());const s=this._sourceControls.get(e);return!s||!s.quickDiffProvider||!s.quickDiffProvider.provideOriginalResource?Promise.resolve(null):Ht(()=>s.quickDiffProvider.provideOriginalResource(n,i)).then(o=>o||null)}$onInputBoxValueChange(e,t){this.logService.trace("ExtHostSCM#$onInputBoxValueChange",e);const i=this._sourceControls.get(e);return i&&i.inputBox.$onInputBoxValueChange(t),Promise.resolve(void 0)}$executeResourceCommand(e,t,i,n){this.logService.trace("ExtHostSCM#$executeResourceCommand",e,t,i);const s=this._sourceControls.get(e);if(!s)return Promise.resolve(void 0);const o=s.getResourceGroup(t);return o?o.$executeResourceCommand(i,n):Promise.resolve(void 0)}$validateInput(e,t,i){this.logService.trace("ExtHostSCM#$validateInput",e);const n=this._sourceControls.get(e);return!n||!n.inputBox.validateInput?Promise.resolve(void 0):Ht(()=>n.inputBox.validateInput(t,i)).then(s=>{if(!s)return Promise.resolve(void 0);const o=Le.fromStrict(s.message);return o?Promise.resolve([o,s.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(e){var t,i;return this.logService.trace("ExtHostSCM#$setSelectedSourceControl",e),e!==void 0&&((t=this._sourceControls.get(e))==null||t.setSelectionState(!0)),this._selectedSourceControlHandle!==void 0&&((i=this._sourceControls.get(this._selectedSourceControlHandle))==null||i.setSelectionState(!1)),this._selectedSourceControlHandle=e,Promise.resolve(void 0)}async $resolveHistoryItemGroupCommonAncestor(e,t,i,n){var o;const s=(o=this._sourceControls.get(e))==null?void 0:o.historyProvider;return await(s==null?void 0:s.resolveHistoryItemGroupCommonAncestor(t,i,n))??void 0}async $provideHistoryItems(e,t,i,n){var a;const s=(a=this._sourceControls.get(e))==null?void 0:a.historyProvider,o=await(s==null?void 0:s.provideHistoryItems(t,i,n));return(o==null?void 0:o.map(c=>({...c,icon:KC(c)})))??void 0}async $provideHistoryItemSummary(e,t,i,n){var a;const s=(a=this._sourceControls.get(e))==null?void 0:a.historyProvider;if(typeof(s==null?void 0:s.provideHistoryItemSummary)!="function")return;const o=await s.provideHistoryItemSummary(t,i,n);return o?{...o,icon:KC(o)}:void 0}async $provideHistoryItemChanges(e,t,i,n){var o;const s=(o=this._sourceControls.get(e))==null?void 0:o.historyProvider;return await(s==null?void 0:s.provideHistoryItemChanges(t,i,n))??void 0}},J_=ic,ic._handlePool=0,ic);Z_=J_=H([$(3,Je)],Z_);const Wp=class Wp{constructor(e,t){this.uriTransformer=t,this.providers=new Map,this.proxy=e.getProxy(G.MainThreadShare)}async $provideShare(e,t,i){const n=this.providers.get(e);return await(n==null?void 0:n.provideShare({selection:F.to(t.selection),resourceUri:y.revive(t.resourceUri)},i))??void 0}registerShareProvider(e,t){const i=Wp.handlePool++;return this.providers.set(i,t),this.proxy.$registerShareProvider(i,fa.from(e,this.uriTransformer),t.id,t.label,t.priority),{dispose:()=>{this.proxy.$unregisterShareProvider(i),this.providers.delete(i)}}}};Wp.handlePool=0;let ew=Wp;const Bp=class Bp{constructor(e){this.providers=new Map,this.sessions=new Map,this.proxy=e.getProxy(G.MainThreadSpeech)}async $createSpeechToTextSession(e,t,i){const n=this.providers.get(e);if(!n)return;const s=new Pe,o=new kt;this.sessions.set(t,o);const a=s.add(n.provideSpeechToTextSession(o.token,i?{language:i}:void 0));s.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.proxy.$emitSpeechToTextEvent(t,c)})),s.add(o.token.onCancellationRequested(()=>s.dispose()))}async $cancelSpeechToTextSession(e){var t;(t=this.sessions.get(e))==null||t.dispose(!0),this.sessions.delete(e)}async $createKeywordRecognitionSession(e,t){const i=this.providers.get(e);if(!i)return;const n=new Pe,s=new kt;this.sessions.set(t,s);const o=n.add(i.provideKeywordRecognitionSession(s.token));n.add(o.onDidChange(a=>{s.token.isCancellationRequested||this.proxy.$emitKeywordRecognitionEvent(t,a)})),n.add(s.token.onCancellationRequested(()=>n.dispose()))}async $cancelKeywordRecognitionSession(e){var t;(t=this.sessions.get(e))==null||t.dispose(!0),this.sessions.delete(e)}registerProvider(e,t,i){const n=Bp.ID_POOL++;return this.providers.set(n,i),this.proxy.$registerProvider(n,t,{extension:e,displayName:e.value}),Ce(()=>{this.proxy.$unregisterProvider(n),this.providers.delete(n)})}};Bp.ID_POOL=1;let tw=Bp;const ho=class ho{constructor(e,t,i,n,s,o=Sr.Left,a){le(this,nc,void 0);le(this,rc,void 0);if(this._disposed=!1,this._text="",this._staleCommandRegistrations=new Pe,J(this,nc,e),J(this,rc,t),s&&n){this._entryId=k7(n.identifier,s);const c=i.get(this._entryId);c&&(o=c.alignLeft?Sr.Left:Sr.Right,a=c.priority,this._visible=!0,this.name=c.name,this.text=c.text,this.tooltip=c.tooltip,this.command=c.command,this.accessibilityInformation=c.accessibilityInformation)}else this._entryId=String(ho.ID_GEN++);this._extension=n,this._id=s,this._alignment=o,this._priority=this.validatePriority(a)}validatePriority(e){if(fr(e))return e===Number.POSITIVE_INFINITY?Number.MAX_VALUE:e===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:e}get id(){return this._id??this._extension.identifier.value}get alignment(){return this._alignment}get priority(){return this._priority}get text(){return this._text}get name(){return this._name}get tooltip(){return this._tooltip}get color(){return this._color}get backgroundColor(){return this._backgroundColor}get command(){var e;return(e=this._command)==null?void 0:e.fromApi}get accessibilityInformation(){return this._accessibilityInformation}set text(e){this._text=e,this.update()}set name(e){this._name=e,this.update()}set tooltip(e){this._tooltip=e,this.update()}set color(e){this._color=e,this.update()}set backgroundColor(e){e&&!ho.ALLOWED_BACKGROUND_COLORS.has(e.id)&&(e=void 0),this._backgroundColor=e,this.update()}set command(e){var t;((t=this._command)==null?void 0:t.fromApi)!==e&&(this._latestCommandRegistration&&this._staleCommandRegistrations.add(this._latestCommandRegistration),this._latestCommandRegistration=new Pe,typeof e=="string"?this._command={fromApi:e,internal:I(this,rc).toInternal({title:"",command:e},this._latestCommandRegistration)}:e?this._command={fromApi:e,internal:I(this,rc).toInternal(e,this._latestCommandRegistration)}:this._command=void 0,this.update())}set accessibilityInformation(e){this._accessibilityInformation=e,this.update()}show(){this._visible=!0,this.update()}hide(){clearTimeout(this._timeoutHandle),this._visible=!1,I(this,nc).$disposeEntry(this._entryId)}update(){this._disposed||!this._visible||(clearTimeout(this._timeoutHandle),this._timeoutHandle=setTimeout(()=>{var s,o;this._timeoutHandle=void 0;let e;this._extension?this._id?e=`${this._extension.identifier.value}.${this._id}`:e=this._extension.identifier.value:e=this._id;let t;this._name?t=this._name:t=f("vs/workbench/api/common/extHostStatusBar","extensionLabel","{0} (Extension)",this._extension.displayName||this._extension.name);let i=this._color;this._backgroundColor&&(i=ho.ALLOWED_BACKGROUND_COLORS.get(this._backgroundColor.id));const n=Le.fromStrict(this._tooltip);I(this,nc).$setEntry(this._entryId,e,(s=this._extension)==null?void 0:s.identifier.value,t,this._text,n,(o=this._command)==null?void 0:o.internal,i,this._backgroundColor,this._alignment===Sr.Left,this._priority,this._accessibilityInformation),this._staleCommandRegistrations.clear()},0))}dispose(){this.hide(),this._disposed=!0}};nc=new WeakMap,rc=new WeakMap,ho.ID_GEN=0,ho.ALLOWED_BACKGROUND_COLORS=new Map([["statusBarItem.errorBackground",new gl("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new gl("statusBarItem.warningForeground")]]);let iw=ho;class OP{constructor(e){this._messages=[],this._item=e.createStatusBarEntry(void 0,"status.extensionMessage",Sr.Left,Number.MIN_VALUE),this._item.name=f("vs/workbench/api/common/extHostStatusBar","status.extensionMessage","Extension Status")}dispose(){this._messages.length=0,this._item.dispose()}setMessage(e){const t={message:e};return this._messages.unshift(t),this._update(),new Re(()=>{const i=this._messages.indexOf(t);i>=0&&(this._messages.splice(i,1),this._update())})}_update(){this._messages.length>0?(this._item.text=this._messages[0].message,this._item.show()):this._item.hide()}}class $P{constructor(e,t){this._existingItems=new Map,this._proxy=e.getProxy(G.MainThreadStatusBar),this._commands=t,this._statusMessage=new OP(this)}$acceptStaticEntries(e){for(const t of e)this._existingItems.set(t.entryId,t)}createStatusBarEntry(e,t,i,n){return new iw(this._proxy,this._commands,this._existingItems,e,t,i,n)}setStatusBarMessage(e,t){const i=this._statusMessage.setMessage(e);let n;return typeof t=="number"?n=setTimeout(()=>i.dispose(),t):typeof t<"u"&&t.then(()=>i.dispose(),()=>i.dispose()),new Re(()=>{i.dispose(),clearTimeout(n)})}}let nw=class extends Ne{constructor(e,t,i,n){super(),this.editors=n,this.resultsChangedEmitter=this._register(new A),this.controllers=new Map,this.defaultProfilesChangedEmitter=this._register(new A),this.onResultsChanged=this.resultsChangedEmitter.event,this.results=[],this.proxy=e.getProxy(G.MainThreadTesting),this.observer=new WP(this.proxy),this.runTracker=new FP(this.proxy,t),i.registerArgumentProcessor({processArgument:s=>{var o,a,c;switch(s==null?void 0:s.$mid){case 16:{const l=s,u=l.tests[l.tests.length-1].item.extId,d=this.controllers.get(be.root(u));return((o=d==null?void 0:d.collection.tree.get(u))==null?void 0:o.actual)??t2(s)}case 18:{const{test:l,message:u}=s,d=l.item.extId;return{test:((c=(a=this.controllers.get(be.root(d)))==null?void 0:a.collection.tree.get(d))==null?void 0:c.actual)??t2({$mid:16,tests:[l]}),message:xa.to(u)}}default:return s}}}),i.registerCommand(!1,"testing.getExplorerSelection",async()=>{const s=await i.executeCommand("_testing.getExplorerSelection"),o=a=>{var l;const c=this.controllers.get(be.root(a));if(c)return be.isRoot(a)?c.controller:(l=c.collection.tree.get(a))==null?void 0:l.actual};return{include:(s==null?void 0:s.include.map(o).filter(as))||[],exclude:(s==null?void 0:s.exclude.map(o).filter(as))||[]}})}createTestController(e,t,i,n){if(this.controllers.has(t))throw new Error(`Attempt to insert a duplicate controller with ID "${t}"`);const s=new Pe,o=s.add(new M9(t,i,this.editors));o.root.label=i;const a=new Map,c=new Set,l=this.proxy,u={items:o.root.children,get label(){return i},set label(h){i=h,o.root.label=h,l.$updateController(t,{label:i})},get refreshHandler(){return n},set refreshHandler(h){n=h,l.$updateController(t,{canRefresh:!!h})},get id(){return t},createRunProfile:(h,g,b,_,v,E)=>{let k=Fg(h);for(;a.has(k);)k++;return new ZC(this.proxy,a,c,this.defaultProfilesChangedEmitter.event,t,k,h,g,b,_,v,E)},createTestItem(h,g,b){return new Vs(t,h,g,b)},createTestRun:(h,g,b=!0)=>this.runTracker.createTestRun(t,o,h,g,b),invalidateTestResults:h=>{if(h===void 0)this.proxy.$markTestRetired(void 0);else{const g=h instanceof Array?h:[h];this.proxy.$markTestRetired(g.map(b=>be.fromExtHostTestItem(b,t).toString()))}},set resolveHandler(h){o.resolveHandler=h},get resolveHandler(){return o.resolveHandler},dispose:()=>{s.dispose()}};l.$registerTestController(t,i,!!n),s.add(Ce(()=>l.$unregisterTestController(t)));const d={controller:u,collection:o,profiles:a,extension:e,activeProfiles:c};return this.controllers.set(t,d),s.add(Ce(()=>this.controllers.delete(t))),s.add(o.onDidGenerateDiff(h=>l.$publishDiff(t,h.map(Wd.serialize)))),u}createTestObserver(){return this.observer.checkout()}async runTests(e,t=wt.None){var s,o;const i=YC(e);if(!i)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const n=this.controllers.get(i.controllerId);if(!n)throw new Error("Controller not found");await this.proxy.$runTests({isUiTriggered:!1,targets:[{testIds:((s=e.include)==null?void 0:s.map(a=>be.fromExtHostTestItem(a,n.collection.root.id).toString()))??[n.collection.root.id],profileGroup:rw[i.kind],profileId:i.profileId,controllerId:i.controllerId}],exclude:(o=e.exclude)==null?void 0:o.map(a=>a.id)},t)}$syncTests(){for(const{collection:e}of this.controllers.values())e.flushDiff();return Promise.resolve()}async $getCoverageDetails(e,t){const i=await this.runTracker.getCoverageDetails(e,t);return i==null?void 0:i.map(df.fromDetails)}async $disposeRun(e){this.runTracker.disposeTestRun(e)}$configureRunProfile(e,t){var i,n,s;(s=(n=(i=this.controllers.get(e))==null?void 0:i.profiles.get(t))==null?void 0:n.configureHandler)==null||s.call(n)}$setDefaultRunProfiles(e){const t=new Map;for(const[i,n]of Object.entries(e)){const s=this.controllers.get(i);if(!s)continue;const o=new Map,a=n.filter(l=>!s.activeProfiles.has(l)),c=[...s.activeProfiles].filter(l=>!n.includes(l));for(const l of a)o.set(l,!0),s.activeProfiles.add(l);for(const l of c)o.set(l,!1),s.activeProfiles.delete(l);o.size&&t.set(i,o)}this.defaultProfilesChangedEmitter.fire(t)}async $refreshTests(e,t){var i,n,s;await((s=(i=this.controllers.get(e))==null?void 0:(n=i.controller).refreshHandler)==null?void 0:s.call(n,t))}$publishTestResults(e){this.results=Object.freeze(e.map(I1.to).concat(this.results).sort((t,i)=>i.completedAt-t.completedAt).slice(0,32)),this.resultsChangedEmitter.fire()}async $expandTest(e,t){var n;const i=(n=this.controllers.get(be.fromString(e).controllerId))==null?void 0:n.collection;i&&(await i.expand(e,t<0?1/0:t),i.flushDiff())}$acceptDiff(e){this.observer.applyDiff(e.map(t=>Wd.deserialize({asCanonicalUri:i=>i},t)))}async $runControllerTests(e,t){return Promise.all(e.map(i=>this.runControllerTestRequest(i,!1,t)))}async $startContinuousRun(e,t){const i=new kt(t),n=await Promise.all(e.map(s=>this.runControllerTestRequest(s,!0,i.token)));return!t.isCancellationRequested&&!n.some(s=>s.error)&&await new Promise(s=>t.onCancellationRequested(s)),i.dispose(!0),n}async runControllerTestRequest(e,t,i){const n=this.controllers.get(e.controllerId);if(!n)return{};const{collection:s,profiles:o}=n,a=o.get(e.profileId);if(!a)return{};const c=e.testIds.map(h=>s.tree.get(h)).filter(as),l=e.excludeExtIds.map(h=>n.collection.tree.get(h)).filter(as).filter(h=>c.some(g=>g.fullId.compare(h.fullId)===2));if(!c.length)return{};const u=new Rh(c.some(h=>h.actual instanceof ov)?void 0:c.map(h=>h.actual),l.map(h=>h.actual),a,t),d=S5(e)&&this.runTracker.prepareForMainThreadTestRun(u,pu.fromInternal(e,n.collection),a,i);try{return await a.runHandler(u,i),{}}catch(h){return{error:String(h)}}finally{d&&d.hasRunningTasks&&!i.isCancellationRequested&&await St.toPromise(d.onEnd)}}$cancelExtensionTestRun(e){e===void 0?this.runTracker.cancelAllRuns():this.runTracker.cancelRunById(e)}};nw=H([$(0,We),$(1,Je)],nw);const NP=1e4;class MP extends Ne{get hasRunningTasks(){return this.running>0}get id(){return this.dto.id}constructor(e,t,i,n,s){super(),this.dto=e,this.proxy=t,this.logService=i,this.profile=n,this.state=0,this.running=0,this.tasks=new Map,this.sharedTestIds=new Set,this.endEmitter=this._register(new A),this.publishedCoverage=new Map,this.onEnd=this.endEmitter.event,this.cts=this._register(new kt(s));const o=this._register(new Ac(()=>this.forciblyEndTasks(),NP));this._register(this.cts.token.onCancellationRequested(()=>o.schedule()));const a=new A;this.onDidDispose=a.event,this._register(Ce(()=>{a.fire(),a.dispose()}))}cancel(){this.state===0?(this.cts.cancel(),this.state=1):this.state===1&&this.forciblyEndTasks()}getCoverageDetails(e,t){var a,c;const[,i,n]=be.fromString(e).path,s=this.publishedCoverage.get(n);if(!s)return[];if(s.backCompatResolve)return s.backCompatResolve(t);const o=this.tasks.get(i);if(!o)throw new Error("unreachable: run task was not found");return((c=(a=this.profile)==null?void 0:a.loadDetailedCoverage)==null?void 0:c.call(a,o.run,s.coverage,t))??[]}createRun(e){const t=this.dto.id,i=this.dto.controllerId,n=En(),s=d=>(h,...g)=>{if(c){this.logService.warn(`Setting the state of test "${h.id}" is a no-op after the run ends.`);return}this.dto.isIncluded(h)&&(this.ensureTestIsKnown(h),d(h,...g))},o=(d,h)=>{const g=h instanceof Array?h.map(xa.from):[xa.from(h)];if(d.uri&&d.range){const b={range:F.from(d.range),uri:d.uri};for(const _ of g)_.location=_.location||b}this.proxy.$appendTestMessagesInRun(t,n,be.fromExtHostTestItem(d,i).toString(),g)},a=(d,h)=>{const g=d.uri.toString(),b=new be([t,n,g]).toString();this.publishedCoverage.set(g,{coverage:d,backCompatResolve:h}),this.proxy.$appendCoverage(t,n,df.fromFile(b,d))};let c=!1,l;const u={isPersisted:this.dto.isPersisted,token:this.cts.token,name:e,onDidDispose:this.onDidDispose,get coverageProvider(){return l},set coverageProvider(d){l=d,d&&Promise.resolve(d.provideFileCoverage(wt.None)).then(h=>{h==null||h.forEach(g=>a(g,d.resolveFileCoverage&&(async b=>(await d.resolveFileCoverage(g,b)||g).detailedCoverage)))})},addCoverage:a,enqueued:s(d=>{this.proxy.$updateTestStateInRun(t,n,be.fromExtHostTestItem(d,i).toString(),1)}),skipped:s(d=>{this.proxy.$updateTestStateInRun(t,n,be.fromExtHostTestItem(d,i).toString(),5)}),started:s(d=>{this.proxy.$updateTestStateInRun(t,n,be.fromExtHostTestItem(d,i).toString(),2)}),errored:s((d,h,g)=>{o(d,h),this.proxy.$updateTestStateInRun(t,n,be.fromExtHostTestItem(d,i).toString(),6,g)}),failed:s((d,h,g)=>{o(d,h),this.proxy.$updateTestStateInRun(t,n,be.fromExtHostTestItem(d,i).toString(),4,g)}),passed:s((d,h)=>{this.proxy.$updateTestStateInRun(t,n,be.fromExtHostTestItem(d,this.dto.controllerId).toString(),3,h)}),appendOutput:(d,h,g)=>{c||(g&&(this.dto.isIncluded(g)?this.ensureTestIsKnown(g):g=void 0),this.proxy.$appendOutputToRun(t,n,ve.fromString(d),h&&xi.from(h),g&&be.fromExtHostTestItem(g,i).toString()))},end:()=>{c||(c=!0,this.proxy.$finishedTestRunTask(t,n),--this.running||this.markEnded())}};return this.running++,this.tasks.set(n,{run:u}),this.proxy.$startedTestRunTask(t,{id:n,name:e,running:!0}),u}forciblyEndTasks(){for(const{run:e}of this.tasks.values())e.end()}markEnded(){this.state!==2&&(this.state=2,this.endEmitter.fire())}ensureTestIsKnown(e){if(!(e instanceof Vs))throw new Bd(e.id);if(this.sharedTestIds.has(be.fromExtHostTestItem(e,this.dto.controllerId).toString()))return;const t=[],i=this.dto.colllection.root;for(;;){const n=Rr.from(e);if(t.unshift(n),this.sharedTestIds.has(n.extId)||(this.sharedTestIds.add(n.extId),e===i))break;e=e.parent||i}this.proxy.$addTestsToRun(this.dto.controllerId,this.dto.id,t)}dispose(){this.markEnded(),super.dispose()}}class FP{get trackers(){return this.tracked.values()}constructor(e,t){this.proxy=e,this.logService=t,this.tracked=new Map,this.trackedById=new Map}getCoverageDetails(e,t){var n;const i=be.root(e);return((n=this.trackedById.get(i))==null?void 0:n.getCoverageDetails(e,t))||[]}disposeTestRun(e){var t;(t=this.trackedById.get(e))==null||t.dispose(),this.trackedById.delete(e);for(const[i,{id:n}]of this.tracked)n===e&&this.tracked.delete(i)}prepareForMainThreadTestRun(e,t,i,n){return this.getTracker(e,t,i,n)}cancelRunById(e){var t;(t=this.trackedById.get(e))==null||t.cancel()}cancelAllRuns(){for(const e of this.tracked.values())e.cancel()}createTestRun(e,t,i,n,s){var u,d;const o=this.tracked.get(i);if(o)return o.createRun(n);const a=pu.fromPublic(e,t,i,s),c=YC(i);this.proxy.$startedExtensionTestRun({controllerId:e,continuous:!!i.continuous,profile:c&&{group:rw[c.kind],id:c.profileId},exclude:((u=i.exclude)==null?void 0:u.map(h=>be.fromExtHostTestItem(h,t.root.id).toString()))??[],id:a.id,include:((d=i.include)==null?void 0:d.map(h=>be.fromExtHostTestItem(h,t.root.id).toString()))??[t.root.id],persist:s});const l=this.getTracker(i,a,i.profile);return St.once(l.onEnd)(()=>{this.proxy.$finishedExtensionTestRun(a.id)}),l.createRun(n)}getTracker(e,t,i,n){const s=new MP(t,this.proxy,this.logService,i,n);return this.tracked.set(e,s),this.trackedById.set(s.id,s),s}}const YC=r=>{if(r.profile){if(!(r.profile instanceof ZC))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return r.profile}};class pu{static fromPublic(e,t,i,n){var s,o;return new pu(e,En(),((s=i.include)==null?void 0:s.map(a=>be.fromExtHostTestItem(a,e).toString()))??[e],((o=i.exclude)==null?void 0:o.map(a=>be.fromExtHostTestItem(a,e).toString()))??[],n,t)}static fromInternal(e,t){return new pu(e.controllerId,e.runId,e.testIds,e.excludeExtIds,!0,t)}constructor(e,t,i,n,s,o){this.controllerId=e,this.id=t,this.isPersisted=s,this.colllection=o,this.includePrefix=i.map(a=>a+"\0"),this.excludePrefix=n.map(a=>a+"\0")}isIncluded(e){const t=be.fromExtHostTestItem(e,this.controllerId).toString()+"\0";for(const i of this.excludePrefix)if(t===i||t.startsWith(i))return!1;for(const i of this.includePrefix)if(t===i||t.startsWith(i))return!0;return!1}}class HP{get isEmpty(){return this.added.size===0&&this.removed.size===0&&this.updated.size===0}constructor(e){this.emitter=e,this.added=new Set,this.updated=new Set,this.removed=new Set,this.alreadyRemoved=new Set}add(e){this.added.add(e)}update(e){Object.assign(e.revived,Rr.toPlain(e.item)),this.added.has(e)||this.updated.add(e)}remove(e){if(this.added.has(e)){this.added.delete(e);return}this.updated.delete(e);const t=be.parentId(e.item.extId);if(t&&this.alreadyRemoved.has(t.toString())){this.alreadyRemoved.add(e.item.extId);return}this.removed.add(e)}getChangeEvent(){const{added:e,updated:t,removed:i}=this;return{get added(){return[...e].map(n=>n.revived)},get updated(){return[...t].map(n=>n.revived)},get removed(){return[...i].map(n=>n.revived)}}}complete(){this.isEmpty||this.emitter.fire(this.getChangeEvent())}}class UP extends E5{constructor(){super(...arguments),this.changeEmitter=new A,this.onDidChangeTests=this.changeEmitter.event}get rootTests(){return this.roots}getMirroredTestDataById(e){return this.items.get(e)}getMirroredTestDataByReference(e){return this.items.get(e.id)}createItem(e,t){return{...e,revived:Rr.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}createChangeCollector(){return new HP(this.changeEmitter)}}class WP{constructor(e){this.proxy=e}checkout(){this.current||(this.current=this.createObserverData());const e=this.current;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:ng(()=>{--e.observers===0&&(this.proxy.$unsubscribeFromDiffs(),this.current=void 0)})}}getMirroredTestDataByReference(e){var t;return(t=this.current)==null?void 0:t.tests.getMirroredTestDataByReference(e)}applyDiff(e){var t;(t=this.current)==null||t.tests.apply(e)}createObserverData(){const e=new UP({asCanonicalUri:t=>t});return this.proxy.$subscribeToDiffs(),{observers:0,tests:e}}}const gu=(r,e,t,i)=>{t?Object.assign(t,i):e.$updateTestRunConfig(r.controllerId,r.profileId,i)};class ZC{constructor(e,t,i,n,s,o,a,c,l,u=!1,d=void 0,h=!1){le(this,Zi,void 0);le(this,fo,void 0);le(this,Mu,void 0);le(this,Ei,void 0);le(this,sc,void 0);this.controllerId=s,this.profileId=o,this._label=a,this.kind=c,this.runHandler=l,this._tag=d,this._supportsContinuousRun=h,J(this,Zi,e),J(this,sc,t),J(this,fo,i),J(this,Mu,n),t.set(o,this);const g=rw[c];if(typeof g!="number")throw new Error(`Unknown TestRunProfile.group ${c}`);u&&i.add(o),J(this,Ei,{profileId:o,controllerId:s,tag:d?Qi.namespace(this.controllerId,d.id):null,label:a,group:g,isDefault:u,hasConfigurationHandler:!1,supportsContinuousRun:h}),queueMicrotask(()=>{I(this,Ei)&&(I(this,Zi).$publishTestRunProfile(I(this,Ei)),J(this,Ei,void 0))})}get label(){return this._label}set label(e){e!==this._label&&(this._label=e,gu(this,I(this,Zi),I(this,Ei),{label:e}))}get supportsContinuousRun(){return this._supportsContinuousRun}set supportsContinuousRun(e){e!==this._supportsContinuousRun&&(this._supportsContinuousRun=e,gu(this,I(this,Zi),I(this,Ei),{supportsContinuousRun:e}))}get isDefault(){return I(this,fo).has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?I(this,fo).add(this.profileId):I(this,fo).delete(this.profileId),gu(this,I(this,Zi),I(this,Ei),{isDefault:e}))}get tag(){return this._tag}set tag(e){var t;(e==null?void 0:e.id)!==((t=this._tag)==null?void 0:t.id)&&(this._tag=e,gu(this,I(this,Zi),I(this,Ei),{tag:e?Qi.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this._configureHandler}set configureHandler(e){e!==this._configureHandler&&(this._configureHandler=e,gu(this,I(this,Zi),I(this,Ei),{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return St.chain(I(this,Mu),e=>e.map(t=>{var i;return(i=t.get(this.controllerId))==null?void 0:i.get(this.profileId)}).filter(as))}dispose(){var e;(e=I(this,sc))!=null&&e.delete(this.profileId)&&(J(this,sc,void 0),I(this,Zi).$removeTestProfile(this.controllerId,this.profileId)),J(this,Ei,void 0)}}Zi=new WeakMap,fo=new WeakMap,Mu=new WeakMap,Ei=new WeakMap,sc=new WeakMap;const rw={[da.Coverage]:8,[da.Debug]:4,[da.Run]:2};class BP{constructor(e,t){this._extHostDocumentsAndEditors=t,this._onDidChangeTextEditorSelection=new A,this._onDidChangeTextEditorOptions=new A,this._onDidChangeTextEditorVisibleRanges=new A,this._onDidChangeTextEditorViewColumn=new A,this._onDidChangeActiveTextEditor=new A,this._onDidChangeVisibleTextEditors=new A,this.onDidChangeTextEditorSelection=this._onDidChangeTextEditorSelection.event,this.onDidChangeTextEditorOptions=this._onDidChangeTextEditorOptions.event,this.onDidChangeTextEditorVisibleRanges=this._onDidChangeTextEditorVisibleRanges.event,this.onDidChangeTextEditorViewColumn=this._onDidChangeTextEditorViewColumn.event,this.onDidChangeActiveTextEditor=this._onDidChangeActiveTextEditor.event,this.onDidChangeVisibleTextEditors=this._onDidChangeVisibleTextEditors.event,this._proxy=e.getProxy(G.MainThreadTextEditors),this._extHostDocumentsAndEditors.onDidChangeVisibleTextEditors(i=>this._onDidChangeVisibleTextEditors.fire(i)),this._extHostDocumentsAndEditors.onDidChangeActiveTextEditor(i=>this._onDidChangeActiveTextEditor.fire(i))}getActiveTextEditor(){return this._extHostDocumentsAndEditors.activeEditor()}getVisibleTextEditors(e){const t=this._extHostDocumentsAndEditors.allEditors();return e?t:t.map(i=>i.value)}async showTextDocument(e,t,i){let n;typeof t=="number"?n={position:yt.from(t),preserveFocus:i}:typeof t=="object"?n={position:yt.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?F.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:n={preserveFocus:!1};const s=await this._proxy.$tryShowTextDocument(e.uri,n),o=s&&this._extHostDocumentsAndEditors.getEditor(s);if(o)return o.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new $v(this._proxy,e,t).value}$acceptEditorPropertiesChanged(e,t){const i=this._extHostDocumentsAndEditors.getEditor(e);if(!i)throw new Error("unknown text editor");if(t.options&&i._acceptOptions(t.options),t.selections){const n=t.selections.selections.map(Li.to);i._acceptSelections(n)}if(t.visibleRanges){const n=Yt(t.visibleRanges.map(F.to));i._acceptVisibleRanges(n)}if(t.options&&this._onDidChangeTextEditorOptions.fire({textEditor:i.value,options:{...t.options,lineNumbers:_a.to(t.options.lineNumbers)}}),t.selections){const n=Yo.fromValue(t.selections.source),s=t.selections.selections.map(Li.to);this._onDidChangeTextEditorSelection.fire({textEditor:i.value,selections:s,kind:n})}if(t.visibleRanges){const n=Yt(t.visibleRanges.map(F.to));this._onDidChangeTextEditorVisibleRanges.fire({textEditor:i.value,visibleRanges:n})}}$acceptEditorPositionData(e){for(const t in e){const i=this._extHostDocumentsAndEditors.getEditor(t);if(!i)throw new Error("Unknown text editor");const n=yt.to(e[t]);i.value.viewColumn!==n&&(i._acceptViewColumn(n),this._onDidChangeTextEditorViewColumn.fire({textEditor:i.value,viewColumn:n}))}}getDiffInformation(e){return Promise.resolve(this._proxy.$getDiffInformation(e))}}let sw=class{constructor(e){this._actual=new Eh(Er.Dark),this._onDidChangeActiveColorTheme=new A}get activeColorTheme(){return this._actual}$onColorThemeChange(e){let t;switch(e){case"light":t=Er.Light;break;case"hcDark":t=Er.HighContrast;break;case"hcLight":t=Er.HighContrastLight;break;default:t=Er.Dark}this._actual=new Eh(t),this._onDidChangeActiveColorTheme.fire(this._actual)}get onDidChangeActiveColorTheme(){return this._onDidChangeActiveColorTheme.event}};sw=H([$(0,We)],sw);class VP{constructor(e,t){this._providers=new Map,this._itemsBySourceAndUriMap=new Map,this._proxy=e.getProxy(G.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(i,n)=>{var s,o,a;if(i&&i.$mid===12)if(this._providers.get(i.source)&&Xe.equals(n,(s=this._providers.get(i.source))==null?void 0:s.extension)){const c=i.uri===void 0?void 0:y.revive(i.uri);return(a=(o=this._itemsBySourceAndUriMap.get(i.source))==null?void 0:o.get(eS(c)))==null?void 0:a.get(i.handle)}else return;return i}})}async $getTimeline(e,t,i,n){const s=this._providers.get(e);return s==null?void 0:s.provider.provideTimeline(y.revive(t),i,n)}registerTimelineProvider(e,t,i,n){const s=new Pe,o=this.convertTimelineItem(t.id,n,s).bind(this);let a;t.onDidChange&&(a=t.onDidChange(l=>this._proxy.$emitTimelineChangeEvent({uri:void 0,reset:!0,...l,id:t.id}),this));const c=this._itemsBySourceAndUriMap;return this.registerTimelineProviderCore({...t,scheme:e,onDidChange:void 0,async provideTimeline(l,u,d){var b;u!=null&&u.resetCache&&(s.clear(),(b=c.get(t.id))==null||b.clear());const h=await t.provideTimeline(l,u,d);if(h==null)return;const g=o(l,u);return{...h,source:t.id,items:h.items.map(g)}},dispose(){var l;for(const u of c.values())(l=u.get(t.id))==null||l.clear();a==null||a.dispose(),s.dispose()}},i)}convertTimelineItem(e,t,i){return(n,s)=>{let o;if(s!=null&&s.cacheResults){let a=this._itemsBySourceAndUriMap.get(e);a===void 0&&(a=new Map,this._itemsBySourceAndUriMap.set(e,a));const c=eS(n);o=a.get(c),o===void 0&&(o=new Map,a.set(c,o))}return a=>{const{iconPath:c,...l}=a,u=`${e}|${a.id??a.timestamp}`;o==null||o.set(u,a);let d,h,g;a.iconPath&&(c instanceof Kt?g={id:c.id,color:c.color}:y.isUri(c)?(d=c,h=c):{light:d,dark:h}=c);let b;return Ri.isMarkdownString(l.tooltip)?b=Le.from(l.tooltip):Oe(l.tooltip)?b=l.tooltip:Ri.isMarkdownString(l.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),b=Le.from(l.detail)):Oe(l.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),b=l.detail),{...l,id:l.id??void 0,handle:u,source:e,command:a.command?t.toInternal(a.command,i):void 0,icon:d,iconDark:h,themeIcon:g,tooltip:b,accessibilityInformation:a.accessibilityInformation}}}}registerTimelineProviderCore(e,t){if(this._providers.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this._proxy.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this._providers.set(e.id,{provider:e,extension:t}),Ce(()=>{var n;for(const s of this._itemsBySourceAndUriMap.values())(n=s.get(e.id))==null||n.clear();this._providers.delete(e.id),this._proxy.$unregisterTimelineProvider(e.id),e.dispose()})}}function eS(r){return r==null?void 0:r.toString()}const zP={IconContribution:"base.contributions.icons"};var tS;(function(r){function e(i){return{weight:i.weight,style:i.style,src:i.src.map(n=>({format:n.format,location:n.location.toString()}))}}r.toJSONObject=e;function t(i){const n=s=>Oe(s)?s:void 0;if(i&&Array.isArray(i.src)&&i.src.every(s=>Oe(s.format)&&Oe(s.location)))return{weight:n(i.weight),style:n(i.style),src:i.src.map(s=>({format:s.format,location:y.parse(s.location)}))}}r.fromJSONObject=t})(tS||(tS={}));class jP{constructor(){this._onDidChange=new A,this.onDidChange=this._onDidChange.event,this.iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:f("vs/platform/theme/common/iconRegistry","iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:f("vs/platform/theme/common/iconRegistry","iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.iconReferenceSchema={type:"string",pattern:`^${ei.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.iconsById={},this.iconFontsById={}}registerIcon(e,t,i,n){const s=this.iconsById[e];if(s){if(i&&!s.description){s.description=i,this.iconSchema.properties[e].markdownDescription=`${i} $(${e})`;const c=this.iconReferenceSchema.enum.indexOf(e);c!==-1&&(this.iconReferenceSchema.enumDescriptions[c]=i),this._onDidChange.fire()}return s}const o={id:e,description:i,defaults:t,deprecationMessage:n};this.iconsById[e]=o;const a={$ref:"#/definitions/icons"};return n&&(a.deprecationMessage=n),i&&(a.markdownDescription=`${i}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(i||""),this._onDidChange.fire(),{id:e}}deregisterIcon(e){delete this.iconsById[e],delete this.iconSchema.properties[e];const t=this.iconReferenceSchema.enum.indexOf(e);t!==-1&&(this.iconReferenceSchema.enum.splice(t,1),this.iconReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChange.fire()}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconReferenceSchema(){return this.iconReferenceSchema}registerIconFont(e,t){const i=this.iconFontsById[e];return i||(this.iconFontsById[e]=t,this._onDidChange.fire(),t)}deregisterIconFont(e){delete this.iconFontsById[e]}getIconFont(e){return this.iconFontsById[e]}toString(){const e=(s,o)=>s.id.localeCompare(o.id),t=s=>{for(;ei.isThemeIcon(s.defaults);)s=this.iconsById[s.defaults.id];return`codicon codicon-${s?s.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const n=Object.keys(this.iconsById).map(s=>this.iconsById[s]);for(const s of n.filter(o=>!!o.description).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${ei.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of n.filter(o=>!ei.isThemeIcon(o.defaults)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join(`
`)}}const mu=new jP;Jt.add(zP.IconContribution,mu);function up(r,e,t,i){return mu.registerIcon(r,e,t,i)}function qP(){const r=yk();for(const e in r){const t="\\"+r[e].toString(16);mu.registerIcon(e,{fontCharacter:t})}}qP();const iS="vscode://schemas/icons",nS=Jt.as(Cf.JSONContribution);nS.registerSchema(iS,mu.getIconSchema());const rS=new Ac(()=>nS.notifySchemaChanged(iS),200);mu.onDidChange(()=>{rS.isScheduled()||rS.schedule()}),up("widget-close",ue.close,f("vs/platform/theme/common/iconRegistry","widgetClose","Icon for the close action in widgets.")),up("goto-previous-location",ue.arrowUp,f("vs/platform/theme/common/iconRegistry","previousChangeIcon","Icon for goto previous editor location.")),up("goto-next-location",ue.arrowDown,f("vs/platform/theme/common/iconRegistry","nextChangeIcon","Icon for goto next editor location.")),ei.modify(ue.sync,"spin"),ei.modify(ue.loading,"spin"),f("vs/workbench/common/views","views log","Views"),up("default-view-icon",ue.window,f("vs/workbench/common/views","defaultViewIcon","Default view icon."));var dp;(function(r){r.ViewContainersRegistry="workbench.registry.view.containers",r.ViewsRegistry="workbench.registry.view"})(dp||(dp={}));var sS;(function(r){r[r.Sidebar=0]="Sidebar",r[r.Panel=1]="Panel",r[r.AuxiliaryBar=2]="AuxiliaryBar"})(sS||(sS={}));class GP extends Ne{constructor(){super(...arguments),this._onDidRegister=this._register(new A),this.onDidRegister=this._onDidRegister.event,this._onDidDeregister=this._register(new A),this.onDidDeregister=this._onDidDeregister.event,this.viewContainers=new Map,this.defaultViewContainers=[]}get all(){return Xu([...this.viewContainers.values()])}registerViewContainer(e,t,i){const n=this.get(e.id);if(n)return n;const s=e;return s.openCommandActionDescriptor=i!=null&&i.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},AS(this.viewContainers,t,[]).push(s),i!=null&&i.isDefault&&this.defaultViewContainers.push(s),this._onDidRegister.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.viewContainers.keys()){const i=this.viewContainers.get(t),n=i==null?void 0:i.indexOf(e);if(n!==-1){i==null||i.splice(n,1),i.length===0&&this.viewContainers.delete(t),this._onDidDeregister.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.viewContainers.get(e)||[]]}getViewContainerLocation(e){return[...this.viewContainers.keys()].filter(t=>this.getViewContainers(t).filter(i=>(i==null?void 0:i.id)===e.id).length>0)[0]}getDefaultViewContainer(e){return this.defaultViewContainers.find(t=>this.getViewContainerLocation(t)===e)}}Jt.add(dp.ViewContainersRegistry,new GP);var hp;(function(r){r.Open="2_open",r.Debug="4_debug",r.SCM="5_scm",r.More="9_more"})(hp||(hp={}));function QP(r,e){const t=r.group??hp.More,i=e.group??hp.More;return t!==i?t.localeCompare(i):(r.order??5)-(e.order??5)}class JP extends Ne{constructor(){super(...arguments),this._onViewsRegistered=this._register(new A),this.onViewsRegistered=this._onViewsRegistered.event,this._onViewsDeregistered=this._register(new A),this.onViewsDeregistered=this._onViewsDeregistered.event,this._onDidChangeContainer=this._register(new A),this.onDidChangeContainer=this._onDidChangeContainer.event,this._onDidChangeViewWelcomeContent=this._register(new A),this.onDidChangeViewWelcomeContent=this._onDidChangeViewWelcomeContent.event,this._viewContainers=[],this._views=new Map,this._viewWelcomeContents=new eb}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:i})=>this.addViews(t,i)),this._onViewsRegistered.fire(e)}deregisterViews(e,t){const i=this.removeViews(e,t);i.length&&this._onViewsDeregistered.fire({views:i,viewContainer:t})}moveViews(e,t){for(const i of this._views.keys())if(i!==t){const n=this.removeViews(e,i);n.length&&(this.addViews(n,t),this._onDidChangeContainer.fire({views:n,from:i,to:t}))}}getViews(e){return this._views.get(e)||[]}getView(e){for(const t of this._viewContainers){const i=(this._views.get(t)||[]).filter(n=>n.id===e)[0];if(i)return i}return null}getViewContainer(e){for(const t of this._viewContainers)if((this._views.get(t)||[]).filter(n=>n.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this._viewWelcomeContents.add(e,t),this._onDidChangeViewWelcomeContent.fire(e),Ce(()=>{this._viewWelcomeContents.delete(e,t),this._onDidChangeViewWelcomeContent.fire(e)})}registerViewWelcomeContent2(e,t){const i=new Map;for(const[n,s]of t)this._viewWelcomeContents.add(e,s),i.set(n,Ce(()=>{this._viewWelcomeContents.delete(e,s),this._onDidChangeViewWelcomeContent.fire(e)}));return this._onDidChangeViewWelcomeContent.fire(e),i}getViewWelcomeContent(e){const t=[];return this._viewWelcomeContents.forEach(e,i=>t.push(i)),t.sort(QP)}addViews(e,t){let i=this._views.get(t);i||(i=[],this._views.set(t,i),this._viewContainers.push(t));for(const n of e){if(this.getView(n.id)!==null)throw new Error(f("vs/workbench/common/views","duplicateId","A view with id '{0}' is already registered",n.id));i.push(n)}}removeViews(e,t){const i=this._views.get(t);if(!i)return[];const n=[],s=[];for(const o of i)e.includes(o)?n.push(o):s.push(o);return n.length&&(s.length?this._views.set(t,s):(this._views.delete(t),this._viewContainers.splice(this._viewContainers.indexOf(t),1))),n}}Jt.add(dp.ViewsRegistry,new JP),ie("viewDescriptorService");var oS;(function(r){r[r.Default=0]="Default",r[r.Expand=1]="Expand"})(oS||(oS={}));var aS;(function(r){r[r.None=0]="None",r[r.Collapsed=1]="Collapsed",r[r.Expanded=2]="Expanded"})(aS||(aS={}));class jn extends Error{constructor(e){super(f("vs/workbench/common/views","treeView.notRegistered","No tree view with id '{0}' registered.",e)),this.name="NoTreeViewError"}static is(e){return e.name==="NoTreeViewError"}}class KP{constructor(){this._dragOperations=new Map}removeDragOperationTransfer(e){if(e&&this._dragOperations.has(e)){const t=this._dragOperations.get(e);return this._dragOperations.delete(e),t}}addDragOperationTransfer(e,t){this._dragOperations.set(e,t)}}function cS(r,e){if(Oe(r))return{label:r};if(r&&typeof r=="object"&&typeof r.label=="string"){let t;return Array.isArray(r.highlights)&&(t=r.highlights.filter(i=>i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"),t=t.length?t:void 0),{label:r.label,highlights:t}}}class XP extends Ne{constructor(e,t,i){super(),this._proxy=e,this.commands=t,this.logService=i,this.treeViews=new Map,this.treeDragAndDropService=new KP;function n(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>n(s)?this.convertArgument(s):Array.isArray(s)&&s.length>0?s.map(o=>n(o)?this.convertArgument(o):o):s})}registerTreeDataProvider(e,t,i){const n=this.createTreeView(e,{treeDataProvider:t},i);return{dispose:()=>n.dispose()}}createTreeView(e,t,i){var h,g,b,_;if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const n=((h=t.dragAndDropController)==null?void 0:h.dropMimeTypes)??[],s=((g=t.dragAndDropController)==null?void 0:g.dragMimeTypes)??[],o=!!((b=t.dragAndDropController)!=null&&b.handleDrag),a=!!((_=t.dragAndDropController)!=null&&_.handleDrop),c=this.createExtHostTreeView(e,t,i),l={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:n,dragMimeTypes:s,hasHandleDrag:o,hasHandleDrop:a,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},u=this._proxy.$registerTreeViewDataProvider(e,l),d={get onDidCollapseElement(){return c.onDidCollapseElement},get onDidExpandElement(){return c.onDidExpandElement},get selection(){return c.selectedElements},get onDidChangeSelection(){return c.onDidChangeSelection},get activeItem(){return M(i,"treeViewActiveItem"),c.focusedElement},get onDidChangeActiveItem(){return M(i,"treeViewActiveItem"),c.onDidChangeActiveItem},get visible(){return c.visible},get onDidChangeVisibility(){return c.onDidChangeVisibility},get onDidChangeCheckboxState(){return c.onDidChangeCheckboxState},get message(){return c.message},set message(v){ps(v)&&M(i,"treeViewMarkdownMessage"),c.message=v},get title(){return c.title},set title(v){c.title=v},get description(){return c.description},set description(v){c.description=v},get badge(){return c.badge},set badge(v){v!==void 0&&Lm.isViewBadge(v)?c.badge={value:Math.floor(Math.abs(v.value)),tooltip:v.tooltip}:v===void 0&&(c.badge=void 0)},reveal:(v,E)=>c.reveal(v,E),dispose:async()=>{await u,this.treeViews.delete(e),c.dispose()}};return this._register(d),d}$getChildren(e,t){const i=this.treeViews.get(e);return i?i.getChildren(t):Promise.reject(new jn(e))}async $handleDrop(e,t,i,n,s,o,a,c){const l=this.treeViews.get(e);if(!l)return Promise.reject(new jn(e));const u=Lr.toDataTransfer(i,async d=>(await this._proxy.$resolveDropFileData(e,t,d)).buffer);return a===e&&c&&await this.addAdditionalTransferItems(u,l,c,s,o),l.onDrop(u,n,s)}async addAdditionalTransferItems(e,t,i,n,s){var a;const o=this.treeDragAndDropService.removeDragOperationTransfer(s);if(o)(a=await o)==null||a.forEach((c,l)=>{c&&e.set(l,c)});else if(s&&t.handleDrag){const c=t.handleDrag(i,e,n);this.treeDragAndDropService.addDragOperationTransfer(s,c),await c}return e}async $handleDrag(e,t,i,n){const s=this.treeViews.get(e);if(!s)return Promise.reject(new jn(e));const o=await this.addAdditionalTransferItems(new pl,s,t,n,i);if(!(!o||n.isCancellationRequested))return Lr.from(o)}async $hasResolve(e){const t=this.treeViews.get(e);if(!t)throw new jn(e);return t.hasResolve}$resolve(e,t,i){const n=this.treeViews.get(e);if(!n)throw new jn(e);return n.resolveTreeItem(t,i)}$setExpanded(e,t,i){const n=this.treeViews.get(e);if(!n)throw new jn(e);n.setExpanded(t,i)}$setSelectionAndFocus(e,t,i){const n=this.treeViews.get(e);if(!n)throw new jn(e);n.setSelectionAndFocus(t,i)}$setVisible(e,t){const i=this.treeViews.get(e);if(!i){if(!t)return;throw new jn(e)}i.setVisible(t)}$changeCheckboxState(e,t){const i=this.treeViews.get(e);if(!i)throw new jn(e);i.setCheckboxState(t)}createExtHostTreeView(e,t,i){const n=this._register(new ow(e,t,this._proxy,this.commands.converter,this.logService,i));return this.treeViews.set(e,n),n}convertArgument(e){const t=this.treeViews.get(e.$treeViewId);return t&&"$treeItemHandle"in e?t.getExtensionElement(e.$treeItemHandle):t&&"$focusedTreeItem"in e&&e.$focusedTreeItem?t.focusedElement:null}}const oc=class oc extends Ne{get visible(){return this._visible}get selectedElements(){return this._selectedHandles.map(e=>this.getExtensionElement(e)).filter(e=>!Gt(e))}get focusedElement(){return this._focusedHandle?this.getExtensionElement(this._focusedHandle):void 0}constructor(e,t,i,n,s,o){if(super(),this.viewId=e,this.proxy=i,this.commands=n,this.logService=s,this.extension=o,this.roots=void 0,this.elements=new Map,this.nodes=new Map,this._visible=!1,this._selectedHandles=[],this._focusedHandle=void 0,this._onDidExpandElement=this._register(new A),this.onDidExpandElement=this._onDidExpandElement.event,this._onDidCollapseElement=this._register(new A),this.onDidCollapseElement=this._onDidCollapseElement.event,this._onDidChangeSelection=this._register(new A),this.onDidChangeSelection=this._onDidChangeSelection.event,this._onDidChangeActiveItem=this._register(new A),this.onDidChangeActiveItem=this._onDidChangeActiveItem.event,this._onDidChangeVisibility=this._register(new A),this.onDidChangeVisibility=this._onDidChangeVisibility.event,this._onDidChangeCheckboxState=this._register(new A),this.onDidChangeCheckboxState=this._onDidChangeCheckboxState.event,this._onDidChangeData=this._register(new A),this.refreshPromise=Promise.resolve(),this.refreshQueue=Promise.resolve(),this._message="",this._title="",this._refreshCancellationSource=new kt,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const d of o.contributes.views[u])d.id===e&&(this._title=d.name);this.dataProvider=t.treeDataProvider,this.dndController=t.dragAndDropController,this.dataProvider.onDidChangeTreeData&&this._register(this.dataProvider.onDidChangeTreeData(u=>this._onDidChangeData.fire({message:!1,element:u})));let a,c;const l=St.debounce(this._onDidChangeData.event,(u,d)=>(u||(u={message:!1,elements:[]}),d.element!==!1&&(a||(a=new Promise(h=>c=h),this.refreshPromise=this.refreshPromise.then(()=>a)),Array.isArray(d.element)?u.elements.push(...d.element):u.elements.push(d.element)),d.message&&(u.message=!0),u),200,!0);this._register(l(({message:u,elements:d})=>{d.length&&(this.refreshQueue=this.refreshQueue.then(()=>{const h=c;return a=null,this.refresh(d).then(()=>h())})),u&&this.proxy.$setMessage(this.viewId,Le.fromStrict(this._message)??"")}))}async getChildren(e){const t=e?this.getExtensionElement(e):void 0;if(e&&!t)return this.logService.error(`No tree item with id '${e}' found.`),Promise.resolve([]);let i=this.getChildrenNodes(e);return i||(i=await this.fetchChildrenNodes(t)),i?i.map(n=>n.item):void 0}getExtensionElement(e){return this.elements.get(e)}reveal(e,t){t=t||{select:!0,focus:!1};const i=Gt(t.select)?!0:t.select,n=Gt(t.focus)?!1:t.focus,s=Gt(t.expand)?!1:t.expand;return typeof this.dataProvider.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):e?this.refreshPromise.then(()=>this.resolveUnknownParentChain(e)).then(o=>this.resolveTreeNode(e,o[o.length-1]).then(a=>this.proxy.$reveal(this.viewId,{item:a.item,parentChain:o.map(c=>c.item)},{select:i,focus:n,expand:s})),o=>this.logService.error(o)):this.proxy.$reveal(this.viewId,void 0,{select:i,focus:n,expand:s})}get message(){return this._message}set message(e){this._message=e,this._onDidChangeData.fire({message:!0,element:!1})}get title(){return this._title}set title(e){this._title=e,this.proxy.$setTitle(this.viewId,e,this._description)}get description(){return this._description}set description(e){this._description=e,this.proxy.$setTitle(this.viewId,this._title,e)}get badge(){return this._badge}set badge(e){var t,i;((t=this._badge)==null?void 0:t.value)===(e==null?void 0:e.value)&&((i=this._badge)==null?void 0:i.tooltip)===(e==null?void 0:e.tooltip)||(this._badge=hf.from(e),this.proxy.$setBadge(this.viewId,e))}setExpanded(e,t){const i=this.getExtensionElement(e);i&&(t?this._onDidExpandElement.fire(Object.freeze({element:i})):this._onDidCollapseElement.fire(Object.freeze({element:i})))}setSelectionAndFocus(e,t){const i=!ar(this._selectedHandles,e);this._selectedHandles=e;const n=this._focusedHandle!==t;this._focusedHandle=t,i&&this._onDidChangeSelection.fire(Object.freeze({selection:this.selectedElements})),n&&this._onDidChangeActiveItem.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(e){e!==this._visible&&(this._visible=e,this._onDidChangeVisibility.fire(Object.freeze({visible:this._visible})))}async setCheckboxState(e){const t=(await Promise.all(e.map(async i=>{const n=this.getExtensionElement(i.treeItemHandle);return n?{extensionItem:n,treeItem:await this.dataProvider.getTreeItem(n),newState:i.newState?dn.Checked:dn.Unchecked}:Promise.resolve(void 0)}))).filter(i=>i!==void 0);t.forEach(i=>{i.treeItem.checkboxState=i.newState?dn.Checked:dn.Unchecked}),this._onDidChangeCheckboxState.fire({items:t.map(i=>[i.extensionItem,i.newState])})}async handleDrag(e,t,i){var s;const n=[];for(const o of e){const a=this.getExtensionElement(o);a&&n.push(a)}if(!(!((s=this.dndController)!=null&&s.handleDrag)||n.length===0))return await this.dndController.handleDrag(n,t,i),t}get hasHandleDrag(){var e;return!!((e=this.dndController)!=null&&e.handleDrag)}async onDrop(e,t,i){var s;const n=t?this.getExtensionElement(t):void 0;if(!(!n&&t||!((s=this.dndController)!=null&&s.handleDrop)))return Ht(()=>{var o;return(o=this.dndController)!=null&&o.handleDrop?this.dndController.handleDrop(n,e,i):void 0})}get hasResolve(){return!!this.dataProvider.resolveTreeItem}async resolveTreeItem(e,t){if(!this.dataProvider.resolveTreeItem)return;const i=this.elements.get(e);if(i){const n=this.nodes.get(i);if(n){const s=await this.dataProvider.resolveTreeItem(n.extensionItem,i,t)??n.extensionItem;return this.validateTreeItem(s),n.item.tooltip=this.getTooltip(s.tooltip),n.item.command=this.getCommand(n.disposableStore,s.command),n.item}}}resolveUnknownParentChain(e){return this.resolveParent(e).then(t=>t?this.resolveUnknownParentChain(t).then(i=>this.resolveTreeNode(t,i[i.length-1]).then(n=>(i.push(n),i))):Promise.resolve([]))}resolveParent(e){const t=this.nodes.get(e);return t?Promise.resolve(t.parent?this.elements.get(t.parent.item.handle):void 0):Ht(()=>this.dataProvider.getParent(e))}resolveTreeNode(e,t){const i=this.nodes.get(e);return i?Promise.resolve(i):Ht(()=>this.dataProvider.getTreeItem(e)).then(n=>this.createHandle(e,n,t,!0)).then(n=>this.getChildren(t?t.item.handle:void 0).then(()=>{const s=this.getExtensionElement(n);if(s){const o=this.nodes.get(s);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${n} from extension ${this.extension.identifier.value}`)}))}getChildrenNodes(e){if(e){let t;if(typeof e=="string"){const i=this.getExtensionElement(e);t=i?this.nodes.get(i):void 0}else t=e;return t&&t.children||void 0}return this.roots}async fetchChildrenNodes(e){this.clearChildren(e);const t=new kt(this._refreshCancellationSource.token);try{const i=e?this.nodes.get(e):void 0,n=await this.dataProvider.getChildren(e);if(t.token.isCancellationRequested)return;const s=Yt(n||[]),o=await Promise.all(Yt(s).map(c=>this.dataProvider.getTreeItem(c)));if(t.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.createAndRegisterTreeNode(s[l],c,i):null);return Yt(a)}finally{t.dispose()}}refresh(e){if(e.some(i=>!i))return this._refreshCancellationSource.dispose(!0),this._refreshCancellationSource=new kt,this.clearAll(),this.proxy.$refresh(this.viewId);{const i=this.getHandlesToRefresh(e);if(i.length)return this.refreshHandles(i)}return Promise.resolve(void 0)}getHandlesToRefresh(e){const t=new Set,i=e.map(s=>this.nodes.get(s));for(const s of i)if(s&&!t.has(s.item.handle)){let o=s;for(;o&&o.parent&&i.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.elements.get(o.parent.item.handle);o=a?this.nodes.get(a):void 0}o&&!o.parent&&t.add(s.item.handle)}const n=[];return t.forEach(s=>{const o=this.elements.get(s);if(o){const a=this.nodes.get(o);a&&(!a.parent||!t.has(a.parent.item.handle))&&n.push(s)}}),n}refreshHandles(e){const t={};return Promise.all(e.map(i=>this.refreshNode(i).then(n=>{n&&(t[i]=n.item)}))).then(()=>Object.keys(t).length?this.proxy.$refresh(this.viewId,t):void 0)}refreshNode(e){const t=this.getExtensionElement(e);if(t){const i=this.nodes.get(t);if(i)return this.clearChildren(t),Ht(()=>this.dataProvider.getTreeItem(t)).then(n=>{if(n){const s=this.createTreeNode(t,n,i.parent);return this.updateNodeCache(t,s,i,i.parent),i.dispose(),s}return null})}return Promise.resolve(null)}createAndRegisterTreeNode(e,t,i){const n=this.createTreeNode(e,t,i);if(t.id&&this.elements.has(n.item.handle))throw new Error(f("vs/workbench/api/common/extHostTreeViews","treeView.duplicateElement","Element with id {0} is already registered",t.id));return this.addNodeToCache(e,n),this.addNodeToParentCache(n,i),n}getTooltip(e){return Ri.isMarkdownString(e)?Le.from(e):e}getCommand(e,t){return t?{...this.commands.toInternal(t,e),originalId:t.command}:void 0}getCheckbox(e){if(e.checkboxState===void 0)return;let t,i,n;return typeof e.checkboxState=="number"?t=e.checkboxState:(t=e.checkboxState.state,i=e.checkboxState.tooltip,n=e.checkboxState.accessibilityInformation),{isChecked:t===dn.Checked,tooltip:i,accessibilityInformation:n}}validateTreeItem(e){if(!hh.isTreeItem(e,this.extension))throw new Error(`Extension ${this.extension.identifier.value} has provided an invalid tree item.`)}createTreeNode(e,t,i){this.validateTreeItem(t);const n=this._register(new Pe),s=this.createHandle(e,t,i),o=this.getLightIconPath(t);return{item:{handle:s,parentHandle:i?i.item.handle:void 0,label:cS(t.label),description:t.description,resourceUri:t.resourceUri,tooltip:this.getTooltip(t.tooltip),command:this.getCommand(n,t.command),contextValue:t.contextValue,icon:o,iconDark:this.getDarkIconPath(t)||o,themeIcon:this.getThemeIcon(t),collapsibleState:Gt(t.collapsibleState)?Ts.None:t.collapsibleState,accessibilityInformation:t.accessibilityInformation,checkbox:this.getCheckbox(t)},extensionItem:t,parent:i,children:void 0,disposableStore:n,dispose(){n.dispose()}}}getThemeIcon(e){return e.iconPath instanceof Kt?e.iconPath:void 0}createHandle(e,{id:t,label:i,resourceUri:n},s,o){if(t)return`${oc.ID_HANDLE_PREFIX}/${t}`;const a=cS(i),c=s?s.item.handle:oc.LABEL_HANDLE_PREFIX;let l=a?a.label:n?cs(n):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.nodes.has(e)?this.nodes.get(e).item.handle:void 0,d=this.getChildrenNodes(s)||[];let h,g=0;do{if(h=`${c}/${g}:${l}`,o||!this.elements.has(h)||u===h)break;g++}while(g<=d.length);return h}getLightIconPath(e){if(e.iconPath&&!(e.iconPath instanceof Kt))return typeof e.iconPath=="string"||y.isUri(e.iconPath)?this.getIconPath(e.iconPath):this.getIconPath(e.iconPath.light)}getDarkIconPath(e){if(e.iconPath&&!(e.iconPath instanceof Kt)&&e.iconPath.dark)return this.getIconPath(e.iconPath.dark)}getIconPath(e){return y.isUri(e)?e:y.file(e)}addNodeToCache(e,t){this.elements.set(t.item.handle,e),this.nodes.set(e,t)}updateNodeCache(e,t,i,n){this.elements.delete(t.item.handle),this.nodes.delete(e),t.item.handle!==i.item.handle&&this.elements.delete(i.item.handle),this.addNodeToCache(e,t);const s=this.getChildrenNodes(n)||[],o=s.filter(a=>a.item.handle===i.item.handle)[0];o&&s.splice(s.indexOf(o),1,t)}addNodeToParentCache(e,t){t?(t.children||(t.children=[]),t.children.push(e)):(this.roots||(this.roots=[]),this.roots.push(e))}clearChildren(e){if(e){const t=this.nodes.get(e);if(t){if(t.children)for(const i of t.children){const n=this.elements.get(i.item.handle);n&&this.clear(n)}t.children=void 0}}else this.clearAll()}clear(e){const t=this.nodes.get(e);if(t){if(t.children)for(const i of t.children){const n=this.elements.get(i.item.handle);n&&this.clear(n)}this.nodes.delete(e),this.elements.delete(t.item.handle),t.dispose()}}clearAll(){this.roots=void 0,this.elements.clear(),this.nodes.forEach(e=>e.dispose()),this.nodes.clear()}dispose(){super.dispose(),this._refreshCancellationSource.dispose(),this.clearAll(),this.proxy.$disposeTree(this.viewId)}};oc.LABEL_HANDLE_PREFIX="0",oc.ID_HANDLE_PREFIX="1";let ow=oc;const Vp=class Vp{constructor(e){this._openers=new Map,this._proxy=e.getProxy(G.MainThreadUriOpeners)}registerExternalUriOpener(e,t,i,n){if(this._openers.has(t))throw new Error(`Opener with id '${t}' already registered`);const s=n.schemes.find(o=>!Vp.supportedSchemes.has(o));if(s)throw new Error(`Scheme '${s}' is not supported. Only http and https are currently supported.`);return this._openers.set(t,i),this._proxy.$registerUriOpener(t,n.schemes,e,n.label),Ce(()=>{this._openers.delete(t),this._proxy.$unregisterUriOpener(t)})}async $canOpenUri(e,t,i){const n=this._openers.get(e);if(!n)throw new Error(`Unknown opener with id: ${e}`);const s=y.revive(t);return n.canOpenExternalUri(s,i)}async $openUri(e,t,i){const n=this._openers.get(e);if(!n)throw new Error(`Unknown opener id: '${e}'`);return n.openExternalUri(y.revive(t.resolvedUri),{sourceUri:y.revive(t.sourceUri)},i)}};Vp.supportedSchemes=new Set([Y.http,Y.https]);let aw=Vp;const zp=class zp{constructor(e){this.handles=new _s,this.handlers=new Map,this._proxy=e.getProxy(G.MainThreadUrls)}registerUriHandler(e,t){const i=e.identifier;if(this.handles.has(i))throw new Error(`Protocol handler already registered for extension ${i}`);const n=zp.HandlePool++;return this.handles.add(i),this.handlers.set(n,t),this._proxy.$registerUriHandler(n,i,e.displayName||e.name),Ce(()=>{this.handles.delete(i),this.handlers.delete(n),this._proxy.$unregisterUriHandler(n)})}$handleExternalUri(e,t){const i=this.handlers.get(e);if(!i)return Promise.resolve(void 0);try{i.handleUri(y.revive(t))}catch(n){Ni(n)}return Promise.resolve(void 0)}async createAppUri(e){return y.revive(await this._proxy.$createAppUri(e))}};zp.HandlePool=0;let cw=zp;class YP extends Ne{constructor(t,i,n,s){super();le(this,jr,void 0);le(this,qr,void 0);le(this,Fu,void 0);le(this,ac,void 0);le(this,Hu,void 0);le(this,po,void 0);le(this,cc,void 0);le(this,er,void 0);le(this,lc,void 0);le(this,uc,void 0);le(this,Gr,void 0);le(this,dc,void 0);le(this,hc,void 0);J(this,er,void 0),J(this,lc,!0),J(this,Gr,!1),J(this,dc,this._register(new A)),this.onDidDispose=I(this,dc).event,J(this,hc,this._register(new A)),this.onDidChangeViewState=I(this,hc).event,J(this,jr,t),J(this,qr,i),J(this,ac,n),J(this,Fu,s.viewType),J(this,Hu,s.panelOptions),J(this,er,s.viewColumn),J(this,po,s.title),J(this,uc,s.active)}dispose(){I(this,Gr)||(J(this,Gr,!0),I(this,dc).fire(),I(this,qr).$disposeWebview(I(this,jr)),I(this,ac).dispose(),super.dispose())}get webview(){return this.assertNotDisposed(),I(this,ac)}get viewType(){return this.assertNotDisposed(),I(this,Fu)}get title(){return this.assertNotDisposed(),I(this,po)}set title(t){this.assertNotDisposed(),I(this,po)!==t&&(J(this,po,t),I(this,qr).$setTitle(I(this,jr),t))}get iconPath(){return this.assertNotDisposed(),I(this,cc)}set iconPath(t){this.assertNotDisposed(),I(this,cc)!==t&&(J(this,cc,t),I(this,qr).$setIconPath(I(this,jr),y.isUri(t)?{light:t,dark:t}:t))}get options(){return I(this,Hu)}get viewColumn(){if(this.assertNotDisposed(),!(typeof I(this,er)=="number"&&I(this,er)<0))return I(this,er)}get active(){return this.assertNotDisposed(),I(this,uc)}get visible(){return this.assertNotDisposed(),I(this,lc)}_updateViewState(t){I(this,Gr)||(this.active!==t.active||this.visible!==t.visible||this.viewColumn!==t.viewColumn)&&(J(this,uc,t.active),J(this,lc,t.visible),J(this,er,t.viewColumn),I(this,hc).fire({webviewPanel:this}))}reveal(t,i){this.assertNotDisposed(),I(this,qr).$reveal(I(this,jr),{viewColumn:typeof t>"u"?void 0:yt.from(t),preserveFocus:!!i})}assertNotDisposed(){if(I(this,Gr))throw new Error("Webview is disposed")}}jr=new WeakMap,qr=new WeakMap,Fu=new WeakMap,ac=new WeakMap,Hu=new WeakMap,po=new WeakMap,cc=new WeakMap,er=new WeakMap,lc=new WeakMap,uc=new WeakMap,Gr=new WeakMap,dc=new WeakMap,hc=new WeakMap;class lw extends Ne{static newHandle(){return En()}constructor(e,t,i){super(),this.webviews=t,this.workspace=i,this._webviewPanels=new Map,this._serializers=new Map,this._proxy=e.getProxy(G.MainThreadWebviewPanels)}dispose(){super.dispose(),this._webviewPanels.forEach(e=>e.dispose()),this._webviewPanels.clear()}createWebviewPanel(e,t,i,n,s={}){const o=typeof n=="object"?n.viewColumn:n,a={viewColumn:yt.from(o),preserveFocus:typeof n=="object"&&!!n.preserveFocus},c=Ma(e),l=lw.newHandle();this._proxy.$createWebviewPanel(Qf(e),l,t,{title:i,panelOptions:ZP(s),webviewOptions:vC(e,this.workspace,s),serializeBuffersForPostMessage:c},a);const u=this.webviews.createNewWebview(l,s,e);return this.createNewWebviewPanel(l,t,i,o,s,u,!0)}$onDidChangeWebviewPanelViewStates(e){const t=Object.keys(e);t.sort((i,n)=>{const s=e[i],o=e[n];return s.active?1:o.active?-1:+s.visible-+o.visible});for(const i of t){const n=this.getWebviewPanel(i);if(!n)continue;const s=e[i];n._updateViewState({active:s.active,visible:s.visible,viewColumn:yt.to(s.position)})}}async $onDidDisposeWebviewPanel(e){const t=this.getWebviewPanel(e);t==null||t.dispose(),this._webviewPanels.delete(e),this.webviews.deleteWebview(e)}registerWebviewPanelSerializer(e,t,i){if(this._serializers.has(t))throw new Error(`Serializer for '${t}' already registered`);return this._serializers.set(t,{serializer:i,extension:e}),this._proxy.$registerSerializer(t,{serializeBuffersForPostMessage:Ma(e)}),new Re(()=>{this._serializers.delete(t),this._proxy.$unregisterSerializer(t)})}async $deserializeWebviewPanel(e,t,i,n){const s=this._serializers.get(t);if(!s)throw new Error(`No serializer found for '${t}'`);const{serializer:o,extension:a}=s,c=this.webviews.createNewWebview(e,i.webviewOptions,a),l=this.createNewWebviewPanel(e,t,i.title,n,i.panelOptions,c,i.active);await o.deserializeWebviewPanel(l,i.state)}createNewWebviewPanel(e,t,i,n,s,o,a){const c=new YP(e,this._proxy,o,{viewType:t,title:i,viewColumn:n,panelOptions:s,active:a});return this._webviewPanels.set(e,c),c}getWebviewPanel(e){return this._webviewPanels.get(e)}}function ZP(r){return{enableFindWidget:r.enableFindWidget,retainContextWhenHidden:r.retainContextWhenHidden}}class eT extends Ne{constructor(t,i,n,s,o,a){super();le(this,Qr,void 0);le(this,Jr,void 0);le(this,Uu,void 0);le(this,fc,void 0);le(this,Kr,void 0);le(this,go,void 0);le(this,mo,void 0);le(this,pc,void 0);le(this,vo,void 0);le(this,gc,void 0);le(this,mc,void 0);J(this,Kr,!1),J(this,gc,this._register(new A)),this.onDidChangeVisibility=I(this,gc).event,J(this,mc,this._register(new A)),this.onDidDispose=I(this,mc).event,J(this,Uu,n),J(this,mo,s),J(this,Qr,t),J(this,Jr,i),J(this,fc,o),J(this,go,a)}dispose(){I(this,Kr)||(J(this,Kr,!0),I(this,mc).fire(),I(this,fc).dispose(),super.dispose())}get title(){return this.assertNotDisposed(),I(this,mo)}set title(t){this.assertNotDisposed(),I(this,mo)!==t&&(J(this,mo,t),I(this,Jr).$setWebviewViewTitle(I(this,Qr),t))}get description(){return this.assertNotDisposed(),I(this,pc)}set description(t){this.assertNotDisposed(),I(this,pc)!==t&&(J(this,pc,t),I(this,Jr).$setWebviewViewDescription(I(this,Qr),t))}get visible(){return I(this,go)}get webview(){return I(this,fc)}get viewType(){return I(this,Uu)}_setVisible(t){t===I(this,go)||I(this,Kr)||(J(this,go,t),I(this,gc).fire())}get badge(){return this.assertNotDisposed(),I(this,vo)}set badge(t){var i,n;this.assertNotDisposed(),!((t==null?void 0:t.value)===((i=I(this,vo))==null?void 0:i.value)&&(t==null?void 0:t.tooltip)===((n=I(this,vo))==null?void 0:n.tooltip))&&(J(this,vo,hf.from(t)),I(this,Jr).$setWebviewViewBadge(I(this,Qr),t))}show(t){this.assertNotDisposed(),I(this,Jr).$show(I(this,Qr),!!t)}assertNotDisposed(){if(I(this,Kr))throw new Error("Webview is disposed")}}Qr=new WeakMap,Jr=new WeakMap,Uu=new WeakMap,fc=new WeakMap,Kr=new WeakMap,go=new WeakMap,mo=new WeakMap,pc=new WeakMap,vo=new WeakMap,gc=new WeakMap,mc=new WeakMap;class tT{constructor(e,t){this._extHostWebview=t,this._viewProviders=new Map,this._webviewViews=new Map,this._proxy=e.getProxy(G.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,i,n){if(this._viewProviders.has(t))throw new Error(`View provider for '${t}' already registered`);return this._viewProviders.set(t,{provider:i,extension:e}),this._proxy.$registerWebviewViewProvider(Qf(e),t,{retainContextWhenHidden:n==null?void 0:n.retainContextWhenHidden,serializeBuffersForPostMessage:Ma(e)}),new Re(()=>{this._viewProviders.delete(t),this._proxy.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,i,n,s){const o=this._viewProviders.get(t);if(!o)throw new Error(`No view provider found for '${t}'`);const{provider:a,extension:c}=o,l=this._extHostWebview.createNewWebview(e,{},c),u=new eT(e,this._proxy,t,i,l,!0);this._webviewViews.set(e,u),await a.resolveWebviewView(u,{state:n},s)}async $onDidChangeWebviewViewVisibility(e,t){this.getWebviewView(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.getWebviewView(e);this._webviewViews.delete(e),t.dispose(),this._extHostWebview.deleteWebview(e)}getWebviewView(e){const t=this._webviewViews.get(e);if(!t)throw new Error("No webview found");return t}}new Z("debugType",void 0,{type:"string",description:f("vs/workbench/contrib/debug/common/debug","debugType","Debug type of the active debug session. For example 'python'.")}),new Z("debugConfigurationType",void 0,{type:"string",description:f("vs/workbench/contrib/debug/common/debug","debugConfigurationType","Debug type of the selected launch configuration. For example 'python'.")}),new Z("debugState","inactive",{type:"string",description:f("vs/workbench/contrib/debug/common/debug","debugState","State that the focused debug session is in. One of the following: 'inactive', 'initializing', 'stopped' or 'running'.")});const iT="debugUx";new Z(iT,"default",{type:"string",description:f("vs/workbench/contrib/debug/common/debug","debugUX","Debug UX state. When there are no debug configurations it is 'simple', otherwise 'default'. Used to decide when to show welcome views in the debug viewlet.")}),new Z("hasDebugged",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","hasDebugged","True when a debug session has been started at least once, false otherwise.")}),new Z("inDebugMode",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","inDebugMode","True when debugging, false otherwise.")}),new Z("inDebugRepl",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","inDebugRepl","True when focus is in the debug console, false otherwise.")}),new Z("breakpointWidgetVisible",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","breakpointWidgetVisibile","True when breakpoint editor zone widget is visible, false otherwise.")}),new Z("inBreakpointWidget",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","inBreakpointWidget","True when focus is in the breakpoint editor zone widget, false otherwise.")}),new Z("breakpointsFocused",!0,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","breakpointsFocused","True when the BREAKPOINTS view is focused, false otherwise.")}),new Z("watchExpressionsFocused",!0,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","watchExpressionsFocused","True when the WATCH view is focused, false otherwsie.")}),new Z("watchExpressionsExist",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","watchExpressionsExist","True when at least one watch expression exists, false otherwise.")}),new Z("variablesFocused",!0,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","variablesFocused","True when the VARIABLES views is focused, false otherwsie")}),new Z("expressionSelected",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","expressionSelected","True when an expression input box is open in either the WATCH or the VARIABLES view, false otherwise.")}),new Z("breakpointInputFocused",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","breakpointInputFocused","True when the input box has focus in the BREAKPOINTS view.")}),new Z("callStackItemType",void 0,{type:"string",description:f("vs/workbench/contrib/debug/common/debug","callStackItemType","Represents the item type of the focused element in the CALL STACK view. For example: 'session', 'thread', 'stackFrame'")}),new Z("callStackSessionIsAttach",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","callStackSessionIsAttach","True when the session in the CALL STACK view is attach, false otherwise. Used internally for inline menus in the CALL STACK view.")}),new Z("callStackItemStopped",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","callStackItemStopped","True when the focused item in the CALL STACK is stopped. Used internaly for inline menus in the CALL STACK view.")}),new Z("callStackSessionHasOneThread",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","callStackSessionHasOneThread","True when the focused session in the CALL STACK view has exactly one thread. Used internally for inline menus in the CALL STACK view.")}),new Z("watchItemType",void 0,{type:"string",description:f("vs/workbench/contrib/debug/common/debug","watchItemType","Represents the item type of the focused element in the WATCH view. For example: 'expression', 'variable'")}),new Z("canViewMemory",void 0,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","canViewMemory","Indicates whether the item in the view has an associated memory refrence.")}),new Z("breakpointItemType",void 0,{type:"string",description:f("vs/workbench/contrib/debug/common/debug","breakpointItemType","Represents the item type of the focused element in the BREAKPOINTS view. For example: 'breakpoint', 'exceptionBreakppint', 'functionBreakpoint', 'dataBreakpoint'")}),new Z("breakpointItemBytes",void 0,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","breakpointItemIsDataBytes","Whether the breakpoint item is a data breakpoint on a byte range.")}),new Z("breakpointHasModes",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","breakpointHasModes","Whether the breakpoint has multiple modes it can switch to.")}),new Z("breakpointSupportsCondition",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","breakpointSupportsCondition","True when the focused breakpoint supports conditions.")}),new Z("loadedScriptsSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","loadedScriptsSupported","True when the focused sessions supports the LOADED SCRIPTS view")}),new Z("loadedScriptsItemType",void 0,{type:"string",description:f("vs/workbench/contrib/debug/common/debug","loadedScriptsItemType","Represents the item type of the focused element in the LOADED SCRIPTS view.")}),new Z("focusedSessionIsAttach",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","focusedSessionIsAttach","True when the focused session is 'attach'.")}),new Z("focusedSessionIsNoDebug",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","focusedSessionIsNoDebug","True when the focused session is run without debugging.")}),new Z("stepBackSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","stepBackSupported","True when the focused session supports 'stepBack' requests.")}),new Z("restartFrameSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","restartFrameSupported","True when the focused session supports 'restartFrame' requests.")}),new Z("stackFrameSupportsRestart",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","stackFrameSupportsRestart","True when the focused stack frame suppots 'restartFrame'.")}),new Z("jumpToCursorSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","jumpToCursorSupported","True when the focused session supports 'jumpToCursor' request.")}),new Z("stepIntoTargetsSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","stepIntoTargetsSupported","True when the focused session supports 'stepIntoTargets' request.")}),new Z("breakpointsExist",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","breakpointsExist","True when at least one breakpoint exists.")}),new Z("debuggersAvailable",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","debuggersAvailable","True when there is at least one debug extensions active.")}),new Z("debugExtensionAvailable",!0,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","debugExtensionsAvailable","True when there is at least one debug extension installed and enabled.")}),new Z("debugProtocolVariableMenuContext",void 0,{type:"string",description:f("vs/workbench/contrib/debug/common/debug","debugProtocolVariableMenuContext","Represents the context the debug adapter sets on the focused variable in the VARIABLES view.")}),new Z("debugSetVariableSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","debugSetVariableSupported","True when the focused session supports 'setVariable' request.")}),new Z("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","debugSetDataBreakpointAddressSupported","True when the focused session supports 'getBreakpointInfo' request on an address.")}),new Z("debugSetExpressionSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","debugSetExpressionSupported","True when the focused session supports 'setExpression' request.")}),new Z("breakWhenValueChangesSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","breakWhenValueChangesSupported","True when the focused session supports to break when value changes.")}),new Z("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","breakWhenValueIsAccessedSupported","True when the focused breakpoint supports to break when value is accessed.")}),new Z("breakWhenValueIsReadSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","breakWhenValueIsReadSupported","True when the focused breakpoint supports to break when value is read.")}),new Z("terminateDebuggeeSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","terminateDebuggeeSupported","True when the focused session supports the terminate debuggee capability.")}),new Z("suspendDebuggeeSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","suspendDebuggeeSupported","True when the focused session supports the suspend debuggee capability.")}),new Z("variableEvaluateNamePresent",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","variableEvaluateNamePresent","True when the focused variable has an 'evalauteName' field set.")}),new Z("variableIsReadonly",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","variableIsReadonly","True when the focused variable is read-only.")}),new Z("variableValue",!1,{type:"string",description:f("vs/workbench/contrib/debug/common/debug","variableValue","Value of the variable, present for debug visualization clauses.")}),new Z("variableType",!1,{type:"string",description:f("vs/workbench/contrib/debug/common/debug","variableType","Type of the variable, present for debug visualization clauses.")}),new Z("variableInterfaces",!1,{type:"array",description:f("vs/workbench/contrib/debug/common/debug","variableInterfaces","Any interfaces or contracts that the variable satisfies, present for debug visualization clauses.")}),new Z("variableName",!1,{type:"string",description:f("vs/workbench/contrib/debug/common/debug","variableName","Name of the variable, present for debug visualization clauses.")}),new Z("variableLanguage",!1,{type:"string",description:f("vs/workbench/contrib/debug/common/debug","variableLanguage","Language of the variable source, present for debug visualization clauses.")}),new Z("variableExtensionId",!1,{type:"string",description:f("vs/workbench/contrib/debug/common/debug","variableExtensionId","Extension ID of the variable source, present for debug visualization clauses.")}),new Z("exceptionWidgetVisible",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","exceptionWidgetVisible","True when the exception widget is visible.")}),new Z("multiSessionRepl",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","multiSessionRepl","True when there is more than 1 debug console.")}),new Z("multiSessionDebug",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","multiSessionDebug","True when there is more than 1 active debug session.")}),new Z("disassembleRequestSupported",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","disassembleRequestSupported","True when the focused sessions supports disassemble request.")}),new Z("disassemblyViewFocus",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","disassemblyViewFocus","True when the Disassembly View is focused.")}),new Z("languageSupportsDisassembleRequest",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","languageSupportsDisassembleRequest","True when the language in the current editor supports disassemble request.")}),new Z("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:f("vs/workbench/contrib/debug/common/debug","focusedStackFrameHasInstructionReference","True when the focused stack frame has instruction pointer reference.")}),f("vs/workbench/contrib/debug/common/debug","internalConsoleOptions","Controls when the internal Debug Console should open.");var fp;(function(r){r[r.Initial=1]="Initial",r[r.Dynamic=2]="Dynamic"})(fp||(fp={}));var lS;(function(r){r.UnverifiedBreakpoints="unverifiedBreakpoints"})(lS||(lS={})),ie("debugService");var uS;(function(r){r.deserialize=e=>({id:e.id,name:e.name,iconPath:e.iconPath&&{light:y.revive(e.iconPath.light),dark:y.revive(e.iconPath.dark)},iconClass:e.iconClass,visualization:e.visualization}),r.serialize=e=>e})(uS||(uS={}));function nT(r){const e=r.get(Wt),t=r.get(Fo),i=r.get(Pf),n=r.get(Mr),s=r.get($n),o=r.get(Tf),a=r.get(Nn),c=r.get(Cd),l=r.get(We),u=r.get(X1),d=r.get(Z1),h=r.get(No),g=r.get(Je),b=r.get(rv),_=r.get($f),v=r.get(iC),E=r.get(xv),k=r.get(Zl),S=r.get(Ev),O=r.get(hv),T=r.get(gv);l.set(ne.ExtHostFileSystemInfo,t),l.set(ne.ExtHostLogLevelServiceShape,h),l.set(ne.ExtHostWorkspace,s),l.set(ne.ExtHostConfiguration,a),l.set(ne.ExtHostExtensionService,n),l.set(ne.ExtHostStorage,u),l.set(ne.ExtHostTunnelService,b),l.set(ne.ExtHostWindow,v),l.set(ne.ExtHostSecretState,E),l.set(ne.ExtHostTelemetry,o),l.set(ne.ExtHostEditorTabs,k),l.set(ne.ExtHostManagedSockets,S),l.set(ne.ExtHostAuthentication,O),l.set(ne.ExtHostChatProvider,T);const z=l.set(ne.ExtHostDecorations,r.get(L2)),ae=l.set(ne.ExtHostDocumentsAndEditors,r.get(ql)),ee=l.set(ne.ExtHostCommands,r.get(Aa)),j=l.set(ne.ExtHostTerminalService,r.get(Ra)),Be=l.set(ne.ExtHostTerminalShellIntegration,r.get(nC)),W=l.set(ne.ExtHostDebugService,r.get(Z2)),U=l.set(ne.ExtHostSearch,r.get(tC)),q=l.set(ne.ExtHostTask,r.get(Q2)),K=l.set(ne.ExtHostOutputService,r.get(R2)),re=l.set(ne.ExtHostLocalization,r.get(Sv)),ge=l.set(ne.ExtHostUrls,new cw(l)),pe=l.set(ne.ExtHostDocuments,new N8(l,ae)),it=l.set(ne.ExtHostDocumentContentProviders,new y_(l,ae,g)),at=l.set(ne.ExtHostDocumentSaveParticipant,new $8(g,pe,l.getProxy(G.MainThreadBulkEdits))),Ue=l.set(ne.ExtHostNotebook,new B_(l,ee,ae,pe,i,U)),zt=l.set(ne.ExtHostNotebookDocuments,new mP(Ue)),gt=l.set(ne.ExtHostNotebookEditors,new V_(g,Ue)),ci=l.set(ne.ExtHostNotebookKernels,new z_(l,e,Ue,ee,g)),_t=l.set(ne.ExtHostNotebookRenderers,new wP(l,Ue)),ki=l.set(ne.ExtHostNotebookDocumentSaveParticipant,new gP(g,Ue,l.getProxy(G.MainThreadBulkEdits))),ct=l.set(ne.ExtHostEditors,new BP(l,ae)),tr=l.set(ne.ExtHostTreeViews,new XP(l.getProxy(G.MainThreadTreeViews),ee,g)),ir=l.set(ne.ExtHostEditorInsets,new p8(l.getProxy(G.MainThreadEditorInsets),ct,e.remote)),_c=l.set(ne.ExtHostDiagnostics,new b_(l,g,t,ae)),_o=l.set(ne.ExtHostLanguages,new K8(l,pe,ee.converter,c)),De=l.set(ne.ExtHostLanguageFeatures,new T_(l,c,pe,ee,_c,g,_,o)),jp=l.set(ne.ExtHostFileSystem,new Yf(l,De)),li=l.set(ne.ExtHostFileSystemEventService,new z8(l,g,ae)),Di=l.set(ne.ExtHostQuickOpen,SP(l,s,ee)),qp=l.set(ne.ExtHostSCM,new Z_(l,ee,pe,g)),ww=l.set(ne.ExtHostQuickDiff,new Q_(l,c)),Ve=l.set(ne.ExtHostShare,new ew(l,c)),bw=l.set(ne.ExtHostComments,g8(l,ee,pe)),Gp=l.set(ne.ExtHostProgress,new xP(l.getProxy(G.MainThreadProgress))),Qp=l.set(ne.ExtHostLabelService,new Q8(l)),nr=l.set(ne.ExtHostTheming,new sw(l)),yw=l.set(ne.ExtHostTimeline,new VP(l,ee)),Wu=l.set(ne.ExtHostWebviews,new S8(l,e.remote,s,g,_)),Bu=l.set(ne.ExtHostWebviewPanels,new lw(l,Wu,s)),xw=l.set(ne.ExtHostCustomEditors,new T8(l,pe,d,Wu,Bu)),en=l.set(ne.ExtHostWebviewViews,new tT(l,Wu)),wo=l.set(ne.ExtHostTesting,new nw(l,g,ee,ae)),Cw=l.set(ne.ExtHostUriOpeners,new aw(l)),Sw=l.set(ne.ExtHostProfileContentHandlers,new bP(l));l.set(ne.ExtHostInteractive,new q8(l,Ue,ae,ee,g));const Ew=l.set(ne.ExtHostInlineChat,new S_(l,ee,pe,g)),bo=l.set(ne.ExtHostChatAgents2,new v_(l,g,ee)),wc=l.set(ne.ExtHostChatVariables,new __(l)),bc=l.set(ne.ExtHostChat,new m_(l)),Vu=l.set(ne.ExtHostAiRelatedInformation,new n8(l)),zu=l.set(ne.ExtHostAiEmbeddingVector,new M8(l)),yc=l.set(ne.ExtHostIssueReporter,new G8(l)),yo=l.set(ne.ExtHostStatusBar,new $P(l,ee.converter)),_i=l.set(ne.ExtHostSpeech,new tw(l)),xo=Object.values(ne);l.assertRegistered(xo);const ht=new p_(l,ae),kw=new d8(l),ju=new A_(l,g),Mt=new O8(l);return c8.register(ee),function(D,bn,Jp){function ce(m){return(w,C,te)=>{const Ie=m(je=>{try{w.call(C,je)}catch(Ot){Xp(new Error(`[ExtensionListenerError] Extension '${D.identifier.value}' FAILED to handle event: ${Ot.toString()}`,{cause:Ot})),o.onExtensionError(D.identifier,Ot)}});return te==null||te.push(Ie),Ie}}const ze=function(){let m=!D.isUnderDevelopment;function w(){m||(g.info(`Extension '${D.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),m=!0)}return function C(te){if(Array.isArray(te))te.forEach(C);else if(typeof te=="string")w();else{const Ie=te;typeof Ie.scheme>"u"&&w(),typeof Ie.exclusive=="boolean"&&M(D,"documentFiltersExclusive")}return te}}(),Dw={getSession(m,w,C){return typeof(C==null?void 0:C.forceNewSession)=="object"&&C.forceNewSession.learnMore&&M(D,"authLearnMore"),O.getSession(D,m,w,C)},getSessions(m,w){return M(D,"authGetSessions"),O.getSessions(D,m,w)},async hasSession(m,w){return M(D,"authSession"),!!await O.getSession(D,m,w,{silent:!0})},get onDidChangeSessions(){return ce(O.onDidChangeSessions)},registerAuthenticationProvider(m,w,C,te){return O.registerAuthenticationProvider(m,w,C,te)}},Iw={registerCommand(m,w,C){return ee.registerCommand(!0,m,w,C,void 0,D)},registerTextEditorCommand(m,w,C){return ee.registerCommand(!0,m,(...te)=>{const Ie=ct.getActiveTextEditor();if(!Ie){g.warn("Cannot execute "+m+" because there is no active text editor.");return}return Ie.edit(je=>{w.apply(C,[Ie,je,...te])}).then(je=>{je||g.warn("Edits from command "+m+" were not applied.")},je=>{g.warn("An error occurred while running command "+m,je)})},void 0,void 0,D)},registerDiffInformationCommand:(m,w,C)=>(M(D,"diffCommand"),ee.registerCommand(!0,m,async(...te)=>{const Ie=ae.activeEditor(!0);if(!Ie){g.warn("Cannot execute "+m+" because there is no active text editor.");return}const je=await ct.getDiffInformation(Ie.id);w.apply(C,[je,...te])},void 0,void 0,D)),executeCommand(m,...w){return ee.executeCommand(m,...w)},getCommands(m=!1){return ee.getCommands(m)}},Pw={get machineId(){return e.telemetryInfo.machineId},get sessionId(){return e.telemetryInfo.sessionId},get language(){return e.environment.appLanguage},get appName(){return e.environment.appName},get appRoot(){var m;return((m=e.environment.appRoot)==null?void 0:m.fsPath)??""},get appHost(){return e.environment.appHost},get uriScheme(){return e.environment.appUriScheme},get clipboard(){return kw.value},get shell(){return j.getDefaultShell(!1)},get onDidChangeShell(){return ce(j.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return ce(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return M(D,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return M(D,"telemetry"),ce(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return n2(e.telemetryInfo.firstSessionDate)},createTelemetryLogger(m,w){return i2.validateSender(m),o.instantiateLogger(D,m,w)},openExternal(m,w){return v.openUri(m,{allowTunneling:!!e.remote.authority,allowContributedOpeners:w==null?void 0:w.allowContributedOpeners})},async asExternalUri(m){if(m.scheme===e.environment.appUriScheme)return ge.createAppUri(m);try{return await v.asExternalUri(m,{allowTunneling:!!e.remote.authority})}catch(w){if(kg(m,Y.http)||kg(m,Y.https))return m;throw w}},get remoteName(){return cm(e.remote.authority)},get remoteAuthority(){return M(D,"resolvers"),e.remote.authority},get uiKind(){return e.uiKind},get logLevel(){return g.getLevel()},get onDidChangeLogLevel(){return ce(g.onDidChangeLogLevel)},registerIssueUriRequestHandler(m){return M(D,"handleIssueUri"),yc.registerIssueUriRequestHandler(D,m)},registerIssueDataProvider(m){return M(D,"handleIssueUri"),yc.registerIssueDataProvider(D,m)},get appQuality(){return M(D,"resolvers"),e.quality},get appCommit(){return M(D,"resolvers"),e.commit}},Tw={createTestController(m,w,C){return wo.createTestController(D,m,w,C)},createTestObserver(){return M(D,"testObserver"),wo.createTestObserver()},runTests(m){return M(D,"testObserver"),wo.runTests(m)},get onDidChangeTestResults(){return M(D,"testObserver"),ce(wo.onResultsChanged)},get testResults(){return M(D,"testObserver"),wo.results}},rr=e.remote.isRemote?Ls.Workspace:Ls.UI,Aw={getExtension(m,w){At(D,"extensionsAny")||(w=!1);const C=bn.mine.getExtensionDescription(m);if(C)return new Vl(n,D.identifier,C,rr,!1);if(w){const te=bn.all.getExtensionDescription(m);if(te)return new Vl(n,D.identifier,te,rr,!0)}},get all(){const m=[];for(const w of bn.mine.getAllExtensionDescriptions())m.push(new Vl(n,D.identifier,w,rr,!1));return m},get allAcrossExtensionHosts(){M(D,"extensionsAny");const m=new _s(bn.mine.getAllExtensionDescriptions().map(C=>C.identifier)),w=[];for(const C of bn.all.getAllExtensionDescriptions()){const te=!m.has(C.identifier);w.push(new Vl(n,D.identifier,C,rr,te))}return w},get onDidChange(){return At(D,"extensionsAny")?ce(St.any(bn.mine.onDidChange,bn.all.onDidChange)):ce(bn.mine.onDidChange)}},Rw={createDiagnosticCollection(m){return _c.createDiagnosticCollection(D.identifier,m)},get onDidChangeDiagnostics(){return ce(_c.onDidChangeDiagnostics)},getDiagnostics:m=>_c.getDiagnostics(m),getLanguages(){return _o.getLanguages()},setTextDocumentLanguage(m,w){return _o.changeLanguage(m.uri,w)},match(m,w){var Ie;const C=C1.from(m);let te;return aC(C)&&(te=(Ie=Ue.notebookDocuments.find(je=>je.apiNotebook.getCells().find(Ot=>Ot.document===w)))==null?void 0:Ie.apiNotebook),oC(C,w.uri,w.languageId,!0,te==null?void 0:te.uri,te==null?void 0:te.notebookType)},registerCodeActionsProvider(m,w,C){return De.registerCodeActionProvider(D,ze(m),w,C)},registerDocumentPasteEditProvider(m,w,C){return M(D,"documentPaste"),De.registerDocumentPasteEditProvider(D,ze(m),w,C)},registerCodeLensProvider(m,w){return De.registerCodeLensProvider(D,ze(m),w)},registerDefinitionProvider(m,w){return De.registerDefinitionProvider(D,ze(m),w)},registerDeclarationProvider(m,w){return De.registerDeclarationProvider(D,ze(m),w)},registerImplementationProvider(m,w){return De.registerImplementationProvider(D,ze(m),w)},registerTypeDefinitionProvider(m,w){return De.registerTypeDefinitionProvider(D,ze(m),w)},registerHoverProvider(m,w){return De.registerHoverProvider(D,ze(m),w,D.identifier)},registerEvaluatableExpressionProvider(m,w){return De.registerEvaluatableExpressionProvider(D,ze(m),w,D.identifier)},registerInlineValuesProvider(m,w){return De.registerInlineValuesProvider(D,ze(m),w,D.identifier)},registerDocumentHighlightProvider(m,w){return De.registerDocumentHighlightProvider(D,ze(m),w)},registerMultiDocumentHighlightProvider(m,w){return De.registerMultiDocumentHighlightProvider(D,ze(m),w)},registerLinkedEditingRangeProvider(m,w){return De.registerLinkedEditingRangeProvider(D,ze(m),w)},registerReferenceProvider(m,w){return De.registerReferenceProvider(D,ze(m),w)},registerRenameProvider(m,w){return De.registerRenameProvider(D,ze(m),w)},registerNewSymbolNamesProvider(m,w){return M(D,"newSymbolNamesProvider"),De.registerNewSymbolNamesProvider(D,ze(m),w)},registerDocumentSymbolProvider(m,w,C){return De.registerDocumentSymbolProvider(D,ze(m),w,C)},registerWorkspaceSymbolProvider(m){return De.registerWorkspaceSymbolProvider(D,m)},registerDocumentFormattingEditProvider(m,w){return De.registerDocumentFormattingEditProvider(D,ze(m),w)},registerDocumentRangeFormattingEditProvider(m,w){return De.registerDocumentRangeFormattingEditProvider(D,ze(m),w)},registerOnTypeFormattingEditProvider(m,w,C,...te){return De.registerOnTypeFormattingEditProvider(D,ze(m),w,[C].concat(te))},registerDocumentSemanticTokensProvider(m,w,C){return De.registerDocumentSemanticTokensProvider(D,ze(m),w,C)},registerDocumentRangeSemanticTokensProvider(m,w,C){return De.registerDocumentRangeSemanticTokensProvider(D,ze(m),w,C)},registerSignatureHelpProvider(m,w,C,...te){return typeof C=="object"?De.registerSignatureHelpProvider(D,ze(m),w,C):De.registerSignatureHelpProvider(D,ze(m),w,typeof C>"u"?[]:[C,...te])},registerCompletionItemProvider(m,w,...C){return De.registerCompletionItemProvider(D,ze(m),w,C)},registerInlineCompletionItemProvider(m,w,C){return w.handleDidShowCompletionItem&&M(D,"inlineCompletionsAdditions"),w.handleDidPartiallyAcceptCompletionItem&&M(D,"inlineCompletionsAdditions"),C&&M(D,"inlineCompletionsAdditions"),De.registerInlineCompletionsProvider(D,ze(m),w,C)},registerInlineEditProvider(m,w){return M(D,"inlineEdit"),De.registerInlineEditProvider(D,ze(m),w)},registerDocumentLinkProvider(m,w){return De.registerDocumentLinkProvider(D,ze(m),w)},registerColorProvider(m,w){return De.registerColorProvider(D,ze(m),w)},registerFoldingRangeProvider(m,w){return De.registerFoldingRangeProvider(D,ze(m),w)},registerSelectionRangeProvider(m,w){return De.registerSelectionRangeProvider(D,m,w)},registerCallHierarchyProvider(m,w){return De.registerCallHierarchyProvider(D,m,w)},registerTypeHierarchyProvider(m,w){return De.registerTypeHierarchyProvider(D,m,w)},setLanguageConfiguration:(m,w)=>De.setLanguageConfiguration(D,m,w),getTokenInformationAtPosition(m,w){return M(D,"tokenInformation"),_o.tokenAtPosition(m,w)},registerInlayHintsProvider(m,w){return De.registerInlayHintsProvider(D,m,w)},createLanguageStatusItem(m,w){return _o.createLanguageStatusItem(D,m,w)},registerDocumentDropEditProvider(m,w,C){return De.registerDocumentOnDropEditProvider(D,m,w,At(D,"dropMetadata")?C:void 0)}},Lw={get activeTextEditor(){return ct.getActiveTextEditor()},get visibleTextEditors(){return ct.getVisibleTextEditors()},get activeTerminal(){return j.activeTerminal},get terminals(){return j.terminals},async showTextDocument(m,w,C){y.isUri(m)&&m.scheme===Y.vscodeRemote&&!m.authority&&_.report("workspace.showTextDocument",D,"A URI of 'vscode-remote' scheme requires an authority.");const te=await(y.isUri(m)?Promise.resolve(Kp.openTextDocument(m)):Promise.resolve(m));return ct.showTextDocument(te,w,C)},createTextEditorDecorationType(m){return ct.createTextEditorDecorationType(D,m)},onDidChangeActiveTextEditor(m,w,C){return ce(ct.onDidChangeActiveTextEditor)(m,w,C)},onDidChangeVisibleTextEditors(m,w,C){return ce(ct.onDidChangeVisibleTextEditors)(m,w,C)},onDidChangeTextEditorSelection(m,w,C){return ce(ct.onDidChangeTextEditorSelection)(m,w,C)},onDidChangeTextEditorOptions(m,w,C){return ce(ct.onDidChangeTextEditorOptions)(m,w,C)},onDidChangeTextEditorVisibleRanges(m,w,C){return ce(ct.onDidChangeTextEditorVisibleRanges)(m,w,C)},onDidChangeTextEditorViewColumn(m,w,C){return ce(ct.onDidChangeTextEditorViewColumn)(m,w,C)},onDidCloseTerminal(m,w,C){return ce(j.onDidCloseTerminal)(m,w,C)},onDidOpenTerminal(m,w,C){return ce(j.onDidOpenTerminal)(m,w,C)},onDidChangeActiveTerminal(m,w,C){return ce(j.onDidChangeActiveTerminal)(m,w,C)},onDidChangeTerminalDimensions(m,w,C){return M(D,"terminalDimensions"),ce(j.onDidChangeTerminalDimensions)(m,w,C)},onDidChangeTerminalState(m,w,C){return ce(j.onDidChangeTerminalState)(m,w,C)},onDidWriteTerminalData(m,w,C){return M(D,"terminalDataWriteEvent"),ce(j.onDidWriteTerminalData)(m,w,C)},onDidExecuteTerminalCommand(m,w,C){return M(D,"terminalExecuteCommandEvent"),ce(j.onDidExecuteTerminalCommand)(m,w,C)},onDidChangeTerminalShellIntegration(m,w,C){return M(D,"terminalShellIntegration"),ce(Be.onDidChangeTerminalShellIntegration)(m,w,C)},onDidStartTerminalShellExecution(m,w,C){return M(D,"terminalShellIntegration"),ce(Be.onDidStartTerminalShellExecution)(m,w,C)},onDidEndTerminalShellExecution(m,w,C){return M(D,"terminalShellIntegration"),ce(Be.onDidEndTerminalShellExecution)(m,w,C)},get state(){return v.getState(D)},onDidChangeWindowState(m,w,C){return ce(v.onDidChangeWindowState)(m,w,C)},showInformationMessage(m,...w){return ju.showMessage(D,pt.Info,m,w[0],w.slice(1))},showWarningMessage(m,...w){return ju.showMessage(D,pt.Warning,m,w[0],w.slice(1))},showErrorMessage(m,...w){return ju.showMessage(D,pt.Error,m,w[0],w.slice(1))},showQuickPick(m,w,C){return Di.showQuickPick(D,m,w,C)},showWorkspaceFolderPick(m){return Di.showWorkspaceFolderPick(m)},showInputBox(m,w){return Di.showInput(m,w)},showOpenDialog(m){return Mt.showOpenDialog(D,m)},showSaveDialog(m){return Mt.showSaveDialog(m)},createStatusBarItem(m,w,C){let te,Ie,je;return typeof m=="string"?(te=m,Ie=w,je=C):(Ie=m,je=w),yo.createStatusBarEntry(D,te,Ie,je)},setStatusBarMessage(m,w){return yo.setStatusBarMessage(m,w)},withScmProgress(m){return _.report("window.withScmProgress",D,"Use 'withProgress' instead."),Gp.withProgress(D,{location:Ps.SourceControl},(w,C)=>m({report(te){}}))},withProgress(m,w){return Gp.withProgress(D,m,w)},createOutputChannel(m,w){return K.createOutputChannel(m,w,D)},createWebviewPanel(m,w,C,te){return Bu.createWebviewPanel(D,m,w,C,te)},createWebviewTextEditorInset(m,w,C,te){return M(D,"editorInsets"),ir.createWebviewEditorInset(m,w,C,te,D)},createTerminal(m,w,C){return typeof m=="object"?"pty"in m?j.createExtensionTerminal(m):j.createTerminalFromOptions(m):j.createTerminal(m,w,C)},registerTerminalLinkProvider(m){return j.registerLinkProvider(m)},registerTerminalProfileProvider(m,w){return j.registerProfileProvider(D,m,w)},registerTerminalQuickFixProvider(m,w){return M(D,"terminalQuickFixProvider"),j.registerTerminalQuickFixProvider(m,D.identifier.value,w)},registerTreeDataProvider(m,w){return tr.registerTreeDataProvider(m,w,D)},createTreeView(m,w){return tr.createTreeView(m,w,D)},registerWebviewPanelSerializer:(m,w)=>Bu.registerWebviewPanelSerializer(D,m,w),registerCustomEditorProvider:(m,w,C={})=>xw.registerCustomEditorProvider(D,m,w,C),registerFileDecorationProvider(m){return z.registerFileDecorationProvider(m,D)},registerUriHandler(m){return ge.registerUriHandler(D,m)},createQuickPick(){return Di.createQuickPick(D)},createInputBox(){return Di.createInputBox(D)},get activeColorTheme(){return nr.activeColorTheme},onDidChangeActiveColorTheme(m,w,C){return ce(nr.onDidChangeActiveColorTheme)(m,w,C)},registerWebviewViewProvider(m,w,C){return en.registerWebviewViewProvider(D,m,w,C==null?void 0:C.webviewOptions)},get activeNotebookEditor(){return Ue.activeNotebookEditor},onDidChangeActiveNotebookEditor(m,w,C){return ce(Ue.onDidChangeActiveNotebookEditor)(m,w,C)},get visibleNotebookEditors(){return Ue.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return ce(Ue.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(m,w,C){return ce(gt.onDidChangeNotebookEditorSelection)(m,w,C)},onDidChangeNotebookEditorVisibleRanges(m,w,C){return ce(gt.onDidChangeNotebookEditorVisibleRanges)(m,w,C)},showNotebookDocument(m,w){return Ue.showNotebookDocument(m,w)},registerExternalUriOpener(m,w,C){return M(D,"externalUriOpener"),Cw.registerExternalUriOpener(D.identifier,m,w,C)},registerProfileContentHandler(m,w){return M(D,"profileContentHandlers"),Sw.registerProfileContentHandler(D,m,w)},registerQuickDiffProvider(m,w,C,te){return M(D,"quickDiffProvider"),ww.registerQuickDiffProvider(ze(m),w,C,te)},get tabGroups(){return k.tabGroups},registerShareProvider(m,w){return M(D,"shareProvider"),Ve.registerShareProvider(ze(m),w)}},Kp={get rootPath(){return _.report("workspace.rootPath",D,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),s.getPath()},set rootPath(m){throw new Zr("rootPath")},getWorkspaceFolder(m){return s.getWorkspaceFolder(m)},get workspaceFolders(){return s.getWorkspaceFolders()},get name(){return s.name},set name(m){throw new Zr("name")},get workspaceFile(){return s.workspaceFile},set workspaceFile(m){throw new Zr("workspaceFile")},updateWorkspaceFolders:(m,w,...C)=>s.updateWorkspaceFolders(D,m,w||0,...C),onDidChangeWorkspaceFolders:function(m,w,C){return ce(s.onDidChangeWorkspace)(m,w,C)},asRelativePath:(m,w)=>s.getRelativePath(m,w),findFiles:(m,w,C,te)=>s.findFiles(m,w,C,D.identifier,te),findFiles2:(m,w,C)=>(M(D,"findFiles2"),s.findFiles2(m,w,D.identifier,C)),findTextInFiles:(m,w,C,te)=>{M(D,"findTextInFiles");let Ie,je;return typeof w=="object"?(Ie=w,je=C):(Ie={},je=w,te=C),s.findTextInFiles(m,Ie||{},je,D.identifier,te)},save:m=>s.save(m),saveAs:m=>s.saveAs(m),saveAll:m=>s.saveAll(m),applyEdit(m,w){return ht.applyWorkspaceEdit(m,D,w)},createFileSystemWatcher:(m,w,C,te)=>{let Ie;return typeof w=="boolean"?Ie={ignoreCreateEvents:!!w,ignoreChangeEvents:!!C,ignoreDeleteEvents:!!te,correlate:!1}:w&&(M(D,"createFileSystemWatcher"),Ie={...w,correlate:!0}),li.createFileSystemWatcher(s,D,m,Ie)},get textDocuments(){return pe.getAllDocumentData().map(m=>m.document)},set textDocuments(m){throw new Zr("textDocuments")},openTextDocument(m){let w;const C=m;if(typeof m=="string")w=Promise.resolve(y.file(m));else if(y.isUri(m))w=Promise.resolve(m);else if(!C||typeof C=="object")w=pe.createDocumentData(C);else throw new Error("illegal argument - uriOrFileNameOrOptions");return w.then(te=>(te.scheme===Y.vscodeRemote&&!te.authority&&_.report("workspace.openTextDocument",D,"A URI of 'vscode-remote' scheme requires an authority."),pe.ensureDocumentData(te).then(Ie=>Ie.document)))},onDidOpenTextDocument:(m,w,C)=>ce(pe.onDidAddDocument)(m,w,C),onDidCloseTextDocument:(m,w,C)=>ce(pe.onDidRemoveDocument)(m,w,C),onDidChangeTextDocument:(m,w,C)=>ce(pe.onDidChangeDocument)(m,w,C),onDidSaveTextDocument:(m,w,C)=>ce(pe.onDidSaveDocument)(m,w,C),onWillSaveTextDocument:(m,w,C)=>ce(at.getOnWillSaveTextDocumentEvent(D))(m,w,C),get notebookDocuments(){return Ue.notebookDocuments.map(m=>m.apiNotebook)},async openNotebookDocument(m,w){let C;if(y.isUri(m))C=m,await Ue.openNotebookDocument(m);else if(typeof m=="string")C=y.revive(await Ue.createNotebookDocument({viewType:m,content:w}));else throw new Error("Invalid arguments");return Ue.getNotebookDocument(C).apiNotebook},onDidSaveNotebookDocument(m,w,C){return ce(zt.onDidSaveNotebookDocument)(m,w,C)},onDidChangeNotebookDocument(m,w,C){return ce(zt.onDidChangeNotebookDocument)(m,w,C)},onWillSaveNotebookDocument(m,w,C){return ce(ki.getOnWillSaveNotebookDocumentEvent(D))(m,w,C)},get onDidOpenNotebookDocument(){return ce(Ue.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return ce(Ue.onDidCloseNotebookDocument)},registerNotebookSerializer(m,w,C,te){return Ue.registerNotebookSerializer(D,m,w,C,At(D,"notebookLiveShare")?te:void 0)},onDidChangeConfiguration:(m,w,C)=>ce(Jp.onDidChangeConfiguration)(m,w,C),getConfiguration(m,w){return w=arguments.length===1?void 0:w,Jp.getConfiguration(m,w,D)},registerTextDocumentContentProvider(m,w){return it.registerTextDocumentContentProvider(m,w)},registerTaskProvider:(m,w)=>(_.report("window.registerTaskProvider",D,"Use the corresponding function on the 'tasks' namespace instead"),q.registerTaskProvider(D,m,w)),registerFileSystemProvider(m,w,C){return ib(jp.registerFileSystemProvider(D,m,w,C),i.addFileSystemProvider(m,w,C))},get fs(){return i.value},registerFileSearchProvider:(m,w)=>(M(D,"fileSearchProvider"),U.registerFileSearchProvider(m,w)),registerTextSearchProvider:(m,w)=>(M(D,"textSearchProvider"),U.registerTextSearchProvider(m,w)),registerAITextSearchProvider:(m,w)=>(M(D,"aiTextSearchProvider"),M(D,"textSearchProvider"),U.registerAITextSearchProvider(m,w)),registerRemoteAuthorityResolver:(m,w)=>(M(D,"resolvers"),n.registerRemoteAuthorityResolver(m,w)),registerResourceLabelFormatter:m=>(M(D,"resolvers"),Qp.$registerResourceLabelFormatter(m)),getRemoteExecServer:m=>(M(D,"resolvers"),n.getRemoteExecServer(m)),onDidCreateFiles:(m,w,C)=>ce(li.onDidCreateFile)(m,w,C),onDidDeleteFiles:(m,w,C)=>ce(li.onDidDeleteFile)(m,w,C),onDidRenameFiles:(m,w,C)=>ce(li.onDidRenameFile)(m,w,C),onWillCreateFiles:(m,w,C)=>ce(li.getOnWillCreateFileEvent(D))(m,w,C),onWillDeleteFiles:(m,w,C)=>ce(li.getOnWillDeleteFileEvent(D))(m,w,C),onWillRenameFiles:(m,w,C)=>ce(li.getOnWillRenameFileEvent(D))(m,w,C),openTunnel:m=>(M(D,"tunnels"),b.openTunnel(D,m).then(w=>{if(!w)throw new Error("cannot open tunnel");return w})),get tunnels(){return M(D,"tunnels"),b.getTunnels()},onDidChangeTunnels:(m,w,C)=>(M(D,"tunnels"),ce(b.onDidChangeTunnels)(m,w,C)),registerPortAttributesProvider:(m,w)=>(M(D,"portsAttributes"),b.registerPortsAttributesProvider(m,w)),registerTunnelProvider:(m,w)=>(M(D,"tunnelFactory"),b.registerTunnelProvider(m,w)),registerTimelineProvider:(m,w)=>(M(D,"timeline"),yw.registerTimelineProvider(m,w,D.identifier,ee.converter)),get isTrusted(){return s.trusted},requestWorkspaceTrust:m=>(M(D,"workspaceTrust"),s.requestWorkspaceTrust(m)),onDidGrantWorkspaceTrust:(m,w,C)=>ce(s.onDidGrantWorkspaceTrust)(m,w,C),registerEditSessionIdentityProvider:(m,w)=>(M(D,"editSessionIdentityProvider"),s.registerEditSessionIdentityProvider(m,w)),onWillCreateEditSessionIdentity:(m,w,C)=>(M(D,"editSessionIdentityProvider"),ce(s.getOnWillCreateEditSessionIdentityEvent(D))(m,w,C)),registerCanonicalUriProvider:(m,w)=>(M(D,"canonicalUriProvider"),s.registerCanonicalUriProvider(m,w)),getCanonicalUri:(m,w,C)=>(M(D,"canonicalUriProvider"),s.provideCanonicalUri(m,w,C))},Ow={get inputBox(){return _.report("scm.inputBox",D,"Use 'SourceControl.inputBox' instead"),qp.getLastInputBox(D)},createSourceControl(m,w,C){return qp.createSourceControl(D,m,w,C)}},qu={createCommentController(m,w){return bw.createCommentController(D,m,w)}},$w={get activeDebugSession(){return W.activeDebugSession},get activeDebugConsole(){return W.activeDebugConsole},get breakpoints(){return W.breakpoints},get activeStackItem(){if(At(D,"debugFocus"))return W.activeStackItem},registerDebugVisualizationProvider(m,w){return M(D,"debugVisualization"),W.registerDebugVisualizationProvider(D,m,w)},registerDebugVisualizationTreeProvider(m,w){return M(D,"debugVisualization"),W.registerDebugVisualizationTree(D,m,w)},onDidStartDebugSession(m,w,C){return ce(W.onDidStartDebugSession)(m,w,C)},onDidTerminateDebugSession(m,w,C){return ce(W.onDidTerminateDebugSession)(m,w,C)},onDidChangeActiveDebugSession(m,w,C){return ce(W.onDidChangeActiveDebugSession)(m,w,C)},onDidReceiveDebugSessionCustomEvent(m,w,C){return ce(W.onDidReceiveDebugSessionCustomEvent)(m,w,C)},onDidChangeBreakpoints(m,w,C){return ce(W.onDidChangeBreakpoints)(m,w,C)},onDidChangeActiveStackItem(m,w,C){return M(D,"debugFocus"),ce(W.onDidChangeActiveStackItem)(m,w,C)},registerDebugConfigurationProvider(m,w,C){return W.registerDebugConfigurationProvider(m,w,C||fp.Initial)},registerDebugAdapterDescriptorFactory(m,w){return W.registerDebugAdapterDescriptorFactory(D,m,w)},registerDebugAdapterTrackerFactory(m,w){return W.registerDebugAdapterTrackerFactory(m,w)},startDebugging(m,w,C){return!C||typeof C=="object"&&"configuration"in C?W.startDebugging(m,w,{parentSession:C}):W.startDebugging(m,w,C||{})},stopDebugging(m){return W.stopDebugging(m)},addBreakpoints(m){return W.addBreakpoints(m)},removeBreakpoints(m){return W.removeBreakpoints(m)},asDebugSourceUri(m,w){return W.asDebugSourceUri(m,w)}},Nw={registerTaskProvider:(m,w)=>q.registerTaskProvider(D,m,w),fetchTasks:m=>q.fetchTasks(m),executeTask:m=>q.executeTask(D,m),get taskExecutions(){return q.taskExecutions},onDidStartTask:(m,w,C)=>ce(q.onDidStartTask)(m,w,C),onDidEndTask:(m,w,C)=>ce(q.onDidEndTask)(m,w,C),onDidStartTaskProcess:(m,w,C)=>ce(q.onDidStartTaskProcess)(m,w,C),onDidEndTaskProcess:(m,w,C)=>ce(q.onDidEndTaskProcess)(m,w,C)},Mw={createNotebookController(m,w,C,te,Ie){return ci.createNotebookController(D,m,w,C,te,At(D,"notebookMessaging")?Ie:void 0)},registerNotebookCellStatusBarItemProvider:(m,w)=>Ue.registerNotebookCellStatusBarItemProvider(D,m,w),createRendererMessaging(m){return _t.createRendererMessaging(D,m)},createNotebookControllerDetectionTask(m){return M(D,"notebookKernelSource"),ci.createNotebookControllerDetectionTask(D,m)},registerKernelSourceActionProvider(m,w){return M(D,"notebookKernelSource"),ci.registerKernelSourceActionProvider(D,m,w)},onDidChangeNotebookCellExecutionState(m,w,C){return M(D,"notebookCellExecutionState"),ce(ci.onDidChangeNotebookCellExecutionState)(m,w,C)}},x={t(...m){if(typeof m[0]=="string"){const w=m.shift(),C=!m||typeof m[0]!="object"?m:m[0];return re.getMessage(D.identifier.value,{message:w,args:C})}return re.getMessage(D.identifier.value,m[0])},get bundle(){return re.getBundle(D.identifier.value)},get uri(){return re.getBundleUri(D.identifier.value)}},P={_version:1,registerInteractiveEditorSessionProvider(m,w){return M(D,"interactive"),Ew.registerProvider(D,m,w)},registerInteractiveSessionProvider(m,w){return M(D,"interactive"),bc.registerChatProvider(D,m,w)},transferChatSession(m,w){return M(D,"interactive"),bc.transferChatSession(m,w)}},L={getRelatedInformation(m,w){return M(D,"aiRelatedInformation"),Vu.getRelatedInformation(D,m,w)},registerRelatedInformationProvider(m,w){return M(D,"aiRelatedInformation"),Vu.registerRelatedInformationProvider(D,m,w)},registerEmbeddingVectorProvider(m,w){return M(D,"aiRelatedInformation"),zu.registerEmbeddingVectorProvider(D,m,w)}},X={registerChatResponseProvider(m,w,C){return M(D,"chatProvider"),T.registerLanguageModel(D,m,w,C)},registerChatVariableResolver(m,w,C){return M(D,"chatVariableResolver"),wc.registerVariableResolver(D,m,w,C)},registerMappedEditsProvider(m,w){return M(D,"mappedEditsProvider"),De.registerMappedEditsProvider(D,m,w)},createChatParticipant(m,w){return M(D,"chatParticipant"),bo.createChatAgent(D,m,w)},createDynamicChatParticipant(m,w,C,te){return M(D,"chatParticipantAdditions"),bo.createDynamicChatAgent(D,m,w,C,te)}},V={get languageModels(){return M(D,"languageModels"),T.getLanguageModelIds()},onDidChangeLanguageModels:(m,w,C)=>(M(D,"languageModels"),T.onDidChangeProviders(m,w,C)),sendChatRequest(m,w,C,te){return M(D,"languageModels"),T.sendChatRequest(D,m,w,C,te)}},fe={registerSpeechProvider(m,w){return M(D,"speech"),_i.registerProvider(D.identifier,m,w)}};return{version:e.version,ai:L,authentication:Dw,commands:Iw,comments:qu,chat:X,debug:$w,env:Pw,extensions:Aw,interactive:P,l10n:x,languages:Rw,lm:V,notebooks:Mw,scm:Ow,speech:fe,tasks:Nw,tests:Tw,window:Lw,workspace:Kp,Breakpoint:sa,TerminalOutputAnchor:vm,ChatResultFeedbackKind:El,ChatVariableLevel:Rn,ChatCompletionItem:V7,CallHierarchyIncomingCall:ux,CallHierarchyItem:_m,CallHierarchyOutgoingCall:dx,CancellationError:sr,CancellationTokenSource:kt,CandidatePortSource:wg,CodeAction:ih,CodeActionKind:st,CodeActionTriggerKind:cl,CodeLens:nh,Color:ea,ColorInformation:lh,ColorPresentation:uh,ColorThemeKind:Er,CommentMode:Um,CommentState:Wm,CommentThreadCollapsibleState:_l,CommentThreadState:wl,CommentThreadApplicability:bl,CompletionItem:oh,CompletionItemKind:he,CompletionItemTag:ul,CompletionList:Ko,CompletionTriggerKind:Jo,ConfigurationTarget:na,CustomExecution:Rm,DebugAdapterExecutable:mh,DebugAdapterInlineImplementation:_h,DebugAdapterNamedPipeServer:vh,DebugAdapterServer:ml,DebugConfigurationProviderTriggerKind:fp,DebugConsoleMode:Sh,DebugVisualization:N7,DecorationRangeBehavior:ks,Diagnostic:Yd,DiagnosticRelatedInformation:nl,DiagnosticSeverity:Nt,DiagnosticTag:Ss,Disposable:Re,DocumentHighlight:eh,DocumentHighlightKind:rl,MultiDocumentHighlight:th,DocumentLink:ch,DocumentSymbol:al,EndOfLine:qi,EnvironmentVariableMutatorType:Go,EvaluatableExpression:wh,InlineValueText:bh,InlineValueVariableLookup:yh,InlineValueEvaluatableExpression:xh,InlineCompletionTriggerKind:vl,EventEmitter:A,ExtensionKind:Ls,ExtensionMode:ua,ExternalUriOpenerPriority:Jm,FileChangeType:oa,FileDecoration:zm,FileDecoration2:zm,FileSystemError:bt,FileType:vs,FilePermission:zo,FoldingRange:Hm,FoldingRangeKind:Tn,FunctionBreakpoint:Rs,InlineCompletionItem:Sm,InlineCompletionList:Em,Hover:Zd,IndentAction:d_,Location:yi,MarkdownString:Ri,OverviewRulerLane:vv,ParameterInformation:wm,PortAutoForwardAction:Xm,Position:Ee,ProcessExecution:ta,ProgressLocation:Ps,QuickInputButtons:yl,Range:ye,RelativePattern:ra,Selection:Pn,SelectionRange:ll,SemanticTokens:aa,SemanticTokensBuilder:Vm,SemanticTokensEdit:mx,SemanticTokensEdits:Ch,SemanticTokensLegend:Bm,ShellExecution:Ds,ShellQuoting:Am,SignatureHelp:ym,SignatureHelpTriggerKind:xm,SignatureInformation:bm,SnippetString:Cs,SourceBreakpoint:As,StandardTokenType:kr,StatusBarAlignment:Sr,SymbolInformation:ol,SymbolKind:Ke,SymbolTag:sl,Task:dh,TaskGroup:fl,TaskPanelKind:Tm,TaskRevealKind:Pm,TaskScope:Is,TerminalLink:D7,TerminalQuickFixTerminalCommand:P7,TerminalQuickFixOpener:I7,TerminalLocation:Im,TerminalProfile:T7,TerminalExitReason:Dm,TextDocumentSaveReason:Xo,TextEdit:xr,SnippetTextEdit:xs,TextEditorCursorStyle:gn,TextEditorLineNumbersStyle:Gi,TextEditorRevealType:ah,TextEditorSelectionChangeKind:Yo,SyntaxTokenType:Zo,TextDocumentChangeReason:hl,ThemeColor:gl,ThemeIcon:Kt,TreeItem:hh,TreeItemCheckboxState:dn,TreeItemCollapsibleState:Ts,TypeHierarchyItem:Ym,UIKind:kc,Uri:y,ViewColumn:dl,WorkspaceEdit:Cr,DocumentPasteTriggerKind:$m,DocumentDropEdit:Om,DocumentPasteEditKind:ia,DocumentPasteEdit:Nm,InlayHint:sh,InlayHintLabelPart:rh,InlayHintKind:Cm,RemoteAuthorityResolverError:un,ResolvedAuthority:E7,ManagedResolvedAuthority:Kd,SourceControlInputBoxValidationType:km,ExtensionRuntime:Ah,TimelineItem:qm,NotebookRange:An,NotebookCellKind:Os,NotebookCellExecutionState:la,NotebookCellData:kh,NotebookData:vx,NotebookRendererScript:wx,NotebookCellStatusBarAlignment:Ih,NotebookEditorRevealType:Ph,NotebookCellOutput:Dh,NotebookCellOutputItem:_x,NotebookCellStatusBarItem:M7,NotebookControllerAffinity:jm,NotebookControllerAffinity2:Th,NotebookEdit:Xd,NotebookKernelSourceAction:F7,NotebookVariablesRequestKind:Cl,PortAttributes:U7,LinkedEditingRanges:H7,TestResultState:Gm,TestRunRequest:Rh,TestMessage:Lh,TestTag:Sl,TestRunProfileKind:da,TextSearchCompleteMessageType:H1,DataTransfer:pl,DataTransferItem:fh,TestCoverageCount:Oh,FileCoverage:Qm,StatementCoverage:W7,BranchCoverage:B7,DeclarationCoverage:bx,FunctionCoverage:bx,WorkspaceTrustState:Km,LanguageStatusSeverity:Qo,QuickPickItemKind:xl,InputBoxValidationSeverity:ca,TabInputText:Zm,TabInputTextDiff:Nh,TabInputTextMerge:yx,TabInputCustom:e1,TabInputNotebook:t1,TabInputNotebookDiff:i1,TabInputWebview:xx,TabInputTerminal:Cx,TabInputInteractiveWindow:Sx,TabInputChat:Ex,TabInputTextMultiDiff:kx,TelemetryTrustedValue:lm,LogLevel:$e,EditSessionIdentityMatch:h_,InteractiveSessionVoteDirection:n1,ChatCopyKind:r1,InteractiveEditorResponseFeedbackKind:Dr,StackFrame:px,Thread:gx,RelatedInformationType:s1,SpeechToTextStatus:o1,PartialAcceptTriggerKind:Es,KeywordRecognitionStatus:a1,ChatResponseMarkdownPart:Mh,ChatResponseFileTreePart:Fh,ChatResponseAnchorPart:Hh,ChatResponseProgressPart:ha,ChatResponseReferencePart:Ir,ChatResponseCommandButtonPart:Uh,ChatRequestTurn:Dx,ChatResponseTurn:Ix,ChatLocation:$s,LanguageModelChatSystemMessage:Wh,LanguageModelChatUserMessage:Bh,LanguageModelChatAssistantMessage:Vh,LanguageModelSystemMessage:Wh,LanguageModelUserMessage:Bh,LanguageModelAssistantMessage:Vh,LanguageModelError:Ln,NewSymbolName:O7,NewSymbolNameTag:Fm,InlineEdit:z7,InlineEditTriggerKind:kl}}}var pp;let uw=class{constructor(e,t,i,n,s,o,a){this._apiFactory=e,this._extensionRegistry=t,this._instaService=i,this._extHostConfiguration=n,this._extHostExtensionService=s,this._initData=o,this._logService=a,this._factories=new Map,this._alternatives=[]}async install(){this._installInterceptor(),wi("code/extHost/willWaitForConfig");const e=await this._extHostConfiguration.getConfigProvider();wi("code/extHost/didWaitForConfig");const t=await this._extHostExtensionService.getExtensionPathIndex();this.register(new rT(this._apiFactory,t,this._extensionRegistry,e,this._logService)),this.register(this._instaService.createInstance(dw)),this._initData.remote.isRemote&&this.register(this._instaService.createInstance(hw,t,this._initData.environment.appUriScheme))}register(e){if("nodeModuleName"in e)if(Array.isArray(e.nodeModuleName))for(const t of e.nodeModuleName)this._factories.set(t,e);else this._factories.set(e.nodeModuleName,e);typeof e.alternativeModuleName=="function"&&this._alternatives.push(t=>e.alternativeModuleName(t))}};uw=H([$(2,vd),$(3,Nn),$(4,Mr),$(5,Wt),$(6,Je)],uw);let dw=(vc=class{constructor(e){if(e.environment.appRoot&&pp.aliased.size){const t=Ao(this.forceForwardSlashes(e.environment.appRoot.fsPath)),i="[a-z0-9_.-]",n=`@${i}+\\/${i}+|${i}+`,s="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.re=new RegExp(`^(${t}/${s}\\/)(${n})(.*)$`,"i")}}alternativeModuleName(e){if(!this.re)return;const t=this.re.exec(this.forceForwardSlashes(e));if(!t)return;const[,i,n,s]=t,o=pp.aliased.get(n);if(o!==void 0)return console.warn(`${n} as been renamed to ${o}, please update your imports`),i+o+s}forceForwardSlashes(e){return e.replace(/\\/g,"/")}},pp=vc,vc.aliased=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]]),vc);dw=pp=H([$(0,Wt)],dw);class rT{constructor(e,t,i,n,s){this._apiFactory=e,this._extensionPaths=t,this._extensionRegistry=i,this._configProvider=n,this._logService=s,this.nodeModuleName="vscode",this._extApiImpl=new br}load(e,t){const i=this._extensionPaths.findSubstr(t);if(i){let n=this._extApiImpl.get(i.identifier);return n||(n=this._apiFactory(i,this._extensionRegistry,this._configProvider),this._extApiImpl.set(i.identifier,n)),n}if(!this._defaultApiImpl){let n="";this._extensionPaths.forEach((s,o)=>n+=`	${o} -> ${s.identifier.value}
`),this._logService.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${n}`),this._defaultApiImpl=this._apiFactory(x7,this._extensionRegistry,this._configProvider)}return this._defaultApiImpl}}let hw=class{constructor(e,t,i){this._extensionPaths=e,this._appUriScheme=t,this.nodeModuleName=["open","opn"],this._mainThreadTelemetry=i.getProxy(G.MainThreadTelemetry);const n=i.getProxy(G.MainThreadWindow);this._impl=(s,o)=>{const a=y.parse(s);return o?this.callOriginal(s,o):a.scheme==="http"||a.scheme==="https"?n.$openUri(a,s,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this._appUriScheme?n.$openUri(a,s,{}):this.callOriginal(s,o)}}load(e,t,i){const n=this._extensionPaths.findSubstr(t);return n&&(this._extensionId=n.identifier.value,this.sendShimmingTelemetry()),this._original=i(e),this._impl}callOriginal(e,t){return this.sendNoForwardTelemetry(),this._original(e,t)}sendShimmingTelemetry(){this._extensionId&&this._mainThreadTelemetry.$publicLog2("shimming.open",{extension:this._extensionId})}sendNoForwardTelemetry(){this._extensionId&&this._mainThreadTelemetry.$publicLog2("shimming.open.call.noForward",{extension:this._extensionId})}};hw=H([$(2,We)],hw);let fw=class{constructor(e,t){this._mainThreadConsole=e.getProxy(G.MainThreadConsole),this._includeStack=t.consoleForward.includeStack,this._logNative=t.consoleForward.logNative,this._wrapConsoleMethod("info","log"),this._wrapConsoleMethod("log","log"),this._wrapConsoleMethod("warn","warn"),this._wrapConsoleMethod("debug","debug"),this._wrapConsoleMethod("error","error")}_wrapConsoleMethod(e,t){const i=this,n=console[e];Object.defineProperty(console,e,{set:()=>{},get:()=>function(){i._handleConsoleCall(e,t,n,arguments)}})}_handleConsoleCall(e,t,i,n){this._mainThreadConsole.$logExtensionHostMessage({type:"__$console",severity:t,arguments:oT(n,this._includeStack)}),this._logNative&&this._nativeConsoleLogMessage(e,i,n)}};fw=H([$(0,We),$(1,Wt)],fw);const sT=1e5;function oT(r,e){const t=[];if(r.length)for(let i=0;i<r.length;i++){let n=r[i];if(typeof n>"u")n="undefined";else if(n instanceof Error){const s=n;s.stack?n=s.stack:n=s.toString()}t.push(n)}if(e){const i=new Error().stack;i&&t.push({__$stack:i.split(`
`).slice(3).join(`
`)})}try{const i=pk(t);return i.length>sT?"Output omitted for a large object that exceeds the limits":i}catch(i){return`Output omitted for an object that cannot be inspected ('${i.toString()}')`}}let pw=class extends fw{constructor(e,t){super(e,t)}_nativeConsoleLogMessage(e,t,i){t.apply(console,i)}};pw=H([$(0,We),$(1,Wt)],pw);class aT extends uw{_installInterceptor(){}getModule(e,t){for(const i of this._alternatives){const n=i(e);if(n){e=n;break}}if(this._factories.has(e))return this._factories.get(e).load(e,t,()=>{throw new Error("CANNOT LOAD MODULE from here.")})}}class cT extends Iv{constructor(){super(...arguments),this.extensionRuntime=Ah.Webworker}async _beforeAlmostReadyToRunExtensions(){Dc&&this._instaService.createInstance(pw),this._apiFactory=this._instaService.invokeFunction(nT),this._fakeModules=this._instaService.createInstance(aT,this._apiFactory,{mine:this._myRegistry,all:this._globalRegistry}),await this._fakeModules.install(),performance.mark("code/extHost/didInitAPI"),await this._waitForDebuggerAttachment()}_getEntryPoint(e){return e.browser}async _loadCommonJSModule(e,t,i){t=t.with({path:lT(t.path,".js")});const n=e==null?void 0:e.identifier.value;n&&performance.mark(`code/extHost/willFetchExtensionCode/${n}`);const s=y.revive(await this._mainThreadExtensionsProxy.$asBrowserUri(t)),o=await fetch(s.toString(!0));if(n&&performance.mark(`code/extHost/didFetchExtensionCode/${n}`),o.status!==200)throw new Error(o.statusText);const a=await o.text(),c=`${t.toString(!0)}#vscode-extension`,l=`${a}
//# sourceURL=${c}`;let u;try{u=new Function("module","exports","require",l)}catch(b){throw console.error(n?`Loading code for extension ${n} failed: ${b.message}`:`Loading code failed: ${b.message}`),console.error(`${t.toString(!0)}${typeof b.line=="number"?` line ${b.line}`:""}${typeof b.column=="number"?` column ${b.column}`:""}`),console.error(b),b}e&&await this._extHostLocalizationService.initializeLocalizedMessages(e);const d={},h={exports:d},g=b=>{const _=this._fakeModules.getModule(b,t);if(_===void 0)throw new Error(`Cannot load module '${b}'`);return _};try{return i.codeLoadingStart(),n&&performance.mark(`code/extHost/willLoadExtensionCode/${n}`),u(h,d,g),h.exports!==d?h.exports:d}finally{n&&performance.mark(`code/extHost/didLoadExtensionCode/${n}`),i.codeLoadingStop()}}async $setRemoteEnvironment(e){}async _waitForDebuggerAttachment(e=5e3){if(!this._initData.environment.isExtensionDevelopmentDebug)return;const t=Date.now()+e;for(;Date.now()<t&&!("__jsDebugIsReady"in globalThis);)await mr(10)}}function lT(r,e){return r.endsWith(e)?r:r+e}tt(Mr,cT,0),tt(Z1,ev,0);const dS=self.close.bind(self);self.close=()=>console.trace("'close' has been blocked");const hS=postMessage.bind(self);self.postMessage=()=>console.trace("'postMessage' has been blocked");function fS(r){return/^(file|extension-file|vscode-remote):/i.test(r)}const pS=fetch.bind(self);function uT(r){self.fetch=async function(e,t){return e instanceof Request||fS(String(e))&&(e=(await r(y.parse(String(e)))).toString(!0)),pS(e,t)},self.XMLHttpRequest=class extends XMLHttpRequest{open(e,t,i,n,s){(async()=>(fS(t.toString())&&(t=(await r(y.parse(t.toString()))).toString(!0)),super.open(e,t,i??!0,n,s)))()}}}self.importScripts=()=>{throw new Error("'importScripts' has been blocked")},self.addEventListener=()=>console.trace("'addEventListener' has been blocked"),self.AMDLoader=void 0,self.NLSLoaderPlugin=void 0,self.define=void 0,self.require=void 0,self.webkitRequestFileSystem=void 0,self.webkitRequestFileSystemSync=void 0,self.webkitResolveLocalFileSystemSyncURL=void 0,self.webkitResolveLocalFileSystemURL=void 0;function dT(r,e){if(self.Worker){const t=self.Worker;Worker=function(i,n){if(/^vscode-remote:/i.test(i.toString()))throw new Error("Creating workers from remote extensions is currently not supported.");async function s(a){const[c,l]=await Promise.all([r(a).then(g=>g.toString(!0)),e().then(g=>Object.fromEntries(g.map(([b,_])=>[b.toString(!0),_.toString(!0)])))]),d=`(${(function(b,_){function v(S){return typeof S=="string"||S instanceof URL?(S=String(S).replace(/^file:\/\//i,"vscode-file://vscode-app"),_[S]??S):S}const E=fetch.bind(self);self.fetch=function(S,O){return S instanceof Request?E(S,O):E(v(S),O)},self.XMLHttpRequest=class extends XMLHttpRequest{constructor(){super(...arguments),this.notFound=!1}open(S,O,T,z,ae){const ee=v(O);return this.notFound=ee.startsWith("extension-file:"),super.open(S,ee,T??!0,z,ae)}send(S){this.notFound||super.send(S)}get status(){return this.notFound?404:super.status}};const k=importScripts.bind(self);self.importScripts=(...S)=>{k(...S.map(v))},self.importExt=S=>new Function("url","return import(url)")(v(S)),k(b)}).toString()}('${c}', ${JSON.stringify(l)}))`,h=new Blob([d],{type:"application/javascript"});return URL.createObjectURL(h)}n=n||{},n.name=`${name} -> ${n.name||hi(i.toString())}`;class o{constructor(c,l){this._onmessage=null,this._onmessageerror=null,this._onerror=null,this.workerPromise=s(y.parse(c instanceof URL?c.toString():c)).then(u=>new t(u,l))}set onmessage(c){this._onmessage=c,this.workerPromise.then(l=>{l.onmessage=c},console.error)}get onmessage(){return this._onmessage}set onmessageerror(c){this._onmessageerror=c,this.workerPromise.then(l=>{l.onmessageerror=c},console.error)}get onmessageerror(){return this._onmessageerror}set onerror(c){this._onerror=c,this.workerPromise.then(l=>{l.onerror=c},console.error)}get onerror(){return this._onerror}postMessage(c,l){this.workerPromise.then(u=>{u.postMessage(c,l)},console.error)}terminate(){this.workerPromise.then(c=>{c.terminate()},console.error)}addEventListener(c,l,u){this.workerPromise.then(d=>{d.addEventListener(c,l,u)},console.error)}removeEventListener(c,l,u){this.workerPromise.then(d=>{d.removeEventListener(c,l,u)},console.error)}dispatchEvent(c){return this.workerPromise.then(l=>{l.dispatchEvent(c)},console.error),!1}}return new o(i,n)}}else self.Worker=class extends _D{constructor(t,i){super(hS,t,{name:hi(t.toString()),...i})}}}const hT=new class{constructor(){this.pid=void 0}exit(r){dS()}};class fT{constructor(){const e=new MessageChannel,t=new A;let i=!1;hS(e.port2,[e.port2]),e.port1.onmessage=n=>{const{data:s}=n;if(!(s instanceof ArrayBuffer)){console.warn("UNKNOWN data received",s);return}const o=ve.wrap(new Uint8Array(s,0,s.byteLength));if(t4(o,2)){i=!0,gS("received terminate message from renderer");return}t.fire(o)},this.protocol={onMessage:t.event,send:n=>{if(!i){const s=n.buffer.buffer.slice(n.buffer.byteOffset,n.buffer.byteOffset+n.buffer.byteLength);e.port1.postMessage(s,[s])}}}}}function pT(r){return new Promise(e=>{const t=r.onMessage(i=>{t.dispose();const n=JSON.parse(i.toString());r.send(sb(0)),e({protocol:r,initData:n})});r.send(sb(1))})}let gS=r=>dS();function gT(r){return!!r&&typeof r=="object"&&r.type==="vscode.init"&&r.data instanceof Map}function mT(){wi("code/extHost/willConnectToRenderer");const r=new fT;return{onmessage(e){gT(e)&&pT(r.protocol).then(t=>{wi("code/extHost/didWaitForInitData");const i=new Tv(t.protocol,t.initData,hT,null,e.data);uT(n=>i.asBrowserUri(n)),dT(n=>i.asBrowserUri(n),()=>i.getAllStaticBrowserUris()),gS=n=>i.terminate(n)})}}}const vT=mT();globalThis.onmessage=r=>vT.onmessage(r.data)})();
